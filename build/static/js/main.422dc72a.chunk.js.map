{"version":3,"sources":["components/Editor.tsx","reportWebVitals.ts","index.tsx"],"names":["HtmlElementId","HtmlClassName","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","printUrl","text","JSON","stringify","InitState","keyMap","Map","Editor","props","editorKit","configureEditorKit","delegate","EditorKitDelegate","setEditorRawText","setState","clearUndoHistory","getElementsBySelector","EditorKit","mode","supportsFilesafe","handleInputChange","event","value","target","saveText","handleChange","state","reason","startsWith","document","console","log","saveNote","onEditorValueChanged","error","onBlur","e","onFocus","onKeyDown","set","key","get","preventDefault","onKeyUp","delete","getDocument","parse","this","className","snComponent","id","tabIndex","showUI","showMenu","showPages","showStyles","showTools","showZoom","darkMode","onChange","React","Component","ReactDOM","render","StrictMode","getElementById"],"mappings":"6bAKYA,EAKAC,E,yCCIGC,G,MAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,Q,wEDJFH,K,2BAAAA,E,qBAAAA,M,cAKAC,K,2BAAAA,E,uCAAAA,M,KAUZ,IAAMU,EAAe,CACnBC,UAAU,EACVC,KAAMC,KAAKC,UAAUC,MAGnBC,EAAS,IAAIC,IAEIC,E,kDAGnB,WAAYC,GAAyB,IAAD,8BAClC,cAAMA,IAHRC,eAEoC,IAMpCC,mBAAqB,WACnB,IAAIC,EAAW,IAAIC,oBAAkB,CAEnCC,iBAAkB,SAACZ,GACjB,EAAKa,SAAL,2BACKf,GADL,IAEEE,WAGJc,iBAAkB,aAClBC,sBAAuB,iBAAM,MAG/B,EAAKP,UAAY,IAAIQ,YAAU,CAC7BN,SAAUA,EACVO,KAAM,YACNC,kBAAkB,KAtBc,EA0BpCC,kBAAoB,SAACC,GACnB,IACMC,EADSD,EAAME,OACAD,MACrB,EAAKE,SAASF,IA7BoB,EAgCpCG,aAAe,SAACC,EAAkBC,IAEhC,OAAIA,QAAJ,IAAIA,OAAJ,EAAIA,EAAQC,WAAW,uBACrB,EAAKJ,SAAStB,KAAKC,UAAUuB,EAAMG,WACnCC,QAAQC,IAAIJ,KApCoB,EAwCpCH,SAAW,SAACvB,GACV,EAAK+B,SAAS/B,IAzCoB,EAiDpC+B,SAAW,SAAC/B,GAIV,IACE,EAAKQ,UAAUwB,qBAAqBhC,GACpC,MAAOiC,GACPJ,QAAQC,IAAI,qBAAsBG,KAxDF,EA4DpCC,OAAS,SAACC,KA5D0B,EA8DpCC,QAAU,SAACD,KA9DyB,EAgEpCE,UAAY,SAACF,GACX/B,EAAOkC,IAAIH,EAAEI,KAAK,GAEdnC,EAAOoC,IAAI,YAAcpC,EAAOoC,IAAI,MACtCL,EAAEM,kBApE8B,EAwEpCC,QAAU,SAACP,GACT/B,EAAOuC,OAAOR,EAAEI,MAzEkB,EA4EpCK,YAAc,SAAC5C,GAGb,GAFA6B,QAAQC,IAAI,SAAU9B,IAEjBA,EACH,OAAOG,IAGT,IAAIyB,EAAuBzB,IAC3B,IACEyB,EAAW3B,KAAK4C,MAAM7C,GACtB,SACA4B,EAAWzB,IAGb,OAAOyB,GAxFP,EAAKnB,qBACL,EAAKgB,MAAQ3B,EAHqB,E,qDA6F1B,IACAE,EAAS8C,KAAKrB,MAAdzB,KACR,OACE,qBACE+C,UACE5D,EAAc6D,aACbF,KAAKrB,MAAM1B,SAAW,aAAe,IACtC,UAEFkD,GAAI9D,EAAc6D,YAClBE,SAAU,EAPZ,SAuBE,cAAC,IAAD,CACEC,QAAQ,EACRC,UAAU,EACVC,WAAW,EACXC,YAAY,EACZC,WAAW,EACXC,UAAU,EACVC,UAAU,EACVC,SAAUZ,KAAKtB,aACfI,SAAUkB,KAAKF,YAAY5C,W,GAnID2D,IAAMC,W,MEpB1CC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFnC,SAASoC,eAAe,SAM1B3E,M","file":"static/js/main.422dc72a.chunk.js","sourcesContent":["import React from 'react';\nimport { EditorKit, EditorKitDelegate } from 'sn-editor-kit';\nimport { Tldraw, TldrawApp, TDDocument } from '@tldraw/tldraw';\nimport * as InitState from './initial-state.json';\n\nexport enum HtmlElementId {\n  snComponent = 'sn-component',\n  textarea = 'textarea',\n}\n\nexport enum HtmlClassName {\n  snComponent = 'sn-component',\n  textarea = 'sk-input contrast textarea',\n}\n\nexport interface EditorInterface {\n  printUrl: boolean;\n  text: string;\n}\n\nconst initialState = {\n  printUrl: false,\n  text: JSON.stringify(InitState.document),\n};\n\nlet keyMap = new Map();\n\nexport default class Editor extends React.Component<{}, EditorInterface> {\n  editorKit: any;\n\n  constructor(props: EditorInterface) {\n    super(props);\n    this.configureEditorKit();\n    this.state = initialState;\n  }\n\n  configureEditorKit = () => {\n    let delegate = new EditorKitDelegate({\n      /** This loads every time a different note is loaded */\n      setEditorRawText: (text: string) => {\n        this.setState({\n          ...initialState,\n          text,\n        });\n      },\n      clearUndoHistory: () => {},\n      getElementsBySelector: () => [],\n    });\n\n    this.editorKit = new EditorKit({\n      delegate: delegate,\n      mode: 'plaintext',\n      supportsFilesafe: false,\n    });\n  };\n\n  handleInputChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const target = event.target;\n    const value = target.value;\n    this.saveText(value);\n  };\n\n  handleChange = (state: TldrawApp, reason: string | undefined): void => {\n    // console.log(state, reason);\n    if (reason?.startsWith('session:complete')) {\n      this.saveText(JSON.stringify(state.document));\n      console.log(reason);\n    }\n  };\n\n  saveText = (text: string) => {\n    this.saveNote(text);\n\n    // State managed within TLDRAW App, only need to load state on start up\n    // this.setState({\n    //   text: text,\n    // });\n  };\n\n  saveNote = (text: string) => {\n    /** This will work in an SN context, but breaks the standalone editor,\n     * so we need to catch the error\n     */\n    try {\n      this.editorKit.onEditorValueChanged(text);\n    } catch (error) {\n      console.log('Error saving note:', error);\n    }\n  };\n\n  onBlur = (e: React.FocusEvent) => {};\n\n  onFocus = (e: React.FocusEvent) => {};\n\n  onKeyDown = (e: React.KeyboardEvent | KeyboardEvent) => {\n    keyMap.set(e.key, true);\n    // Do nothing if 'Control' and 's' are pressed\n    if (keyMap.get('Control') && keyMap.get('s')) {\n      e.preventDefault();\n    }\n  };\n\n  onKeyUp = (e: React.KeyboardEvent | KeyboardEvent) => {\n    keyMap.delete(e.key);\n  };\n\n  getDocument = (text: string): TDDocument => {\n    console.log('Text: ', text);\n    \n    if (!text) {\n      return InitState.document;\n    }\n    \n    let document: TDDocument = InitState.document;\n    try {\n      document = JSON.parse(text);\n    } catch {\n      document = InitState.document;\n    }\n    \n    return document as TDDocument;\n  };\n\n  render() {\n    const { text } = this.state;\n    return (\n      <div\n        className={\n          HtmlElementId.snComponent +\n          (this.state.printUrl ? ' print-url' : '') +\n          ' tldraw'\n        }\n        id={HtmlElementId.snComponent}\n        tabIndex={0}\n      >\n        {/* <textarea\n          id={HtmlElementId.textarea}\n          name=\"text\"\n          className={'sk-input contrast textarea'}\n          placeholder=\"Type here. Text in this textarea is automatically saved in Standard Notes\"\n          rows={10}\n          spellCheck=\"true\"\n          value={text}\n          onBlur={this.onBlur}\n          onChange={this.handleInputChange}\n          onFocus={this.onFocus}\n          onKeyDown={this.onKeyDown}\n          onKeyUp={this.onKeyUp}\n        /> */}\n        <Tldraw\n          showUI={true}\n          showMenu={true}\n          showPages={false}\n          showStyles={true}\n          showTools={true}\n          showZoom={true}\n          darkMode={true}\n          onChange={this.handleChange}\n          document={this.getDocument(text)}\n        />\n      </div>\n    );\n  }\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport reportWebVitals from './reportWebVitals';\n\nimport Editor from './components/Editor';\nimport './stylesheets/main.scss';\nReactDOM.render(\n  <React.StrictMode>\n    <Editor />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n// console.log\n"],"sourceRoot":""}