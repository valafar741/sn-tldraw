/*! For license information please see 2.36a80b67.chunk.js.LICENSE.txt */
(this["webpackJsonpsn-tldraw"]=this["webpackJsonpsn-tldraw"]||[]).push([[2],[function(e,t,n){"use strict";e.exports=n(42)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));var r=n(6),a=n(9),i=n(16),o=function(){function e(){Object(a.a)(this,e)}return Object(i.a)(e,null,[{key:"clamp",value:function(e,t,n){return Math.max(t,"undefined"!==typeof n?Math.min(e,n):e)}},{key:"clampV",value:function(t,n,r){return t.map((function(t){return r?e.clamp(t,n,r):e.clamp(t,n)}))}},{key:"cross",value:function(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1])}},{key:"snap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return[Math.round(e[0]/t)*t,Math.round(e[1]/t)*t]}}]),e}(),s=o;s.neg=function(e){return[-e[0],-e[1]]},s.add=function(e,t){return[e[0]+t[0],e[1]+t[1]]},s.addScalar=function(e,t){return[e[0]+t,e[1]+t]},s.sub=function(e,t){return[e[0]-t[0],e[1]-t[1]]},s.subScalar=function(e,t){return[e[0]-t,e[1]-t]},s.vec=function(e,t){return[t[0]-e[0],t[1]-e[1]]},s.mul=function(e,t){return[e[0]*t,e[1]*t]},s.mulV=function(e,t){return[e[0]*t[0],e[1]*t[1]]},s.div=function(e,t){return[e[0]/t,e[1]/t]},s.divV=function(e,t){return[e[0]/t[0],e[1]/t[1]]},s.per=function(e){return[e[1],-e[0]]},s.dpr=function(e,t){return e[0]*t[0]+e[1]*t[1]},s.cpr=function(e,t){return e[0]*t[1]-t[0]*e[1]},s.len2=function(e){return e[0]*e[0]+e[1]*e[1]},s.len=function(e){return Math.hypot(e[0],e[1])},s.pry=function(e,t){return o.dpr(e,t)/o.len(t)},s.uni=function(e){return o.div(e,o.len(e))},s.normalize=function(e){return o.uni(e)},s.tangent=function(e,t){return o.uni(o.sub(e,t))},s.dist2=function(e,t){return o.len2(o.sub(e,t))},s.dist=function(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])},s.fastDist=function(e,t){var n=[t[0]-e[0],t[1]-e[1]],r=[Math.abs(n[0]),Math.abs(n[1])],a=1/Math.max(r[0],r[1]);return[n[0]*(a*=1.29289-(r[0]+r[1])*a*.29289),n[1]*a]},s.ang=function(e,t){return Math.atan2(o.cpr(e,t),o.dpr(e,t))},s.angle=function(e,t){return Math.atan2(t[1]-e[1],t[0]-e[0])},s.med=function(e,t){return o.mul(o.add(e,t),.5)},s.rot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[e[0]*Math.cos(t)-e[1]*Math.sin(t),e[0]*Math.sin(t)+e[1]*Math.cos(t)]},s.rotWith=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===n)return e;var r=Math.sin(n),a=Math.cos(n),i=e[0]-t[0],o=e[1]-t[1],s=i*a-o*r,c=i*r+o*a;return[s+t[0],c+t[1]]},s.isEqual=function(e,t){return e[0]===t[0]&&e[1]===t[1]},s.lrp=function(e,t,n){return o.add(e,o.mul(o.sub(t,e),n))},s.int=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=(o.clamp(n,r)-n)/(r-n);return o.add(o.mul(e,1-i),o.mul(t,a))},s.ang3=function(e,t,n){var r=o.vec(t,e),a=o.vec(t,n);return o.ang(r,a)},s.abs=function(e){return[Math.abs(e[0]),Math.abs(e[1])]},s.rescale=function(e,t){var n=o.len(e);return[t*e[0]/n,t*e[1]/n]},s.isLeft=function(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1])},s.clockwise=function(e,t,n){return o.isLeft(e,t,n)>0},s.toFixed=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e.map((function(e){return+e.toFixed(t)}))},s.nearestPointOnLineThroughPoint=function(e,t,n){return o.add(e,o.mul(t,o.pry(o.sub(n,e),t)))},s.distanceToLineThroughPoint=function(e,t,n){return o.dist(n,o.nearestPointOnLineThroughPoint(e,t,n))},s.nearestPointOnLineSegment=function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=o.uni(o.sub(t,e)),i=o.add(e,o.mul(a,o.pry(o.sub(n,e),a)));if(r){if(i[0]<Math.min(e[0],t[0]))return e[0]<t[0]?e:t;if(i[0]>Math.max(e[0],t[0]))return e[0]>t[0]?e:t;if(i[1]<Math.min(e[1],t[1]))return e[1]<t[1]?e:t;if(i[1]>Math.max(e[1],t[1]))return e[1]>t[1]?e:t}return i},s.distanceToLineSegment=function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return o.dist(n,o.nearestPointOnLineSegment(e,t,n,r))},s.nudge=function(e,t,n){return o.isEqual(e,t)?e:o.add(e,o.mul(o.uni(o.sub(t,e)),n))},s.nudgeAtAngle=function(e,t,n){return[Math.cos(t)*n+e[0],Math.sin(t)*n+e[1]]},s.toPrecision=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return[+e[0].toPrecision(t),+e[1].toPrecision(t)]},s.pointsBetween=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;return Array.from(Array(n)).map((function(a,i){var s=i/(n-1),c=Math.min(1,.5+Math.abs(.5-s));return[].concat(Object(r.a)(o.lrp(e,t,s)),[c])}))},s.slope=function(e,t){return e[0]===t[0]?NaN:(e[1]-t[1])/(e[0]-t[0])},s.max=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return[Math.max.apply(Math,Object(r.a)(t.map((function(e){return e[0]})))),Math.max.apply(Math,Object(r.a)(t.map((function(e){return e[1]}))))]},s.min=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return[Math.max.apply(Math,Object(r.a)(t.map((function(e){return e[0]})))),Math.max.apply(Math,Object(r.a)(t.map((function(e){return e[1]}))))]};var c=s},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return Ha})),n.d(t,"b",(function(){return La})),n.d(t,"c",(function(){return va})),n.d(t,"d",(function(){return k})),n.d(t,"e",(function(){return za})),n.d(t,"f",(function(){return N}));var r,a,i=n(34),o=n(2),s=n(4),c=n(9),u=n(16),l=n(6),d=n(10),f=n(11),p=n(0),h=n(35),v=n(1),g=n(15);function m(){var e=Object(i.a)(["\n  @font-face {\n    font-family: 'Recursive';\n    font-style: normal;\n    font-weight: 500;\n    font-display: swap;\n    src: url(https://fonts.gstatic.com/s/recursive/v23/8vI-7wMr0mhh-RQChyHEH06TlXhq_gukbYrFMk1QuAIcyEwG_X-dpEfaE5YaERmK-CImKsvxvU-MXGX2fSqasNfUlTGZnI14ZeY.woff2)\n      format('woff2');\n    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC,\n      U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;\n  }\n\n  @font-face {\n    font-family: 'Recursive';\n    font-style: normal;\n    font-weight: 700;\n    font-display: swap;\n    src: url(https://fonts.gstatic.com/s/recursive/v23/8vI-7wMr0mhh-RQChyHEH06TlXhq_gukbYrFMk1QuAIcyEwG_X-dpEfaE5YaERmK-CImKsvxvU-MXGX2fSqasNfUlTGZnI14ZeY.woff2)\n      format('woff2');\n    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC,\n      U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;\n  }\n\n  @font-face {\n    font-family: 'Recursive Mono';\n    font-style: normal;\n    font-weight: 420;\n    font-display: swap;\n    src: url(https://fonts.gstatic.com/s/recursive/v23/8vI-7wMr0mhh-RQChyHEH06TlXhq_gukbYrFMk1QuAIcyEwG_X-dpEfaE5YaERmK-CImqvTxvU-MXGX2fSqasNfUlTGZnI14ZeY.woff2)\n      format('woff2');\n    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC,\n      U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;\n  }\n\n  .tl-container {\n    --tl-zoom: 1;\n    --tl-scale: calc(1 / var(--tl-zoom));\n    --tl-padding: calc(64px * max(1, var(--tl-scale)));\n    --tl-performance-all: auto;\n    --tl-performance-selected: auto;\n    position: relative;\n    top: 0px;\n    left: 0px;\n    width: 100%;\n    height: 100%;\n    max-width: 100%;\n    max-height: 100%;\n    box-sizing: border-box;\n    padding: 0px;\n    margin: 0px;\n    z-index: 100;\n    overflow: hidden;\n    touch-action: none;\n    overscroll-behavior: none;\n    background-color: var(--tl-background);\n  }\n\n  .tl-container * {\n    box-sizing: border-box;\n  }\n\n  .tl-overlay {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    touch-action: none;\n    pointer-events: none;\n  }\n\n  .tl-grid {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    touch-action: none;\n    pointer-events: none;\n    user-select: none;\n  }\n\n  .tl-snap-line {\n    stroke: var(--tl-accent);\n    stroke-width: calc(1px * var(--tl-scale));\n  }\n\n  .tl-snap-point {\n    stroke: var(--tl-accent);\n    stroke-width: calc(1px * var(--tl-scale));\n  }\n\n  .tl-canvas {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    touch-action: none;\n    pointer-events: all;\n    overflow: clip;\n  }\n\n  .tl-layer {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    height: 0px;\n    width: 0px;\n    contain: layout style size;\n  }\n\n  .tl-absolute {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    transform-origin: center center;\n    contain: layout style size;\n  }\n\n  .tl-positioned {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    transform-origin: center center;\n    pointer-events: none;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    contain: layout style size;\n    will-change: var(--tl-performance-all);\n  }\n\n  .tl-positioned-svg {\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    contain: layout style size;\n  }\n\n  .tl-positioned-div {\n    position: relative;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    padding: var(--tl-padding);\n    overflow: hidden;\n    contain: layout style size;\n  }\n\n  .tl-positioned-selected {\n    will-change: var(--tl-performance-selected);\n  }\n\n  .tl-inner-div {\n    position: relative;\n    width: 100%;\n    height: 100%;\n  }\n\n  .tl-stroke-hitarea {\n    fill: none;\n    stroke: transparent;\n    stroke-width: calc(24px * var(--tl-scale));\n    pointer-events: stroke;\n    stroke-linecap: round;\n    stroke-linejoin: round;\n  }\n\n  .tl-fill-hitarea {\n    fill: transparent;\n    stroke: transparent;\n    stroke-width: calc(24px * var(--tl-scale));\n    pointer-events: all;\n    stroke-linecap: round;\n    stroke-linejoin: round;\n  }\n\n  .tl-counter-scaled {\n    transform: scale(var(--tl-scale));\n  }\n\n  .tl-dashed {\n    stroke-dasharray: calc(2px * var(--tl-scale)), calc(2px * var(--tl-scale));\n  }\n\n  .tl-transparent {\n    fill: transparent;\n    stroke: transparent;\n  }\n\n  .tl-cursor-ns {\n    cursor: ns-resize;\n  }\n\n  .tl-cursor-ew {\n    cursor: ew-resize;\n  }\n\n  .tl-cursor-nesw {\n    cursor: nesw-resize;\n  }\n\n  .tl-cursor-nwse {\n    cursor: nwse-resize;\n  }\n\n  .tl-corner-handle {\n    stroke: var(--tl-selectStroke);\n    fill: var(--tl-background);\n    stroke-width: calc(1.5px * var(--tl-scale));\n  }\n\n  .tl-rotate-handle {\n    stroke: var(--tl-selectStroke);\n    fill: var(--tl-background);\n    stroke-width: calc(1.5px * var(--tl-scale));\n    cursor: grab;\n  }\n\n  .tl-binding {\n    fill: var(--tl-selectFill);\n    stroke: var(--tl-selectStroke);\n    stroke-width: calc(1px * var(--tl-scale));\n    pointer-events: none;\n  }\n\n  .tl-user {\n    left: calc(-15px * var(--tl-scale));\n    top: calc(-15px * var(--tl-scale));\n    height: calc(35px * var(--tl-scale));\n    width: calc(35px * var(--tl-scale));\n    transform: scale(var(--tl-scale));\n    pointer-events: none;\n    will-change: transform;\n  }\n\n  .tl-indicator {\n    fill: transparent;\n    stroke-width: calc(1.5px * var(--tl-scale));\n    pointer-events: none;\n  }\n\n  .tl-user-indicator-bounds {\n    border-style: solid;\n    border-width: calc(1px * var(--tl-scale));\n  }\n\n  .tl-hovered {\n    stroke: var(--tl-selectStroke);\n  }\n\n  .tl-selected {\n    stroke: var(--tl-selectStroke);\n  }\n\n  .tl-editing {\n    stroke-width: calc(2.5px * min(5, var(--tl-scale)));\n  }\n\n  .tl-performance {\n    will-change: transform, contents;\n  }\n\n  .tl-clone-target {\n    pointer-events: all;\n  }\n\n  .tl-clone-target:hover .tl-clone-button {\n    opacity: 1;\n  }\n\n  .tl-clone-button-target {\n    cursor: pointer;\n    pointer-events: all;\n  }\n\n  .tl-clone-button-target:hover .tl-clone-button {\n    fill: var(--tl-selectStroke);\n  }\n\n  .tl-clone-button {\n    opacity: 0;\n    r: calc(8px * var(--tl-scale));\n    stroke-width: calc(1.5px * var(--tl-scale));\n    stroke: var(--tl-selectStroke);\n    fill: var(--tl-background);\n  }\n\n  .tl-bounds {\n    pointer-events: none;\n    contain: layout style size;\n  }\n\n  .tl-bounds-bg {\n    stroke: none;\n    fill: var(--tl-selectFill);\n    pointer-events: all;\n    contain: layout style size;\n  }\n\n  .tl-bounds-center {\n    fill: transparent;\n    stroke: var(--tl-selectStroke);\n    stroke-width: calc(1.5px * var(--tl-scale));\n  }\n\n  .tl-brush {\n    fill: var(--tl-brushFill);\n    stroke: var(--tl-brushStroke);\n    stroke-width: calc(1px * var(--tl-scale));\n    pointer-events: none;\n    contain: layout style size;\n  }\n\n  .tl-dot {\n    fill: var(--tl-background);\n    stroke: var(--tl-foreground);\n    stroke-width: 2px;\n  }\n\n  .tl-handle {\n    pointer-events: all;\n    cursor: grab;\n  }\n\n  .tl-handle:hover .tl-handle-bg {\n    fill: var(--tl-selectFill);\n  }\n\n  .tl-handle:hover .tl-handle-bg > * {\n    stroke: var(--tl-selectFill);\n  }\n\n  .tl-handle:active .tl-handle-bg {\n    cursor: grabbing;\n    fill: var(--tl-selectFill);\n  }\n\n  .tl-handle:active .tl-handle-bg > * {\n    stroke: var(--tl-selectFill);\n  }\n\n  .tl-handle {\n    fill: var(--tl-background);\n    stroke: var(--tl-selectStroke);\n    stroke-width: 1.5px;\n  }\n\n  .tl-handle-bg {\n    fill: transparent;\n    stroke: none;\n    pointer-events: all;\n    r: calc(16px / max(1, var(--tl-zoom)));\n  }\n\n  .tl-binding-indicator {\n    fill: transparent;\n    stroke: var(--tl-binding);\n  }\n\n  .tl-centered-g {\n    transform: translate(var(--tl-padding), var(--tl-padding));\n  }\n\n  .tl-current-parent > *[data-shy='true'] {\n    opacity: 1;\n  }\n\n  .tl-binding {\n    fill: none;\n    stroke: var(--tl-selectStroke);\n    stroke-width: calc(2px * var(--tl-scale));\n  }\n\n  .tl-grid-dot {\n    fill: var(--tl-grid);\n  }\n"]);return m=function(){return e},e}var b,y,w,O,k,S,x,j,_=Object.defineProperty,C=Object.defineProperties,E=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,A=function(e,t,n){return t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},T=function(e,t){for(var n in t||(t={}))P.call(t,n)&&A(e,n,t[n]);if(I){var r,a=Object(d.a)(I(t));try{for(a.s();!(r=a.n()).done;){n=r.value;M.call(t,n)&&A(e,n,t[n])}}catch(i){a.e(i)}finally{a.f()}}return e},D=function(e,t){return C(e,E(t))},R=function(e,t){var n={};for(var r in e)P.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&I){var a,i=Object(d.a)(I(e));try{for(i.s();!(a=i.n()).done;){r=a.value;t.indexOf(r)<0&&M.call(e,r)&&(n[r]=e[r])}}catch(o){i.e(o)}finally{i.f()}}return n},B=function(e,t,n){return A(e,"symbol"!==typeof t?t+"":t,n),n},L=Object(p.createContext)({});function F(){return Object(p.useContext)(L)}(y=b||(b={})).TransformSelected="transform_selected",y.TranslateSelected="translate_selected",y.TransformAll="transform_all",y.TranslateAll="translate_all",(O=w||(w={})).Top="top_edge",O.Right="right_edge",O.Bottom="bottom_edge",O.Left="left_edge",(S=k||(k={})).TopLeft="top_left_corner",S.TopRight="top_right_corner",S.BottomRight="bottom_right_corner",S.BottomLeft="bottom_left_corner",(j=x||(x={})).minX="minX",j.midX="midX",j.maxX="maxX",j.minY="minY",j.midY="midY",j.maxY="maxY",String.prototype.replaceAll||(String.prototype.replaceAll=function(e,t){return"[object regexp]"===Object.prototype.toString.call(e).toLowerCase()?this.replace(e,t):this.replace(new RegExp(e,"g"),t)});var H=2*Math.PI,z=function(){function e(){Object(c.a)(this,e)}return Object(u.a)(e,null,[{key:"lerp",value:function(t,n,r){return t*(1-(r=e.clamp(r,0,1)))+n*r}},{key:"lerpColor",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5;function r(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}function a(e){return"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+e[2]).toString(16).slice(1)}for(var i=r(e)||[0,0,0],o=r(t)||[0,0,0],s=i.slice(),c=0;c<3;c++)s[c]=Math.round(s[c]+n*(o[c]-i[c]));return a(s)}},{key:"modulate",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Object(s.a)(t,2),i=a[0],o=a[1],c=Object(s.a)(n,2),u=c[0],l=c[1],d=u+(e-i)/(o-i)*(l-u);return r?u<l?Math.max(Math.min(d,l),u):Math.max(Math.min(d,u),l):d}},{key:"clamp",value:function(e,t,n){return Math.max(t,"undefined"!==typeof n?Math.min(e,n):e)}},{key:"deepClone",value:function(t){if(null===t)return t;if(Array.isArray(t))return Object(l.a)(t);if("object"===typeof t){var n=T({},t);return Object.keys(n).forEach((function(r){return n[r]="object"===typeof t[r]?e.deepClone(t[r]):t[r]})),n}return t}},{key:"rng",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=0,n=0,r=0,a=0;function i(){var e=t^t<<11;return t=n,n=r,r=a,(a^=(a>>>19^e^e>>>8)>>>0)/4294967296}for(var o=0;o<e.length+64;o++)t^=0|e.charCodeAt(o),i();return i}},{key:"pointsToLineSegments",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],r=1;r<e.length;r++)n.push([e[r-1],e[r]]);return t&&n.push([e[e.length-1],e[0]]),n}},{key:"getRectangleSides",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[e[0]+t[0]/2,e[1]+t[1]/2],a=v.a.rotWith(e,r,n),i=v.a.rotWith(v.a.add(e,[t[0],0]),r,n),o=v.a.rotWith(v.a.add(e,t),r,n),s=v.a.rotWith(v.a.add(e,[0,t[1]]),r,n);return[["top",[a,i]],["right",[i,o]],["bottom",[o,s]],["left",[s,a]]]}},{key:"circleFromThreePoints",value:function(e,t,n){var r=Object(s.a)(e,2),a=r[0],i=r[1],o=Object(s.a)(t,2),c=o[0],u=o[1],l=Object(s.a)(n,2),d=l[0],f=l[1],p=a*(u-f)-i*(c-d)+c*f-d*u,h=-((a*a+i*i)*(f-u)+(c*c+u*u)*(i-f)+(d*d+f*f)*(u-i))/(2*p),v=-((a*a+i*i)*(c-d)+(c*c+u*u)*(d-a)+(d*d+f*f)*(a-c))/(2*p);return[h,v,Math.hypot(h-a,v-i)]}},{key:"perimeterOfEllipse",value:function(e,t){var n=Math.pow(e-t,2)/Math.pow(e+t,2);return Math.PI*(e+t)*(1+3*n/(10+Math.sqrt(4-3*n)))}},{key:"shortAngleDist",value:function(e,t){var n=2*Math.PI,r=(t-e)%n;return 2*r%n-r}},{key:"longAngleDist",value:function(t,n){return 2*Math.PI-e.shortAngleDist(t,n)}},{key:"lerpAngles",value:function(t,n,r){return t+e.shortAngleDist(t,n)*r}},{key:"angleDelta",value:function(t,n){return e.shortAngleDist(t,n)}},{key:"getSweep",value:function(t,n,r){return e.angleDelta(v.a.angle(t,n),v.a.angle(t,r))}},{key:"clampRadians",value:function(e){return(2*Math.PI+e)%(2*Math.PI)}},{key:"snapAngleToSegments",value:function(t,n){var r=2*Math.PI/n;return Math.floor((e.clampRadians(t)+r/2)/r)*r}},{key:"isAngleBetween",value:function(e,t,n){if(n===e||n===t)return!0;var r=(t-e+H)%H,a=(n-e+H)%H;return r<=Math.PI!==a>r}},{key:"degreesToRadians",value:function(e){return e*Math.PI/180}},{key:"radiansToDegrees",value:function(e){return 180*e/Math.PI}},{key:"getArcLength",value:function(t,n,r,a){var i=e.getSweep(t,r,a);return n*(2*Math.PI)*(i/(2*Math.PI))}},{key:"getSweepFlag",value:function(e,t,n){var r=v.a.angle(e,n);return(v.a.angle(e,t)-r+3*Math.PI)%(2*Math.PI)-Math.PI>0?0:1}},{key:"getLargeArcFlag",value:function(e,t,n){var r=v.a.angle(n,e),a=(v.a.angle(n,t)-r+3*Math.PI)%(2*Math.PI)-Math.PI;return Math.abs(a)>Math.PI/2?0:1}},{key:"getArcDashOffset",value:function(t,n,r,a,i){var o=e.getSweepFlag(t,r,a),s=e.getArcLength(t,n,r,a);return-(o<0?s:2*Math.PI*t[2]-s)/2+i}},{key:"getEllipseDashOffset",value:function(e,t){return-(2*Math.PI*e[2])/2-t}},{key:"pointInCircle",value:function(e,t,n){return v.a.dist(e,t)<=n}},{key:"pointInEllipse",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;a=a||0;var i=Math.cos(a),o=Math.sin(a),s=v.a.sub(e,t),c=i*s[0]+o*s[1],u=o*s[0]-i*s[1];return c*c/(n*n)+u*u/(r*r)<=1}},{key:"pointInRect",value:function(e,t){return!(e[0]<t[0]||e[0]>e[0]+t[0]||e[1]<t[1]||e[1]>e[1]+t[1])}},{key:"pointInPolygon",value:function(e,t){var n=0;return t.forEach((function(r,a){var i=t[(a+1)%t.length];r[1]<=e[1]?i[1]>e[1]&&v.a.cross(r,i,e)>0&&(n+=1):i[1]<=e[1]&&v.a.cross(r,i,e)<0&&(n-=1)})),0!==n}},{key:"pointInBounds",value:function(e,t){return!(e[0]<t.minX||e[0]>t.maxX||e[1]<t.minY||e[1]>t.maxY)}},{key:"pointInPolyline",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=1;r<t.length;r++)if(v.a.distanceToLineSegment(t[r-1],t[r],e)<n)return!0;return!1}},{key:"getBoundsSides",value:function(e){return this.getRectangleSides([e.minX,e.minY],[e.width,e.height])}},{key:"expandBounds",value:function(e,t){return{minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,width:e.width+2*t,height:e.height+2*t}}},{key:"boundsCollide",value:function(e,t){return!(e.maxX<t.minX||e.minX>t.maxX||e.maxY<t.minY||e.minY>t.maxY)}},{key:"boundsContain",value:function(e,t){return e.minX<t.minX&&e.minY<t.minY&&e.maxY>t.maxY&&e.maxX>t.maxX}},{key:"boundsContained",value:function(t,n){return e.boundsContain(n,t)}},{key:"boundsAreEqual",value:function(e,t){return!(t.maxX!==e.maxX||t.minX!==e.minX||t.maxY!==e.maxY||t.minY!==e.minY)}},{key:"getBoundsFromPoints",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=1/0,a=1/0,i=-1/0,o=-1/0;if(t.length<2)r=0,a=0,i=1,o=1;else{var c,u=Object(d.a)(t);try{for(u.s();!(c=u.n()).done;){var l=Object(s.a)(c.value,2),f=l[0],p=l[1];r=Math.min(f,r),a=Math.min(p,a),i=Math.max(f,i),o=Math.max(p,o)}}catch(h){u.e(h)}finally{u.f()}}return 0!==n?e.getBoundsFromPoints(t.map((function(e){return v.a.rotWith(e,[(r+i)/2,(a+o)/2],n)}))):{minX:r,minY:a,maxX:i,maxY:o,width:Math.max(1,i-r),height:Math.max(1,o-a)}}},{key:"centerBounds",value:function(e,t){var n=this.getBoundsCenter(e),r=t[0]-n[0],a=t[1]-n[1];return this.translateBounds(e,[r,a])}},{key:"snapBoundsToGrid",value:function(e,t){var n=Math.round(e.minX/t)*t,r=Math.round(e.minY/t)*t,a=Math.round(e.maxX/t)*t,i=Math.round(e.maxY/t)*t;return{minX:n,minY:r,maxX:a,maxY:i,width:Math.max(1,a-n),height:Math.max(1,i-r)}}},{key:"translateBounds",value:function(e,t){return{minX:e.minX+t[0],minY:e.minY+t[1],maxX:e.maxX+t[0],maxY:e.maxY+t[1],width:e.width,height:e.height}}},{key:"rotateBounds",value:function(e,t,n){var r=v.a.rotWith([e.minX,e.minY],t,n),a=Object(s.a)(r,2),i=a[0],o=a[1],c=v.a.rotWith([e.maxX,e.maxY],t,n),u=Object(s.a)(c,2);return{minX:i,minY:o,maxX:u[0],maxY:u[1],width:e.width,height:e.height}}},{key:"getRotatedEllipseBounds",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=Math.cos(a),o=Math.sin(a),s=Math.hypot(n*i,r*o),c=Math.hypot(n*o,r*i);return{minX:e+n-s,minY:t+r-c,maxX:e+n+s,maxY:t+r+c,width:2*s,height:2*c}}},{key:"getExpandedBounds",value:function(e,t){var n=Math.min(e.minX,t.minX),r=Math.min(e.minY,t.minY),a=Math.max(e.maxX,t.maxX),i=Math.max(e.maxY,t.maxY);return{minX:n,minY:r,maxX:a,maxY:i,width:Math.abs(a-n),height:Math.abs(i-r)}}},{key:"getCommonBounds",value:function(t){if(t.length<2)return t[0];for(var n=t[0],r=1;r<t.length;r++)n=e.getExpandedBounds(n,t[r]);return n}},{key:"getRotatedCorners",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[e.minX+e.width/2,e.minY+e.height/2];return[[e.minX,e.minY],[e.maxX,e.minY],[e.maxX,e.maxY],[e.minX,e.maxY]].map((function(e){return v.a.rotWith(e,n,t)}))}},{key:"getTransformedBoundingBox",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=[e.minX,e.minY],o=i[0],c=i[1],u=[e.maxX,e.maxY],l=u[0],d=u[1],f=[e.minX,e.minY],p=f[0],h=f[1],g=[e.maxX,e.maxY],m=g[0],b=g[1];if("center"===t)return{minX:p+n[0],minY:h+n[1],maxX:m+n[0],maxY:b+n[1],width:m-p,height:b-h,scaleX:1,scaleY:1};var y=v.a.rot(n,-r),O=Object(s.a)(y,2),S=O[0],x=O[1];switch(t){case w.Top:case k.TopLeft:case k.TopRight:h+=x;break;case w.Bottom:case k.BottomLeft:case k.BottomRight:b+=x}switch(t){case w.Left:case k.TopLeft:case k.BottomLeft:p+=S;break;case w.Right:case k.TopRight:case k.BottomRight:m+=S}var j=l-o,_=d-c,C=(m-p)/j,E=(b-h)/_,I=C<0,P=E<0,M=Math.abs(m-p),A=Math.abs(b-h);if(a){var T=j/_,D=T<M/A,R=M*(E<0?1:-1)*(1/T),B=A*(C<0?1:-1)*T;switch(t){case k.TopLeft:D?h=b+R:p=m+B;break;case k.TopRight:D?h=b+R:m=p-B;break;case k.BottomRight:D?b=h-R:m=p-B;break;case k.BottomLeft:D?b=h-R:p=m+B;break;case w.Bottom:case w.Top:var L=(p+m)/2,F=A*T;p=L-F/2,m=L+F/2;break;case w.Left:case w.Right:var H=(h+b)/2,z=M/T;h=H-z/2,b=H+z/2}}if(r%(2*Math.PI)!==0){var N=[0,0],U=v.a.med([o,c],[l,d]),K=v.a.med([p,h],[m,b]);switch(t){case k.TopLeft:N=v.a.sub(v.a.rotWith([m,b],K,r),v.a.rotWith([l,d],U,r));break;case k.TopRight:N=v.a.sub(v.a.rotWith([p,b],K,r),v.a.rotWith([o,d],U,r));break;case k.BottomRight:N=v.a.sub(v.a.rotWith([p,h],K,r),v.a.rotWith([o,c],U,r));break;case k.BottomLeft:N=v.a.sub(v.a.rotWith([m,h],K,r),v.a.rotWith([l,c],U,r));break;case w.Top:N=v.a.sub(v.a.rotWith(v.a.med([p,b],[m,b]),K,r),v.a.rotWith(v.a.med([o,d],[l,d]),U,r));break;case w.Left:N=v.a.sub(v.a.rotWith(v.a.med([m,h],[m,b]),K,r),v.a.rotWith(v.a.med([l,c],[l,d]),U,r));break;case w.Bottom:N=v.a.sub(v.a.rotWith(v.a.med([p,h],[m,h]),K,r),v.a.rotWith(v.a.med([o,c],[l,c]),U,r));break;case w.Right:N=v.a.sub(v.a.rotWith(v.a.med([p,h],[p,b]),K,r),v.a.rotWith(v.a.med([o,c],[o,d]),U,r))}var V=v.a.sub([p,h],N),W=Object(s.a)(V,2);p=W[0],h=W[1];var X=v.a.sub([m,b],N),Y=Object(s.a)(X,2);m=Y[0],b=Y[1]}if(m<p){var G=[p,m];m=G[0],p=G[1]}if(b<h){var $=[h,b];b=$[0],h=$[1]}return{minX:p,minY:h,maxX:m,maxY:b,width:m-p,height:b-h,scaleX:(m-p)/(l-o||1)*(I?-1:1),scaleY:(b-h)/(d-c||1)*(P?-1:1)}}},{key:"getTransformAnchor",value:function(e,t,n){var r=e;switch(e){case k.TopLeft:r=t&&n?k.BottomRight:t?k.TopRight:n?k.BottomLeft:k.BottomRight;break;case k.TopRight:r=t&&n?k.BottomLeft:t?k.TopLeft:n?k.BottomRight:k.BottomLeft;break;case k.BottomRight:r=t&&n?k.TopLeft:t?k.BottomLeft:n?k.TopRight:k.TopLeft;break;case k.BottomLeft:r=t&&n?k.TopRight:t?k.BottomRight:n?k.TopLeft:k.TopRight}return r}},{key:"getRelativeTransformedBoundingBox",value:function(e,t,n,r,a){var i=(r?t.maxX-n.maxX:n.minX-t.minX)/t.width,o=(a?t.maxY-n.maxY:n.minY-t.minY)/t.height,s=n.width/t.width,c=n.height/t.height,u=e.minX+e.width*i,l=e.minY+e.height*o,d=e.width*s,f=e.height*c;return{minX:u,minY:l,maxX:u+d,maxY:l+f,width:d,height:f}}},{key:"getRotatedSize",value:function(t,n){var r=v.a.div(t,2),a=[[0,0],[t[0],0],t,[0,t[1]]].map((function(e){return v.a.rotWith(e,r,n)})),i=e.getBoundsFromPoints(a);return[i.width,i.height]}},{key:"getBoundsCenter",value:function(e){return[e.minX+e.width/2,e.minY+e.height/2]}},{key:"getBoundsWithCenter",value:function(t){var n=e.getBoundsCenter(t);return D(T({},t),{midX:n[0],midY:n[1]})}},{key:"getCommonTopLeft",value:function(e){var t=[1/0,1/0];return e.forEach((function(e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1])})),t}},{key:"getFromCache",value:function(e,t,n){var r=e.get(t);if(void 0===r&&(e.set(t,n()),void 0===(r=e.get(t))))throw Error("Cache did not include item!");return r}},{key:"uniqueId",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t?((Number(t)^16*Math.random())>>Number(t)/4).toString(16):"".concat(1e7,"-",1e3,"-",4e3,"-",8e3,"-",1e11).replace(/[018]/g,e.uniqueId)}},{key:"rotateArray",value:function(e,t){return e.map((function(n,r){return e[(r+t)%e.length]}))}},{key:"debounce",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];clearTimeout(t),t=setTimeout((function(){return e.apply(a)}),n)}}},{key:"getSvgPathFromStroke",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e.length)return"";var n=e.length-1;return e.reduce((function(e,r,a,i){return a===n?t&&e.push("Z"):e.push(r,v.a.med(r,i[a+1])),e}),["M",e[0],"Q"]).join(" ").replaceAll(this.TRIM_NUMBERS,"$1")}},{key:"getPerfectDashProps",value:function(e,t,n){var r,a,i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if("dashed"===n.toLowerCase())r=2*t,i=1,a=s?(r/2).toString():"0";else{if("dotted"!==n.toLowerCase())return{strokeDasharray:"none",strokeDashoffset:"none"};r=t/100,i=100,a="0"}var c=Math.floor(e/r/(2*i));c-=c%o,c=Math.max(c,4);var u=Math.max(r,(e-c*r)/(s?c:c-1));return{strokeDasharray:[r,u].join(" "),strokeDashoffset:a}}},{key:"isMobileSize",value:function(){return"undefined"!==typeof window&&window.innerWidth<768}},{key:"isMobileSafari",value:function(){if("undefined"===typeof window)return!1;var e=window.navigator.userAgent,t=!!e.match(/iPad/i)||!!e.match(/iPhone/i),n=!!e.match(/WebKit/i);return t&&n&&!e.match(/CriOS/i)}},{key:"throttle",value:function(e,t){var n,r;return function(){return n||(n=!0,setTimeout((function(){return n=!1}),t),r=e.apply(void 0,arguments)),r}}},{key:"isDarwin",value:function(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}},{key:"metaKey",value:function(t){return e.isDarwin()?t.metaKey:t.ctrlKey}}]),e}(),N=z;B(N,"getSnapPoints",(function(e,t,n){var r,a=T({},e),i=[0,0],c=[],u=(r={},Object(o.a)(r,x.minX,{id:x.minX,isSnapped:!1}),Object(o.a)(r,x.midX,{id:x.midX,isSnapped:!1}),Object(o.a)(r,x.maxX,{id:x.maxX,isSnapped:!1}),Object(o.a)(r,x.minY,{id:x.minY,isSnapped:!1}),Object(o.a)(r,x.midY,{id:x.midY,isSnapped:!1}),Object(o.a)(r,x.maxY,{id:x.maxY,isSnapped:!1}),r),l=[x.midX,x.minX,x.maxX],d=[x.midY,x.minY,x.maxY],f=t.map((function(e){var t=l.flatMap((function(t,n){return l.map((function(r,i){var o=a[t]-e[r],s=Math.abs(o);return{f:t,t:r,gap:o,distance:s,isCareful:0===n||n+i===3}}))})),n=d.flatMap((function(t,n){return d.map((function(r,i){var o=a[t]-e[r],s=Math.abs(o);return{f:t,t:r,gap:o,distance:s,isCareful:0===n||n+i===3}}))}));return[e,t,n]})),p=1/0,h=1/0,v=1/0,g=1/0;return f.forEach((function(e){var t=Object(s.a)(e,3),r=(t[0],t[1]),a=t[2];r.forEach((function(e){e.distance<n&&e.distance<v&&(v=e.distance,p=e.gap)})),a.forEach((function(e){e.distance<n&&e.distance<g&&(g=e.distance,h=e.gap)}))})),f.forEach((function(e){var t=Object(s.a)(e,3),n=t[0],r=t[1],a=t[2];p!==1/0&&r.forEach((function(e){Math.abs(e.gap-p)<2&&(u[e.f]=D(T({},u[e.f]),{isSnapped:!0,to:n[e.t],B:n,distance:e.distance}))})),h!==1/0&&a.forEach((function(e){Math.abs(e.gap-h)<2&&(u[e.f]=D(T({},u[e.f]),{isSnapped:!0,to:n[e.t],B:n,distance:e.distance}))}))})),i[0]=p===1/0?0:p,i[1]=h===1/0?0:h,a.minX-=i[0],a.midX-=i[0],a.maxX-=i[0],a.minY-=i[1],a.midY-=i[1],a.maxY-=i[1],l.forEach((function(e){var t=u[e];if(t.isSnapped){var n=t.id,r=t.B,i=a[n];c.push(n===x.minX?[[i,a.midY],[i,r.minY],[i,r.maxY]]:[[i,a.minY],[i,a.maxY],[i,r.minY],[i,r.maxY]])}})),d.forEach((function(e){var t=u[e];if(t.isSnapped){var n=t.id,r=t.B,i=a[n];c.push(n===x.midY?[[a.midX,i],[r.minX,i],[r.maxX,i]]:[[a.minX,i],[a.maxX,i],[r.minX,i],[r.maxX,i]])}})),{offset:i,snapLines:c}})),B(N,"deepMerge",(function(e,t){for(var n=T({},e),r=0,a=Object.entries(t);r<a.length;r++){var i=Object(s.a)(a[r],2),o=i[0],c=i[1];n[o]=c!==Object(c)||Array.isArray(c)?c:z.deepMerge(n[o],c)}return n})),B(N,"TRIM_NUMBERS",/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g);var U=N;function K(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7?arguments[7]:void 0,c={shape:e,asset:e.assetId?a[e.assetId]:void 0,meta:s,isChildOfSelected:o,isGhost:e.isGhost||i,isEditing:r.editingId===e.id,isBinding:r.bindingTargetId===e.id,isSelected:r.selectedIds.includes(e.id),isHovered:r.hoveredId===e.id||void 0!==e.children&&(r.hoveredId&&e.children.includes(r.hoveredId)||e.children.some((function(e){return r.selectedIds.includes(e)})))};t.push(c),e.children&&(c.children=[],e.children.map((function(e){return n[e]})).sort((function(e,t){return e.childIndex-t.childIndex})).forEach((function(e){return K(e,c.children,n,r,a,c.isGhost,c.isSelected||c.isChildOfSelected,s)})))}function V(e,t,n,r){var a=F(),i=a.callbacks,o=a.shapeUtils,c=a.bounds,u=Object(p.useRef)(),l=Object(p.useRef)(0),d=Object(p.useRef)(new Set),f=Object(p.useRef)(new Set),h=t.selectedIds,g=t.camera,m=v.a.sub(v.a.div([0,0],g.zoom),g.point),b=Object(s.a)(m,2),y=b[0],w=b[1],O=v.a.sub(v.a.div([c.width,c.height],g.zoom),g.point),k=Object(s.a)(O,2),S=k[0],x=k[1],j={minX:y,minY:w,maxX:S,maxY:x,height:S-y,width:x-w},_=f.current,C=d.current;_.clear(),C.clear(),Object.values(e.shapes).filter((function(e){return o[e.type].isStateful||h.includes(e.id)||function(e,t){return N.boundsContain(t,e)||N.boundsCollide(t,e)}(o[e.type].getBounds(e),j)})).forEach((function(t){if(t.parentId===e.id)return C.add(t.id),void _.add(t);C.add(t.parentId),_.add(e.shapes[t.parentId])})),_.size!==l.current&&(u.current&&clearTimeout(u.current),u.current=requestAnimationFrame((function(){var e;null==(e=i.onRenderCountChange)||e.call(i,Array.from(C.values()))})),l.current=_.size);var E=t.bindingId?e.bindings[t.bindingId].toId:void 0,I=[];return _.forEach((function(a){return K(a,I,e.shapes,D(T({},t),{bindingTargetId:E}),n,a.isGhost,!1,r)})),I.sort((function(e,t){return e.shape.childIndex-t.shape.childIndex})),I}var W=new Map;function X(e,t){return Object.keys(t).reduce((function(n,r){var a=t[r];return a?n+"".concat("--".concat(e,"-").concat(r),": ",a,";\n"):n}),"")}var Y={accent:"rgb(255, 0, 0)",brushFill:"rgba(0,0,0,.05)",brushStroke:"rgba(0,0,0,.25)",selectStroke:"rgb(66, 133, 244)",selectFill:"rgba(65, 132, 244, 0.05)",binding:"rgba(65, 132, 244, 0.12)",background:"rgb(248, 249, 250)",foreground:"rgb(51, 51, 51)",grid:"rgba(144, 144, 144, 1)"},G=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.reduce((function(e,t,r){return e+t+(r<n.length?n[r]:"")}),"")}(m());function $(e,t){var n,r;!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:":root";Object(p.useLayoutEffect)((function(){var r=document.createElement("style"),a=X(e,t);return r.setAttribute("id","".concat(e,"-theme")),r.setAttribute("data-selector",n),r.innerHTML="\n        ".concat(n," {\n          ").concat(a,"\n        }\n      "),document.head.appendChild(r),function(){r&&document.head.contains(r)&&document.head.removeChild(r)}}),[e,t,n])}("tl",Object(p.useMemo)((function(){return T(T({},Y),e)}),[e]),t),n="tl-canvas",r=G,Object(p.useLayoutEffect)((function(){if(W.get(n))return function(){};var e=document.createElement("style");return e.innerHTML=r,e.setAttribute("id",n),document.head.appendChild(e),W.set(n,e),function(){e&&document.head.contains(e)&&(document.head.removeChild(e),W.delete(n))}}),[n,r])}function q(e){var t=F(),n=t.callbacks,r=t.inputs,a=Object(p.useCallback)((function(t){var a,i,o;if(!t.dead&&(t.dead=!0,0===t.button&&r.pointerIsValid(t))){var s=r.pointerDown(t,e);!r.isDoubleClick()||s.altKey||s.metaKey||null==(a=n.onDoubleClickBoundsHandle)||a.call(n,s,t),null==(i=n.onPointBoundsHandle)||i.call(n,s,t),null==(o=n.onPointerDown)||o.call(n,s,t)}}),[r,n,e]),i=Object(p.useCallback)((function(t){var a,i;if(!t.dead&&(t.dead=!0,0===t.button&&r.pointerIsValid(t))){var o=r.pointerUp(t,e);null==(a=n.onReleaseBoundsHandle)||a.call(n,o,t),null==(i=n.onPointerUp)||i.call(n,o,t)}}),[r,n,e]),o=Object(p.useCallback)((function(t){var a,i;if(!t.dead&&(t.dead=!0,r.pointerIsValid(t))){t.currentTarget.hasPointerCapture(t.pointerId)&&(null==(a=n.onDragBoundsHandle)||a.call(n,r.pointerMove(t,e),t));var o=r.pointerMove(t,e);null==(i=n.onPointerMove)||i.call(n,o,t)}}),[r,n,e]);return{onPointerDown:a,onPointerUp:i,onPointerEnter:Object(p.useCallback)((function(t){var a;r.pointerIsValid(t)&&(null==(a=n.onHoverBoundsHandle)||a.call(n,r.pointerEnter(t,e),t))}),[r,n,e]),onPointerMove:o,onPointerLeave:Object(p.useCallback)((function(t){var a;r.pointerIsValid(t)&&(null==(a=n.onUnhoverBoundsHandle)||a.call(n,r.pointerEnter(t,e),t))}),[r,n,e])}}var Z={0:"Invalid value for configuration 'enforceActions', expected 'never', 'always' or 'observed'",1:function(e,t){return"Cannot apply '"+e+"' to '"+t.toString()+"': Field not found."},5:"'keys()' can only be used on observable objects, arrays, sets and maps",6:"'values()' can only be used on observable objects, arrays, sets and maps",7:"'entries()' can only be used on observable objects, arrays and maps",8:"'set()' can only be used on observable objects, arrays and maps",9:"'remove()' can only be used on observable objects, arrays and maps",10:"'has()' can only be used on observable objects, arrays and maps",11:"'get()' can only be used on observable objects, arrays and maps",12:"Invalid annotation",13:"Dynamic observable objects cannot be frozen",14:"Intercept handlers should return nothing or a change object",15:"Observable arrays cannot be frozen",16:"Modification exception: the internal structure of an observable array was changed.",17:function(e,t){return"[mobx.array] Index out of bounds, "+e+" is larger than "+t},18:"mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js",19:function(e){return"Cannot initialize from classes that inherit from Map: "+e.constructor.name},20:function(e){return"Cannot initialize map from "+e},21:function(e){return"Cannot convert to map from '"+e+"'"},22:"mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js",23:"It is not possible to get index atoms from arrays",24:function(e){return"Cannot obtain administration from "+e},25:function(e,t){return"the entry '"+e+"' does not exist in the observable map '"+t+"'"},26:"please specify a property",27:function(e,t){return"no observable property '"+e.toString()+"' found on the observable object '"+t+"'"},28:function(e){return"Cannot obtain atom from "+e},29:"Expecting some object",30:"invalid action stack. did you forget to finish an action?",31:"missing option for computed: get",32:function(e,t){return"Cycle detected in computation "+e+": "+t},33:function(e){return"The setter of computed value '"+e+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"},34:function(e){return"[ComputedValue '"+e+"'] It is not possible to assign a new value to a computed value."},35:"There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`",36:"isolateGlobalState should be called before MobX is running any reactions",37:function(e){return"[mobx] `observableArray."+e+"()` mutates the array in-place, which is not allowed inside a derivation. Use `array.slice()."+e+"()` instead"},38:"'ownKeys()' can only be used on observable objects",39:"'defineProperty()' can only be used on observable objects"};function J(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a="string"===typeof e?e:Z[e];throw"function"===typeof a&&(a=a.apply(null,n)),new Error("[MobX] "+a)}var Q={};function ee(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:Q}var te=Object.assign,ne=Object.getOwnPropertyDescriptor,re=Object.defineProperty,ae=Object.prototype,ie=[];Object.freeze(ie);var oe={};Object.freeze(oe);var se="undefined"!==typeof Proxy,ce=Object.toString();function ue(){se||J("`Proxy` objects are not available in the current environment. Please configure MobX to enable a fallback implementation.`")}function le(e){on.verifyProxies&&J("MobX is currently configured to be able to run in ES5 mode, but in ES5 MobX won't be able to "+e)}function de(){return++on.mobxGuid}function fe(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var pe=function(){};function he(e){return"function"===typeof e}function ve(e){switch(typeof e){case"string":case"symbol":case"number":return!0}return!1}function ge(e){return null!==e&&"object"===typeof e}function me(e){if(!ge(e))return!1;var t=Object.getPrototypeOf(e);if(null==t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"===typeof n&&n.toString()===ce}function be(e){var t=null==e?void 0:e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName)}function ye(e,t,n){re(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function we(e,t,n){re(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function Oe(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return ge(e)&&!0===e[n]}}function ke(e){return e instanceof Map}function Se(e){return e instanceof Set}var xe="undefined"!==typeof Object.getOwnPropertySymbols;var je="undefined"!==typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:xe?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function _e(e){return"string"===typeof e?e:"symbol"===typeof e?e.toString():new String(e).toString()}function Ce(e){return null===e?null:"object"===typeof e?""+e:e}function Ee(e,t){return ae.hasOwnProperty.call(e,t)}var Ie=Object.getOwnPropertyDescriptors||function(e){var t={};return je(e).forEach((function(n){t[n]=ne(e,n)})),t};function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Me(e,t,n){return t&&Pe(e.prototype,t),n&&Pe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ae(){return(Ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Te(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,De(e,t)}function De(e,t){return(De=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Le(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return Be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Be(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Fe=Symbol("mobx-stored-annotations");function He(e){return Object.assign((function(t,n){ze(t,n,e)}),e)}function ze(e,t,n){(Ee(e,Fe)||ye(e,Fe,Ae({},e[Fe])),Ge(n)&&!Ee(e[Fe],t))&&J("'"+(e.constructor.name+".prototype."+t.toString())+"' is decorated with 'override', but no such decorated member was found on prototype.");!function(e,t,n){if(!Ge(t)&&Ee(e[Fe],n)){var r=e.constructor.name+".prototype."+n.toString(),a=e[Fe][n].annotationType_;J("Cannot apply '@"+t.annotationType_+"' to '"+r+"':\nThe field is already decorated with '@"+a+"'.\nRe-decorating fields is not allowed.\nUse '@override' decorator for methods overriden by subclass.")}}(e,n,t),Ge(n)||(e[Fe][t]=n)}var Ne=Symbol("mobx administration"),Ue=function(){function e(e){void 0===e&&(e="Atom@"+de()),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Ft.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=e}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.reportObserved=function(){return fn(this)},t.reportChanged=function(){ln(),pn(this),dn()},t.toString=function(){return this.name_},e}(),Ke=Oe("Atom",Ue);function Ve(e,t,n){void 0===t&&(t=pe),void 0===n&&(n=pe);var r,a=new Ue(e);return t!==pe&&Hn(Ln,a,t,r),n!==pe&&Fn(a,n),a}var We={identity:function(e,t){return e===t},structural:function(e,t){return Yr(e,t)},default:function(e,t){return Object.is?Object.is(e,t):e===t?0!==e||1/e===1/t:e!==e&&t!==t},shallow:function(e,t){return Yr(e,t,1)}};function Xe(e,t,n){return $n(e)?e:Array.isArray(e)?xt.array(e,{name:n}):me(e)?xt.object(e,void 0,{name:n}):ke(e)?xt.map(e,{name:n}):Se(e)?xt.set(e,{name:n}):"function"!==typeof e||Dn(e)||Yn(e)?e:be(e)?Wn(e):Tn(n,e)}function Ye(e){return e}function Ge(e){return"override"===e.annotationType_}function $e(e,t){return{annotationType_:e,options_:t,make_:qe,extend_:Ze}}function qe(e,t,n,r){var a;if(null!=(a=this.options_)&&a.bound)return null===this.extend_(e,t,n,!1)?0:1;if(r===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(Dn(n.value))return 1;var i=Je(e,this,t,n,!1);return re(r,t,i),2}function Ze(e,t,n,r){var a=Je(e,this,t,n);return e.defineProperty_(t,a,r)}function Je(e,t,n,r,a){var i,o,s,c,u,l,d;void 0===a&&(a=on.safeDescriptors),function(e,t,n,r){var a=t.annotationType_;he(r.value)||J("Cannot apply '"+a+"' to '"+e.name_+"."+n.toString()+"':\n'"+a+"' can only be used on properties with a function value.")}(e,t,n,r);var f,p=r.value;null!=(i=t.options_)&&i.bound&&(p=p.bind(null!=(f=e.proxy_)?f:e.target_));return{value:Dt(null!=(o=null==(s=t.options_)?void 0:s.name)?o:n.toString(),p,null!=(c=null==(u=t.options_)?void 0:u.autoAction)&&c,null!=(l=t.options_)&&l.bound?null!=(d=e.proxy_)?d:e.target_:void 0),configurable:!a||e.isPlainObject_,enumerable:!1,writable:!a}}function Qe(e,t){return{annotationType_:e,options_:t,make_:et,extend_:tt}}function et(e,t,n,r){var a;if(r===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(null!=(a=this.options_)&&a.bound&&!Yn(e.target_[t])&&null===this.extend_(e,t,n,!1))return 0;if(Yn(n.value))return 1;var i=nt(e,this,t,n,!1,!1);return re(r,t,i),2}function tt(e,t,n,r){var a,i=nt(e,this,t,n,null==(a=this.options_)?void 0:a.bound);return e.defineProperty_(t,i,r)}function nt(e,t,n,r,a,i){void 0===i&&(i=on.safeDescriptors),function(e,t,n,r){var a=t.annotationType_;he(r.value)||J("Cannot apply '"+a+"' to '"+e.name_+"."+n.toString()+"':\n'"+a+"' can only be used on properties with a generator function value.")}(e,t,n,r);var o,s=r.value;a&&(s=s.bind(null!=(o=e.proxy_)?o:e.target_));return{value:Wn(s),configurable:!i||e.isPlainObject_,enumerable:!1,writable:!i}}function rt(e,t){return{annotationType_:e,options_:t,make_:at,extend_:it}}function at(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function it(e,t,n,r){return function(e,t,n,r){var a=t.annotationType_;r.get||J("Cannot apply '"+a+"' to '"+e.name_+"."+n.toString()+"':\n'"+a+"' can only be used on getter(+setter) properties.")}(e,this,t,n),e.defineComputedProperty_(t,Ae({},this.options_,{get:n.get,set:n.set}),r)}function ot(e,t){return{annotationType_:e,options_:t,make_:st,extend_:ct}}function st(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function ct(e,t,n,r){var a,i;return function(e,t,n,r){var a=t.annotationType_;"value"in r||J("Cannot apply '"+a+"' to '"+e.name_+"."+n.toString()+"':\n'"+a+"' cannot be used on getter/setter properties")}(e,this,t,n),e.defineObservableProperty_(t,n.value,null!=(a=null==(i=this.options_)?void 0:i.enhancer)?a:Xe,r)}var ut=lt();function lt(e){return{annotationType_:"true",options_:e,make_:dt,extend_:ft}}function dt(e,t,n,r){var a,i,o,s;if(n.get)return Et.make_(e,t,n,r);if(n.set){var c=Dt(t.toString(),n.set);return r===e.target_?null===e.defineProperty_(t,{configurable:!on.safeDescriptors||e.isPlainObject_,set:c})?0:2:(re(r,t,{configurable:!0,set:c}),2)}if(r!==e.target_&&"function"===typeof n.value)return be(n.value)?(null!=(s=this.options_)&&s.autoBind?Wn.bound:Wn).make_(e,t,n,r):(null!=(o=this.options_)&&o.autoBind?Tn.bound:Tn).make_(e,t,n,r);var u,l=!1===(null==(a=this.options_)?void 0:a.deep)?xt.ref:xt;"function"===typeof n.value&&null!=(i=this.options_)&&i.autoBind&&(n.value=n.value.bind(null!=(u=e.proxy_)?u:e.target_));return l.make_(e,t,n,r)}function ft(e,t,n,r){var a,i,o;if(n.get)return Et.extend_(e,t,n,r);if(n.set)return e.defineProperty_(t,{configurable:!on.safeDescriptors||e.isPlainObject_,set:Dt(t.toString(),n.set)},r);"function"===typeof n.value&&null!=(a=this.options_)&&a.autoBind&&(n.value=n.value.bind(null!=(o=e.proxy_)?o:e.target_));return(!1===(null==(i=this.options_)?void 0:i.deep)?xt.ref:xt).extend_(e,t,n,r)}var pt={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function ht(e){return e||pt}Object.freeze(pt);var vt=ot("observable"),gt=ot("observable.ref",{enhancer:Ye}),mt=ot("observable.shallow",{enhancer:function(e,t,n){return void 0===e||null===e||Ar(e)||mr(e)||kr(e)||jr(e)?e:Array.isArray(e)?xt.array(e,{name:n,deep:!1}):me(e)?xt.object(e,void 0,{name:n,deep:!1}):ke(e)?xt.map(e,{name:n,deep:!1}):Se(e)?xt.set(e,{name:n,deep:!1}):void J("The shallow modifier / decorator can only used in combination with arrays, objects, maps and sets")}}),bt=ot("observable.struct",{enhancer:function(e,t){return $n(e)&&J("observable.struct should not be used with observable values"),Yr(e,t)?t:e}}),yt=He(vt);function wt(e){return!0===e.deep?Xe:!1===e.deep?Ye:function(e){var t,n;return e&&null!=(t=null==(n=e.options_)?void 0:n.enhancer)?t:Xe}(e.defaultDecorator)}function Ot(e,t,n){if(!ve(t))return $n(e)?e:me(e)?xt.object(e,t,n):Array.isArray(e)?xt.array(e,t):ke(e)?xt.map(e,t):Se(e)?xt.set(e,t):"object"===typeof e&&null!==e?e:xt.box(e,t);ze(e,t,vt)}Object.assign(Ot,yt);var kt,St,xt=te(Ot,{box:function(e,t){var n=ht(t);return new Ut(e,wt(n),n.name,!0,n.equals)},array:function(e,t){var n=ht(t);return(!1===on.useProxies||!1===n.proxy?Ur:lr)(e,wt(n),n.name)},map:function(e,t){var n=ht(t);return new Or(e,wt(n),n.name)},set:function(e,t){var n=ht(t);return new xr(e,wt(n),n.name)},object:function(e,t,n){return function(e,t,n,r){arguments.length>4&&J("'extendObservable' expected 2-4 arguments"),"object"!==typeof e&&J("'extendObservable' expects an object as first argument"),kr(e)&&J("'extendObservable' should not be used on maps, use map.merge instead"),me(t)||J("'extendObservable' only accepts plain objects as second argument"),($n(t)||$n(n))&&J("Extending an object with another observable (object) is not supported");var a=Ie(t),i=Ir(e,r)[Ne];ln();try{je(a).forEach((function(e){i.extend_(e,a[e],!n||(!(e in n)||n[e]))}))}finally{dn()}return e}(!1===on.useProxies||!1===(null==n?void 0:n.proxy)?Ir({},n):function(e,t){var n,r;return ue(),e=Ir(e,t),null!=(r=(n=e[Ne]).proxy_)?r:n.proxy_=new Proxy(e,Qn)}({},n),e,t)},ref:He(gt),shallow:He(mt),deep:yt,struct:He(bt)}),jt="computed",_t=rt(jt),Ct=rt("computed.struct",{equals:We.structural}),Et=function(e,t){if(ve(t))return ze(e,t,_t);if(me(e))return He(rt(jt,e));he(e)||J("First argument to `computed` should be an expression."),he(t)&&J("A setter as second argument is no longer supported, use `{ set: fn }` option instead");var n=me(t)?t:{};return n.get=e,n.name||(n.name=e.name||""),new Kt(n)};Object.assign(Et,_t),Et.struct=He(Ct);var It,Pt=0,Mt=1,At=null!=(kt=null==(St=ne((function(){}),"name"))?void 0:St.configurable)&&kt,Tt={value:"action",configurable:!0,writable:!1,enumerable:!1};function Dt(e,t,n,r){function a(){return Rt(e,n,t,r||this,arguments)}return void 0===n&&(n=!1),he(t)||J("`action` can only be invoked on functions"),"string"===typeof e&&e||J("actions should have valid names, got: '"+e+"'"),a.isMobxAction=!0,At&&(Tt.value=e,Object.defineProperty(a,"name",Tt)),a}function Rt(e,t,n,r,a){var i=function(e,t,n,r){var a=wn()&&!!e,i=0;if(a){i=Date.now();var o=r?Array.from(r):ie;kn({type:jn,name:e,object:n,arguments:o})}var s=on.trackingDerivation,c=!t||!s;ln();var u=on.allowStateChanges;c&&(Jt(),u=Bt(!0));var l=en(!0),d={runAsAction_:c,prevDerivation_:s,prevAllowStateChanges_:u,prevAllowStateReads_:l,notifySpy_:a,startTime_:i,actionId_:Mt++,parentActionId_:Pt};return Pt=d.actionId_,d}(e,t,r,a);try{return n.apply(r,a)}catch(o){throw i.error_=o,o}finally{!function(e){Pt!==e.actionId_&&J(30);Pt=e.parentActionId_,void 0!==e.error_&&(on.suppressReactionErrors=!0);Lt(e.prevAllowStateChanges_),tn(e.prevAllowStateReads_),dn(),e.runAsAction_&&Qt(e.prevDerivation_);e.notifySpy_&&xn({time:Date.now()-e.startTime_});on.suppressReactionErrors=!1}(i)}}function Bt(e){var t=on.allowStateChanges;return on.allowStateChanges=e,t}function Lt(e){on.allowStateChanges=e}It=Symbol.toPrimitive;var Ft,Ht,zt,Nt,Ut=function(e,t){function n(t,n,r,a,i){var o;return void 0===r&&(r="ObservableValue@"+de()),void 0===a&&(a=!0),void 0===i&&(i=We.default),(o=e.call(this,r)||this).enhancer=void 0,o.name_=void 0,o.equals=void 0,o.hasUnreportedChange_=!1,o.interceptors_=void 0,o.changeListeners_=void 0,o.value_=void 0,o.dehancer=void 0,o.enhancer=n,o.name_=r,o.equals=i,o.value_=n(t,void 0,r),a&&wn()&&On({type:"create",object:Re(o),observableKind:"value",debugObjectName:o.name_,newValue:""+o.value_}),o}Te(n,e);var r=n.prototype;return r.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},r.set=function(e){var t=this.value_;if((e=this.prepareNewValue_(e))!==on.UNCHANGED){var n=wn();n&&kn({type:sr,object:this,observableKind:"value",debugObjectName:this.name_,newValue:e,oldValue:t}),this.setNewValue_(e),n&&xn()}},r.prepareNewValue_=function(e){if(Gt(this),er(this)){var t=nr(this,{object:this,type:sr,newValue:e});if(!t)return on.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value_,this.name_),this.equals(this.value_,e)?on.UNCHANGED:e},r.setNewValue_=function(e){var t=this.value_;this.value_=e,this.reportChanged(),rr(this)&&ir(this,{type:sr,object:this,newValue:e,oldValue:t})},r.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},r.intercept_=function(e){return tr(this,e)},r.observe_=function(e,t){return t&&e({observableKind:"value",debugObjectName:this.name_,object:this,type:sr,newValue:this.value_,oldValue:void 0}),ar(this,e)},r.raw=function(){return this.value_},r.toJSON=function(){return this.get()},r.toString=function(){return this.name_+"["+this.value_+"]"},r.valueOf=function(){return Ce(this.get())},r[t]=function(){return this.valueOf()},n}(Ue,It),Kt=function(e){function t(e){this.dependenciesState_=Ft.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Ft.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new Wt(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=zt.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,e.get||J(31),this.derivation=e.get,this.name_=e.name||"ComputedValue@"+de(),e.set&&(this.setter_=Dt(this.name_+"-setter",e.set)),this.equals_=e.equals||(e.compareStructural||e.struct?We.structural:We.default),this.scope_=e.context,this.requiresReaction_=e.requiresReaction,this.keepAlive_=!!e.keepAlive}var n=t.prototype;return n.onBecomeStale_=function(){!function(e){if(e.lowestObserverState_!==Ft.UP_TO_DATE_)return;e.lowestObserverState_=Ft.POSSIBLY_STALE_,e.observers_.forEach((function(e){e.dependenciesState_===Ft.UP_TO_DATE_&&(e.dependenciesState_=Ft.POSSIBLY_STALE_,e.onBecomeStale_())}))}(this)},n.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},n.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},n.get=function(){if(this.isComputing_&&J(32,this.name_,this.derivation),0!==on.inBatch||0!==this.observers_.size||this.keepAlive_){if(fn(this),Yt(this)){var e=on.trackingContext;this.keepAlive_&&!e&&(on.trackingContext=this),this.trackAndCompute()&&function(e){if(e.lowestObserverState_===Ft.STALE_)return;e.lowestObserverState_=Ft.STALE_,e.observers_.forEach((function(t){t.dependenciesState_===Ft.POSSIBLY_STALE_?(t.dependenciesState_=Ft.STALE_,t.isTracing_!==zt.NONE&&hn(t,e)):t.dependenciesState_===Ft.UP_TO_DATE_&&(e.lowestObserverState_=Ft.UP_TO_DATE_)}))}(this),on.trackingContext=e}}else Yt(this)&&(this.warnAboutUntrackedRead_(),ln(),this.value_=this.computeValue_(!1),dn());var t=this.value_;if(Xt(t))throw t.cause;return t},n.set=function(e){if(this.setter_){this.isRunningSetter_&&J(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,e)}finally{this.isRunningSetter_=!1}}else J(34,this.name_)},n.trackAndCompute=function(){var e=this.value_,t=this.dependenciesState_===Ft.NOT_TRACKING_,n=this.computeValue_(!0),r=t||Xt(e)||Xt(n)||!this.equals_(e,n);return r&&(this.value_=n,wn()&&On({observableKind:"computed",debugObjectName:this.name_,object:this.scope_,type:"update",oldValue:e,newValue:n})),r},n.computeValue_=function(e){this.isComputing_=!0;var t,n=Bt(!1);if(e)t=$t(this,this.derivation,this.scope_);else if(!0===on.disableErrorBoundaries)t=this.derivation.call(this.scope_);else try{t=this.derivation.call(this.scope_)}catch(r){t=new Wt(r)}return Lt(n),this.isComputing_=!1,t},n.suspend_=function(){this.keepAlive_||(qt(this),this.value_=void 0,this.isTracing_!==zt.NONE&&console.log("[mobx.trace] Computed value '"+this.name_+"' was suspended and it will recompute on the next access."))},n.observe_=function(e,t){var n=this,r=!0,a=void 0;return Rn((function(){var i=n.get();if(!r||t){var o=Jt();e({observableKind:"computed",debugObjectName:n.name_,type:sr,object:n,newValue:i,oldValue:a}),Qt(o)}r=!1,a=i}))},n.warnAboutUntrackedRead_=function(){this.isTracing_!==zt.NONE&&console.log("[mobx.trace] Computed value '"+this.name_+"' is being read outside a reactive context. Doing a full recompute."),("boolean"===typeof this.requiresReaction_?this.requiresReaction_:on.computedRequiresReaction)&&console.warn("[mobx] Computed value '"+this.name_+"' is being read outside a reactive context. Doing a full recompute.")},n.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},n.valueOf=function(){return Ce(this.get())},n[e]=function(){return this.valueOf()},t}(Symbol.toPrimitive),Vt=Oe("ComputedValue",Kt);(Ht=Ft||(Ft={}))[Ht.NOT_TRACKING_=-1]="NOT_TRACKING_",Ht[Ht.UP_TO_DATE_=0]="UP_TO_DATE_",Ht[Ht.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",Ht[Ht.STALE_=2]="STALE_",(Nt=zt||(zt={}))[Nt.NONE=0]="NONE",Nt[Nt.LOG=1]="LOG",Nt[Nt.BREAK=2]="BREAK";var Wt=function(e){this.cause=void 0,this.cause=e};function Xt(e){return e instanceof Wt}function Yt(e){switch(e.dependenciesState_){case Ft.UP_TO_DATE_:return!1;case Ft.NOT_TRACKING_:case Ft.STALE_:return!0;case Ft.POSSIBLY_STALE_:for(var t=en(!0),n=Jt(),r=e.observing_,a=r.length,i=0;i<a;i++){var o=r[i];if(Vt(o)){if(on.disableErrorBoundaries)o.get();else try{o.get()}catch(s){return Qt(n),tn(t),!0}if(e.dependenciesState_===Ft.STALE_)return Qt(n),tn(t),!0}}return nn(e),Qt(n),tn(t),!1}}function Gt(e){var t=e.observers_.size>0;on.allowStateChanges||!t&&"always"!==on.enforceActions||console.warn("[MobX] "+(on.enforceActions?"Since strict-mode is enabled, changing (observed) observable values without using an action is not allowed. Tried to modify: ":"Side effects like changing state are not allowed at this point. Are you trying to modify state from, for example, a computed value or the render function of a React component? You can wrap side effects in 'runInAction' (or decorate functions with 'action') if needed. Tried to modify: ")+e.name_)}function $t(e,t,n){var r=en(!0);nn(e),e.newObserving_=new Array(e.observing_.length+100),e.unboundDepsCount_=0,e.runId_=++on.runId;var a,i=on.trackingDerivation;if(on.trackingDerivation=e,on.inBatch++,!0===on.disableErrorBoundaries)a=t.call(n);else try{a=t.call(n)}catch(o){a=new Wt(o)}return on.inBatch--,on.trackingDerivation=i,function(e){for(var t=e.observing_,n=e.observing_=e.newObserving_,r=Ft.UP_TO_DATE_,a=0,i=e.unboundDepsCount_,o=0;o<i;o++){var s=n[o];0===s.diffValue_&&(s.diffValue_=1,a!==o&&(n[a]=s),a++),s.dependenciesState_>r&&(r=s.dependenciesState_)}n.length=a,e.newObserving_=null,i=t.length;for(;i--;){var c=t[i];0===c.diffValue_&&cn(c,e),c.diffValue_=0}for(;a--;){var u=n[a];1===u.diffValue_&&(u.diffValue_=0,sn(u,e))}r!==Ft.UP_TO_DATE_&&(e.dependenciesState_=r,e.onBecomeStale_())}(e),function(e){0;if(0!==e.observing_.length)return;(on.reactionRequiresObservable||e.requiresObservable_)&&console.warn("[mobx] Derivation '"+e.name_+"' is created/updated without reading any observable value.")}(e),tn(r),a}function qt(e){var t=e.observing_;e.observing_=[];for(var n=t.length;n--;)cn(t[n],e);e.dependenciesState_=Ft.NOT_TRACKING_}function Zt(e){var t=Jt();try{return e()}finally{Qt(t)}}function Jt(){var e=on.trackingDerivation;return on.trackingDerivation=null,e}function Qt(e){on.trackingDerivation=e}function en(e){var t=on.allowStateReads;return on.allowStateReads=e,t}function tn(e){on.allowStateReads=e}function nn(e){if(e.dependenciesState_!==Ft.UP_TO_DATE_){e.dependenciesState_=Ft.UP_TO_DATE_;for(var t=e.observing_,n=t.length;n--;)t[n].lowestObserverState_=Ft.UP_TO_DATE_}}var rn=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},an=!0,on=function(){var e=ee();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(an=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new rn).version&&(an=!1),an?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new rn):(setTimeout((function(){J(35)}),1),new rn)}();function sn(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function cn(e,t){e.observers_.delete(t),0===e.observers_.size&&un(e)}function un(e){!1===e.isPendingUnobservation_&&(e.isPendingUnobservation_=!0,on.pendingUnobservations.push(e))}function ln(){on.inBatch++}function dn(){if(0===--on.inBatch){mn();for(var e=on.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation_=!1,0===n.observers_.size&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof Kt&&n.suspend_())}on.pendingUnobservations=[]}}function fn(e){!function(e){!on.allowStateReads&&on.observableRequiresReaction&&console.warn("[mobx] Observable '"+e.name_+"' being read outside a reactive context.")}(e);var t=on.trackingDerivation;return null!==t?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved_&&on.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),!0):(0===e.observers_.size&&on.inBatch>0&&un(e),!1)}function pn(e){e.lowestObserverState_!==Ft.STALE_&&(e.lowestObserverState_=Ft.STALE_,e.observers_.forEach((function(t){t.dependenciesState_===Ft.UP_TO_DATE_&&(t.isTracing_!==zt.NONE&&hn(t,e),t.onBecomeStale_()),t.dependenciesState_=Ft.STALE_})))}function hn(e,t){if(console.log("[mobx.trace] '"+e.name_+"' is invalidated due to a change in: '"+t.name_+"'"),e.isTracing_===zt.BREAK){var n=[];vn(zn(Kr(e,r)),n,1),new Function("debugger;\n/*\nTracing '"+e.name_+"'\n\nYou are entering this break point because derivation '"+e.name_+"' is being traced and '"+t.name_+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(e instanceof Kt?e.derivation.toString().replace(/[*]\//g,"/"):"")+"\n\nThe dependencies for this derivation are:\n\n"+n.join("\n")+"\n*/\n    ")()}var r}function vn(e,t,n){t.length>=1e3?t.push("(and many more)"):(t.push(""+"\t".repeat(n-1)+e.name),e.dependencies&&e.dependencies.forEach((function(e){return vn(e,t,n+1)})))}var gn=function(){function e(e,t,n,r){void 0===e&&(e="Reaction@"+de()),void 0===r&&(r=!1),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=Ft.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=zt.NONE,this.name_=e,this.onInvalidate_=t,this.errorHandler_=n,this.requiresObservable_=r}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,on.pendingReactions.push(this),mn())},t.isScheduled=function(){return this.isScheduled_},t.runReaction_=function(){if(!this.isDisposed_){ln(),this.isScheduled_=!1;var e=on.trackingContext;if(on.trackingContext=this,Yt(this)){this.isTrackPending_=!0;try{this.onInvalidate_(),this.isTrackPending_&&wn()&&On({name:this.name_,type:"scheduled-reaction"})}catch(t){this.reportExceptionInDerivation_(t)}}on.trackingContext=e,dn()}},t.track=function(e){if(!this.isDisposed_){ln();var t,n=wn();n&&(t=Date.now(),kn({name:this.name_,type:"reaction"})),this.isRunning_=!0;var r=on.trackingContext;on.trackingContext=this;var a=$t(this,e,void 0);on.trackingContext=r,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&qt(this),Xt(a)&&this.reportExceptionInDerivation_(a.cause),n&&xn({time:Date.now()-t}),dn()}},t.reportExceptionInDerivation_=function(e){var t=this;if(this.errorHandler_)this.errorHandler_(e,this);else{if(on.disableErrorBoundaries)throw e;var n="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";on.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name_+"' suppressed, fix error of causing action below)"):console.error(n,e),wn()&&On({type:"error",name:this.name_,message:n,error:""+e}),on.globalReactionErrorHandlers.forEach((function(n){return n(e,t)}))}},t.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(ln(),qt(this),dn()))},t.getDisposer_=function(){var e=this.dispose.bind(this);return e[Ne]=this,e},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(e){void 0===e&&(e=!1),function(){0;for(var e=!1,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];"boolean"===typeof n[n.length-1]&&(e=n.pop());var a=qn(n);if(!a)return J("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");a.isTracing_===zt.NONE&&console.log("[mobx.trace] '"+a.name_+"' tracing enabled");a.isTracing_=e?zt.BREAK:zt.LOG}(this,e)},e}();function mn(){on.inBatch>0||on.isRunningReactions||bn()}function bn(){on.isRunningReactions=!0;for(var e=on.pendingReactions,t=0;e.length>0;){100===++t&&(console.error("Reaction doesn't converge to a stable state after 100 iterations. Probably there is a cycle in the reactive function: "+e[0]),e.splice(0));for(var n=e.splice(0),r=0,a=n.length;r<a;r++)n[r].runReaction_()}on.isRunningReactions=!1}var yn=Oe("Reaction",gn);function wn(){return!!on.spyListeners.length}function On(e){if(on.spyListeners.length)for(var t=on.spyListeners,n=0,r=t.length;n<r;n++)t[n](e)}function kn(e){On(Ae({},e,{spyReportStart:!0}))}var Sn={type:"report-end",spyReportEnd:!0};function xn(e){On(e?Ae({},e,{type:"report-end",spyReportEnd:!0}):Sn)}var jn="action",_n="autoAction",Cn=$e(jn),En=$e("action.bound",{bound:!0}),In=$e(_n,{autoAction:!0}),Pn=$e("autoAction.bound",{autoAction:!0,bound:!0});function Mn(e){return function(t,n){return he(t)?Dt(t.name||"<unnamed action>",t,e):he(n)?Dt(t,n,e):ve(n)?ze(t,n,e?In:Cn):ve(t)?He($e(e?_n:jn,{name:t,autoAction:e})):void J("Invalid arguments for `action`")}}var An=Mn(!1);Object.assign(An,Cn);var Tn=Mn(!0);function Dn(e){return he(e)&&!0===e.isMobxAction}function Rn(e,t){var n,r;void 0===t&&(t=oe),he(e)||J("Autorun expects a function as first argument"),Dn(e)&&J("Autorun does not accept actions since actions are untrackable");var a,i=null!=(n=null==(r=t)?void 0:r.name)?n:e.name||"Autorun@"+de();if(!t.scheduler&&!t.delay)a=new gn(i,(function(){this.track(c)}),t.onError,t.requiresObservable);else{var o=function(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:Bn}(t),s=!1;a=new gn(i,(function(){s||(s=!0,o((function(){s=!1,a.isDisposed_||a.track(c)})))}),t.onError,t.requiresObservable)}function c(){e(a)}return a.schedule_(),a.getDisposer_()}Object.assign(Tn,In),An.bound=He(En),Tn.bound=He(Pn);var Bn=function(e){return e()};var Ln="onBO";function Fn(e,t,n){return Hn("onBUO",e,t,n)}function Hn(e,t,n,r){var a="function"===typeof r?Kr(t,n):Kr(t),i=he(r)?r:n,o=e+"L";return a[o]?a[o].add(i):a[o]=new Set([i]),function(){var e=a[o];e&&(e.delete(i),0===e.size&&delete a[o])}}function zn(e){var t,n={name:e.name_};return e.observing_&&e.observing_.length>0&&(n.dependencies=(t=e.observing_,Array.from(new Set(t))).map(zn)),n}var Nn=0;function Un(){this.message="FLOW_CANCELLED"}Un.prototype=Object.create(Error.prototype);var Kn=Qe("flow"),Vn=Qe("flow.bound",{bound:!0}),Wn=Object.assign((function(e,t){if(ve(t))return ze(e,t,Kn);1!==arguments.length&&J("Flow expects single argument with generator function");var n=e,r=n.name||"<unnamed flow>",a=function(){var e,t=this,a=arguments,i=++Nn,o=An(r+" - runid: "+i+" - init",n).apply(t,a),s=void 0,c=new Promise((function(t,n){var a=0;function c(e){var t;s=void 0;try{t=An(r+" - runid: "+i+" - yield "+a++,o.next).call(o,e)}catch(c){return n(c)}l(t)}function u(e){var t;s=void 0;try{t=An(r+" - runid: "+i+" - yield "+a++,o.throw).call(o,e)}catch(c){return n(c)}l(t)}function l(e){if(!he(null==e?void 0:e.then))return e.done?t(e.value):(s=Promise.resolve(e.value)).then(c,u);e.then(l,n)}e=n,c(void 0)}));return c.cancel=An(r+" - runid: "+i+" - cancel",(function(){try{s&&Xn(s);var t=o.return(void 0),n=Promise.resolve(t.value);n.then(pe,pe),Xn(n),e(new Un)}catch(r){e(r)}})),c};return a.isMobXFlow=!0,a}),Kn);function Xn(e){he(e.cancel)&&e.cancel()}function Yn(e){return!0===(null==e?void 0:e.isMobXFlow)}function Gn(e,t){return!!e&&(void 0!==t?kr(e)||mr(e)?J("isObservable(object, propertyName) is not supported for arrays and maps. Use map.has or array.length instead."):!!Ar(e)&&e[Ne].values_.has(t):Ar(e)||!!e[Ne]||Ke(e)||yn(e)||Vt(e))}function $n(e){return 1!==arguments.length&&J("isObservable expects only 1 argument. Use isObservableProp to inspect the observability of a property"),Gn(e)}function qn(e){switch(e.length){case 0:return on.trackingDerivation;case 1:return Kr(e[0]);case 2:return Kr(e[0],e[1])}}function Zn(e,t){void 0===t&&(t=void 0),ln();try{return e.apply(t)}finally{dn()}}function Jn(e){return e[Ne]}Wn.bound=He(Vn);var Qn={has:function(e,t){return on.trackingDerivation&&le("detect new properties using the 'in' operator. Use 'has' from 'mobx' instead."),Jn(e).has_(t)},get:function(e,t){return Jn(e).get_(t)},set:function(e,t,n){var r;return!!ve(t)&&(Jn(e).values_.has(t)||le("add a new observable property through direct assignment. Use 'set' from 'mobx' instead."),null==(r=Jn(e).set_(t,n,!0))||r)},deleteProperty:function(e,t){var n;return le("delete properties from an observable object. Use 'remove' from 'mobx' instead."),!!ve(t)&&(null==(n=Jn(e).delete_(t,!0))||n)},defineProperty:function(e,t,n){var r;return le("define property on an observable object. Use 'defineProperty' from 'mobx' instead."),null==(r=Jn(e).defineProperty_(t,n))||r},ownKeys:function(e){return on.trackingDerivation&&le("iterate keys to detect added / removed properties. Use 'keys' from 'mobx' instead."),Jn(e).ownKeys_()},preventExtensions:function(e){J(13)}};function er(e){return void 0!==e.interceptors_&&e.interceptors_.length>0}function tr(e,t){var n=e.interceptors_||(e.interceptors_=[]);return n.push(t),fe((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function nr(e,t){var n=Jt();try{for(var r=[].concat(e.interceptors_||[]),a=0,i=r.length;a<i&&((t=r[a](t))&&!t.type&&J(14),t);a++);return t}finally{Qt(n)}}function rr(e){return void 0!==e.changeListeners_&&e.changeListeners_.length>0}function ar(e,t){var n=e.changeListeners_||(e.changeListeners_=[]);return n.push(t),fe((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function ir(e,t){var n=Jt(),r=e.changeListeners_;if(r){for(var a=0,i=(r=r.slice()).length;a<i;a++)r[a](t);Qt(n)}}var or="splice",sr="update",cr={get:function(e,t){var n=e[Ne];return t===Ne?n:"length"===t?n.getArrayLength_():"string"!==typeof t||isNaN(t)?Ee(dr,t)?dr[t]:e[t]:n.get_(parseInt(t))},set:function(e,t,n){var r=e[Ne];return"length"===t&&r.setArrayLength_(n),"symbol"===typeof t||isNaN(t)?e[t]=n:r.set_(parseInt(t),n),!0},preventExtensions:function(){J(15)}},ur=function(){function e(e,t,n,r){void 0===e&&(e="ObservableArray@"+de()),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=n,this.legacyMode_=r,this.atom_=new Ue(e),this.enhancer_=function(n,r){return t(n,r,e+"[..]")}}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.dehanceValues_=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},t.intercept_=function(e){return tr(this,e)},t.observe_=function(e,t){return void 0===t&&(t=!1),t&&e({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),ar(this,e)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(e){("number"!==typeof e||isNaN(e)||e<0)&&J("Out of range: "+e);var t=this.values_.length;if(e!==t)if(e>t){for(var n=new Array(e-t),r=0;r<e-t;r++)n[r]=void 0;this.spliceWithArray_(t,0,n)}else this.spliceWithArray_(e,t-e)},t.updateArrayLength_=function(e,t){e!==this.lastKnownLength_&&J(16),this.lastKnownLength_+=t,this.legacyMode_&&t>0&&Nr(e+t+1)},t.spliceWithArray_=function(e,t,n){var r=this;Gt(this.atom_);var a=this.values_.length;if(void 0===e?e=0:e>a?e=a:e<0&&(e=Math.max(0,a+e)),t=1===arguments.length?a-e:void 0===t||null===t?0:Math.max(0,Math.min(t,a-e)),void 0===n&&(n=ie),er(this)){var i=nr(this,{object:this.proxy_,type:or,index:e,removedCount:t,added:n});if(!i)return ie;t=i.removedCount,n=i.added}n=0===n.length?n:n.map((function(e){return r.enhancer_(e,void 0)})),this.legacyMode_;var o=n.length-t;this.updateArrayLength_(a,o);var s=this.spliceItemsIntoValues_(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice_(e,n,s),this.dehanceValues_(s)},t.spliceItemsIntoValues_=function(e,t,n){var r;if(n.length<1e4)return(r=this.values_).splice.apply(r,[e,t].concat(n));var a=this.values_.slice(e,e+t),i=this.values_.slice(e+t);this.values_.length+=n.length-t;for(var o=0;o<n.length;o++)this.values_[e+o]=n[o];for(var s=0;s<i.length;s++)this.values_[e+n.length+s]=i[s];return a},t.notifyArrayChildUpdate_=function(e,t,n){var r=!this.owned_&&wn(),a=rr(this),i=a||r?{observableKind:"array",object:this.proxy_,type:sr,debugObjectName:this.atom_.name_,index:e,newValue:t,oldValue:n}:null;r&&kn(i),this.atom_.reportChanged(),a&&ir(this,i),r&&xn()},t.notifyArraySplice_=function(e,t,n){var r=!this.owned_&&wn(),a=rr(this),i=a||r?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:or,index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;r&&kn(i),this.atom_.reportChanged(),a&&ir(this,i),r&&xn()},t.get_=function(e){if(e<this.values_.length)return this.atom_.reportObserved(),this.dehanceValue_(this.values_[e]);console.warn("[mobx] Out of bounds read: "+e)},t.set_=function(e,t){var n=this.values_;if(e<n.length){Gt(this.atom_);var r=n[e];if(er(this)){var a=nr(this,{type:sr,object:this.proxy_,index:e,newValue:t});if(!a)return;t=a.newValue}(t=this.enhancer_(t,r))!==r&&(n[e]=t,this.notifyArrayChildUpdate_(e,t,r))}else e===n.length?this.spliceWithArray_(e,0,[t]):J(17,e,n.length)},e}();function lr(e,t,n,r){void 0===n&&(n="ObservableArray@"+de()),void 0===r&&(r=!1),ue();var a=new ur(n,t,r,!1);we(a.values_,Ne,a);var i=new Proxy(a.values_,cr);if(a.proxy_=i,e&&e.length){var o=Bt(!0);a.spliceWithArray_(0,0,e),Lt(o)}return i}var dr={clear:function(){return this.splice(0)},replace:function(e){var t=this[Ne];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var i=this[Ne];switch(arguments.length){case 0:return[];case 1:return i.spliceWithArray_(e);case 2:return i.spliceWithArray_(e,t)}return i.spliceWithArray_(e,t,r)},spliceWithArray:function(e,t,n){return this[Ne].spliceWithArray_(e,t,n)},push:function(){for(var e=this[Ne],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(e.values_.length,0,n),e.values_.length},pop:function(){return this.splice(Math.max(this[Ne].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[Ne],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(0,0,n),e.values_.length},reverse:function(){return on.trackingDerivation&&J(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){on.trackingDerivation&&J(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[Ne],n=t.dehanceValues_(t.values_).indexOf(e);return n>-1&&(this.splice(n,1),!0)}};function fr(e,t){"function"===typeof Array.prototype[e]&&(dr[e]=t(e))}function pr(e){return function(){var t=this[Ne];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_);return n[e].apply(n,arguments)}}function hr(e){return function(t,n){var r=this,a=this[Ne];return a.atom_.reportObserved(),a.dehanceValues_(a.values_)[e]((function(e,a){return t.call(n,e,a,r)}))}}function vr(e){return function(){var t=this,n=this[Ne];n.atom_.reportObserved();var r=n.dehanceValues_(n.values_),a=arguments[0];return arguments[0]=function(e,n,r){return a(e,n,r,t)},r[e].apply(r,arguments)}}fr("concat",pr),fr("flat",pr),fr("includes",pr),fr("indexOf",pr),fr("join",pr),fr("lastIndexOf",pr),fr("slice",pr),fr("toString",pr),fr("toLocaleString",pr),fr("every",hr),fr("filter",hr),fr("find",hr),fr("findIndex",hr),fr("flatMap",hr),fr("forEach",hr),fr("map",hr),fr("some",hr),fr("reduce",vr),fr("reduceRight",vr);var gr=Oe("ObservableArrayAdministration",ur);function mr(e){return ge(e)&&gr(e[Ne])}var br={},yr="add",wr="delete",Or=function(e,t){function n(e,t,n){var r=this;void 0===t&&(t=Xe),void 0===n&&(n="ObservableMap@"+de()),this.enhancer_=void 0,this.name_=void 0,this[Ne]=br,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=t,this.name_=n,he(Map)||J(18),this.keysAtom_=Ve(this.name_+".keys()"),this.data_=new Map,this.hasMap_=new Map,function(e,t){var n=Bt(e);try{t()}finally{Lt(n)}}(!0,(function(){r.merge(e)}))}var r=n.prototype;return r.has_=function(e){return this.data_.has(e)},r.has=function(e){var t=this;if(!on.trackingDerivation)return this.has_(e);var n=this.hasMap_.get(e);if(!n){var r=n=new Ut(this.has_(e),Ye,this.name_+"."+_e(e)+"?",!1);this.hasMap_.set(e,r),Fn(r,(function(){return t.hasMap_.delete(e)}))}return n.get()},r.set=function(e,t){var n=this.has_(e);if(er(this)){var r=nr(this,{type:n?sr:yr,object:this,newValue:t,name:e});if(!r)return this;t=r.newValue}return n?this.updateValue_(e,t):this.addValue_(e,t),this},r.delete=function(e){var t=this;if((Gt(this.keysAtom_),er(this))&&!nr(this,{type:wr,object:this,name:e}))return!1;if(this.has_(e)){var n=wn(),r=rr(this),a=r||n?{observableKind:"map",debugObjectName:this.name_,type:wr,object:this,oldValue:this.data_.get(e).value_,name:e}:null;return n&&kn(a),Zn((function(){var n;t.keysAtom_.reportChanged(),null==(n=t.hasMap_.get(e))||n.setNewValue_(!1),t.data_.get(e).setNewValue_(void 0),t.data_.delete(e)})),r&&ir(this,a),n&&xn(),!0}return!1},r.updateValue_=function(e,t){var n=this.data_.get(e);if((t=n.prepareNewValue_(t))!==on.UNCHANGED){var r=wn(),a=rr(this),i=a||r?{observableKind:"map",debugObjectName:this.name_,type:sr,object:this,oldValue:n.value_,name:e,newValue:t}:null;r&&kn(i),n.setNewValue_(t),a&&ir(this,i),r&&xn()}},r.addValue_=function(e,t){var n=this;Gt(this.keysAtom_),Zn((function(){var r,a=new Ut(t,n.enhancer_,n.name_+"."+_e(e),!1);n.data_.set(e,a),t=a.value_,null==(r=n.hasMap_.get(e))||r.setNewValue_(!0),n.keysAtom_.reportChanged()}));var r=wn(),a=rr(this),i=a||r?{observableKind:"map",debugObjectName:this.name_,type:yr,object:this,name:e,newValue:t}:null;r&&kn(i),a&&ir(this,i),r&&xn()},r.get=function(e){return this.has(e)?this.dehanceValue_(this.data_.get(e).get()):this.dehanceValue_(void 0)},r.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},r.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},r.values=function(){var e=this,t=this.keys();return qr({next:function(){var n=t.next(),r=n.done,a=n.value;return{done:r,value:r?void 0:e.get(a)}}})},r.entries=function(){var e=this,t=this.keys();return qr({next:function(){var n=t.next(),r=n.done,a=n.value;return{done:r,value:r?void 0:[a,e.get(a)]}}})},r[e]=function(){return this.entries()},r.forEach=function(e,t){for(var n,r=Le(this);!(n=r()).done;){var a=n.value,i=a[0],o=a[1];e.call(t,o,i,this)}},r.merge=function(e){var t=this;return kr(e)&&(e=new Map(e)),Zn((function(){me(e)?function(e){var t=Object.keys(e);if(!xe)return t;var n=Object.getOwnPropertySymbols(e);return n.length?[].concat(t,n.filter((function(t){return ae.propertyIsEnumerable.call(e,t)}))):t}(e).forEach((function(n){return t.set(n,e[n])})):Array.isArray(e)?e.forEach((function(e){var n=e[0],r=e[1];return t.set(n,r)})):ke(e)?(e.constructor!==Map&&J(19,e),e.forEach((function(e,n){return t.set(n,e)}))):null!==e&&void 0!==e&&J(20,e)})),this},r.clear=function(){var e=this;Zn((function(){Zt((function(){for(var t,n=Le(e.keys());!(t=n()).done;){var r=t.value;e.delete(r)}}))}))},r.replace=function(e){var t=this;return Zn((function(){for(var n,r=function(e){if(ke(e)||kr(e))return e;if(Array.isArray(e))return new Map(e);if(me(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}return J(21,e)}(e),a=new Map,i=!1,o=Le(t.data_.keys());!(n=o()).done;){var s=n.value;if(!r.has(s))if(t.delete(s))i=!0;else{var c=t.data_.get(s);a.set(s,c)}}for(var u,l=Le(r.entries());!(u=l()).done;){var d=u.value,f=d[0],p=d[1],h=t.data_.has(f);if(t.set(f,p),t.data_.has(f)){var v=t.data_.get(f);a.set(f,v),h||(i=!0)}}if(!i)if(t.data_.size!==a.size)t.keysAtom_.reportChanged();else for(var g=t.data_.keys(),m=a.keys(),b=g.next(),y=m.next();!b.done;){if(b.value!==y.value){t.keysAtom_.reportChanged();break}b=g.next(),y=m.next()}t.data_=a})),this},r.toString=function(){return"[object ObservableMap]"},r.toJSON=function(){return Array.from(this)},r.observe_=function(e,t){return!0===t&&J("`observe` doesn't support fireImmediately=true in combination with maps."),ar(this,e)},r.intercept_=function(e){return tr(this,e)},Me(n,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:t,get:function(){return"Map"}}]),n}(Symbol.iterator,Symbol.toStringTag),kr=Oe("ObservableMap",Or);var Sr={},xr=function(e,t){function n(e,t,n){void 0===t&&(t=Xe),void 0===n&&(n="ObservableSet@"+de()),this.name_=void 0,this[Ne]=Sr,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=n,he(Set)||J(22),this.atom_=Ve(this.name_),this.enhancer_=function(e,r){return t(e,r,n)},e&&this.replace(e)}var r=n.prototype;return r.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},r.clear=function(){var e=this;Zn((function(){Zt((function(){for(var t,n=Le(e.data_.values());!(t=n()).done;){var r=t.value;e.delete(r)}}))}))},r.forEach=function(e,t){for(var n,r=Le(this);!(n=r()).done;){var a=n.value;e.call(t,a,a,this)}},r.add=function(e){var t=this;if((Gt(this.atom_),er(this))&&!nr(this,{type:yr,object:this,newValue:e}))return this;if(!this.has(e)){Zn((function(){t.data_.add(t.enhancer_(e,void 0)),t.atom_.reportChanged()}));var n=wn(),r=rr(this),a=r||n?{observableKind:"set",debugObjectName:this.name_,type:yr,object:this,newValue:e}:null;n&&kn(a),r&&ir(this,a),n&&xn()}return this},r.delete=function(e){var t=this;if(er(this)&&!nr(this,{type:wr,object:this,oldValue:e}))return!1;if(this.has(e)){var n=wn(),r=rr(this),a=r||n?{observableKind:"set",debugObjectName:this.name_,type:wr,object:this,oldValue:e}:null;return n&&kn(a),Zn((function(){t.atom_.reportChanged(),t.data_.delete(e)})),r&&ir(this,a),n&&xn(),!0}return!1},r.has=function(e){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(e))},r.entries=function(){var e=0,t=Array.from(this.keys()),n=Array.from(this.values());return qr({next:function(){var r=e;return e+=1,r<n.length?{value:[t[r],n[r]],done:!1}:{done:!0}}})},r.keys=function(){return this.values()},r.values=function(){this.atom_.reportObserved();var e=this,t=0,n=Array.from(this.data_.values());return qr({next:function(){return t<n.length?{value:e.dehanceValue_(n[t++]),done:!1}:{done:!0}}})},r.replace=function(e){var t=this;return jr(e)&&(e=new Set(e)),Zn((function(){Array.isArray(e)||Se(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!==e&&void 0!==e&&J("Cannot initialize set from "+e)})),this},r.observe_=function(e,t){return!0===t&&J("`observe` doesn't support fireImmediately=true in combination with sets."),ar(this,e)},r.intercept_=function(e){return tr(this,e)},r.toJSON=function(){return Array.from(this)},r.toString=function(){return"[object ObservableSet]"},r[e]=function(){return this.values()},Me(n,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:t,get:function(){return"Set"}}]),n}(Symbol.iterator,Symbol.toStringTag),jr=Oe("ObservableSet",xr),_r=Object.create(null),Cr="remove",Er=function(){function e(e,t,n,r){void 0===t&&(t=new Map),void 0===r&&(r=ut),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=e,this.values_=t,this.name_=n,this.defaultAnnotation_=r,this.keysAtom_=new Ue(this.name_+".keys"),this.isPlainObject_=me(this.target_),Jr(this.defaultAnnotation_)||J("defaultAnnotation must be valid annotation"),this.appliedAnnotations_={}}var t=e.prototype;return t.getObservablePropValue_=function(e){return this.values_.get(e).get()},t.setObservablePropValue_=function(e,t){var n=this.values_.get(e);if(n instanceof Kt)return n.set(t),!0;if(er(this)){var r=nr(this,{type:sr,object:this.proxy_||this.target_,name:e,newValue:t});if(!r)return null;t=r.newValue}if((t=n.prepareNewValue_(t))!==on.UNCHANGED){var a=rr(this),i=wn(),o=a||i?{type:sr,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:n.value_,name:e,newValue:t}:null;i&&kn(o),n.setNewValue_(t),a&&ir(this,o),i&&xn()}return!0},t.get_=function(e){return on.trackingDerivation&&!Ee(this.target_,e)&&this.has_(e),this.target_[e]},t.set_=function(e,t,n){return void 0===n&&(n=!1),Ee(this.target_,e)?this.values_.has(e)?this.setObservablePropValue_(e,t):n?Reflect.set(this.target_,e,t):(this.target_[e]=t,!0):this.extend_(e,{value:t,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,n)},t.has_=function(e){if(!on.trackingDerivation)return e in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var t=this.pendingKeys_.get(e);return t||(t=new Ut(e in this.target_,Ye,this.name_+"."+_e(e)+"?",!1),this.pendingKeys_.set(e,t)),t.get()},t.make_=function(e,t){if(!0===t&&(t=this.defaultAnnotation_),!1!==t){if(Dr(this,t,e),!(e in this.target_)){var n;if(null!=(n=this.target_[Fe])&&n[e])return;J(1,t.annotationType_,this.name_+"."+e.toString())}for(var r=this.target_;r&&r!==ae;){var a=ne(r,e);if(a){var i=t.make_(this,e,a,r);if(0===i)return;if(1===i)break}r=Object.getPrototypeOf(r)}Tr(this,t,e)}},t.extend_=function(e,t,n,r){if(void 0===r&&(r=!1),!0===n&&(n=this.defaultAnnotation_),!1===n)return this.defineProperty_(e,t,r);Dr(this,n,e);var a=n.extend_(this,e,t,r);return a&&Tr(this,n,e),a},t.defineProperty_=function(e,t,n){void 0===n&&(n=!1);try{ln();var r=this.delete_(e);if(!r)return r;if(er(this)){var a=nr(this,{object:this.proxy_||this.target_,name:e,type:yr,newValue:t.value});if(!a)return null;var i=a.newValue;t.value!==i&&(t=Ae({},t,{value:i}))}if(n){if(!Reflect.defineProperty(this.target_,e,t))return!1}else re(this.target_,e,t);this.notifyPropertyAddition_(e,t.value)}finally{dn()}return!0},t.defineObservableProperty_=function(e,t,n,r){void 0===r&&(r=!1);try{ln();var a=this.delete_(e);if(!a)return a;if(er(this)){var i=nr(this,{object:this.proxy_||this.target_,name:e,type:yr,newValue:t});if(!i)return null;t=i.newValue}var o=Mr(e),s={configurable:!on.safeDescriptors||this.isPlainObject_,enumerable:!0,get:o.get,set:o.set};if(r){if(!Reflect.defineProperty(this.target_,e,s))return!1}else re(this.target_,e,s);var c=new Ut(t,n,this.name_+"."+e.toString(),!1);this.values_.set(e,c),this.notifyPropertyAddition_(e,c.value_)}finally{dn()}return!0},t.defineComputedProperty_=function(e,t,n){void 0===n&&(n=!1);try{ln();var r=this.delete_(e);if(!r)return r;if(er(this))if(!nr(this,{object:this.proxy_||this.target_,name:e,type:yr,newValue:void 0}))return null;t.name||(t.name=this.name_+"."+e.toString()),t.context=this.proxy_||this.target_;var a=Mr(e),i={configurable:!on.safeDescriptors||this.isPlainObject_,enumerable:!1,get:a.get,set:a.set};if(n){if(!Reflect.defineProperty(this.target_,e,i))return!1}else re(this.target_,e,i);this.values_.set(e,new Kt(t)),this.notifyPropertyAddition_(e,void 0)}finally{dn()}return!0},t.delete_=function(e,t){if(void 0===t&&(t=!1),!Ee(this.target_,e))return!0;if(er(this)&&!nr(this,{object:this.proxy_||this.target_,name:e,type:Cr}))return null;try{var n,r;ln();var a,i=rr(this),o=wn(),s=this.values_.get(e),c=void 0;if(!s&&(i||o))c=null==(a=ne(this.target_,e))?void 0:a.value;if(t){if(!Reflect.deleteProperty(this.target_,e))return!1}else delete this.target_[e];if(delete this.appliedAnnotations_[e],s&&(this.values_.delete(e),s instanceof Ut&&(c=s.value_),pn(s)),this.keysAtom_.reportChanged(),null==(n=this.pendingKeys_)||null==(r=n.get(e))||r.set(e in this.target_),i||o){var u={type:Cr,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:c,name:e};o&&kn(u),i&&ir(this,u),o&&xn()}}finally{dn()}return!0},t.observe_=function(e,t){return!0===t&&J("`observe` doesn't support the fire immediately property for observable objects."),ar(this,e)},t.intercept_=function(e){return tr(this,e)},t.notifyPropertyAddition_=function(e,t){var n,r,a=rr(this),i=wn();if(a||i){var o=a||i?{type:yr,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:e,newValue:t}:null;i&&kn(o),a&&ir(this,o),i&&xn()}null==(n=this.pendingKeys_)||null==(r=n.get(e))||r.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),je(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function Ir(e,t){var n;if(t&&Ar(e)&&J("Options can't be provided for already observable objects."),Ee(e,Ne))return Vr(e)instanceof Er||J("Cannot convert '"+Wr(e)+"' into observable object:\nThe target is already observable of different type.\nExtending builtins is not supported."),e;Object.isExtensible(e)||J("Cannot make the designated object observable; it is not extensible");var r=null!=(n=null==t?void 0:t.name)?n:(me(e)?"ObservableObject":e.constructor.name)+"@"+de(),a=new Er(e,new Map,String(r),function(e){var t;return e?null!=(t=e.defaultDecorator)?t:lt(e):void 0}(t));return ye(e,Ne,a),e}var Pr=Oe("ObservableObjectAdministration",Er);function Mr(e){return _r[e]||(_r[e]={get:function(){return this[Ne].getObservablePropValue_(e)},set:function(t){return this[Ne].setObservablePropValue_(e,t)}})}function Ar(e){return!!ge(e)&&Pr(e[Ne])}function Tr(e,t,n){var r;e.appliedAnnotations_[n]=t,null==(r=e.target_[Fe])||delete r[n]}function Dr(e,t,n){if(Jr(t)||J("Cannot annotate '"+e.name_+"."+n.toString()+"': Invalid annotation."),!Ge(t)&&Ee(e.appliedAnnotations_,n)){var r=e.name_+"."+n.toString(),a=e.appliedAnnotations_[n].annotationType_;J("Cannot apply '"+t.annotationType_+"' to '"+r+"':\nThe field is already annotated with '"+a+"'.\nRe-annotating fields is not allowed.\nUse 'override' annotation for methods overriden by subclass.")}}var Rr,Br,Lr=0,Fr=function(){};Rr=Fr,Br=Array.prototype,Object.setPrototypeOf?Object.setPrototypeOf(Rr.prototype,Br):void 0!==Rr.prototype.__proto__?Rr.prototype.__proto__=Br:Rr.prototype=Br;var Hr=function(e,t,n){function r(t,n,r,a){var i;void 0===r&&(r="ObservableArray@"+de()),void 0===a&&(a=!1),i=e.call(this)||this;var o=new ur(r,n,a,!0);if(o.proxy_=Re(i),we(Re(i),Ne,o),t&&t.length){var s=Bt(!0);i.spliceWithArray(0,0,t),Lt(s)}return i}Te(r,e);var a=r.prototype;return a.concat=function(){this[Ne].atom_.reportObserved();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.prototype.concat.apply(this.slice(),t.map((function(e){return mr(e)?e.slice():e})))},a[n]=function(){var e=this,t=0;return qr({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})},Me(r,[{key:"length",get:function(){return this[Ne].getArrayLength_()},set:function(e){this[Ne].setArrayLength_(e)}},{key:t,get:function(){return"Array"}}]),r}(Fr,Symbol.toStringTag,Symbol.iterator);function zr(e){re(Hr.prototype,""+e,function(e){return{enumerable:!1,configurable:!0,get:function(){return this[Ne].get_(e)},set:function(t){this[Ne].set_(e,t)}}}(e))}function Nr(e){if(e>Lr){for(var t=Lr;t<e+100;t++)zr(t);Lr=e}}function Ur(e,t,n){return new Hr(e,t,n)}function Kr(e,t){if("object"===typeof e&&null!==e){if(mr(e))return void 0!==t&&J(23),e[Ne].atom_;if(jr(e))return e[Ne];if(kr(e)){if(void 0===t)return e.keysAtom_;var n=e.data_.get(t)||e.hasMap_.get(t);return n||J(25,t,Wr(e)),n}if(Ar(e)){if(!t)return J(26);var r=e[Ne].values_.get(t);return r||J(27,t,Wr(e)),r}if(Ke(e)||Vt(e)||yn(e))return e}else if(he(e)&&yn(e[Ne]))return e[Ne];J(28)}function Vr(e,t){return e||J(29),void 0!==t?Vr(Kr(e,t)):Ke(e)||Vt(e)||yn(e)||kr(e)||jr(e)?e:e[Ne]?e[Ne]:void J(24,e)}function Wr(e,t){var n;if(void 0!==t)n=Kr(e,t);else{if(Dn(e))return e.name;n=Ar(e)||kr(e)||jr(e)?Vr(e):Kr(e)}return n.name_}Object.entries(dr).forEach((function(e){var t=e[0],n=e[1];"concat"!==t&&ye(Hr.prototype,t,n)})),Nr(1e3);var Xr=ae.toString;function Yr(e,t,n){return void 0===n&&(n=-1),Gr(e,t,n)}function Gr(e,t,n,r,a){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return!1;if(e!==e)return t!==t;var i=typeof e;if("function"!==i&&"object"!==i&&"object"!=typeof t)return!1;var o=Xr.call(e);if(o!==Xr.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e===""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t;case"[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":n>=0&&n++}e=$r(e),t=$r(t);var s="[object Array]"===o;if(!s){if("object"!=typeof e||"object"!=typeof t)return!1;var c=e.constructor,u=t.constructor;if(c!==u&&!(he(c)&&c instanceof c&&he(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}if(0===n)return!1;n<0&&(n=-1),a=a||[];for(var l=(r=r||[]).length;l--;)if(r[l]===e)return a[l]===t;if(r.push(e),a.push(t),s){if((l=e.length)!==t.length)return!1;for(;l--;)if(!Gr(e[l],t[l],n-1,r,a))return!1}else{var d,f=Object.keys(e);if(l=f.length,Object.keys(t).length!==l)return!1;for(;l--;)if(!Ee(t,d=f[l])||!Gr(e[d],t[d],n-1,r,a))return!1}return r.pop(),a.pop(),!0}function $r(e){return mr(e)?e.slice():ke(e)||kr(e)||Se(e)||jr(e)?Array.from(e.entries()):e}function qr(e){return e[Symbol.iterator]=Zr,e}function Zr(){return this}function Jr(e){return e instanceof Object&&"string"===typeof e.annotationType_&&he(e.make_)&&he(e.extend_)}function Qr(e,t){return[(e[0]+t.point[0])*t.zoom,(e[1]+t.point[1])*t.zoom]}function ea(e,t){return e[t.type]}function ta(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(p.useRef)(null);return Object(p.useLayoutEffect)((function(){return Rn((function(){var r=n.current,a="\n    translate(\n      calc(".concat(e.minX,"px - var(--tl-padding)),\n      calc(").concat(e.minY,"px - var(--tl-padding))\n    )\n    rotate(").concat(t+(e.rotation||0),"rad)");r.style.setProperty("transform",a),r.style.setProperty("width","calc(".concat(Math.floor(e.width),"px + (var(--tl-padding) * 2))")),r.style.setProperty("height","calc(".concat(Math.floor(e.height),"px + (var(--tl-padding) * 2))"))}))}),[e,t]),n}["Symbol","Map","Set"].forEach((function(e){"undefined"===typeof ee()[e]&&J("MobX requires global '"+e+"' to be available or polyfilled")})),"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return on.spyListeners.push(e),fe((function(){on.spyListeners=on.spyListeners.filter((function(t){return t!==e}))}))},extras:{getDebugName:Wr},$mobx:Ne});var na=function(){function e(){Object(c.a)(this,e),B(this,"points",[]),B(this,"lengths",[]),B(this,"totalLength",0),B(this,"prev")}return Object(u.a)(e,[{key:"addPoint",value:function(e){if(this.prev){var t=v.b.dist(this.prev,e);this.lengths.push(t),this.totalLength+=t,this.points.push(e)}this.prev=e}},{key:"getSplinePoint",value:function(e){var t=this.points,n=t.length-1,r=Math.trunc(e),a=Math.min(r+1,n),i=Math.min(a+1,n),o=Math.min(i+1,n),s=a-1,c=(e-=r)*e,u=c*e,l=2*c-u-e,d=3*u-5*c+2,f=-3*u+4*c+e,p=u-c;return[.5*(t[s][0]*l+t[a][0]*d+t[i][0]*f+t[o][0]*p),.5*(t[s][1]*l+t[a][1]*d+t[i][1]*f+t[o][1]*p)]}},{key:"clear",value:function(){this.points=[],this.totalLength=0}}]),e}();var ra=Object(f.b)((function(e){var t=e,n=t.id,r=t.bounds,a=t.rotation,i=void 0===a?0:a,o=t.isGhost,s=void 0!==o&&o,c=t.isSelected,u=void 0!==c&&c,l=t.children,d=R(t,["id","bounds","rotation","isGhost","isSelected","children"]),f=ta(r,i);return Object(p.createElement)("div",T({id:n,ref:f,className:"tl-positioned".concat(s?" tl-ghost":"").concat(u?" tl-positioned-selected":""),"aria-label":"container","data-testid":"container"},d),l)})),aa=Object(f.b)((function(e){var t=e.brush;return Object(p.createElement)(ra,{bounds:t,rotation:0},Object(p.createElement)(va,null,Object(p.createElement)("rect",{className:"tl-brush",opacity:1,x:0,y:0,width:t.width,height:t.height,"aria-label":"brush"})))})),ia=Object(f.b)((function(e){var t=e.bounds,n=e.isLocked,r=e.isHidden;return Object(p.createElement)("rect",{className:["tl-bounds-center",n?"tl-dashed":""].join(" "),x:-1,y:-1,width:t.width+2,height:t.height+2,opacity:r?0:1,pointerEvents:"none","aria-label":"center handle"})})),oa=Object(f.b)((function(e){var t=e.bounds,n=e.targetSize,r=e.size,a=e.isHidden,i=q("rotate");return Object(p.createElement)("g",{cursor:"grab",opacity:a?0:1},Object(p.createElement)("circle",T({className:"tl-transparent","aria-label":"rotate handle transparent",cx:t.width/2,cy:-2*r,r:n,pointerEvents:a?"none":"all"},i)),Object(p.createElement)("circle",{className:"tl-rotate-handle","aria-label":"rotate handle",cx:t.width/2,cy:-2*r,r:r/2,pointerEvents:"none"}))})),sa=(r={},Object(o.a)(r,k.TopLeft,"tl-cursor-nwse"),Object(o.a)(r,k.TopRight,"tl-cursor-nesw"),Object(o.a)(r,k.BottomRight,"tl-cursor-nwse"),Object(o.a)(r,k.BottomLeft,"tl-cursor-nesw"),r),ca=Object(f.b)((function(e){var t=e.size,n=e.targetSize,r=e.isHidden,a=e.corner,i=e.bounds,o=q(a),s=a===k.TopLeft||a===k.TopRight,c=a===k.TopLeft||a===k.BottomLeft;return Object(p.createElement)("g",{opacity:r?0:1},Object(p.createElement)("rect",T({className:"tl-transparent "+(r?"":sa[a]),"aria-label":"corner transparent",x:(c?-1:i.width+1)-n,y:(s?-1:i.height+1)-n,width:2*n,height:2*n,pointerEvents:r?"none":"all"},o)),Object(p.createElement)("rect",{className:"tl-corner-handle","aria-label":"corner handle",x:(c?-1:i.width+1)-t/2,y:(s?-1:i.height+1)-t/2,width:t,height:t,pointerEvents:"none"}))}));function ua(e){var t=e.size,n=e.bounds,r=e.isHidden,a=q("left"),i=q("center"),o=q("right");return Object(p.createElement)("g",{cursor:"grab",transform:"translate(".concat(n.width/2-4*t,", ").concat(n.height+2*t,")"),"aria-label":"link handle"},Object(p.createElement)("g",{className:"tl-transparent",pointerEvents:r?"none":"all"},Object(p.createElement)("rect",T({x:0,y:0,width:2*t,height:2*t},a)),Object(p.createElement)("rect",T({x:3*t,y:0,width:2*t,height:2*t},i)),Object(p.createElement)("rect",T({x:6*t,y:0,width:2*t,height:2*t},o))),Object(p.createElement)("g",{className:"tl-rotate-handle",transform:"translate(".concat(t/2,", ").concat(t/2,")"),"aria-label":"link rotate handle"},Object(p.createElement)("path",{d:"M 0,".concat(t/2," L ").concat(t,",").concat(t," ").concat(t,",0 Z"),pointerEvents:"none",opacity:r?0:1}),Object(p.createElement)("path",{transform:"translate(".concat(3*t,", 0)"),d:"M 0,0 L ".concat(t,",0 ").concat(t/2,",").concat(t," Z"),pointerEvents:"none",opacity:r?0:1}),Object(p.createElement)("path",{transform:"translate(".concat(6*t,", 0)"),d:"M ".concat(t,",").concat(t/2," L 0,0 0,").concat(t," Z"),pointerEvents:"none",opacity:r?0:1})))}var la=(a={},Object(o.a)(a,w.Top,"tl-cursor-ns"),Object(o.a)(a,w.Right,"tl-cursor-ew"),Object(o.a)(a,w.Bottom,"tl-cursor-ns"),Object(o.a)(a,w.Left,"tl-cursor-ew"),a),da=Object(f.b)((function(e){var t=e.size,n=e.isHidden,r=e.bounds,a=e.edge,i=q(a),o=a===w.Top||a===w.Bottom,s=a===w.Right||a===w.Bottom,c=r.height,u=r.width;return Object(p.createElement)("rect",T({pointerEvents:n?"none":"all",className:"tl-transparent tl-edge-handle "+(n?"":la[a]),"aria-label":"".concat(a," handle"),opacity:n?0:1,x:o?t/2:(s?u+1:-1)-t/2,y:o?(s?c+1:-1)-t/2:t/2,width:o?Math.max(0,u+1-t):t,height:o?t:Math.max(0,c+1-t)},i))})),fa={right:0,bottomRight:45,bottom:90,bottomLeft:135,left:180,topLeft:225,top:270,topRight:315},pa=Object(f.b)((function(e){var t=e.bounds,n=e.side,r=e.targetSize,a=e.size,i=2*r,o={left:-i,topLeft:-i,bottomLeft:-i,right:t.width,topRight:t.width,bottomRight:t.width,top:t.width/2-i/2,bottom:t.width/2-i/2}[n],s={left:t.height/2-i/2,right:t.height/2-i/2,top:2*-i,topLeft:-i,topRight:-i,bottom:t.height,bottomLeft:t.height,bottomRight:t.height}[n],c=F(),u=c.callbacks,l=c.inputs,d=Object(p.useCallback)((function(e){var t;e.stopPropagation();var r=l.pointerDown(e,n);null==(t=u.onShapeClone)||t.call(u,r,e)}),[u.onShapeClone]);return Object(p.createElement)("g",{className:"tl-clone-target",transform:"translate(".concat(o,", ").concat(s,")"),"aria-label":"clone button"},Object(p.createElement)("rect",{className:"tl-transparent",width:2*r,height:2*r}),Object(p.createElement)("g",{className:"tl-clone-button-target",onPointerDown:d,transform:"translate(".concat(r,", ").concat(r,") rotate(").concat(fa[n],")")},Object(p.createElement)("circle",{className:"tl-transparent ",r:r}),Object(p.createElement)("path",{className:"tl-clone-button",d:"M -".concat(a/2,",-").concat(a/2," L ").concat(a/2,",0 -").concat(a/2,",").concat(a/2," Z"),strokeLinejoin:"round"})))}));function ha(e){var t=e.targetSize,n=e.size,r=e.bounds;return Object(p.createElement)(p.Fragment,null,Object(p.createElement)(pa,{targetSize:t,size:n,bounds:r,side:"top"}),Object(p.createElement)(pa,{targetSize:t,size:n,bounds:r,side:"right"}),Object(p.createElement)(pa,{targetSize:t,size:n,bounds:r,side:"bottom"}),Object(p.createElement)(pa,{targetSize:t,size:n,bounds:r,side:"left"}),Object(p.createElement)(pa,{targetSize:t,size:n,bounds:r,side:"topLeft"}),Object(p.createElement)(pa,{targetSize:t,size:n,bounds:r,side:"topRight"}),Object(p.createElement)(pa,{targetSize:t,size:n,bounds:r,side:"bottomLeft"}),Object(p.createElement)(pa,{targetSize:t,size:n,bounds:r,side:"bottomRight"}))}var va=Object(p.forwardRef)((function(e,t){var n=e,r=n.id,a=n.className,i=void 0===a?"":a,o=n.children,s=R(n,["id","className","children"]);return Object(p.createElement)(f.a,null,(function(){return Object(p.createElement)("svg",T({ref:t,className:"tl-positioned-svg ".concat(i)},s),Object(p.createElement)("g",{id:r,className:"tl-centered-g"},o))}))})),ga=Object(f.b)((function(e){var t=e.zoom,n=e.bounds,r=e.viewportWidth,a=e.rotation,i=e.isHidden,o=e.isLocked,s=e.hideCloneHandles,c=e.hideResizeHandles,u=e.hideRotateHandle,l=e.hideBindingHandles,d=(r<768?16:8)/t,f=8/t,h=Math.min(n.width,n.height)*t,v=!u&&!i&&!o&&h>32,g=!i&&!o&&h>24,m=!i&&!o&&h>20,b=!s&&h>24,y=!c&&!o;return Object(p.createElement)(ra,{bounds:n,rotation:a},Object(p.createElement)(va,null,Object(p.createElement)(ia,{bounds:n,isLocked:o,isHidden:i}),y&&Object(p.createElement)(p.Fragment,null,Object(p.createElement)(da,{targetSize:d,size:f,bounds:n,edge:w.Top,isHidden:!g}),Object(p.createElement)(da,{targetSize:d,size:f,bounds:n,edge:w.Right,isHidden:!g}),Object(p.createElement)(da,{targetSize:d,size:f,bounds:n,edge:w.Bottom,isHidden:!g}),Object(p.createElement)(da,{targetSize:d,size:f,bounds:n,edge:w.Left,isHidden:!g}),Object(p.createElement)(ca,{targetSize:d,size:f,bounds:n,isHidden:i||!m,corner:k.TopLeft}),Object(p.createElement)(ca,{targetSize:d,size:f,bounds:n,isHidden:i||!m,corner:k.TopRight}),Object(p.createElement)(ca,{targetSize:d,size:f,bounds:n,isHidden:i||!m,corner:k.BottomRight}),Object(p.createElement)(ca,{targetSize:d,size:f,bounds:n,isHidden:i||!m,corner:k.BottomLeft})),v&&Object(p.createElement)(oa,{targetSize:d,size:f,bounds:n,isHidden:!g}),b&&Object(p.createElement)(ha,{bounds:n,targetSize:d,size:f}),!l&&Object(p.createElement)(ua,{targetSize:d,size:f,bounds:n,isHidden:!g})))})),ma=Object(f.b)((function(e){var t=e.bounds,n=e.rotation,r=e.isHidden,a=function(){var e=F(),t=e.callbacks,n=e.inputs;return Object(p.useMemo)((function(){return{onPointerDown:function(e){var r,a,i,o;if(!e.dead&&(e.dead=!0,n.pointerIsValid(e)))if(2!==e.button){if(0===e.button){null==(a=e.currentTarget)||a.setPointerCapture(e.pointerId);var s=n.pointerDown(e,"bounds");null==(i=t.onPointBounds)||i.call(t,s,e),null==(o=t.onPointerDown)||o.call(t,s,e)}}else null==(r=t.onRightPointBounds)||r.call(t,n.pointerDown(e,"bounds"),e)},onPointerUp:function(e){var r,a,i,o;if(!e.dead&&(e.dead=!0,0===e.button&&(n.activePointer=void 0,n.pointerIsValid(e)))){var s=n.isDoubleClick(),c=n.pointerUp(e,"bounds");e.currentTarget.hasPointerCapture(e.pointerId)&&(null==(r=e.currentTarget)||r.releasePointerCapture(e.pointerId)),!s||c.altKey||c.metaKey||null==(a=t.onDoubleClickBounds)||a.call(t,c,e),null==(i=t.onReleaseBounds)||i.call(t,c,e),null==(o=t.onPointerUp)||o.call(t,c,e)}},onPointerMove:function(e){var r,a;if(!e.dead&&(e.dead=!0,n.pointerIsValid(e))){e.currentTarget.hasPointerCapture(e.pointerId)&&(null==(r=t.onDragBounds)||r.call(t,n.pointerMove(e,"bounds"),e));var i=n.pointerMove(e,"bounds");null==(a=t.onPointerMove)||a.call(t,i,e)}},onPointerEnter:function(e){var r;n.pointerIsValid(e)&&(null==(r=t.onHoverBounds)||r.call(t,n.pointerEnter(e,"bounds"),e))},onPointerLeave:function(e){var r;n.pointerIsValid(e)&&(null==(r=t.onUnhoverBounds)||r.call(t,n.pointerEnter(e,"bounds"),e))}}}),[n,t])}();return Object(p.createElement)(ra,{bounds:t,rotation:n},Object(p.createElement)(va,null,Object(p.createElement)("rect",T({className:"tl-bounds-bg","aria-label":"bounds bg",width:t.width,height:t.height,opacity:r?0:1},a))))})),ba=Object(f.b)((function(e){var t=e.id,n=e.point,r=function(e){var t=F(),n=t.inputs,r=t.callbacks;return Object(p.useMemo)((function(){return{onPointerDown:function(t){var a,i,o;if(!t.dead&&(t.dead=!0,n.pointerIsValid(t)&&0===t.button&&n.pointerIsValid(t))){null==(a=t.currentTarget)||a.setPointerCapture(t.pointerId);var s=n.pointerDown(t,e);null==(i=r.onPointHandle)||i.call(r,s,t),null==(o=r.onPointerDown)||o.call(r,s,t)}},onPointerUp:function(t){var a,i,o,s;if(!t.dead&&(t.dead=!0,0===t.button&&n.pointerIsValid(t))){var c=n.isDoubleClick(),u=n.pointerUp(t,e);t.currentTarget.hasPointerCapture(t.pointerId)&&(null==(a=t.currentTarget)||a.releasePointerCapture(t.pointerId),!c||u.altKey||u.metaKey||null==(i=r.onDoubleClickHandle)||i.call(r,u,t),null==(o=r.onReleaseHandle)||o.call(r,u,t)),null==(s=r.onPointerUp)||s.call(r,u,t)}},onPointerMove:function(t){var a,i;if(!t.dead&&(t.dead=!0,n.pointerIsValid(t))){var o=n.pointerMove(t,e);t.currentTarget.hasPointerCapture(t.pointerId)&&(null==(a=r.onDragHandle)||a.call(r,o,t)),null==(i=r.onPointerMove)||i.call(r,o,t)}},onPointerEnter:function(t){var a;if(n.pointerIsValid(t)){var i=n.pointerEnter(t,e);null==(a=r.onHoverHandle)||a.call(r,i,t)}},onPointerLeave:function(t){var a;if(n.pointerIsValid(t)){var i=n.pointerEnter(t,e);null==(a=r.onUnhoverHandle)||a.call(r,i,t)}}}}),[n,r,e])}(t);return Object(p.createElement)(ra,{bounds:U.translateBounds({minX:0,minY:0,maxX:0,maxY:0,width:0,height:0},n)},Object(p.createElement)(va,null,Object(p.createElement)("g",T({className:"tl-handle","aria-label":"handle"},r),Object(p.createElement)("circle",{className:"tl-handle-bg",pointerEvents:"all"}),Object(p.createElement)("circle",{className:"tl-counter-scaled tl-handle",pointerEvents:"none",r:4}))))})),ya=Object(f.b)((function(e){var t=e.shape,n=e.zoom;if(void 0===t.handles)return null;var r=null,a=Object.values(t.handles).reduce((function(e,a){var i=v.a.add(a.point,t.point);return(!r||v.a.dist(i,r)*n>=32)&&(e.push(a),r=i),e}),[]);return 1===a.length?null:Object(p.createElement)(p.Fragment,null,a.map((function(e){return Object(p.createElement)(ba,{key:t.id+"_"+e.id,id:e.id,point:v.a.add(e.point,t.point)})})))})),wa=Object(f.b)((function(e){var t=e.utils.getRef(e.shape);return Object(p.createElement)(e.utils.Component,T({ref:t},e))})),Oa=Object(p.memo)(wa,(function(e,t){return e.isHovered===t.isHovered&&e.isSelected===t.isSelected&&e.isEditing===t.isEditing&&e.isBinding===t.isBinding&&e.isGhost===t.isGhost&&e.meta===t.meta&&(t.shape===e.shape||!t.utils.shouldRender(t.shape,e.shape))})),ka=Object(f.b)((function(e){var t=e,n=t.shape,r=t.utils,a=t.meta,i=R(t,["shape","utils","meta"]),o=F().callbacks,s=r.getBounds(n),c=function(e){var t=Object(p.useContext)(L),n=t.rPageState,r=t.rSelectionBounds,a=t.callbacks,i=t.inputs;return Object(p.useMemo)((function(){return{onPointerDown:function(t){var o,s,c,u,l,d,f;if(!t.dead&&(t.dead=!0,i.pointerIsValid(t)&&i.pointerIsValid(t)))if(2!==t.button){if(0===t.button){var p=i.pointerDown(t,e);if(null==(s=t.currentTarget)||s.setPointerCapture(t.pointerId),r.current&&N.pointInBounds(p.point,r.current)&&!n.current.selectedIds.includes(e))return null==(c=a.onPointBounds)||c.call(a,i.pointerDown(t,"bounds"),t),null==(u=a.onPointShape)||u.call(a,p,t),void(null==(l=a.onPointerDown)||l.call(a,p,t));null==(d=a.onPointShape)||d.call(a,p,t),null==(f=a.onPointerDown)||f.call(a,p,t)}}else null==(o=a.onRightPointShape)||o.call(a,i.pointerDown(t,e),t)},onPointerUp:function(t){var n,r,o,s;if(!t.dead&&(t.dead=!0,0===t.button&&(i.activePointer=void 0,i.pointerIsValid(t)))){var c=i.isDoubleClick(),u=i.pointerUp(t,e);t.currentTarget.hasPointerCapture(t.pointerId)&&(null==(n=t.currentTarget)||n.releasePointerCapture(t.pointerId)),!c||u.altKey||u.metaKey||null==(r=a.onDoubleClickShape)||r.call(a,u,t),null==(o=a.onReleaseShape)||o.call(a,u,t),null==(s=a.onPointerUp)||s.call(a,u,t)}},onPointerMove:function(t){var n,r;if(!t.dead&&(t.dead=!0,i.pointerIsValid(t)&&(!i.pointer||t.pointerId===i.pointer.pointerId))){var o=i.pointerMove(t,e);t.currentTarget.hasPointerCapture(t.pointerId)&&(null==(n=a.onDragShape)||n.call(a,o,t)),null==(r=a.onPointerMove)||r.call(a,o,t)}},onPointerEnter:function(t){var n;if(i.pointerIsValid(t)){var r=i.pointerEnter(t,e);null==(n=a.onHoverShape)||n.call(a,r,t)}},onPointerLeave:function(t){var n;if(i.pointerIsValid(t)){var r=i.pointerEnter(t,e);null==(n=a.onUnhoverShape)||n.call(a,r,t)}}}}),[i,a,e])}(n.id);return Object(p.createElement)(ra,{id:n.id,bounds:s,rotation:n.rotation,"data-shape":n.type,isGhost:i.isGhost,isSelected:i.isSelected},Object(p.createElement)(Oa,T({shape:n,utils:r,meta:a,events:c,bounds:s,onShapeChange:o.onShapeChange,onShapeBlur:o.onShapeBlur},i)))})),Sa=Object(f.b)((function e(t){var n=t,r=n.shape,a=n.utils,i=n.meta,o=n.children,s=R(n,["shape","utils","meta","children"]);return Object(p.createElement)(p.Fragment,null,Object(p.createElement)(ka,T({shape:r,utils:a[r.type],meta:i},s)),o&&o.map((function(t){return Object(p.createElement)(e,T({key:t.shape.id,utils:a},t))})))})),xa=Object(f.b)((function(e){var t=e.isHovered,n=void 0!==t&&t,r=e.isSelected,a=void 0!==r&&r,i=e.isEditing,o=void 0!==i&&i,s=e.shape,c=e.user,u=e.meta,l=F().shapeUtils[s.type],d=l.getBounds(s),f=ta(d,s.rotation);return Object(p.createElement)("div",{ref:f,draggable:!1,className:["tl-indicator","tl-absolute",a&&!c?"tl-selected":"tl-hovered",o?"tl-editing":""].join(" ")},Object(p.createElement)("svg",{width:"100%",height:"100%"},Object(p.createElement)("g",{className:"tl-centered-g",stroke:null==c?void 0:c.color},Object(p.createElement)(l.Indicator,{shape:s,meta:u,user:c,bounds:d,isSelected:a,isHovered:n}))))})),ja=Object(f.b)((function(e){var t=e.page,n=e.pageState,r=e.assets,a=e.hideBounds,i=e.hideHandles,o=e.hideIndicators,c=e.hideBindingHandles,u=e.hideCloneHandles,l=e.hideRotateHandle,d=e.hideResizeHandles,f=e.meta,h=F(),v=h.bounds,g=h.shapeUtils,m=V(t,n,r,f),b=function(e,t,n){var r=F().rSelectionBounds,a=t.selectedIds,i=Object(p.useRef)(),o=void 0,c=0,u=!1,l=!1;if(1===a.length){var d=a[0],f=e.shapes[d];c=f.rotation||0,u=f.isLocked||!1;var h=ea(n,f);o=h.hideBounds?void 0:h.getBounds(f)}else if(a.length>1){var v=a.map((function(t){return e.shapes[t]}));c=0,u=v.every((function(e){return e.isLocked})),o=v.reduce((function(e,t,r){return 0===r?ea(n,t).getRotatedBounds(t):U.getExpandedBounds(e,ea(n,t).getRotatedBounds(t))}),{})}if(o){var g=Qr([o.minX,o.minY],t.camera),m=Object(s.a)(g,2),b=m[0],y=m[1],w=Qr([o.maxX,o.maxY],t.camera),O=Object(s.a)(w,2),k=O[0],S=O[1];l=!!Object.values(e.bindings).find((function(e){return a.includes(e.toId)||a.includes(e.fromId)})),r.current={minX:b,minY:y,maxX:k,maxY:S,width:k-b,height:S-y}}else r.current=null;var x=i.current;return x&&o?o&&x.minX===o.minX&&x.minY===o.minY&&x.maxX===o.maxX&&x.maxY===o.maxY&&(o=i.current):i.current=o,{bounds:o,rotation:c,isLocked:u,isLinked:l}}(t,n,g),y=b.bounds,w=b.isLinked,O=b.isLocked,k=b.rotation,S=n.selectedIds,x=n.hoveredId,j=n.editingId,_=n.camera.zoom,C=o,E=!0,I=!1,P=void 0,M=S.map((function(e){return t.shapes[e]}));if(1===M.length){var A=M[0];(I=j===A.id)&&(C=!0);var D=g[A.type];E=u||!D.showCloneHandles,void 0===A.handles||I||(P=A)}return Object(p.createElement)(p.Fragment,null,y&&Object(p.createElement)(ma,{bounds:y,rotation:k,isHidden:a}),m.map((function(e){return Object(p.createElement)(Sa,T({key:e.shape.id,utils:g},e))})),!C&&M.map((function(e){return Object(p.createElement)(xa,{key:"selected_"+e.id,shape:e,meta:f,isSelected:!0,isEditing:I})})),!C&&x&&x!==j&&Object(p.createElement)(xa,{key:"hovered_"+x,shape:t.shapes[x],meta:f,isHovered:!0}),y&&Object(p.createElement)(ga,{zoom:_,bounds:y,viewportWidth:v.width,isLocked:O,rotation:k,isHidden:a,hideRotateHandle:l,hideResizeHandles:d,hideBindingHandles:c||!w,hideCloneHandles:E}),!i&&P&&Object(p.createElement)(ya,{shape:P,zoom:_}))}));function _a(e){var t=e.user,n=Object(p.useRef)(null);return function(e,t){var n=Object(p.useRef)("idle"),r=Object(p.useRef)(t),a=Object(p.useRef)([]),i=Object(p.useRef)(performance.now()),o=Object(p.useRef)(0),c=Object(p.useRef)(0),u=Object(p.useState)((function(){return new na})),l=Object(s.a)(u,1)[0],d=Object(p.useCallback)((function(t){var r=performance.now();!function i(){var s=(performance.now()-r)/t.duration;if(s<=1){var u=e.current;if(!u)return;var f=t.curve?l.getSplinePoint(s+t.start):v.b.lrp(t.from,t.to,s);return u.style.setProperty("transform","translate(".concat(f[0],"px, ").concat(f[1],"px)")),void(o.current=requestAnimationFrame(i))}var p=a.current.shift();p?(n.current="animating",d(p)):(n.current="idle",c.current=setTimeout((function(){n.current="stopped"}),250))}()}),[l]);Object(p.useLayoutEffect)((function(){var e=performance.now();"stopped"===n.current&&(i.current=e,r.current=t,l.clear()),l.addPoint(t);var o={distance:l.totalLength,curve:l.points.length>3,start:l.points.length-3,from:r.current,to:t,timeStamp:e,duration:Math.min(e-i.current,300)};switch(r.current=t,i.current=e,n.current){case"stopped":r.current=t,n.current="idle";break;case"idle":n.current="animating",d(o);break;case"animating":a.current.push(o)}return function(){return clearTimeout(c.current)}}),[t,l])}(n,t.point),Object(p.createElement)("svg",{ref:n,className:"tl-absolute tl-user tl-counter-scaled",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 35 35",fill:"none",fillRule:"evenodd"},Object(p.createElement)("g",{fill:"rgba(0,0,0,.2)",transform:"translate(1,1)"},Object(p.createElement)("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),Object(p.createElement)("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})),Object(p.createElement)("g",{fill:"white"},Object(p.createElement)("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),Object(p.createElement)("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})),Object(p.createElement)("g",{fill:t.color},Object(p.createElement)("path",{d:"m19.751 24.4155-1.844.774-3.1-7.374 1.841-.775z"}),Object(p.createElement)("path",{d:"m13 10.814v11.188l2.969-2.866.428-.139h4.768z"})))}function Ca(e){var t=e.userId,n=e.users;return Object(p.createElement)(p.Fragment,null,Object.values(n).filter((function(e){return e&&e.id!==t})).map((function(e){return Object(p.createElement)(_a,{key:e.id,user:e})})))}var Ea=function(){function e(){var t=this;Object(c.a)(this,e),B(this,"pointer"),B(this,"keyboard"),B(this,"keys",{}),B(this,"isPinching",!1),B(this,"bounds",{minX:0,maxX:640,minY:0,maxY:480,width:640,height:480}),B(this,"zoom",1),B(this,"pointerUpTime",0),B(this,"activePointer"),B(this,"panStart",(function(n){var r,a,i=n.shiftKey,o=n.ctrlKey,s=n.metaKey,c=n.altKey,u={target:"wheel",pointerId:(null==(r=t.pointer)?void 0:r.pointerId)||0,origin:(null==(a=t.pointer)?void 0:a.origin)||[0,0],delta:[0,0],pressure:.5,point:e.getPoint(n,t.bounds),shiftKey:i,ctrlKey:o,metaKey:s,altKey:c,spaceKey:t.keys[" "]};return t.pointer=u,u})),B(this,"pan",(function(n,r){if(!t.pointer||"wheel"!==t.pointer.target)return t.panStart(r);var a=r.shiftKey,i=r.ctrlKey,o=r.metaKey,s=r.altKey,c=t.pointer,u=e.getPoint(r,t.bounds),l=D(T({},c),{target:"wheel",delta:n,point:u,shiftKey:a,ctrlKey:i,metaKey:o,altKey:s,spaceKey:t.keys[" "]});return t.pointer=l,l})),B(this,"keydown",(function(e){var n,r,a=e.shiftKey,i=e.ctrlKey,o=e.metaKey,s=e.altKey;return t.keys[e.key]=!0,{point:(null==(n=t.pointer)?void 0:n.point)||[0,0],origin:(null==(r=t.pointer)?void 0:r.origin)||[0,0],key:e.key,keys:Object.keys(t.keys),shiftKey:a,ctrlKey:i,metaKey:N.isDarwin()?o:i,altKey:s}})),B(this,"keyup",(function(e){var n,r,a=e.shiftKey,i=e.ctrlKey,o=e.metaKey,s=e.altKey;return delete t.keys[e.key],{point:(null==(n=t.pointer)?void 0:n.point)||[0,0],origin:(null==(r=t.pointer)?void 0:r.origin)||[0,0],key:e.key,keys:Object.keys(t.keys),shiftKey:a,ctrlKey:i,metaKey:N.isDarwin()?o:i,altKey:s}}))}return Object(u.a)(e,[{key:"pointerIsValid",value:function(e){if("pointerId"in e&&this.activePointer&&this.activePointer!==e.pointerId)return!1;if("touches"in e){var t=e.changedTouches[0];if(this.activePointer&&this.activePointer!==t.identifier)return!1}return!0}},{key:"touchStart",value:function(t,n){var r=t.shiftKey,a=t.ctrlKey,i=t.metaKey,o=t.altKey,s=t.changedTouches[0];this.activePointer=s.identifier;var c={target:n,pointerId:s.identifier,origin:e.getPoint(s,this.bounds),delta:[0,0],point:e.getPoint(s,this.bounds),pressure:e.getPressure(s),shiftKey:r,ctrlKey:a,metaKey:N.isDarwin()?i:a,altKey:o,spaceKey:this.keys[" "]};return this.pointer=c,c}},{key:"touchEnd",value:function(t,n){var r=t.shiftKey,a=t.ctrlKey,i=t.metaKey,o=t.altKey,s=t.changedTouches[0],c={target:n,pointerId:s.identifier,origin:e.getPoint(s,this.bounds),delta:[0,0],point:e.getPoint(s,this.bounds),pressure:e.getPressure(s),shiftKey:r,ctrlKey:a,metaKey:N.isDarwin()?i:a,altKey:o,spaceKey:this.keys[" "]};return this.pointer=c,this.activePointer=void 0,c}},{key:"touchMove",value:function(t,n){var r=t.shiftKey,a=t.ctrlKey,i=t.metaKey,o=t.altKey,s=t.changedTouches[0],c=this.pointer,u=e.getPoint(s,this.bounds),l=(null==c?void 0:c.point)?v.a.sub(u,c.point):[0,0],d=D(T({origin:u},c),{target:n,pointerId:s.identifier,point:u,delta:l,pressure:e.getPressure(s),shiftKey:r,ctrlKey:a,metaKey:N.isDarwin()?i:a,altKey:o,spaceKey:this.keys[" "]});return this.pointer=d,d}},{key:"pointerDown",value:function(t,n){var r=t.shiftKey,a=t.ctrlKey,i=t.metaKey,o=t.altKey,s=e.getPoint(t,this.bounds);this.activePointer=t.pointerId;var c={target:n,pointerId:t.pointerId,origin:s,point:s,delta:[0,0],pressure:e.getPressure(t),shiftKey:r,ctrlKey:a,metaKey:N.isDarwin()?i:a,altKey:o,spaceKey:this.keys[" "]};return this.pointer=c,c}},{key:"pointerEnter",value:function(t,n){var r=t.shiftKey,a=t.ctrlKey,i=t.metaKey,o=t.altKey,s=e.getPoint(t,this.bounds),c={target:n,pointerId:t.pointerId,origin:s,delta:[0,0],point:s,pressure:e.getPressure(t),shiftKey:r,ctrlKey:a,metaKey:N.isDarwin()?i:a,altKey:o,spaceKey:this.keys[" "]};return this.pointer=c,c}},{key:"pointerMove",value:function(t,n){var r=t.shiftKey,a=t.ctrlKey,i=t.metaKey,o=t.altKey,s=this.pointer,c=e.getPoint(t,this.bounds),u=(null==s?void 0:s.point)?v.a.sub(c,s.point):[0,0],l=D(T({origin:c},s),{target:n,pointerId:t.pointerId,point:c,delta:u,pressure:e.getPressure(t),shiftKey:r,ctrlKey:a,metaKey:N.isDarwin()?i:a,altKey:o,spaceKey:this.keys[" "]});return this.pointer=l,l}},{key:"pointerUp",value:function(t,n){var r=t.shiftKey,a=t.ctrlKey,i=t.metaKey,o=t.altKey,s=this.pointer,c=e.getPoint(t,this.bounds),u=(null==s?void 0:s.point)?v.a.sub(c,s.point):[0,0];this.activePointer=void 0;var l=D(T({origin:c},s),{target:n,pointerId:t.pointerId,point:c,delta:u,pressure:e.getPressure(t),shiftKey:r,ctrlKey:a,metaKey:N.isDarwin()?i:a,altKey:o,spaceKey:this.keys[" "]});return this.pointer=l,this.pointerUpTime=performance.now(),l}},{key:"isDoubleClick",value:function(){if(!this.pointer)return!1;var e=this.pointer,t=e.origin,n=e.point,r=performance.now()-this.pointerUpTime<250&&v.a.dist(t,n)<4;return r&&(this.activePointer=void 0),r}},{key:"clear",value:function(){this.pointer=void 0}},{key:"resetDoubleClick",value:function(){this.pointerUpTime=0}},{key:"pinch",value:function(e,t){var n=this.keys,r=n.shiftKey,a=n.ctrlKey,i=n.metaKey,o=n.altKey,s={pointerId:0,target:"pinch",origin:t,delta:v.a.sub(t,e),point:v.a.sub(v.a.toFixed(e),[this.bounds.minX,this.bounds.minY]),pressure:.5,shiftKey:r,ctrlKey:a,metaKey:N.isDarwin()?i:a,altKey:o,spaceKey:this.keys[" "]};return this.pointer=s,s}},{key:"reset",value:function(){this.pointerUpTime=0,this.pointer=void 0,this.keyboard=void 0,this.activePointer=void 0,this.keys={}}}],[{key:"getPoint",value:function(e,t){return[+e.clientX.toFixed(2)-t.minX,+e.clientY.toFixed(2)-t.minY]}},{key:"getPressure",value:function(e){return"pressure"in e&&+e.pressure.toFixed(2)||.5}},{key:"commandKey",value:function(){return N.isDarwin()?"\u2318":"Ctrl"}}]),e}(),Ia=new Ea;function Pa(e){var t=e.userId,n=e.users,r=e.meta,a=e.page,i=F().shapeUtils;return Object(p.createElement)(p.Fragment,null,Object.values(n).filter(Boolean).filter((function(e){return e.id!==t&&e.selectedIds.length>0})).map((function(e){var t=e.selectedIds.map((function(e){return a.shapes[e]})).filter(Boolean);if(0===t.length)return null;var n=U.getCommonBounds(t.map((function(e){return i[e.type].getBounds(e)})));return Object(p.createElement)(p.Fragment,{key:e.id+"_shapes"},Object(p.createElement)("div",{className:"tl-absolute tl-user-indicator-bounds",style:{backgroundColor:e.color+"0d",borderColor:e.color+"78",transform:"translate(".concat(n.minX,"px, ").concat(n.minY,"px)"),width:n.width,height:n.height,pointerEvents:"none"}}),t.map((function(t){return Object(p.createElement)(xa,{key:"".concat(e.id,"_").concat(t.id,"_indicator"),shape:t,user:e,meta:r,isHovered:!0})})))})))}var Ma=Object(f.b)((function(e){var t=e.snapLines;return Object(p.createElement)(p.Fragment,null,t.map((function(e,t){return Object(p.createElement)(Aa,{key:t,snapLine:e})})))})),Aa=Object(f.b)((function(e){var t=e.snapLine,n=U.getBoundsFromPoints(t);return Object(p.createElement)(p.Fragment,null,Object(p.createElement)("line",{className:"tl-snap-line",x1:n.minX,y1:n.minY,x2:n.maxX,y2:n.maxY}),t.map((function(e,t){var n=Object(s.a)(e,2),r=n[0],a=n[1];return Object(p.createElement)("use",{key:t,href:"#tl-snap-point",x:r,y:a})})))})),Ta=[[-1,.15,64],[.05,.375,16],[.15,1,4],[.7,2.5,1]];function Da(e){var t=e.grid,n=e.camera;return Object(p.createElement)("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},Object(p.createElement)("defs",null,Ta.map((function(e,r){var a=Object(s.a)(e,3),i=a[0],o=a[1],c=a[2]*t*n.zoom,u=n.point[0]*n.zoom,l=n.point[1]*n.zoom,d=u>0?u%c:c+u%c,f=l>0?l%c:c+l%c,h=n.zoom<o?U.modulate(n.zoom,[i,o],[0,1]):1;return Object(p.createElement)("pattern",{key:"grid-pattern-".concat(r),id:"grid-".concat(r),width:c,height:c,patternUnits:"userSpaceOnUse"},Object(p.createElement)("circle",{className:"tl-grid-dot",cx:d,cy:f,r:1,opacity:h}))}))),Ta.map((function(e,t){return Object(p.createElement)("rect",{key:"grid-rect-".concat(t),width:"100%",height:"100%",fill:"url(#grid-".concat(t,")")})})))}var Ra=Object(f.b)((function(e){var t=e.camera,n=t.zoom,r=t.point,a=e.children,i=2.5/n;return Object(p.createElement)("svg",{className:"tl-overlay"},Object(p.createElement)("defs",null,Object(p.createElement)("g",{id:"tl-snap-point"},Object(p.createElement)("path",{className:"tl-snap-point",d:"M ".concat(-i,",").concat(-i," L ").concat(i,",").concat(i," M ").concat(-i,",").concat(i," L ").concat(i,",").concat(-i)}))),Object(p.createElement)("g",{transform:"scale(".concat(n,") translate(").concat(r,")")},a))})),Ba=Object(f.b)((function(e){var t=e.id,n=e.page,r=e.pageState,a=e.assets,i=e.snapLines,o=e.grid,s=e.users,c=e.userId,u=e.meta,d=e.performanceMode,f=e.externalContainerRef,g=e.hideHandles,m=e.hideBounds,y=e.hideIndicators,w=e.hideBindingHandles,O=e.hideCloneHandles,k=e.hideResizeHandles,S=e.hideRotateHandle,x=e.hideGrid,j=e.onBoundsChange,_=Object(p.useRef)(null),C=Object(p.useRef)(null),E=Object(p.useRef)(null);Ia.zoom=r.camera.zoom,function(e,t){var n=F(),r=n.inputs,a=n.callbacks,i=Object(p.useRef)(!1),o=Object(p.useCallback)((function(){var n,o;if(i.current){var s=null==(n=e.current)?void 0:n.getBoundingClientRect();if(s){var c={minX:s.left,maxX:s.left+s.width,minY:s.top,maxY:s.top+s.height,width:s.width,height:s.height};r.bounds=c,t(c),null==(o=a.onBoundsChange)||o.call(a,c)}}else i.current=!0}),[e,r,a.onBoundsChange]);Object(p.useEffect)((function(){var e=N.debounce(o,100);return window.addEventListener("scroll",e),window.addEventListener("resize",e),function(){window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}}),[]),Object(p.useEffect)((function(){var t=new ResizeObserver((function(e){r.isPinching||e[0].contentRect&&o()}));return e.current&&t.observe(e.current),function(){t.disconnect()}}),[e,r]),Object(p.useEffect)((function(){o()}),[e])}(_,j),function(e,t){var n=Object(p.useRef)(void 0),r=Object(p.useRef)(void 0),a=Object(p.useRef)([0,0]),i=F(),o=i.inputs,s=i.bounds,c=i.callbacks;Object(p.useEffect)((function(){var e=function(e){return e.preventDefault()};return document.addEventListener("gesturestart",e),document.addEventListener("gesturechange",e),function(){document.removeEventListener("gesturestart",e),document.removeEventListener("gesturechange",e)}}),[]);var u=Object(p.useCallback)((function(e){var t,n,r,a,i=e.delta,u=e.event;if(u.preventDefault(),!u.altKey&&!u.ctrlKey||0!==u.buttons){var d=u.shiftKey?[i[1],0]:Object(l.a)(i);if(!o.isPinching&&!v.a.isEqual(d,[0,0])){var f=o.pan(d,u);null==(a=c.onPan)||a.call(c,f,u)}}else{var p=null!=(n=null==(t=o.pointer)?void 0:t.point)?n:[s.width/2,s.height/2],h=o.pinch(p,p),g=[].concat(Object(l.a)(p),[i[1]]);null==(r=c.onZoom)||r.call(c,D(T({},h),{delta:g}),u)}}),[c,o,s]),d=Object(p.useCallback)((function(e){var i,s=e.origin,u=e.event,l=t.current;if(l&&(u.target===l||l.contains(u.target))){var d=o.pinch(s,s);o.isPinching=!0,null==(i=c.onPinchStart)||i.call(c,d,u),r.current=d.point,n.current=d.origin,a.current=[0,0]}}),[c,o,s]),f=Object(p.useCallback)((function(e){var i,s=e.origin,u=e.event,d=e.offset,f=t.current;if((u.target===f||(null==f?void 0:f.contains(u.target)))&&n.current){var p=o.pinch(s,n.current),h=v.a.sub(p.delta,a.current);a.current=p.delta,null==(i=c.onPinch)||i.call(c,D(T({},p),{point:p.point,origin:n.current,delta:[].concat(Object(l.a)(h),[d[0]])}),u),r.current=s}}),[c,o,s]),g=Object(p.useCallback)((function(e){var i,s=e.origin,u=e.event,l=t.current;if(u.target===l||(null==l?void 0:l.contains(u.target))){var d=o.pinch(s,s);o.isPinching=!1,null==(i=c.onPinchEnd)||i.call(c,d,u),r.current=void 0,n.current=void 0,a.current=[0,0]}}),[]);Object(h.useGesture)({onWheel:u,onPinchStart:d,onPinch:f,onPinchEnd:g},{target:t,eventOptions:{passive:!1},pinch:{from:e,scaleBounds:function(){return{from:o.zoom,max:5,min:.1}}}})}(r.camera.zoom,f||_),function(){var e=F().callbacks;Object(p.useEffect)((function(){function t(){var t;null==(t=e.onShapeBlur)||t.call(e)}return U.isMobileSafari()?(document.addEventListener("focusout",t),function(){return document.removeEventListener("focusout",t)}):function(){return null}}),[e])}(),function(e){var t=F().bounds;Object(p.useEffect)((function(){var n=function(e){e.preventDefault()},r=function(e){var n=e.touches[0].pageX,r=e.touches[0].radiusX||0;(n-r<10||n+r>t.width-10)&&e.preventDefault()},a=e.current;return a?(a.addEventListener("touchstart",n),a.addEventListener("gestureend",n),a.addEventListener("gesturechange",n),a.addEventListener("gesturestart",n),a.addEventListener("touchstart",r),function(){a&&(a.removeEventListener("touchstart",n),a.removeEventListener("gestureend",n),a.removeEventListener("gesturechange",n),a.removeEventListener("gesturestart",n),a.removeEventListener("touchstart",r))}):function(){}}),[e,t.width])}(_),function(e,t,n){var r=Object(p.useRef)(),a=Object(p.useRef)();Object(p.useLayoutEffect)((function(){return Rn((function(){var i=n.camera,o=i.zoom,s=i.point,c=o!==r.current,u=s!==a.current;if(r.current=o,a.current=s,c||u){var l=e.current;if(t&&"current"in t){var d=t.current;c&&d&&d.style.setProperty("--tl-zoom",o.toString()),l&&l.style.setProperty("transform","scale(".concat(o,") translateX(").concat(s[0],"px) translateY(").concat(s[1],"px)"))}}}))}),[n])}(E,C,r),function(e,t){Object(p.useLayoutEffect)((function(){if(t&&"current"in t){var n=null==t?void 0:t.current;if(!n)return;switch(e){case b.TransformSelected:n.style.setProperty("--tl-performance-all","auto"),n.style.setProperty("--tl-performance-selected","transform, contents");break;case b.TransformAll:n.style.setProperty("--tl-performance-all","transform, contents"),n.style.setProperty("--tl-performance-selected","transform, contents");break;case b.TranslateSelected:n.style.setProperty("--tl-performance-all","auto"),n.style.setProperty("--tl-performance-selected","transform");break;case b.TranslateAll:n.style.setProperty("--tl-performance-all","transform"),n.style.setProperty("--tl-performance-selected","transform");break;default:n.style.setProperty("--tl-performance-all","auto"),n.style.setProperty("--tl-performance-selected","auto")}}}),[e])}(d,C),function(){var e=F(),t=e.inputs,n=e.callbacks;Object(p.useEffect)((function(){var e=function(e){var r;null==(r=n.onKeyDown)||r.call(n,e.key,t.keydown(e),e)},r=function(e){var r;t.keyup(e),null==(r=n.onKeyUp)||r.call(n,e.key,t.keyup(e),e)};return window.addEventListener("keydown",e),window.addEventListener("keyup",r),function(){window.removeEventListener("keydown",e),window.removeEventListener("keyup",r)}}),[t,n])}();var I=function(){var e=F(),t=e.callbacks,n=e.inputs;return Object(p.useMemo)((function(){return{onPointerDown:function(e){var r,a;if(!e.dead&&(e.dead=!0,n.pointerIsValid(e)&&(0===e.button||1===e.button)&&n.pointerIsValid(e))){e.currentTarget.setPointerCapture(e.pointerId);var i=n.pointerDown(e,"canvas");0!==e.button&&1!==e.button||(null==(r=t.onPointCanvas)||r.call(t,i,e),null==(a=t.onPointerDown)||a.call(t,i,e))}},onPointerMove:function(e){var r,a;if(!e.dead&&(e.dead=!0,n.pointerIsValid(e))){var i=n.pointerMove(e,"canvas");e.currentTarget.hasPointerCapture(e.pointerId)&&(null==(r=t.onDragCanvas)||r.call(t,i,e)),null==(a=t.onPointerMove)||a.call(t,i,e)}},onPointerUp:function(e){var r,a,i,o;if(!e.dead&&(e.dead=!0,(0===e.button||1===e.button)&&(n.activePointer=void 0,n.pointerIsValid(e)))){var s=n.isDoubleClick(),c=n.pointerUp(e,"canvas");e.currentTarget.hasPointerCapture(e.pointerId)&&(null==(r=e.currentTarget)||r.releasePointerCapture(e.pointerId)),!s||c.altKey||c.metaKey||null==(a=t.onDoubleClickCanvas)||a.call(t,c,e),null==(i=t.onReleaseCanvas)||i.call(t,c,e),null==(o=t.onPointerUp)||o.call(t,c,e)}},onDrop:t.onDrop,onDragOver:t.onDragOver}}),[t,n])}();return Object(p.createElement)("div",{id:t,className:"tl-container",ref:C},Object(p.createElement)("div",T({id:"canvas",className:"tl-absolute tl-canvas",ref:_},I),!x&&o&&Object(p.createElement)(Da,{grid:o,camera:r.camera}),Object(p.createElement)("div",{ref:E,className:"tl-absolute tl-layer","data-testid":"layer"},Object(p.createElement)(ja,{page:n,pageState:r,assets:a,hideBounds:m,hideIndicators:y,hideHandles:g,hideBindingHandles:w,hideCloneHandles:O,hideResizeHandles:k,hideRotateHandle:S,meta:u}),s&&c&&Object(p.createElement)(Pa,{userId:c,users:s,page:n,meta:u}),r.brush&&Object(p.createElement)(aa,{brush:r.brush}),s&&Object(p.createElement)(Ca,{userId:c,users:s})),Object(p.createElement)(Ra,{camera:r.camera},i&&Object(p.createElement)(Ma,{snapLines:i}))))})),La=Object(f.b)((function(e){var t=e,n=t.id,r=void 0===n?"tl":n,a=t.shapeUtils,i=t.page,o=t.pageState,c=t.assets,u=void 0===c?Fa:c,l=t.users,d=t.userId,f=t.theme,h=t.meta,v=t.snapLines,g=t.grid,m=t.containerRef,b=t.performanceMode,y=t.hideHandles,w=void 0!==y&&y,O=t.hideIndicators,k=void 0!==O&&O,S=t.hideCloneHandles,x=void 0!==S&&S,j=t.hideBindingHandles,_=void 0!==j&&j,C=t.hideResizeHandles,E=void 0!==C&&C,I=t.hideRotateHandles,P=void 0!==I&&I,M=t.hideBounds,A=void 0!==M&&M,B=t.hideGrid,F=void 0===B||B,H=R(t,["id","shapeUtils","page","pageState","assets","users","userId","theme","meta","snapLines","grid","containerRef","performanceMode","hideHandles","hideIndicators","hideCloneHandles","hideBindingHandles","hideResizeHandles","hideRotateHandles","hideBounds","hideGrid"]);$(f,"#"+r);var z=Object(p.useRef)(null),N=Object(p.useRef)(o);Object(p.useEffect)((function(){N.current=o}),[o]);var U=Object(p.useState)((function(){return{callbacks:H,shapeUtils:a,rSelectionBounds:z,rPageState:N,bounds:{minX:0,minY:0,maxX:1/0,maxY:1/0,width:1/0,height:1/0},inputs:new Ea}})),K=Object(s.a)(U,2),V=K[0],W=K[1],X=Object(p.useCallback)((function(e){W((function(t){return D(T({},t),{bounds:e})}))}),[]);return Object(p.createElement)(L.Provider,{value:V},Object(p.createElement)(Ba,{id:r,page:i,pageState:o,assets:u,snapLines:v,grid:g,users:l,userId:d,externalContainerRef:m,hideBounds:A,hideIndicators:k,hideHandles:w,hideCloneHandles:x,hideBindingHandles:_,hideRotateHandle:P,hideResizeHandles:E,hideGrid:F,onBoundsChange:X,performanceMode:b,meta:h}))})),Fa={},Ha=Object(p.forwardRef)((function(e,t){var n=e,r=n.children,a=n.className,i=void 0===a?"":a,o=R(n,["children","className"]);return Object(p.createElement)(f.a,null,(function(){return Object(p.createElement)("div",T({ref:t,className:"tl-positioned-div ".concat(i),draggable:!1},o),Object(p.createElement)("div",{className:"tl-inner-div"},r))}))})),za=function e(){var t=this;Object(c.a)(this,e),B(this,"refMap",new Map),B(this,"boundsCache",new WeakMap),B(this,"showCloneHandles",!1),B(this,"hideBounds",!1),B(this,"isStateful",!1),B(this,"shouldRender",(function(e,t){return!0})),B(this,"getRef",(function(e){return t.refMap.has(e.id)||t.refMap.set(e.id,Object(p.createRef)()),t.refMap.get(e.id)})),B(this,"hitTestBounds",(function(e,n){var r=t.getBounds(e),a=U.getRotatedCorners(r,e.rotation);return a.every((function(e){return U.pointInBounds(e,n)}))||Object(g.m)(a,n).length>0})),B(this,"getRotatedBounds",(function(e){return U.getBoundsFromPoints(U.getRotatedCorners(t.getBounds(e),e.rotation))}))};B(za,"Component",(function(e){return Object(p.forwardRef)(e)})),B(za,"Indicator",(function(e){return e}))}).call(this,n(31))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(22);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(c){a=!0,i=c}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}}(e,t)||Object(r.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(24);var a=n(22);function i(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(a.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,n){e.exports=n(47)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(2);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(22);function a(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Object(r.a)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw o}}}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return x})),n.d(t,"a",(function(){return _}));var r=n(19),a=n(0),i=n.n(a);if(!a.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!r.d)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var o=n(21);function s(e){e()}function c(e){return Object(r.c)(e)}var u="undefined"===typeof FinalizationRegistry?void 0:FinalizationRegistry;function l(e){return{reaction:e,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+d}}var d=1e4;var f=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var p=u?function(e){var t=new Map,n=1,r=new e((function(e){var n=t.get(e);n&&(n.reaction.dispose(),t.delete(e))}));return{addReactionToTrack:function(e,a,i){var o=n++;return r.register(i,o,e),e.current=l(a),e.current.finalizationRegistryCleanupToken=o,t.set(o,e.current),e.current},recordReactionAsCommitted:function(e){r.unregister(e),e.current&&e.current.finalizationRegistryCleanupToken&&t.delete(e.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}(u):function(){var e,t=new Set;function n(){void 0===e&&(e=setTimeout(r,1e4))}function r(){e=void 0;var r=Date.now();t.forEach((function(e){var n=e.current;n&&r>=n.cleanAt&&(n.reaction.dispose(),e.current=null,t.delete(e))})),t.size>0&&n()}return{addReactionToTrack:function(e,r,a){var i;return e.current=l(r),i=e,t.add(i),n(),e.current},recordReactionAsCommitted:function(e){t.delete(e)},forceCleanupTimerToRunNowForTests:function(){e&&(clearTimeout(e),r())},resetCleanupScheduleForTests:function(){var n,r;if(t.size>0){try{for(var a=f(t),i=a.next();!i.done;i=a.next()){var o=i.value,s=o.current;s&&(s.reaction.dispose(),o.current=null)}}catch(c){n={error:c}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}t.clear()}e&&(clearTimeout(e),e=void 0)}}}(),h=p.addReactionToTrack,v=p.recordReactionAsCommitted,g=(p.resetCleanupScheduleForTests,p.forceCleanupTimerToRunNowForTests,!1);function m(){return g}var b=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o};function y(e){return"observer".concat(e)}var w=function(){};function O(){return new w}function k(e,t){if(void 0===t&&(t="observed"),m())return e();var n=b(i.a.useState(O),1)[0],a=b(i.a.useState(),2)[1],o=function(){return a([])},s=i.a.useRef(null);if(!s.current)var u=new r.a(y(t),(function(){l.mounted?o():l.changedBeforeMount=!0})),l=h(s,u,n);var d,f,p=s.current.reaction;if(i.a.useDebugValue(p,c),i.a.useEffect((function(){return v(s),s.current?(s.current.mounted=!0,s.current.changedBeforeMount&&(s.current.changedBeforeMount=!1,o())):(s.current={reaction:new r.a(y(t),(function(){o()})),mounted:!0,changedBeforeMount:!1,cleanAt:1/0},o()),function(){s.current.reaction.dispose(),s.current=null}}),[]),p.track((function(){try{d=e()}catch(t){f=t}})),f)throw f;return d}var S=function(){return(S=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function x(e,t){if(m())return e;var n,r,i,o=S({forwardRef:!1},t),s=e.displayName||e.name,c=function(t,n){return k((function(){return e(t,n)}),s)};return""!==s&&(c.displayName=s),e.contextTypes&&(c.contextTypes=e.contextTypes),n=o.forwardRef?Object(a.memo)(Object(a.forwardRef)(c)):Object(a.memo)(c),r=e,i=n,Object.keys(r).forEach((function(e){j[e]||Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(r,e))})),n}var j={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function _(e){var t=e.children,n=e.render,r=t||n;return"function"!==typeof r?null:k(r)}_.displayName="Observer";var C;(C=o.unstable_batchedUpdates)||(C=s),Object(r.b)({reactionScheduler:C})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(25);function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Object(r.a)(e,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(20),a=n(26);function i(e){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=n(5);function s(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?Object(o.a)(e):t}function c(e){var t=Object(a.a)();return function(){var n,a=Object(r.a)(e);if(t){var i=Object(r.a)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return s(this,n)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return ae})),n.d(t,"b",(function(){return re})),n.d(t,"c",(function(){return W})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return v})),n.d(t,"f",(function(){return j})),n.d(t,"g",(function(){return A})),n.d(t,"h",(function(){return w})),n.d(t,"i",(function(){return oe})),n.d(t,"j",(function(){return se})),n.d(t,"k",(function(){return k})),n.d(t,"l",(function(){return ce})),n.d(t,"m",(function(){return ue})),n.d(t,"n",(function(){return ie})),n.d(t,"o",(function(){return le})),n.d(t,"p",(function(){return O})),n.d(t,"q",(function(){return de}));var r=n(6),a=n(5),i=n(20);function o(e,t,n){return(o="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(i.a)(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}var s=n(12),c=n(13),u=n(2),l=n(9),d=n(16),f=n(10),p=n(4),h=n(17);function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function y(e){return e?e[0].toUpperCase()+e.slice(1):""}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=b[e],a=r&&r[t]||t;return"on"+y(e)+y(a)+(n?"Capture":"")}function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=b[e],r=n&&n[t]||t;return e+r}function k(e){return"touches"in e}function S(e){return k(e)?function(e){return"touchend"===e.type?e.changedTouches:e.targetTouches}(e)[0]:e}function x(e,t){var n=t.clientX-e.clientX,r=t.clientY-e.clientY,a=(t.clientX+e.clientX)/2,i=(t.clientY+e.clientY)/2,o=Math.hypot(n,r);return{angle:-180*Math.atan2(n,r)/Math.PI,distance:o,origin:[a,i]}}function j(e){return function(e){return Array.from(e.touches).filter((function(t){var n,r;return t.target===e.currentTarget||(null===(n=e.currentTarget)||void 0===n||null===(r=n.contains)||void 0===r?void 0:r.call(n,t.target))}))}(e).map((function(e){return e.identifier}))}function _(e,t){var n=Array.from(e.touches).filter((function(e){return t.includes(e.identifier)})),r=Object(p.a)(n,2);return x(r[0],r[1])}function C(e){var t=S(e);return k(e)?t.identifier:t.pointerId}function E(e){var t=S(e);return[t.clientX,t.clientY]}function I(e){var t=e.deltaX,n=e.deltaY,r=e.deltaMode;return 1===r?(t*=40,n*=40):2===r&&(t*=800,n*=800),[t,n]}function P(e){if("function"===typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,n)}return e}function M(){}function A(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?M:1===t.length?t[0]:function(){var e,n,r=Object(f.a)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;e=a.apply(this,arguments)||e}}catch(i){r.e(i)}finally{r.f()}return e}}function T(e,t){return Object.assign({},t,e||{})}var D=function(){function e(t,n,r){Object(l.a)(this,e),this.ctrl=t,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}return Object(d.a)(e,[{key:"reset",value:function(){var e=this.state,t=this.shared,n=this.ingKey,r=this.args;t[n]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=0,e.direction=[0,0],e.distance=[0,0],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}},{key:"start",value:function(e){var t=this.state,n=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=n.from?P(n.from,t):t.offset,t.offset=t.lastOffset),t.startTime=t.timeStamp=e.timeStamp}},{key:"computeValues",value:function(e){var t=this.state;t._values=e,t.values=this.config.transform(e)}},{key:"computeInitial",value:function(){var e=this.state;e._initial=e._values,e.initial=e.values}},{key:"compute",value:function(e){var t=this.state,n=this.config,r=this.shared;t.args=this.args;var a=0;if(e&&(t.event=e,n.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,function(e){var t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){var n=e.shiftKey,r=e.altKey,a=e.metaKey,i=e.ctrlKey;Object.assign(t,{shiftKey:n,altKey:r,metaKey:a,ctrlKey:i})}return t}(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,a=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){var i=t._delta.map(Math.abs);h.a.addTo(t._distance,i)}var o=Object(p.a)(t._movement,2),s=o[0],c=o[1],u=Object(p.a)(n.threshold,2),l=u[0],d=u[1],f=t._step,v=t.values;if(n.hasCustomTransform?(!1===f[0]&&(f[0]=Math.abs(s)>=l&&v[0]),!1===f[1]&&(f[1]=Math.abs(c)>=d&&v[1])):(!1===f[0]&&(f[0]=Math.abs(s)>=l&&Math.sign(s)*l),!1===f[1]&&(f[1]=Math.abs(c)>=d&&Math.sign(c)*d)),t.intentional=!1!==f[0]||!1!==f[1],t.intentional){var g=[0,0];if(n.hasCustomTransform){var m=Object(p.a)(v,2),b=m[0],y=m[1];g[0]=!1!==f[0]?b-f[0]:0,g[1]=!1!==f[1]?y-f[1]:0}else g[0]=!1!==f[0]?s-f[0]:0,g[1]=!1!==f[1]?c-f[1]:0;if(this.intent&&this.intent(g),(t._active&&!t._blocked||t.active)&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e)){t.first&&("bounds"in n&&(t._bounds=P(n.bounds,t)),this.setup&&this.setup()),t.movement=g;var w=t.offset;if(this.computeOffset(),!t.last||a>32){t.delta=h.a.sub(t.offset,w);var O=t.delta.map(Math.abs);h.a.addTo(t.distance,O),t.direction=t.delta.map(Math.sign),!t.first&&a>0&&(t.velocity=[O[0]/a,O[1]/a])}}var k=t._active&&n.rubberband||[0,0];t.offset=Object(h.b)(t._bounds,t.offset,k),this.computeMovement()}}},{key:"emit",value:function(){var e=this.state,t=this.shared,n=this.config;if(e._active||this.clean(),!e._blocked&&e.intentional||e._force||n.triggerAllEvents){var r=this.handler(m(m(m({},t),e),{},Object(u.a)({},this.aliasKey,e.values)));void 0!==r&&(e.memo=r)}}},{key:"clean",value:function(){this.eventStore.clean(),this.timeoutStore.clean()}},{key:"state",get:function(){return this.ctrl.state[this.key]},set:function(e){this.ctrl.state[this.key]=e}},{key:"shared",get:function(){return this.ctrl.state.shared}},{key:"eventStore",get:function(){return this.ctrl.gestureEventStores[this.key]}},{key:"timeoutStore",get:function(){return this.ctrl.gestureTimeoutStores[this.key]}},{key:"config",get:function(){return this.ctrl.config[this.key]}},{key:"sharedConfig",get:function(){return this.ctrl.config.shared}},{key:"handler",get:function(){return this.ctrl.handlers[this.key]}}]),e}();var R=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),v(Object(a.a)(e),"aliasKey","xy"),e}return Object(d.a)(n,[{key:"reset",value:function(){o(Object(i.a)(n.prototype),"reset",this).call(this),this.state.axis=void 0}},{key:"init",value:function(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}},{key:"computeOffset",value:function(){this.state.offset=h.a.add(this.state.lastOffset,this.state.movement)}},{key:"computeMovement",value:function(){this.state.movement=h.a.sub(this.state.offset,this.state.lastOffset)}},{key:"intent",value:function(e){this.state.axis=this.state.axis||function(e){var t=Object(p.a)(e,2),n=t[0],r=t[1],a=Math.abs(n)-Math.abs(r);return a>0?"x":a<0?"y":void 0}(e),this.state._blocked=(this.config.lockDirection||!!this.config.axis)&&!this.state.axis||!!this.config.axis&&this.config.axis!==this.state.axis,this.state._blocked||(this.config.axis||this.config.lockDirection)&&function(e,t){switch(t){case"x":e[1]=0;break;case"y":e[0]=0}}(e,this.state.axis)}}]),n}(D),B=function(e){return e},L=.15,F={enabled:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e},preventDefault:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e},triggerAllEvents:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e},rubberband:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case!0:return[L,L];case!1:return[0,0];default:return h.a.toVector(e)}},from:function(e){return"function"===typeof e?e:null!=e?h.a.toVector(e):void 0},transform:function(e,t,n){var r=e||n.shared.transform;return this.hasCustomTransform=!!r,r||B},threshold:function(e){return h.a.toVector(e,0)}};var H=m(m({},F),{},{axis:function(e,t,n){var r=n.axis;if(this.lockDirection="lock"===r,!this.lockDirection)return r},bounds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("function"===typeof e)return function(t){return H.bounds(e(t))};if("current"in e)return function(){return e.current};if("function"===typeof HTMLElement&&e instanceof HTMLElement)return e;var t=e.left,n=void 0===t?-1/0:t,r=e.right,a=void 0===r?1/0:r,i=e.top,o=void 0===i?-1/0:i,s=e.bottom,c=void 0===s?1/0:s;return[[n,a],[o,c]]}}),z=10,N={ArrowRight:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return[z*e,0]},ArrowLeft:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return[-10*e,0]},ArrowUp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return[0,-10*e]},ArrowDown:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return[0,z*e]}},U=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),v(Object(a.a)(e),"ingKey","dragging"),e}return Object(d.a)(n,[{key:"reset",value:function(){o(Object(i.a)(n.prototype),"reset",this).call(this);var e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}},{key:"setup",value:function(){var e=this.state;if(e._bounds instanceof HTMLElement){var t=e._bounds.getBoundingClientRect(),n=e.currentTarget.getBoundingClientRect(),r={left:t.left-n.left+e.offset[0],right:t.right-n.right+e.offset[0],top:t.top-n.top+e.offset[1],bottom:t.bottom-n.bottom+e.offset[1]};e._bounds=H.bounds(r)}}},{key:"cancel",value:function(){var e=this,t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout((function(){e.compute(),e.emit()}),0))}},{key:"setActive",value:function(){this.state._active=this.state._pointerActive||this.state._keyboardActive}},{key:"clean",value:function(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,o(Object(i.a)(n.prototype),"clean",this).call(this)}},{key:"pointerDown",value:function(e){var t=this.config,n=this.state;(null==e.buttons||(Array.isArray(t.pointerButtons)?t.pointerButtons.includes(e.buttons):-1===t.pointerButtons||t.pointerButtons===e.buttons))&&(this.ctrl.setEventIds(e),t.pointerCapture&&e.target.setPointerCapture(e.pointerId),n._pointerActive||(this.start(e),this.setupPointer(e),n._pointerId=C(e),n._pointerActive=!0,this.computeValues(E(e)),this.computeInitial(),t.preventScroll?this.setupScrollPrevention(e):t.delay>0?this.setupDelayTrigger(e):this.startPointerDrag(e)))}},{key:"startPointerDrag",value:function(e){var t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}},{key:"pointerMove",value:function(e){var t=this.state,n=this.config;if(t._pointerActive&&(t.type!==e.type||e.timeStamp!==t.timeStamp)){var r=C(e);if(!t._pointerId||r===t._pointerId){var a=E(e);return document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=h.a.sub(a,t._values),this.computeValues(a)),h.a.addTo(t._movement,t._delta),this.compute(e),t._delayed?(this.timeoutStore.remove("dragDelay"),t.active=!1,void this.startPointerDrag(e)):n.preventScroll&&!t._preventScroll?t.axis?t.axis===n.preventScrollAxis||"xy"===n.preventScrollAxis?(t._active=!1,void this.clean()):(this.timeoutStore.remove("startPointerDrag"),void this.startPointerDrag(e)):void 0:void this.emit()}}}},{key:"pointerUp",value:function(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch(x){0}var t=this.state,n=this.config;if(t._pointerActive){var r=C(e);if(!t._pointerId||r===t._pointerId){this.state._pointerActive=!1,this.setActive(),this.compute(e);var a=Object(p.a)(t._distance,2),i=a[0],o=a[1];if(t.tap=i<=3&&o<=3,t.tap&&n.filterTaps)t._force=!0;else{var s=Object(p.a)(t.direction,2),c=s[0],u=s[1],l=Object(p.a)(t.velocity,2),d=l[0],f=l[1],h=Object(p.a)(t.movement,2),v=h[0],g=h[1],m=Object(p.a)(n.swipe.velocity,2),b=m[0],y=m[1],w=Object(p.a)(n.swipe.distance,2),O=w[0],k=w[1],S=n.swipe.duration;t.elapsedTime<S&&(Math.abs(d)>b&&Math.abs(v)>O&&(t.swipe[0]=c),Math.abs(f)>y&&Math.abs(g)>k&&(t.swipe[1]=u))}this.emit()}}}},{key:"pointerClick",value:function(e){this.state.tap||(e.preventDefault(),e.stopPropagation())}},{key:"setupPointer",value:function(e){var t=this.config,n=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"end",this.pointerUp.bind(this)))}},{key:"pointerClean",value:function(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}},{key:"preventScroll",value:function(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}},{key:"setupScrollPrevention",value:function(e){!function(e){"persist"in e&&"function"===typeof e.persist&&e.persist()}(e),this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1}),this.eventStore.add(this.sharedConfig.window,"touch","end",this.clean.bind(this),{passive:!1}),this.eventStore.add(this.sharedConfig.window,"touch","cancel",this.clean.bind(this),{passive:!1}),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScroll,e)}},{key:"setupDelayTrigger",value:function(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",this.startPointerDrag.bind(this),this.config.delay,e)}},{key:"keyDown",value:function(e){var t=N[e.key];if(t){var n=this.state,r=e.shiftKey?10:e.altKey?.1:1;n._delta=t(r),this.start(e),n._keyboardActive=!0,h.a.addTo(n._movement,n._delta),this.compute(e),this.emit()}}},{key:"keyUp",value:function(e){e.key in N&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}},{key:"bind",value:function(e){var t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this))),e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this)),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0})}}]),n}(R);var K="undefined"!==typeof window&&window.document&&window.document.createElement;function V(){return K&&"ontouchstart"in window}var W={isBrowser:K,gesture:function(){try{return"constructor"in GestureEvent}catch(e){return!1}}(),touch:V(),touchscreen:V()||K&&window.navigator.maxTouchPoints>1,pointer:K&&"onpointerdown"in window,pointerLock:K&&"exitPointerLock"in window.document},X=m(m({},H),{},{pointerLock:function(e,t,n){var r=n.pointer,a=(r=void 0===r?{}:r).lock,i=void 0!==a&&a,o=r.touch,s=void 0!==o&&o;return this.useTouch=W.touch&&s,W.pointerLock&&i},device:function(e,t){return this.useTouch?"touch":this.pointerLock?"mouse":W.pointer?"pointer":W.touch?"touch":"mouse"},preventScroll:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>2?arguments[2]:void 0,n=t.preventScrollAxis,r=void 0===n?"y":n;return r&&(this.preventScrollAxis=r),!!W.touchscreen&&("number"===typeof e?e:!!e&&250)},pointerCapture:function(e,t,n){var r=n.pointer,a=(r=void 0===r?{}:r).capture,i=void 0===a||a,o=r.buttons,s=void 0===o?1:o;return this.pointerButtons=s,!this.pointerLock&&"pointer"===this.device&&i},threshold:function(e,t,n){var r=n.filterTaps,a=void 0!==r&&r,i=n.axis,o=void 0===i?void 0:i,s=h.a.toVector(e,a?3:o?1:0);return this.filterTaps=a,s},swipe:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.velocity,n=void 0===t?.5:t,r=e.distance,a=void 0===r?50:r,i=e.duration,o=void 0===i?250:i;return{velocity:this.transform(h.a.toVector(n)),distance:this.transform(h.a.toVector(a)),duration:o}},delay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case!0:return 180;case!1:return 0;default:return e}}});var Y=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),v(Object(a.a)(e),"ingKey","pinching"),v(Object(a.a)(e),"aliasKey","da"),e}return Object(d.a)(n,[{key:"init",value:function(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}},{key:"reset",value:function(){o(Object(i.a)(n.prototype),"reset",this).call(this);var e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}},{key:"computeOffset",value:function(){var e=this.state,t=e.type,n=e.movement,r=e.lastOffset;this.state.offset="wheel"===t?h.a.add(n,r):[(1+n[0])*r[0],n[1]+r[1]]}},{key:"computeMovement",value:function(){var e=this.state,t=e.offset,n=e.lastOffset;this.state.movement=[t[0]/n[0],t[1]-n[1]]}},{key:"intent",value:function(e){var t=this.state;if(!t.axis){var n=30*Math.abs(e[0])-Math.abs(e[1]);n<0?t.axis="angle":n>0&&(t.axis="scale")}this.config.lockDirection&&("scale"===t.axis?e[1]=0:"angle"===t.axis&&(e[0]=0))}},{key:"cancel",value:function(){var e=this,t=this.state;t.canceled||setTimeout((function(){t.canceled=!0,t._active=!1,e.compute(),e.emit()}),0)}},{key:"touchStart",value:function(e){this.ctrl.setEventIds(e);var t=this.state,n=this.ctrl.touchIds;if((!t._active||!t._touchIds.every((function(e){return n.has(e)})))&&!(n.size<2)){this.start(e),t._touchIds=Array.from(n).slice(0,2);var r=_(e,t._touchIds);this.pinchStart(e,r)}}},{key:"pointerStart",value:function(e){if(null==e.buttons||e.buttons%2===1){this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);var t=this.state,n=t._pointerEvents,a=this.ctrl.pointerIds;if((!t._active||!Array.from(n.keys()).every((function(e){return a.has(e)})))&&(n.size<2&&n.set(e.pointerId,e),!(t._pointerEvents.size<2))){this.start(e);var i=x.apply(void 0,Object(r.a)(Array.from(n.values())));this.pinchStart(e,i)}}}},{key:"pinchStart",value:function(e,t){this.state.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}},{key:"touchMove",value:function(e){if(this.state._active){var t=_(e,this.state._touchIds);this.pinchMove(e,t)}}},{key:"pointerMove",value:function(e){var t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),this.state._active){var n=x.apply(void 0,Object(r.a)(Array.from(t.values())));this.pinchMove(e,n)}}},{key:"pinchMove",value:function(e,t){var n=this.state,r=n._values[1],a=t.angle-r,i=0;Math.abs(a)>270&&(i+=Math.sign(a)),this.computeValues([t.distance,t.angle-360*i]),n.origin=t.origin,n.turns=i,n._movement=[n._values[0]/n._initial[0]-1,n._values[1]-n._initial[1]],this.compute(e),this.emit()}},{key:"touchEnd",value:function(e){var t=this;this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some((function(e){return!t.ctrl.touchIds.has(e)}))&&(this.state._active=!1,this.compute(e),this.emit())}},{key:"pointerEnd",value:function(e){var t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch(n){}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}},{key:"gestureStart",value:function(e){e.cancelable&&e.preventDefault();var t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}},{key:"gestureMove",value:function(e){if(e.cancelable&&e.preventDefault(),this.state._active){var t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];var n=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=h.a.sub(t._movement,n),this.compute(e),this.emit()}}},{key:"gestureEnd",value:function(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}},{key:"wheel",value:function(e){e.ctrlKey&&(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}},{key:"wheelStart",value:function(e){this.start(e),this.wheelChange(e)}},{key:"wheelChange",value:function(e){"uv"in e||e.cancelable&&e.preventDefault();var t=this.state;t._delta=[-I(e)[1]/36*t.offset[0],0],h.a.addTo(t._movement,t._delta),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}},{key:"wheelEnd",value:function(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}},{key:"bind",value:function(e){var t=this.config.device;t?(e(t,"start",this[t+"Start"].bind(this)),e(t,"change",this[t+"Move"].bind(this)),e(t,"end",this[t+"End"].bind(this)),e(t,"cancel",this[t+"End"].bind(this))):e("wheel","",this.wheel.bind(this),{passive:!1})}}]),n}(D),G=m(m({},F),{},{useTouch:function(e,t,n){var r=n.pointer,a=(r=void 0===r?{}:r).touch,i=void 0!==a&&a;return W.touch&&i},device:function(e,t,n){if(n.shared.target&&!W.touch&&W.gesture)return"gesture";if(this.useTouch)return"touch";if(W.touchscreen){if(W.pointer)return"pointer";if(W.touch)return"touch"}},bounds:function(e,t,n){var r=n.scaleBounds,a=void 0===r?{}:r,i=n.angleBounds,o=void 0===i?{}:i,s=function(e){var t=T(P(a,e),{min:-1/0,max:1/0});return[t.min,t.max]},c=function(e){var t=T(P(o,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!==typeof a&&"function"!==typeof o?[s(),c()]:function(e){return[s(e),c(e)]}},threshold:function(e,t,n){this.lockDirection="lock"===n.axis;var r=h.a.toVector(e,this.lockDirection?[.1,3]:0);return r}}),$=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),v(Object(a.a)(e),"ingKey","moving"),e}return Object(d.a)(n,[{key:"move",value:function(e){this.config.mouseOnly&&"mouse"!==e.pointerType||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}},{key:"moveStart",value:function(e){this.start(e),this.computeValues(E(e)),this.compute(e),this.computeInitial(),this.emit()}},{key:"moveChange",value:function(e){if(this.state._active){var t=E(e),n=this.state;n._delta=h.a.sub(t,n._values),h.a.addTo(n._movement,n._delta),this.computeValues(t),this.compute(e),this.emit()}}},{key:"moveEnd",value:function(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}},{key:"bind",value:function(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}}]),n}(R),q=m(m({},H),{},{mouseOnly:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e}}),Z=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),v(Object(a.a)(e),"ingKey","scrolling"),e}return Object(d.a)(n,[{key:"scroll",value:function(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}},{key:"scrollChange",value:function(e){e.cancelable&&e.preventDefault();var t=this.state,n=function(e){var t,n,r=e.currentTarget,a=r.scrollX,i=r.scrollY,o=r.scrollLeft,s=r.scrollTop;return[null!==(t=null!==a&&void 0!==a?a:o)&&void 0!==t?t:0,null!==(n=null!==i&&void 0!==i?i:s)&&void 0!==n?n:0]}(e);t._delta=h.a.sub(n,t._values),h.a.addTo(t._movement,t._delta),this.computeValues(n),this.compute(e),this.emit()}},{key:"scrollEnd",value:function(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}},{key:"bind",value:function(e){e("scroll","",this.scroll.bind(this))}}]),n}(R),J=H,Q=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),v(Object(a.a)(e),"ingKey","wheeling"),e}return Object(d.a)(n,[{key:"wheel",value:function(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}},{key:"wheelChange",value:function(e){var t=this.state;t._delta=I(e),h.a.addTo(this.state._movement,t._delta),this.compute(e),this.emit()}},{key:"wheelEnd",value:function(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}},{key:"bind",value:function(e){e("wheel","",this.wheel.bind(this))}}]),n}(R),ee=H,te=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),v(Object(a.a)(e),"ingKey","hovering"),e}return Object(d.a)(n,[{key:"enter",value:function(e){this.config.mouseOnly&&"mouse"!==e.pointerType||(this.start(e),this.computeValues(E(e)),this.compute(e),this.emit())}},{key:"leave",value:function(e){if(!this.config.mouseOnly||"mouse"===e.pointerType){var t=this.state;if(t._active){t._active=!1;var n=E(e);t._movement=t._delta=h.a.sub(n,t._values),this.computeValues(n),this.compute(e),t.delta=t.movement,this.emit()}}}},{key:"bind",value:function(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}}]),n}(R),ne=m(m({},H),{},{mouseOnly:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e}}),re=new Map,ae=new Map;function ie(e){re.set(e.key,e.engine),ae.set(e.key,e.resolver)}var oe={key:"drag",engine:U,resolver:X},se={key:"hover",engine:te,resolver:ne},ce={key:"move",engine:$,resolver:q},ue={key:"pinch",engine:Y,resolver:G},le={key:"scroll",engine:Z,resolver:J},de={key:"wheel",engine:Q,resolver:ee}},function(e,t,n){"use strict";n.d(t,"a",(function(){return F})),n.d(t,"b",(function(){return K})),n.d(t,"c",(function(){return W})),n.d(t,"d",(function(){return V})),n.d(t,"e",(function(){return z})),n.d(t,"f",(function(){return H})),n.d(t,"g",(function(){return U})),n.d(t,"h",(function(){return b})),n.d(t,"i",(function(){return C})),n.d(t,"j",(function(){return _})),n.d(t,"k",(function(){return S})),n.d(t,"l",(function(){return E})),n.d(t,"m",(function(){return X})),n.d(t,"n",(function(){return k})),n.d(t,"o",(function(){return O})),n.d(t,"p",(function(){return y}));var r=n(6),a=n(4),i=n(10),o=n(1),s=Object.defineProperty,c=Object.defineProperties,u=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,p=function(e,t,n){return t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},h=function(e,t){for(var n in t||(t={}))d.call(t,n)&&p(e,n,t[n]);if(l){var r,a=Object(i.a)(l(t));try{for(a.s();!(r=a.n()).done;){n=r.value;f.call(t,n)&&p(e,n,t[n])}}catch(o){a.e(o)}finally{a.f()}}return e},v=function(e,t){return c(e,u(t))};function g(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.length>0;return{didIntersect:a,message:e,points:n}}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[e[0]+t[0]/2,e[1]+t[1]/2],a=o.a.rotWith(e,r,n),i=o.a.rotWith(o.a.add(e,[t[0],0]),r,n),s=o.a.rotWith(o.a.add(e,t),r,n),c=o.a.rotWith(o.a.add(e,[0,t[1]]),r,n);return[["top",[a,i]],["right",[i,s]],["bottom",[s,c]],["left",[c,a]]]}function b(e,t){var n=o.a.slope(e[0],e[1]),r=o.a.slope(t[0],t[1]);if(n!==r){if(Number.isNaN(n)&&!Number.isNaN(r))return[e[0][0],(e[0][0]-t[0][0])*r+t[0][1]];if(Number.isNaN(r)&&!Number.isNaN(n))return[t[0][0],(t[0][0]-e[0][0])*n+e[0][1]];var a=(n*e[0][0]-r*t[0][0]+t[0][1]-e[0][1])/(n-r);return[a,r*(a-t[0][0])+t[0][1]]}}function y(e,t,n,r){var i=Object(a.a)(e,2),o=i[0],s=i[1],c=Object(a.a)(t,2),u=c[0],l=c[1],d=Object(a.a)(n,2),f=d[0],p=d[1],h=Object(a.a)(r,2),v=h[0],m=h[1];if(l/u!==(m-p)/(v-f)){var b=u*(m-p)-l*(v-f);if(0!==b){var y=((s-p)*(v-f)-(o-f)*(m-p))/b,w=((s-p)*u-(o-f)*l)/b;if(y>=0&&w>=0&&w<=1)return g("intersection",[o+y*u,s+y*l])}}return g("no intersection")}function w(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return I(n,r,a,e,t)}function O(e,t,n,r,a,i){return _(e,o.a.mul(t,999999999),n,r,a,i)}function k(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=n.minX,i=n.minY,o=n.width,s=n.height;return w(e,t,[a,i],[o,s],r)}function S(e,t,n,r){var a=o.a.sub(e,n),i=o.a.sub(r,n),s=o.a.sub(t,e),c=i[0]*a[1]-i[1]*a[0],u=s[0]*a[1]-s[1]*a[0],l=i[1]*s[0]-i[0]*s[1];if(0===c||0===u)return g("coincident");if(0===l)return g("parallel");if(0!==l){var d=c/l,f=u/l;if(0<=d&&d<=1&&0<=f&&f<=1)return g("intersection",o.a.add(e,o.a.mul(s,d)))}return g("no intersection")}function x(e,t,n,a,i,s){var c=o.a.angle(n,i),u=o.a.angle(n,s),l=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;if(t===n)return j(a,i,e,t);return _(a,i,e,t,n,r)}(n,a,a,0,e,t);if(!l.didIntersect)return g("no intersection");var d=l.points.filter((function(e){return function(e,t,n){if(n===e||n===t)return!0;var r=2*Math.PI,a=(t-e+r)%r,i=(n-e+r)%r;return a<=Math.PI!==i>a}(c,u,o.a.angle(n,e))}));return 0===d.length?g("no intersection"):g.apply(void 0,["intersection"].concat(Object(r.a)(d)))}function j(e,t,n,r){var a=(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]),i=2*((t[0]-e[0])*(e[0]-n[0])+(t[1]-e[1])*(e[1]-n[1])),s=i*i-4*a*(n[0]*n[0]+n[1]*n[1]+e[0]*e[0]+e[1]*e[1]-2*(n[0]*e[0]+n[1]*e[1])-r*r);if(s<0)return g("outside");if(0===s)return g("tangent");var c=Math.sqrt(s),u=(-i+c)/(2*a),l=(-i-c)/(2*a);if((u<0||u>1)&&(l<0||l>1))return g(u<0&&l<0||u>1&&l>1?"outside":"inside");var d=[];return 0<=u&&u<=1&&d.push(o.a.lrp(e,t,u)),0<=l&&l<=1&&d.push(o.a.lrp(e,t,l)),g.apply(void 0,["intersection"].concat(d))}function _(e,t,n,a,i){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(0===a||0===i||o.a.isEqual(e,t))return g("no intersection");a=a<0?a:-a,i=i<0?i:-i,e=o.a.sub(o.a.rotWith(e,n,-s),n),t=o.a.sub(o.a.rotWith(t,n,-s),n);var c=o.a.sub(t,e),u=c[0]*c[0]/a/a+c[1]*c[1]/i/i,l=2*e[0]*c[0]/a/a+2*e[1]*c[1]/i/i,d=e[0]*e[0]/a/a+e[1]*e[1]/i/i-1,f=[],p=l*l-4*u*d;if(0===p)f.push(-l/2/u);else if(p>0){var h=Math.sqrt(p);f.push((-l+h)/2/u),f.push((-l-h)/2/u)}var v=f.filter((function(e){return e>=0&&e<=1})).map((function(r){return o.a.add(n,o.a.add(e,o.a.mul(o.a.sub(t,e),r)))})).map((function(e){return o.a.rotWith(e,n,s)}));return g.apply(void 0,["intersection"].concat(Object(r.a)(v)))}function C(e,t,n){return function(e,t,n){var r=e.minX,a=e.minY,i=e.width,o=e.height;return function(e,t,n,r){return P(n,r,e,t)}(t,n,[r,a],[i,o])}(n,e,t)}function E(e,t,n){for(var a=[],i=1;i<n.length;i++){var o=S(e,t,n[i-1],n[i]);o&&a.push.apply(a,Object(r.a)(o.points))}return 0===a.length?g("no intersection"):g.apply(void 0,["intersection"].concat(Object(r.a)(n)))}function I(e,t,n,i,o){return m(e,t,n).reduce((function(e,t){var n=Object(a.a)(t,2),s=n[0],c=Object(a.a)(n[1],2),u=c[0],l=c[1],d=y(i,o,u,l);return d&&e.push(g.apply(void 0,[s].concat(Object(r.a)(d.points)))),e}),[]).filter((function(e){return e.didIntersect}))}function P(e,t,n,i){return m(e,t).reduce((function(e,t){var o=Object(a.a)(t,2),s=o[0],c=Object(a.a)(o[1],2),u=c[0],l=c[1],d=S(n,i,u,l);return d&&e.push(g.apply(void 0,[s].concat(Object(r.a)(d.points)))),e}),[]).filter((function(e){return e.didIntersect}))}function M(e,t,n,i){return m(e,t).reduce((function(e,t){var o=Object(a.a)(t,2),s=o[0],c=Object(a.a)(o[1],2),u=c[0],l=c[1],d=P(n,i,u,l);return e.push.apply(e,Object(r.a)(d.map((function(e){return g.apply(void 0,["".concat(s," ").concat(e.message)].concat(Object(r.a)(e.points)))})))),e}),[]).filter((function(e){return e.didIntersect}))}function A(e,t,n,r,i,o){return m(e,t).reduce((function(e,t){var s=Object(a.a)(t,2),c=s[0],u=Object(a.a)(s[1],2),l=u[0],d=u[1],f=function(e,t,n,r,a,i){return x(a,i,e,t,n,r)}(n,r,i,o,l,d);return f&&e.push(v(h({},f),{message:c})),e}),[]).filter((function(e){return e.didIntersect}))}function T(e,t,n,r){return m(e,t).reduce((function(e,t){var i=Object(a.a)(t,2),o=i[0],s=Object(a.a)(i[1],2),c=j(s[0],s[1],n,r);return c&&e.push(v(h({},c),{message:o})),e}),[]).filter((function(e){return e.didIntersect}))}function D(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=m(e,t).reduce((function(e,t){var s=Object(a.a)(t,2),c=s[0],u=Object(a.a)(s[1],2),l=_(u[0],u[1],n,r,i,o);return l&&e.push(v(h({},l),{message:c})),e}),[]);return s.filter((function(e){return e.didIntersect}))}function R(e,t,n){return m(e,t).reduce((function(e,t){var i=Object(a.a)(t,2),o=i[0],s=Object(a.a)(i[1],2),c=E(s[0],s[1],n);return c.didIntersect&&e.push(g.apply(void 0,[o].concat(Object(r.a)(c.points)))),e}),[]).filter((function(e){return e.didIntersect}))}function B(e,t,n){return m(e,t).reduce((function(e,t){var i=Object(a.a)(t,2),o=i[0],s=Object(a.a)(i[1],2),c=function(e,t,n){for(var a=[],i=1;i<n.length+1;i++){var o=S(e,t,n[i-1],n[i%n.length]);o&&a.push.apply(a,Object(r.a)(o.points))}return 0===a.length?g("no intersection"):g.apply(void 0,["intersection"].concat(Object(r.a)(n)))}(s[0],s[1],n);return c.didIntersect&&e.push(g.apply(void 0,[o].concat(Object(r.a)(c.points)))),e}),[]).filter((function(e){return e.didIntersect}))}function L(e,t,n,r,a,i){return A(a,i,e,t,n,r)}function F(e,t,n,r,a){return L(e,t,n,r,[a.minX,a.minY],[a.width,a.height])}function H(e,t,n,r){return j(n,r,e,t)}function z(e,t,n,r){var a=n[0]-e[0],i=n[1]-e[1],o=Math.sqrt(a*a+i*i),s=(o*o-r*r+t*t)/(2*o),c=Math.sqrt(t*t-s*s);return a/=o,i/=o,g("intersection",[e[0]+a*s-i*c,e[1]+i*s+a*c],[e[0]+a*s+i*c,e[1]+i*s-a*c])}function N(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;return t===n?T(a,i,e,t):D(a,i,e,t,n,r)}function U(e,t,n,r,a){return N(e,t,n,r,[a.minX,a.minY],[a.width,a.height])}function K(e,t){return M([e.minX,e.minY],[e.width,e.height],[t.minX,t.minY],[t.width,t.height])}function V(e,t){return function(e,t){return R([t.minX,t.minY],[t.width,t.height],e)}(t,e)}function W(e,t){return X(t,e)}function X(e,t){return B([t.minX,t.minY],[t.width,t.height],e)}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return a}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c}));var r=n(4);function a(e,t,n){return Math.max(t,Math.min(e,n))}var i={toVector:function(e,t){return void 0===e&&(e=t),Array.isArray(e)?e:[e,e]},add:function(e,t){return[e[0]+t[0],e[1]+t[1]]},sub:function(e,t){return[e[0]-t[0],e[1]-t[1]]},addTo:function(e,t){e[0]+=t[0],e[1]+=t[1]},subTo:function(e,t){e[0]-=t[0],e[1]-=t[1]}};function o(e,t,n){return 0===t||Math.abs(t)===1/0?Math.pow(e,5*n):e*t*n/(t+n*e)}function s(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.15;return 0===r?a(e,t,n):e<t?-o(t-e,n-t,r)+t:e>n?+o(e-n,n-t,r)+n:e}function c(e,t,n){var a=Object(r.a)(t,2),i=a[0],o=a[1],c=Object(r.a)(n,2),u=c[0],l=c[1],d=Object(r.a)(e,2),f=Object(r.a)(d[0],2),p=f[0],h=f[1],v=Object(r.a)(d[1],2),g=v[0],m=v[1];return[s(i,p,h,u),s(o,g,m,l)]}},function(e,t,n){"use strict";var r=n(14);n.d(t,"a",(function(){return r.i})),n.d(t,"b",(function(){return r.j})),n.d(t,"c",(function(){return r.l})),n.d(t,"d",(function(){return r.m})),n.d(t,"e",(function(){return r.n})),n.d(t,"f",(function(){return r.o})),n.d(t,"g",(function(){return r.q}))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return vt})),n.d(t,"b",(function(){return Ht})),n.d(t,"c",(function(){return Nt})),n.d(t,"d",(function(){return un})),n.d(t,"e",(function(){return _e})),n.d(t,"f",(function(){return Pt}));function r(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("number"===typeof e?"[MobX] minified error nr: "+e+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var a={};function i(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:a}var o=Object.assign,s=Object.getOwnPropertyDescriptor,c=Object.defineProperty,u=Object.prototype,l=[];Object.freeze(l);var d={};Object.freeze(d);var f="undefined"!==typeof Proxy,p=Object.toString();function h(){f||r("Proxy not available")}function v(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var g=function(){};function m(e){return"function"===typeof e}function b(e){switch(typeof e){case"string":case"symbol":case"number":return!0}return!1}function y(e){return null!==e&&"object"===typeof e}function w(e){if(!y(e))return!1;var t=Object.getPrototypeOf(e);if(null==t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"===typeof n&&n.toString()===p}function O(e){var t=null==e?void 0:e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName)}function k(e,t,n){c(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function S(e,t,n){c(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function x(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return y(e)&&!0===e[n]}}function j(e){return e instanceof Map}function _(e){return e instanceof Set}var C="undefined"!==typeof Object.getOwnPropertySymbols;var E="undefined"!==typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:C?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function I(e){return null===e?null:"object"===typeof e?""+e:e}function P(e,t){return u.hasOwnProperty.call(e,t)}var M=Object.getOwnPropertyDescriptors||function(e){var t={};return E(e).forEach((function(n){t[n]=s(e,n)})),t};function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t,n){return t&&A(e.prototype,t),n&&A(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function R(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,B(e,t)}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function H(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var z=Symbol("mobx-stored-annotations");function N(e){return Object.assign((function(t,n){U(t,n,e)}),e)}function U(e,t,n){P(e,z)||k(e,z,D({},e[z])),function(e){return e.annotationType_===q}(n)||(e[z][t]=n)}var K=Symbol("mobx administration"),V=function(){function e(e){void 0===e&&(e="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Ne.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=e}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.reportObserved=function(){return pt(this)},t.reportChanged=function(){dt(),ht(this),ft()},t.toString=function(){return this.name_},e}(),W=x("Atom",V);function X(e,t,n){void 0===t&&(t=g),void 0===n&&(n=g);var r,a=new V(e);return t!==g&&Lt(Rt,a,t,r),n!==g&&Bt(a,n),a}var Y={identity:function(e,t){return e===t},structural:function(e,t){return Zn(e,t)},default:function(e,t){return Object.is?Object.is(e,t):e===t?0!==e||1/e===1/t:e!==e&&t!==t},shallow:function(e,t){return Zn(e,t,1)}};function G(e,t,n){return Zt(e)?e:Array.isArray(e)?_e.array(e,{name:n}):w(e)?_e.object(e,void 0,{name:n}):j(e)?_e.map(e,{name:n}):_(e)?_e.set(e,{name:n}):"function"!==typeof e||Mt(e)||$t(e)?e:O(e)?Yt(e):It(n,e)}function $(e){return e}var q="override";function Z(e,t){return{annotationType_:e,options_:t,make_:J,extend_:Q}}function J(e,t,n,r){var a;if(null!=(a=this.options_)&&a.bound)return null===this.extend_(e,t,n,!1)?0:1;if(r===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(Mt(n.value))return 1;var i=ee(e,this,t,n,!1);return c(r,t,i),2}function Q(e,t,n,r){var a=ee(e,this,t,n);return e.defineProperty_(t,a,r)}function ee(e,t,n,r,a){var i,o,s,c,u,l,d,f;void 0===a&&(a=st.safeDescriptors),f=r,t.annotationType_,f.value;var p,h=r.value;null!=(i=t.options_)&&i.bound&&(h=h.bind(null!=(p=e.proxy_)?p:e.target_));return{value:Be(null!=(o=null==(s=t.options_)?void 0:s.name)?o:n.toString(),h,null!=(c=null==(u=t.options_)?void 0:u.autoAction)&&c,null!=(l=t.options_)&&l.bound?null!=(d=e.proxy_)?d:e.target_:void 0),configurable:!a||e.isPlainObject_,enumerable:!1,writable:!a}}function te(e,t){return{annotationType_:e,options_:t,make_:ne,extend_:re}}function ne(e,t,n,r){var a;if(r===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(null!=(a=this.options_)&&a.bound&&(!P(e.target_,t)||!$t(e.target_[t]))&&null===this.extend_(e,t,n,!1))return 0;if($t(n.value))return 1;var i=ae(e,this,t,n,!1,!1);return c(r,t,i),2}function re(e,t,n,r){var a,i=ae(e,this,t,n,null==(a=this.options_)?void 0:a.bound);return e.defineProperty_(t,i,r)}function ae(e,t,n,r,a,i){var o;void 0===i&&(i=st.safeDescriptors),o=r,t.annotationType_,o.value;var s,c=r.value;($t(c)||(c=Yt(c)),a)&&((c=c.bind(null!=(s=e.proxy_)?s:e.target_)).isMobXFlow=!0);return{value:c,configurable:!i||e.isPlainObject_,enumerable:!1,writable:!i}}function ie(e,t){return{annotationType_:e,options_:t,make_:oe,extend_:se}}function oe(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function se(e,t,n,r){return function(e,t,n,r){t.annotationType_,r.get;0}(0,this,0,n),e.defineComputedProperty_(t,D({},this.options_,{get:n.get,set:n.set}),r)}function ce(e,t){return{annotationType_:e,options_:t,make_:ue,extend_:le}}function ue(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function le(e,t,n,r){var a,i;return function(e,t,n,r){t.annotationType_;0}(0,this),e.defineObservableProperty_(t,n.value,null!=(a=null==(i=this.options_)?void 0:i.enhancer)?a:G,r)}var de=fe();function fe(e){return{annotationType_:"true",options_:e,make_:pe,extend_:he}}function pe(e,t,n,r){var a,i,o,s;if(n.get)return Pe.make_(e,t,n,r);if(n.set){var u=Be(t.toString(),n.set);return r===e.target_?null===e.defineProperty_(t,{configurable:!st.safeDescriptors||e.isPlainObject_,set:u})?0:2:(c(r,t,{configurable:!0,set:u}),2)}if(r!==e.target_&&"function"===typeof n.value)return O(n.value)?(null!=(s=this.options_)&&s.autoBind?Yt.bound:Yt).make_(e,t,n,r):(null!=(o=this.options_)&&o.autoBind?It.bound:It).make_(e,t,n,r);var l,d=!1===(null==(a=this.options_)?void 0:a.deep)?_e.ref:_e;"function"===typeof n.value&&null!=(i=this.options_)&&i.autoBind&&(n.value=n.value.bind(null!=(l=e.proxy_)?l:e.target_));return d.make_(e,t,n,r)}function he(e,t,n,r){var a,i,o;if(n.get)return Pe.extend_(e,t,n,r);if(n.set)return e.defineProperty_(t,{configurable:!st.safeDescriptors||e.isPlainObject_,set:Be(t.toString(),n.set)},r);"function"===typeof n.value&&null!=(a=this.options_)&&a.autoBind&&(n.value=n.value.bind(null!=(o=e.proxy_)?o:e.target_));return(!1===(null==(i=this.options_)?void 0:i.deep)?_e.ref:_e).extend_(e,t,n,r)}var ve={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function ge(e){return e||ve}Object.freeze(ve);var me=ce("observable"),be=ce("observable.ref",{enhancer:$}),ye=ce("observable.shallow",{enhancer:function(e,t,n){return void 0===e||null===e||Bn(e)||On(e)||_n(e)||In(e)?e:Array.isArray(e)?_e.array(e,{name:n,deep:!1}):w(e)?_e.object(e,void 0,{name:n,deep:!1}):j(e)?_e.map(e,{name:n,deep:!1}):_(e)?_e.set(e,{name:n,deep:!1}):void 0}}),we=ce("observable.struct",{enhancer:function(e,t){return Zn(e,t)?t:e}}),Oe=N(me);function ke(e){return!0===e.deep?G:!1===e.deep?$:function(e){var t,n;return e&&null!=(t=null==(n=e.options_)?void 0:n.enhancer)?t:G}(e.defaultDecorator)}function Se(e,t,n){if(!b(t))return Zt(e)?e:w(e)?_e.object(e,t,n):Array.isArray(e)?_e.array(e,t):j(e)?_e.map(e,t):_(e)?_e.set(e,t):"object"===typeof e&&null!==e?e:_e.box(e,t);U(e,t,me)}Object.assign(Se,Oe);var xe,je,_e=o(Se,{box:function(e,t){var n=ge(t);return new Ke(e,ke(n),n.name,!0,n.equals)},array:function(e,t){var n=ge(t);return(!1===st.useProxies||!1===n.proxy?Xn:hn)(e,ke(n),n.name)},map:function(e,t){var n=ge(t);return new jn(e,ke(n),n.name)},set:function(e,t){var n=ge(t);return new En(e,ke(n),n.name)},object:function(e,t,n){return zt(!1===st.useProxies||!1===(null==n?void 0:n.proxy)?Tn({},n):function(e,t){var n,r;return h(),e=Tn(e,t),null!=(r=(n=e[K]).proxy_)?r:n.proxy_=new Proxy(e,tn)}({},n),e,t)},ref:N(be),shallow:N(ye),deep:Oe,struct:N(we)}),Ce="computed",Ee=ie(Ce),Ie=ie("computed.struct",{equals:Y.structural}),Pe=function(e,t){if(b(t))return U(e,t,Ee);if(w(e))return N(ie(Ce,e));var n=w(t)?t:{};return n.get=e,n.name||(n.name=e.name||""),new Ve(n)};Object.assign(Pe,Ee),Pe.struct=N(Ie);var Me,Ae=0,Te=1,De=null!=(xe=null==(je=s((function(){}),"name"))?void 0:je.configurable)&&xe,Re={value:"action",configurable:!0,writable:!1,enumerable:!1};function Be(e,t,n,r){function a(){return Le(e,n,t,r||this,arguments)}return void 0===n&&(n=!1),a.isMobxAction=!0,De&&(Re.value=e,Object.defineProperty(a,"name",Re)),a}function Le(e,t,n,a,i){var o=function(e,t,n,r){var a=!1,i=0;0;var o=st.trackingDerivation,s=!t||!o;dt();var c=st.allowStateChanges;s&&(Qe(),c=He(!0));var u=tt(!0),l={runAsAction_:s,prevDerivation_:o,prevAllowStateChanges_:c,prevAllowStateReads_:u,notifySpy_:a,startTime_:i,actionId_:Te++,parentActionId_:Ae};return Ae=l.actionId_,l}(0,t);try{return n.apply(a,i)}catch(s){throw o.error_=s,s}finally{!function(e){Ae!==e.actionId_&&r(30);Ae=e.parentActionId_,void 0!==e.error_&&(st.suppressReactionErrors=!0);ze(e.prevAllowStateChanges_),nt(e.prevAllowStateReads_),ft(),e.runAsAction_&&et(e.prevDerivation_);0;st.suppressReactionErrors=!1}(o)}}function Fe(e,t){var n=He(e);try{return t()}finally{ze(n)}}function He(e){var t=st.allowStateChanges;return st.allowStateChanges=e,t}function ze(e){st.allowStateChanges=e}Me=Symbol.toPrimitive;var Ne,Ue,Ke=function(e,t){function n(t,n,r,a,i){var o;return void 0===r&&(r="ObservableValue"),void 0===a&&(a=!0),void 0===i&&(i=Y.default),(o=e.call(this,r)||this).enhancer=void 0,o.name_=void 0,o.equals=void 0,o.hasUnreportedChange_=!1,o.interceptors_=void 0,o.changeListeners_=void 0,o.value_=void 0,o.dehancer=void 0,o.enhancer=n,o.name_=r,o.equals=i,o.value_=n(t,void 0,r),o}R(n,e);var r=n.prototype;return r.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},r.set=function(e){this.value_;if((e=this.prepareNewValue_(e))!==st.UNCHANGED){0,this.setNewValue_(e)}},r.prepareNewValue_=function(e){if($e(this),nn(this)){var t=an(this,{object:this,type:dn,newValue:e});if(!t)return st.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value_,this.name_),this.equals(this.value_,e)?st.UNCHANGED:e},r.setNewValue_=function(e){var t=this.value_;this.value_=e,this.reportChanged(),on(this)&&cn(this,{type:dn,object:this,newValue:e,oldValue:t})},r.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},r.intercept_=function(e){return rn(this,e)},r.observe_=function(e,t){return t&&e({observableKind:"value",debugObjectName:this.name_,object:this,type:dn,newValue:this.value_,oldValue:void 0}),sn(this,e)},r.raw=function(){return this.value_},r.toJSON=function(){return this.get()},r.toString=function(){return this.name_+"["+this.value_+"]"},r.valueOf=function(){return I(this.get())},r[t]=function(){return this.valueOf()},n}(V,Me),Ve=function(e){function t(e){this.dependenciesState_=Ne.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Ne.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new Xe(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=Ue.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,e.get||r(31),this.derivation=e.get,this.name_=e.name||"ComputedValue",e.set&&(this.setter_=Be("ComputedValue-setter",e.set)),this.equals_=e.equals||(e.compareStructural||e.struct?Y.structural:Y.default),this.scope_=e.context,this.requiresReaction_=e.requiresReaction,this.keepAlive_=!!e.keepAlive}var n=t.prototype;return n.onBecomeStale_=function(){!function(e){if(e.lowestObserverState_!==Ne.UP_TO_DATE_)return;e.lowestObserverState_=Ne.POSSIBLY_STALE_,e.observers_.forEach((function(e){e.dependenciesState_===Ne.UP_TO_DATE_&&(e.dependenciesState_=Ne.POSSIBLY_STALE_,e.onBecomeStale_())}))}(this)},n.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},n.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},n.get=function(){if(this.isComputing_&&r(32,this.name_,this.derivation),0!==st.inBatch||0!==this.observers_.size||this.keepAlive_){if(pt(this),Ge(this)){var e=st.trackingContext;this.keepAlive_&&!e&&(st.trackingContext=this),this.trackAndCompute()&&function(e){if(e.lowestObserverState_===Ne.STALE_)return;e.lowestObserverState_=Ne.STALE_,e.observers_.forEach((function(t){t.dependenciesState_===Ne.POSSIBLY_STALE_?t.dependenciesState_=Ne.STALE_:t.dependenciesState_===Ne.UP_TO_DATE_&&(e.lowestObserverState_=Ne.UP_TO_DATE_)}))}(this),st.trackingContext=e}}else Ge(this)&&(this.warnAboutUntrackedRead_(),dt(),this.value_=this.computeValue_(!1),ft());var t=this.value_;if(Ye(t))throw t.cause;return t},n.set=function(e){if(this.setter_){this.isRunningSetter_&&r(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,e)}finally{this.isRunningSetter_=!1}}else r(34,this.name_)},n.trackAndCompute=function(){var e=this.value_,t=this.dependenciesState_===Ne.NOT_TRACKING_,n=this.computeValue_(!0),r=t||Ye(e)||Ye(n)||!this.equals_(e,n);return r&&(this.value_=n),r},n.computeValue_=function(e){this.isComputing_=!0;var t,n=He(!1);if(e)t=qe(this,this.derivation,this.scope_);else if(!0===st.disableErrorBoundaries)t=this.derivation.call(this.scope_);else try{t=this.derivation.call(this.scope_)}catch(r){t=new Xe(r)}return ze(n),this.isComputing_=!1,t},n.suspend_=function(){this.keepAlive_||(Ze(this),this.value_=void 0)},n.observe_=function(e,t){var n=this,r=!0,a=void 0;return At((function(){var i=n.get();if(!r||t){var o=Qe();e({observableKind:"computed",debugObjectName:n.name_,type:dn,object:n,newValue:i,oldValue:a}),et(o)}r=!1,a=i}))},n.warnAboutUntrackedRead_=function(){},n.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},n.valueOf=function(){return I(this.get())},n[e]=function(){return this.valueOf()},t}(Symbol.toPrimitive),We=x("ComputedValue",Ve);!function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"}(Ne||(Ne={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(Ue||(Ue={}));var Xe=function(e){this.cause=void 0,this.cause=e};function Ye(e){return e instanceof Xe}function Ge(e){switch(e.dependenciesState_){case Ne.UP_TO_DATE_:return!1;case Ne.NOT_TRACKING_:case Ne.STALE_:return!0;case Ne.POSSIBLY_STALE_:for(var t=tt(!0),n=Qe(),r=e.observing_,a=r.length,i=0;i<a;i++){var o=r[i];if(We(o)){if(st.disableErrorBoundaries)o.get();else try{o.get()}catch(s){return et(n),nt(t),!0}if(e.dependenciesState_===Ne.STALE_)return et(n),nt(t),!0}}return rt(e),et(n),nt(t),!1}}function $e(e){}function qe(e,t,n){var r=tt(!0);rt(e),e.newObserving_=new Array(e.observing_.length+100),e.unboundDepsCount_=0,e.runId_=++st.runId;var a,i=st.trackingDerivation;if(st.trackingDerivation=e,st.inBatch++,!0===st.disableErrorBoundaries)a=t.call(n);else try{a=t.call(n)}catch(o){a=new Xe(o)}return st.inBatch--,st.trackingDerivation=i,function(e){for(var t=e.observing_,n=e.observing_=e.newObserving_,r=Ne.UP_TO_DATE_,a=0,i=e.unboundDepsCount_,o=0;o<i;o++){var s=n[o];0===s.diffValue_&&(s.diffValue_=1,a!==o&&(n[a]=s),a++),s.dependenciesState_>r&&(r=s.dependenciesState_)}n.length=a,e.newObserving_=null,i=t.length;for(;i--;){var c=t[i];0===c.diffValue_&&ut(c,e),c.diffValue_=0}for(;a--;){var u=n[a];1===u.diffValue_&&(u.diffValue_=0,ct(u,e))}r!==Ne.UP_TO_DATE_&&(e.dependenciesState_=r,e.onBecomeStale_())}(e),nt(r),a}function Ze(e){var t=e.observing_;e.observing_=[];for(var n=t.length;n--;)ut(t[n],e);e.dependenciesState_=Ne.NOT_TRACKING_}function Je(e){var t=Qe();try{return e()}finally{et(t)}}function Qe(){var e=st.trackingDerivation;return st.trackingDerivation=null,e}function et(e){st.trackingDerivation=e}function tt(e){var t=st.allowStateReads;return st.allowStateReads=e,t}function nt(e){st.allowStateReads=e}function rt(e){if(e.dependenciesState_!==Ne.UP_TO_DATE_){e.dependenciesState_=Ne.UP_TO_DATE_;for(var t=e.observing_,n=t.length;n--;)t[n].lowestObserverState_=Ne.UP_TO_DATE_}}var at=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},it=!0,ot=!1,st=function(){var e=i();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(it=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new at).version&&(it=!1),it?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new at):(setTimeout((function(){ot||r(35)}),1),new at)}();function ct(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function ut(e,t){e.observers_.delete(t),0===e.observers_.size&&lt(e)}function lt(e){!1===e.isPendingUnobservation_&&(e.isPendingUnobservation_=!0,st.pendingUnobservations.push(e))}function dt(){st.inBatch++}function ft(){if(0===--st.inBatch){mt();for(var e=st.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation_=!1,0===n.observers_.size&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof Ve&&n.suspend_())}st.pendingUnobservations=[]}}function pt(e){var t=st.trackingDerivation;return null!==t?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved_&&st.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),!0):(0===e.observers_.size&&st.inBatch>0&&lt(e),!1)}function ht(e){e.lowestObserverState_!==Ne.STALE_&&(e.lowestObserverState_=Ne.STALE_,e.observers_.forEach((function(e){e.dependenciesState_===Ne.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=Ne.STALE_})))}var vt=function(){function e(e,t,n,r){void 0===e&&(e="Reaction"),void 0===r&&(r=!1),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=Ne.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=Ue.NONE,this.name_=e,this.onInvalidate_=t,this.errorHandler_=n,this.requiresObservable_=r}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,st.pendingReactions.push(this),mt())},t.isScheduled=function(){return this.isScheduled_},t.runReaction_=function(){if(!this.isDisposed_){dt(),this.isScheduled_=!1;var e=st.trackingContext;if(st.trackingContext=this,Ge(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(t){this.reportExceptionInDerivation_(t)}}st.trackingContext=e,ft()}},t.track=function(e){if(!this.isDisposed_){dt();0,this.isRunning_=!0;var t=st.trackingContext;st.trackingContext=this;var n=qe(this,e,void 0);st.trackingContext=t,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&Ze(this),Ye(n)&&this.reportExceptionInDerivation_(n.cause),ft()}},t.reportExceptionInDerivation_=function(e){var t=this;if(this.errorHandler_)this.errorHandler_(e,this);else{if(st.disableErrorBoundaries)throw e;var n="[mobx] uncaught error in '"+this+"'";st.suppressReactionErrors||console.error(n,e),st.globalReactionErrorHandlers.forEach((function(n){return n(e,t)}))}},t.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(dt(),Ze(this),ft()))},t.getDisposer_=function(){var e=this.dispose.bind(this);return e[K]=this,e},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(e){void 0===e&&(e=!1),function(){r("trace() is not available in production builds");for(var e=!1,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];"boolean"===typeof n[n.length-1]&&(e=n.pop());var i=Jt(n);if(!i)return r("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");i.isTracing_===Ue.NONE&&console.log("[mobx.trace] '"+i.name_+"' tracing enabled");i.isTracing_=e?Ue.BREAK:Ue.LOG}(this,e)},e}();var gt=function(e){return e()};function mt(){st.inBatch>0||st.isRunningReactions||gt(bt)}function bt(){st.isRunningReactions=!0;for(var e=st.pendingReactions,t=0;e.length>0;){100===++t&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var n=e.splice(0),r=0,a=n.length;r<a;r++)n[r].runReaction_()}st.isRunningReactions=!1}var yt=x("Reaction",vt);var wt="action",Ot="autoAction",kt="<unnamed action>",St=Z(wt),xt=Z("action.bound",{bound:!0}),jt=Z(Ot,{autoAction:!0}),_t=Z("autoAction.bound",{autoAction:!0,bound:!0});function Ct(e){return function(t,n){return m(t)?Be(t.name||kt,t,e):m(n)?Be(t,n,e):b(n)?U(t,n,e?jt:St):b(t)?N(Z(e?Ot:wt,{name:t,autoAction:e})):void 0}}var Et=Ct(!1);Object.assign(Et,St);var It=Ct(!0);function Pt(e){return Le(e.name,!1,e,this,void 0)}function Mt(e){return m(e)&&!0===e.isMobxAction}function At(e,t){var n,r;void 0===t&&(t=d);var a,i=null!=(n=null==(r=t)?void 0:r.name)?n:"Autorun";if(!t.scheduler&&!t.delay)a=new vt(i,(function(){this.track(c)}),t.onError,t.requiresObservable);else{var o=Dt(t),s=!1;a=new vt(i,(function(){s||(s=!0,o((function(){s=!1,a.isDisposed_||a.track(c)})))}),t.onError,t.requiresObservable)}function c(){e(a)}return a.schedule_(),a.getDisposer_()}Object.assign(It,jt),Et.bound=N(xt),It.bound=N(_t);var Tt=function(e){return e()};function Dt(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:Tt}var Rt="onBO";function Bt(e,t,n){return Lt("onBUO",e,t,n)}function Lt(e,t,n,r){var a="function"===typeof r?Yn(t,n):Yn(t),i=m(r)?r:n,o=e+"L";return a[o]?a[o].add(i):a[o]=new Set([i]),function(){var e=a[o];e&&(e.delete(i),0===e.size&&delete a[o])}}var Ft="always";function Ht(e){!0===e.isolateGlobalState&&function(){if((st.pendingReactions.length||st.inBatch||st.isRunningReactions)&&r(36),ot=!0,it){var e=i();0===--e.__mobxInstanceCount&&(e.__mobxGlobals=void 0),st=new at}}();var t=e.useProxies,n=e.enforceActions;if(void 0!==t&&(st.useProxies=t===Ft||"never"!==t&&"undefined"!==typeof Proxy),"ifavailable"===t&&(st.verifyProxies=!0),void 0!==n){var a=n===Ft?Ft:"observed"===n;st.enforceActions=a,st.allowStateChanges=!0!==a&&a!==Ft}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach((function(t){t in e&&(st[t]=!!e[t])})),st.allowStateReads=!st.observableRequiresReaction,e.reactionScheduler&&function(e){var t=gt;gt=function(n){return e((function(){return t(n)}))}}(e.reactionScheduler)}function zt(e,t,n,r){var a=M(t),i=Tn(e,r)[K];dt();try{E(a).forEach((function(e){i.extend_(e,a[e],!n||(!(e in n)||n[e]))}))}finally{ft()}return e}function Nt(e,t){return Ut(Yn(e,t))}function Ut(e){var t,n={name:e.name_};return e.observing_&&e.observing_.length>0&&(n.dependencies=(t=e.observing_,Array.from(new Set(t))).map(Ut)),n}var Kt=0;function Vt(){this.message="FLOW_CANCELLED"}Vt.prototype=Object.create(Error.prototype);var Wt=te("flow"),Xt=te("flow.bound",{bound:!0}),Yt=Object.assign((function(e,t){if(b(t))return U(e,t,Wt);var n=e,r=n.name||"<unnamed flow>",a=function(){var e,t=this,a=arguments,i=++Kt,o=Et(r+" - runid: "+i+" - init",n).apply(t,a),s=void 0,c=new Promise((function(t,n){var a=0;function c(e){var t;s=void 0;try{t=Et(r+" - runid: "+i+" - yield "+a++,o.next).call(o,e)}catch(c){return n(c)}l(t)}function u(e){var t;s=void 0;try{t=Et(r+" - runid: "+i+" - yield "+a++,o.throw).call(o,e)}catch(c){return n(c)}l(t)}function l(e){if(!m(null==e?void 0:e.then))return e.done?t(e.value):(s=Promise.resolve(e.value)).then(c,u);e.then(l,n)}e=n,c(void 0)}));return c.cancel=Et(r+" - runid: "+i+" - cancel",(function(){try{s&&Gt(s);var t=o.return(void 0),n=Promise.resolve(t.value);n.then(g,g),Gt(n),e(new Vt)}catch(r){e(r)}})),c};return a.isMobXFlow=!0,a}),Wt);function Gt(e){m(e.cancel)&&e.cancel()}function $t(e){return!0===(null==e?void 0:e.isMobXFlow)}function qt(e,t){return!!e&&(void 0!==t?!!Bn(e)&&e[K].values_.has(t):Bn(e)||!!e[K]||W(e)||yt(e)||We(e))}function Zt(e){return qt(e)}function Jt(e){switch(e.length){case 0:return st.trackingDerivation;case 1:return Yn(e[0]);case 2:return Yn(e[0],e[1])}}function Qt(e,t){void 0===t&&(t=void 0),dt();try{return e.apply(t)}finally{ft()}}function en(e){return e[K]}Yt.bound=N(Xt);var tn={has:function(e,t){return en(e).has_(t)},get:function(e,t){return en(e).get_(t)},set:function(e,t,n){var r;return!!b(t)&&(null==(r=en(e).set_(t,n,!0))||r)},deleteProperty:function(e,t){var n;return!!b(t)&&(null==(n=en(e).delete_(t,!0))||n)},defineProperty:function(e,t,n){var r;return null==(r=en(e).defineProperty_(t,n))||r},ownKeys:function(e){return en(e).ownKeys_()},preventExtensions:function(e){r(13)}};function nn(e){return void 0!==e.interceptors_&&e.interceptors_.length>0}function rn(e,t){var n=e.interceptors_||(e.interceptors_=[]);return n.push(t),v((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function an(e,t){var n=Qe();try{for(var a=[].concat(e.interceptors_||[]),i=0,o=a.length;i<o&&((t=a[i](t))&&!t.type&&r(14),t);i++);return t}finally{et(n)}}function on(e){return void 0!==e.changeListeners_&&e.changeListeners_.length>0}function sn(e,t){var n=e.changeListeners_||(e.changeListeners_=[]);return n.push(t),v((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function cn(e,t){var n=Qe(),r=e.changeListeners_;if(r){for(var a=0,i=(r=r.slice()).length;a<i;a++)r[a](t);et(n)}}function un(e,t,n){var r=Tn(e,n)[K];dt();try{0,null!=t||(t=function(e){return P(e,z)||k(e,z,D({},e[z])),e[z]}(e)),E(t).forEach((function(e){return r.make_(e,t[e])}))}finally{ft()}return e}var ln="splice",dn="update",fn={get:function(e,t){var n=e[K];return t===K?n:"length"===t?n.getArrayLength_():"string"!==typeof t||isNaN(t)?P(vn,t)?vn[t]:e[t]:n.get_(parseInt(t))},set:function(e,t,n){var r=e[K];return"length"===t&&r.setArrayLength_(n),"symbol"===typeof t||isNaN(t)?e[t]=n:r.set_(parseInt(t),n),!0},preventExtensions:function(){r(15)}},pn=function(){function e(e,t,n,r){void 0===e&&(e="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=n,this.legacyMode_=r,this.atom_=new V(e),this.enhancer_=function(e,n){return t(e,n,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.dehanceValues_=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},t.intercept_=function(e){return rn(this,e)},t.observe_=function(e,t){return void 0===t&&(t=!1),t&&e({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),sn(this,e)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(e){("number"!==typeof e||isNaN(e)||e<0)&&r("Out of range: "+e);var t=this.values_.length;if(e!==t)if(e>t){for(var n=new Array(e-t),a=0;a<e-t;a++)n[a]=void 0;this.spliceWithArray_(t,0,n)}else this.spliceWithArray_(e,t-e)},t.updateArrayLength_=function(e,t){e!==this.lastKnownLength_&&r(16),this.lastKnownLength_+=t,this.legacyMode_&&t>0&&Wn(e+t+1)},t.spliceWithArray_=function(e,t,n){var r=this;this.atom_;var a=this.values_.length;if(void 0===e?e=0:e>a?e=a:e<0&&(e=Math.max(0,a+e)),t=1===arguments.length?a-e:void 0===t||null===t?0:Math.max(0,Math.min(t,a-e)),void 0===n&&(n=l),nn(this)){var i=an(this,{object:this.proxy_,type:ln,index:e,removedCount:t,added:n});if(!i)return l;t=i.removedCount,n=i.added}if(n=0===n.length?n:n.map((function(e){return r.enhancer_(e,void 0)})),this.legacyMode_){var o=n.length-t;this.updateArrayLength_(a,o)}var s=this.spliceItemsIntoValues_(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice_(e,n,s),this.dehanceValues_(s)},t.spliceItemsIntoValues_=function(e,t,n){var r;if(n.length<1e4)return(r=this.values_).splice.apply(r,[e,t].concat(n));var a=this.values_.slice(e,e+t),i=this.values_.slice(e+t);this.values_.length+=n.length-t;for(var o=0;o<n.length;o++)this.values_[e+o]=n[o];for(var s=0;s<i.length;s++)this.values_[e+n.length+s]=i[s];return a},t.notifyArrayChildUpdate_=function(e,t,n){var r=!this.owned_&&!1,a=on(this),i=a||r?{observableKind:"array",object:this.proxy_,type:dn,debugObjectName:this.atom_.name_,index:e,newValue:t,oldValue:n}:null;this.atom_.reportChanged(),a&&cn(this,i)},t.notifyArraySplice_=function(e,t,n){var r=!this.owned_&&!1,a=on(this),i=a||r?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:ln,index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;this.atom_.reportChanged(),a&&cn(this,i)},t.get_=function(e){if(e<this.values_.length)return this.atom_.reportObserved(),this.dehanceValue_(this.values_[e]);console.warn("[mobx.array] Attempt to read an array index ("+e+") that is out of bounds ("+this.values_.length+"). Please check length first. Out of bound indices will not be tracked by MobX")},t.set_=function(e,t){var n=this.values_;if(e<n.length){this.atom_;var a=n[e];if(nn(this)){var i=an(this,{type:dn,object:this.proxy_,index:e,newValue:t});if(!i)return;t=i.newValue}(t=this.enhancer_(t,a))!==a&&(n[e]=t,this.notifyArrayChildUpdate_(e,t,a))}else e===n.length?this.spliceWithArray_(e,0,[t]):r(17,e,n.length)},e}();function hn(e,t,n,r){void 0===n&&(n="ObservableArray"),void 0===r&&(r=!1),h();var a=new pn(n,t,r,!1);S(a.values_,K,a);var i=new Proxy(a.values_,fn);if(a.proxy_=i,e&&e.length){var o=He(!0);a.spliceWithArray_(0,0,e),ze(o)}return i}var vn={clear:function(){return this.splice(0)},replace:function(e){var t=this[K];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var i=this[K];switch(arguments.length){case 0:return[];case 1:return i.spliceWithArray_(e);case 2:return i.spliceWithArray_(e,t)}return i.spliceWithArray_(e,t,r)},spliceWithArray:function(e,t,n){return this[K].spliceWithArray_(e,t,n)},push:function(){for(var e=this[K],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(e.values_.length,0,n),e.values_.length},pop:function(){return this.splice(Math.max(this[K].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[K],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(0,0,n),e.values_.length},reverse:function(){return st.trackingDerivation&&r(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){st.trackingDerivation&&r(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[K],n=t.dehanceValues_(t.values_).indexOf(e);return n>-1&&(this.splice(n,1),!0)}};function gn(e,t){"function"===typeof Array.prototype[e]&&(vn[e]=t(e))}function mn(e){return function(){var t=this[K];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_);return n[e].apply(n,arguments)}}function bn(e){return function(t,n){var r=this,a=this[K];return a.atom_.reportObserved(),a.dehanceValues_(a.values_)[e]((function(e,a){return t.call(n,e,a,r)}))}}function yn(e){return function(){var t=this,n=this[K];n.atom_.reportObserved();var r=n.dehanceValues_(n.values_),a=arguments[0];return arguments[0]=function(e,n,r){return a(e,n,r,t)},r[e].apply(r,arguments)}}gn("concat",mn),gn("flat",mn),gn("includes",mn),gn("indexOf",mn),gn("join",mn),gn("lastIndexOf",mn),gn("slice",mn),gn("toString",mn),gn("toLocaleString",mn),gn("every",bn),gn("filter",bn),gn("find",bn),gn("findIndex",bn),gn("flatMap",bn),gn("forEach",bn),gn("map",bn),gn("some",bn),gn("reduce",yn),gn("reduceRight",yn);var wn=x("ObservableArrayAdministration",pn);function On(e){return y(e)&&wn(e[K])}var kn={},Sn="add",xn="delete",jn=function(e,t){function n(e,t,n){var a=this;void 0===t&&(t=G),void 0===n&&(n="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[K]=kn,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=t,this.name_=n,m(Map)||r(18),this.keysAtom_=X("ObservableMap.keys()"),this.data_=new Map,this.hasMap_=new Map,Fe(!0,(function(){a.merge(e)}))}var a=n.prototype;return a.has_=function(e){return this.data_.has(e)},a.has=function(e){var t=this;if(!st.trackingDerivation)return this.has_(e);var n=this.hasMap_.get(e);if(!n){var r=n=new Ke(this.has_(e),$,"ObservableMap.key?",!1);this.hasMap_.set(e,r),Bt(r,(function(){return t.hasMap_.delete(e)}))}return n.get()},a.set=function(e,t){var n=this.has_(e);if(nn(this)){var r=an(this,{type:n?dn:Sn,object:this,newValue:t,name:e});if(!r)return this;t=r.newValue}return n?this.updateValue_(e,t):this.addValue_(e,t),this},a.delete=function(e){var t=this;if((this.keysAtom_,nn(this))&&!an(this,{type:xn,object:this,name:e}))return!1;if(this.has_(e)){var n=on(this),r=n?{observableKind:"map",debugObjectName:this.name_,type:xn,object:this,oldValue:this.data_.get(e).value_,name:e}:null;return Qt((function(){var n;t.keysAtom_.reportChanged(),null==(n=t.hasMap_.get(e))||n.setNewValue_(!1),t.data_.get(e).setNewValue_(void 0),t.data_.delete(e)})),n&&cn(this,r),!0}return!1},a.updateValue_=function(e,t){var n=this.data_.get(e);if((t=n.prepareNewValue_(t))!==st.UNCHANGED){var r=on(this),a=r?{observableKind:"map",debugObjectName:this.name_,type:dn,object:this,oldValue:n.value_,name:e,newValue:t}:null;0,n.setNewValue_(t),r&&cn(this,a)}},a.addValue_=function(e,t){var n=this;this.keysAtom_,Qt((function(){var r,a=new Ke(t,n.enhancer_,"ObservableMap.key",!1);n.data_.set(e,a),t=a.value_,null==(r=n.hasMap_.get(e))||r.setNewValue_(!0),n.keysAtom_.reportChanged()}));var r=on(this),a=r?{observableKind:"map",debugObjectName:this.name_,type:Sn,object:this,name:e,newValue:t}:null;r&&cn(this,a)},a.get=function(e){return this.has(e)?this.dehanceValue_(this.data_.get(e).get()):this.dehanceValue_(void 0)},a.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},a.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},a.values=function(){var e=this,t=this.keys();return er({next:function(){var n=t.next(),r=n.done,a=n.value;return{done:r,value:r?void 0:e.get(a)}}})},a.entries=function(){var e=this,t=this.keys();return er({next:function(){var n=t.next(),r=n.done,a=n.value;return{done:r,value:r?void 0:[a,e.get(a)]}}})},a[e]=function(){return this.entries()},a.forEach=function(e,t){for(var n,r=H(this);!(n=r()).done;){var a=n.value,i=a[0],o=a[1];e.call(t,o,i,this)}},a.merge=function(e){var t=this;return _n(e)&&(e=new Map(e)),Qt((function(){w(e)?function(e){var t=Object.keys(e);if(!C)return t;var n=Object.getOwnPropertySymbols(e);return n.length?[].concat(t,n.filter((function(t){return u.propertyIsEnumerable.call(e,t)}))):t}(e).forEach((function(n){return t.set(n,e[n])})):Array.isArray(e)?e.forEach((function(e){var n=e[0],r=e[1];return t.set(n,r)})):j(e)?(e.constructor!==Map&&r(19,e),e.forEach((function(e,n){return t.set(n,e)}))):null!==e&&void 0!==e&&r(20,e)})),this},a.clear=function(){var e=this;Qt((function(){Je((function(){for(var t,n=H(e.keys());!(t=n()).done;){var r=t.value;e.delete(r)}}))}))},a.replace=function(e){var t=this;return Qt((function(){for(var n,a=function(e){if(j(e)||_n(e))return e;if(Array.isArray(e))return new Map(e);if(w(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}return r(21,e)}(e),i=new Map,o=!1,s=H(t.data_.keys());!(n=s()).done;){var c=n.value;if(!a.has(c))if(t.delete(c))o=!0;else{var u=t.data_.get(c);i.set(c,u)}}for(var l,d=H(a.entries());!(l=d()).done;){var f=l.value,p=f[0],h=f[1],v=t.data_.has(p);if(t.set(p,h),t.data_.has(p)){var g=t.data_.get(p);i.set(p,g),v||(o=!0)}}if(!o)if(t.data_.size!==i.size)t.keysAtom_.reportChanged();else for(var m=t.data_.keys(),b=i.keys(),y=m.next(),O=b.next();!y.done;){if(y.value!==O.value){t.keysAtom_.reportChanged();break}y=m.next(),O=b.next()}t.data_=i})),this},a.toString=function(){return"[object ObservableMap]"},a.toJSON=function(){return Array.from(this)},a.observe_=function(e,t){return sn(this,e)},a.intercept_=function(e){return rn(this,e)},T(n,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:t,get:function(){return"Map"}}]),n}(Symbol.iterator,Symbol.toStringTag),_n=x("ObservableMap",jn);var Cn={},En=function(e,t){function n(e,t,n){void 0===t&&(t=G),void 0===n&&(n="ObservableSet"),this.name_=void 0,this[K]=Cn,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=n,m(Set)||r(22),this.atom_=X(this.name_),this.enhancer_=function(e,r){return t(e,r,n)},e&&this.replace(e)}var a=n.prototype;return a.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},a.clear=function(){var e=this;Qt((function(){Je((function(){for(var t,n=H(e.data_.values());!(t=n()).done;){var r=t.value;e.delete(r)}}))}))},a.forEach=function(e,t){for(var n,r=H(this);!(n=r()).done;){var a=n.value;e.call(t,a,a,this)}},a.add=function(e){var t=this;if((this.atom_,nn(this))&&!an(this,{type:Sn,object:this,newValue:e}))return this;if(!this.has(e)){Qt((function(){t.data_.add(t.enhancer_(e,void 0)),t.atom_.reportChanged()}));var n=!1,r=on(this),a=r?{observableKind:"set",debugObjectName:this.name_,type:Sn,object:this,newValue:e}:null;n,r&&cn(this,a)}return this},a.delete=function(e){var t=this;if(nn(this)&&!an(this,{type:xn,object:this,oldValue:e}))return!1;if(this.has(e)){var n=on(this),r=n?{observableKind:"set",debugObjectName:this.name_,type:xn,object:this,oldValue:e}:null;return Qt((function(){t.atom_.reportChanged(),t.data_.delete(e)})),n&&cn(this,r),!0}return!1},a.has=function(e){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(e))},a.entries=function(){var e=0,t=Array.from(this.keys()),n=Array.from(this.values());return er({next:function(){var r=e;return e+=1,r<n.length?{value:[t[r],n[r]],done:!1}:{done:!0}}})},a.keys=function(){return this.values()},a.values=function(){this.atom_.reportObserved();var e=this,t=0,n=Array.from(this.data_.values());return er({next:function(){return t<n.length?{value:e.dehanceValue_(n[t++]),done:!1}:{done:!0}}})},a.replace=function(e){var t=this;return In(e)&&(e=new Set(e)),Qt((function(){Array.isArray(e)||_(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!==e&&void 0!==e&&r("Cannot initialize set from "+e)})),this},a.observe_=function(e,t){return sn(this,e)},a.intercept_=function(e){return rn(this,e)},a.toJSON=function(){return Array.from(this)},a.toString=function(){return"[object ObservableSet]"},a[e]=function(){return this.values()},T(n,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:t,get:function(){return"Set"}}]),n}(Symbol.iterator,Symbol.toStringTag),In=x("ObservableSet",En),Pn=Object.create(null),Mn="remove",An=function(){function e(e,t,n,r){void 0===t&&(t=new Map),void 0===r&&(r=de),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=e,this.values_=t,this.name_=n,this.defaultAnnotation_=r,this.keysAtom_=new V("ObservableObject.keys"),this.isPlainObject_=w(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(e){return this.values_.get(e).get()},t.setObservablePropValue_=function(e,t){var n=this.values_.get(e);if(n instanceof Ve)return n.set(t),!0;if(nn(this)){var r=an(this,{type:dn,object:this.proxy_||this.target_,name:e,newValue:t});if(!r)return null;t=r.newValue}if((t=n.prepareNewValue_(t))!==st.UNCHANGED){var a=on(this),i=a?{type:dn,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:n.value_,name:e,newValue:t}:null;0,n.setNewValue_(t),a&&cn(this,i)}return!0},t.get_=function(e){return st.trackingDerivation&&!P(this.target_,e)&&this.has_(e),this.target_[e]},t.set_=function(e,t,n){return void 0===n&&(n=!1),P(this.target_,e)?this.values_.has(e)?this.setObservablePropValue_(e,t):n?Reflect.set(this.target_,e,t):(this.target_[e]=t,!0):this.extend_(e,{value:t,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,n)},t.has_=function(e){if(!st.trackingDerivation)return e in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var t=this.pendingKeys_.get(e);return t||(t=new Ke(e in this.target_,$,"ObservableObject.key?",!1),this.pendingKeys_.set(e,t)),t.get()},t.make_=function(e,t){if(!0===t&&(t=this.defaultAnnotation_),!1!==t){if(Fn(this,t,e),!(e in this.target_)){var n;if(null!=(n=this.target_[z])&&n[e])return;r(1,t.annotationType_,this.name_+"."+e.toString())}for(var a=this.target_;a&&a!==u;){var i=s(a,e);if(i){var o=t.make_(this,e,i,a);if(0===o)return;if(1===o)break}a=Object.getPrototypeOf(a)}Ln(this,t,e)}},t.extend_=function(e,t,n,r){if(void 0===r&&(r=!1),!0===n&&(n=this.defaultAnnotation_),!1===n)return this.defineProperty_(e,t,r);Fn(this,n,e);var a=n.extend_(this,e,t,r);return a&&Ln(this,n,e),a},t.defineProperty_=function(e,t,n){void 0===n&&(n=!1);try{dt();var r=this.delete_(e);if(!r)return r;if(nn(this)){var a=an(this,{object:this.proxy_||this.target_,name:e,type:Sn,newValue:t.value});if(!a)return null;var i=a.newValue;t.value!==i&&(t=D({},t,{value:i}))}if(n){if(!Reflect.defineProperty(this.target_,e,t))return!1}else c(this.target_,e,t);this.notifyPropertyAddition_(e,t.value)}finally{ft()}return!0},t.defineObservableProperty_=function(e,t,n,r){void 0===r&&(r=!1);try{dt();var a=this.delete_(e);if(!a)return a;if(nn(this)){var i=an(this,{object:this.proxy_||this.target_,name:e,type:Sn,newValue:t});if(!i)return null;t=i.newValue}var o=Rn(e),s={configurable:!st.safeDescriptors||this.isPlainObject_,enumerable:!0,get:o.get,set:o.set};if(r){if(!Reflect.defineProperty(this.target_,e,s))return!1}else c(this.target_,e,s);var u=new Ke(t,n,"ObservableObject.key",!1);this.values_.set(e,u),this.notifyPropertyAddition_(e,u.value_)}finally{ft()}return!0},t.defineComputedProperty_=function(e,t,n){void 0===n&&(n=!1);try{dt();var r=this.delete_(e);if(!r)return r;if(nn(this))if(!an(this,{object:this.proxy_||this.target_,name:e,type:Sn,newValue:void 0}))return null;t.name||(t.name="ObservableObject.key"),t.context=this.proxy_||this.target_;var a=Rn(e),i={configurable:!st.safeDescriptors||this.isPlainObject_,enumerable:!1,get:a.get,set:a.set};if(n){if(!Reflect.defineProperty(this.target_,e,i))return!1}else c(this.target_,e,i);this.values_.set(e,new Ve(t)),this.notifyPropertyAddition_(e,void 0)}finally{ft()}return!0},t.delete_=function(e,t){if(void 0===t&&(t=!1),!P(this.target_,e))return!0;if(nn(this)&&!an(this,{object:this.proxy_||this.target_,name:e,type:Mn}))return null;try{var n,r;dt();var a,i=on(this),o=this.values_.get(e),c=void 0;if(!o&&i)c=null==(a=s(this.target_,e))?void 0:a.value;if(t){if(!Reflect.deleteProperty(this.target_,e))return!1}else delete this.target_[e];if(o&&(this.values_.delete(e),o instanceof Ke&&(c=o.value_),ht(o)),this.keysAtom_.reportChanged(),null==(n=this.pendingKeys_)||null==(r=n.get(e))||r.set(e in this.target_),i){var u={type:Mn,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:c,name:e};0,i&&cn(this,u)}}finally{ft()}return!0},t.observe_=function(e,t){return sn(this,e)},t.intercept_=function(e){return rn(this,e)},t.notifyPropertyAddition_=function(e,t){var n,r,a=on(this);if(a){var i=a?{type:Sn,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:e,newValue:t}:null;0,a&&cn(this,i)}null==(n=this.pendingKeys_)||null==(r=n.get(e))||r.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),E(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function Tn(e,t){var n;if(P(e,K))return e;var r=null!=(n=null==t?void 0:t.name)?n:"ObservableObject",a=new An(e,new Map,String(r),function(e){var t;return e?null!=(t=e.defaultDecorator)?t:fe(e):void 0}(t));return k(e,K,a),e}var Dn=x("ObservableObjectAdministration",An);function Rn(e){return Pn[e]||(Pn[e]={get:function(){return this[K].getObservablePropValue_(e)},set:function(t){return this[K].setObservablePropValue_(e,t)}})}function Bn(e){return!!y(e)&&Dn(e[K])}function Ln(e,t,n){var r;null==(r=e.target_[z])||delete r[n]}function Fn(e,t,n){}var Hn,zn,Nn=0,Un=function(){};Hn=Un,zn=Array.prototype,Object.setPrototypeOf?Object.setPrototypeOf(Hn.prototype,zn):void 0!==Hn.prototype.__proto__?Hn.prototype.__proto__=zn:Hn.prototype=zn;var Kn=function(e,t,n){function r(t,n,r,a){var i;void 0===r&&(r="ObservableArray"),void 0===a&&(a=!1),i=e.call(this)||this;var o=new pn(r,n,a,!0);if(o.proxy_=L(i),S(L(i),K,o),t&&t.length){var s=He(!0);i.spliceWithArray(0,0,t),ze(s)}return i}R(r,e);var a=r.prototype;return a.concat=function(){this[K].atom_.reportObserved();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.prototype.concat.apply(this.slice(),t.map((function(e){return On(e)?e.slice():e})))},a[n]=function(){var e=this,t=0;return er({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})},T(r,[{key:"length",get:function(){return this[K].getArrayLength_()},set:function(e){this[K].setArrayLength_(e)}},{key:t,get:function(){return"Array"}}]),r}(Un,Symbol.toStringTag,Symbol.iterator);function Vn(e){c(Kn.prototype,""+e,function(e){return{enumerable:!1,configurable:!0,get:function(){return this[K].get_(e)},set:function(t){this[K].set_(e,t)}}}(e))}function Wn(e){if(e>Nn){for(var t=Nn;t<e+100;t++)Vn(t);Nn=e}}function Xn(e,t,n){return new Kn(e,t,n)}function Yn(e,t){if("object"===typeof e&&null!==e){if(On(e))return void 0!==t&&r(23),e[K].atom_;if(In(e))return e[K];if(_n(e)){if(void 0===t)return e.keysAtom_;var n=e.data_.get(t)||e.hasMap_.get(t);return n||r(25,t,$n(e)),n}if(Bn(e)){if(!t)return r(26);var a=e[K].values_.get(t);return a||r(27,t,$n(e)),a}if(W(e)||We(e)||yt(e))return e}else if(m(e)&&yt(e[K]))return e[K];r(28)}function Gn(e,t){return e||r(29),void 0!==t?Gn(Yn(e,t)):W(e)||We(e)||yt(e)||_n(e)||In(e)?e:e[K]?e[K]:void r(24,e)}function $n(e,t){var n;if(void 0!==t)n=Yn(e,t);else{if(Mt(e))return e.name;n=Bn(e)||_n(e)||In(e)?Gn(e):Yn(e)}return n.name_}Object.entries(vn).forEach((function(e){var t=e[0],n=e[1];"concat"!==t&&k(Kn.prototype,t,n)})),Wn(1e3);var qn=u.toString;function Zn(e,t,n){return void 0===n&&(n=-1),Jn(e,t,n)}function Jn(e,t,n,r,a){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return!1;if(e!==e)return t!==t;var i=typeof e;if("function"!==i&&"object"!==i&&"object"!=typeof t)return!1;var o=qn.call(e);if(o!==qn.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e===""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t;case"[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":n>=0&&n++}e=Qn(e),t=Qn(t);var s="[object Array]"===o;if(!s){if("object"!=typeof e||"object"!=typeof t)return!1;var c=e.constructor,u=t.constructor;if(c!==u&&!(m(c)&&c instanceof c&&m(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}if(0===n)return!1;n<0&&(n=-1),a=a||[];for(var l=(r=r||[]).length;l--;)if(r[l]===e)return a[l]===t;if(r.push(e),a.push(t),s){if((l=e.length)!==t.length)return!1;for(;l--;)if(!Jn(e[l],t[l],n-1,r,a))return!1}else{var d,f=Object.keys(e);if(l=f.length,Object.keys(t).length!==l)return!1;for(;l--;)if(!P(t,d=f[l])||!Jn(e[d],t[d],n-1,r,a))return!1}return r.pop(),a.pop(),!0}function Qn(e){return On(e)?e.slice():j(e)||_n(e)||_(e)||In(e)?Array.from(e.entries()):e}function er(e){return e[Symbol.iterator]=tr,e}function tr(){return this}["Symbol","Map","Set"].forEach((function(e){"undefined"===typeof i()[e]&&r("MobX requires global '"+e+"' to be available or polyfilled")})),"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:$n},$mobx:K})}).call(this,n(31))},function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(43)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(24);function a(e,t){if(e){if("string"===typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},function(e,t,n){"use strict";e.exports=n(41)},function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function o(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(a){return!1}}()?Object.assign:function(e,t){for(var n,s,c=o(e),u=1;u<arguments.length;u++){for(var l in n=Object(arguments[u]))a.call(n,l)&&(c[l]=n[l]);if(r){s=r(n);for(var d=0;d<s.length;d++)i.call(n,s[d])&&(c[s[d]]=n[s[d]])}}return c}},function(e,t,n){var r=n(7);e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",(function(){return a}));var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"htmlToText",value:function(e){var t=document.implementation.createHTMLDocument("New").body;return t.innerHTML=e,t.textContent||t.innerText||""}},{key:"truncateString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:90;return e.length<=t?e:e.substring(0,t)+"..."}},{key:"sleep",value:function(e){return new Promise((function(t,n){setTimeout((function(){t()}),1e3*e)}))}}],(n=null)&&r(t.prototype,n),a&&r(t,a),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"EditorKit",(function(){return u}));var a=n(2),i=n(8);function o(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,a)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,c,"next",e)}function c(e){o(i,r,a,s,c,"throw",e)}s(void 0)}))}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"EditorKitDelegate",(function(){return i.a}));var u=function(){function e(t){var n=t.delegate,r=t.mode,i=void 0===r?"plaintext":r,o=t.supportsFilesafe,s=void 0!==o&&o,c=t.coallesedSavingDelay,u=void 0===c?250:c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.delegate=n,this.mode=i,this.supportsFilesafe=s,this.coallesedSavingDelay=u,this.internal=new a.a({delegate:n,mode:i,supportsFilesafe:s,coallesedSavingDelay:u})}var t,n,i;return t=e,(n=[{key:"getFilesafe",value:function(){var e=s(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.internal.getFilesafe());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onEditorValueChanged",value:function(e){this.internal.onEditorValueChanged(e)}},{key:"onEditorKeyUp",value:function(e){var t=e.key,n=e.isSpace,r=e.isEnter;this.internal.onEditorKeyUp({key:t,isSpace:n,isEnter:r})}},{key:"onEditorPaste",value:function(){this.internal.onEditorPaste()}},{key:"canUploadFiles",value:function(){return this.internal.canUploadFiles()}},{key:"uploadJSFileObject",value:function(){var e=s(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.internal.uploadJSFileObject(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}])&&c(t.prototype,n),i&&c(t,i),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(3),i=n.n(a),o=n(0),s=n(4),c=n(5),u=n(6);function l(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,a)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){l(i,r,a,o,s,"next",e)}function s(e){l(i,r,a,o,s,"throw",e)}o(void 0)}))}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(t){var n=t.delegate,r=t.mode,a=t.supportsFilesafe,i=t.coallesedSavingDelay,o=void 0===i?250:i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.delegate=n,this.mode=r,this.supportsFilesafe=a,this.coallesedSavingDelay=o,this.fileIdsPendingAssociation=[],this.connectToBridge(),a&&(this.filesafeImportPromise=this.importFilesafe())}var t,a,l;return t=e,(a=[{key:"importFilesafe",value:function(){var e=d(r.mark((function e(){var t=this;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){e()})).then(n.bind(null,7)).then((function(e){return t.FilesafeClass=e.default,t.configureFilesafe(),t.filesafe})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getFilesafe",value:function(){var e=d(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.filesafe&&!this.filesafeImportPromise){e.next=5;break}if(!this.filesafeImportPromise){e.next=3;break}return e.abrupt("return",this.filesafeImportPromise);case 3:e.next=6;break;case 5:return e.abrupt("return",this.importFilesafe());case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"configureFilesafe",value:function(){var e=this;this.filesafe=new this.FilesafeClass({componentManager:this.componentManager}),this.filesafe.addDataChangeObserver((function(){var t=e.filesafe.getAllFileDescriptors();if(e.note&&e.fileIdsPendingAssociation.length>0){var n=!1,r=!0,a=!1,i=void 0;try{for(var o,s=function(){var r=o.value,a=t.find((function(e){return e.uuid==r}));if(!a)return"continue";n=!0,e.fileIdsPendingAssociation.splice(e.fileIdsPendingAssociation.indexOf(r),1);var i=u.a.insertionSyntaxForFileDescriptor(a);e.delegate.insertRawText(i)},c=e.fileIdsPendingAssociation.slice()[Symbol.iterator]();!(r=(o=c.next()).done);r=!0)s()}catch(l){a=!0,i=l}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}n&&e.textExpander.searchPatterns()}t.length>0&&e.fileLoader.loadFilesafeElements()})),this.filesafe.addNewFileDescriptorHandler((function(t){e.fileIdsPendingAssociation.push(t.uuid)})),this.fileLoader=new s.a({filesafe:this.filesafe,getElementsBySelector:this.delegate.getElementsBySelector,insertElement:this.delegate.insertElement,preprocessElement:this.delegate.preprocessElement}),this.textExpander=new c.a({afterExpand:function(){e.fileLoader.loadFilesafeElements()},getCurrentLineText:this.delegate.getCurrentLineText,getPreviousLineText:this.delegate.getPreviousLineText,replaceText:this.delegate.replaceText,patterns:[{regex:u.a.FilesafeSyntaxPattern,callback:function(e){return u.a.expandedFilesafeSyntax(e)}}]})}},{key:"connectToBridge",value:function(){var e=this;this.componentManager=new i.a(null,(function(){document.documentElement.classList.add(e.componentManager.platform)})),this.componentManager.coallesedSavingDelay=this.coallesedSavingDelay,this.componentManager.streamContextItem((function(t){var n=!0;if(e.note&&e.note.uuid==t.uuid&&(n=!1),e.supportsFilesafe){var r=e.FilesafeClass.getSFItemClass();e.note=new r(t),e.filesafe.setCurrentNote(e.note)}else e.note=t;if(!t.isMetadataUpdate){var a=t.content.text;"html"==e.mode&&n&&(/<[a-z][\s\S]*>/i.test(a)||(e.ignoreNextTextChange=!0)),e.previousText=a,e.supportsFilesafe&&(e.needsFilesafeElementLoad=!0,a=u.a.expandedFilesafeSyntax(a)),e.delegate.setEditorRawText(a),n&&e.delegate.clearUndoHistory()}}))}},{key:"onEditorKeyUp",value:function(e){var t=e.key,n=e.isSpace,r=e.isEnter;this.textExpander.onKeyUp({key:t,isSpace:n,isEnter:r})}},{key:"onEditorPaste",value:function(){this.textExpander.onKeyUp({isPaste:!0})}},{key:"onEditorValueChanged",value:function(e){var t=this;if(this.needsFilesafeElementLoad&&(this.needsFilesafeElementLoad=!1,this.fileLoader.loadFilesafeElements()),this.ignoreNextTextChange)this.ignoreNextTextChange=!1;else{if(this.supportsFilesafe&&(e=u.a.collapseFilesafeSyntax(e),this.previousText==e))return;this.previousText=e;var n=this.note;n&&this.componentManager.saveItemWithPresave(n,(function(){if(n.content.text=e,t.delegate.generateCustomPreview){var r=t.delegate.generateCustomPreview(e);r.html&&(n.content.preview_html=r.html),r.plain&&(n.content.preview_plain=r.plain)}else{if("html"==t.mode){var a=u.a.removeFilesafeSyntaxFromHtml(e);a=o.a.truncateString(o.a.htmlToText(a)),n.content.preview_plain=a.length>0?a:" "}else n.content.preview_plain=e;n.content.preview_html=null}}))}}},{key:"canUploadFiles",value:function(){var e=this.filesafe.getAllCredentials(),t=this.filesafe.getAllIntegrations();return e.length>0&&t.length>0}},{key:"uploadJSFileObject",value:function(){var e=d(r.mark((function e(t){var n,a=this;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.fileLoader.insertStatusAtCursor("Processing file..."),e.abrupt("return",this.filesafe.encryptAndUploadJavaScriptFileObject(t).then((function(e){a.fileLoader.removeCursorStatus(n)})));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}])&&f(t.prototype,a),l&&f(t,l),e}()},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sentMessages=[],this.messageQueue=[],this.loggingEnabled=!1,this.acceptsThemes=!0,this.activeThemes=[],this.initialPermissions=t,this.onReadyCallback=n,this.coallesedSaving=!0,this.coallesedSavingDelay=250,this.registerMessageHandler()}return r(e,[{key:"registerMessageHandler",value:function(){var e=this,t=function(t){e.loggingEnabled&&console.log("Components API Message received:",t.data),e.origin||(e.origin=t.origin);var n=t.data,r="string"===typeof n?JSON.parse(n):n;e.handleMessage(r)};document.addEventListener("message",(function(e){t(e)}),!1),window.addEventListener("message",(function(e){t(e)}),!1)}},{key:"handleMessage",value:function(e){if("component-registered"===e.action)this.sessionKey=e.sessionKey,this.componentData=e.componentData,this.onReady(e.data),this.loggingEnabled&&console.log("Component successfully registered with payload:",e);else if("themes"===e.action)this.acceptsThemes&&this.activateThemes(e.data.themes);else if(e.original){var t=this.sentMessages.filter((function(t){return t.messageId===e.original.messageId}))[0];t||alert("This extension is attempting to communicate with Standard Notes, but an error is preventing it from doing so. Please restart this extension and try again."),t.callback&&t.callback(e.data)}}},{key:"onReady",value:function(e){this.environment=e.environment,this.platform=e.platform,this.uuid=e.uuid,this.isMobile="mobile"==this.environment,this.initialPermissions&&this.initialPermissions.length>0&&this.requestPermissions(this.initialPermissions);var t=!0,n=!1,r=void 0;try{for(var a,i=this.messageQueue[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value;this.postMessage(o.action,o.data,o.callback)}}catch(s){n=!0,r=s}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}this.messageQueue=[],this.loggingEnabled&&console.log("onReadyData",e),this.activateThemes(e.activeThemeUrls||[]),this.onReadyCallback&&this.onReadyCallback()}},{key:"getSelfComponentUUID",value:function(){return this.uuid}},{key:"isRunningInDesktopApplication",value:function(){return"desktop"===this.environment}},{key:"setComponentDataValueForKey",value:function(e,t){this.componentData[e]=t,this.postMessage("set-component-data",{componentData:this.componentData},(function(e){}))}},{key:"clearComponentData",value:function(){this.componentData={},this.postMessage("set-component-data",{componentData:this.componentData},(function(e){}))}},{key:"componentDataValueForKey",value:function(e){return this.componentData[e]}},{key:"postMessage",value:function(e,t,n){if(this.sessionKey){var r={action:e,data:t,messageId:this.generateUUID(),sessionKey:this.sessionKey,api:"component"},a=JSON.parse(JSON.stringify(r));a.callback=n,this.sentMessages.push(a),this.isMobile&&(r=JSON.stringify(r)),this.loggingEnabled&&console.log("Posting message:",r),window.parent.postMessage(r,this.origin)}else this.messageQueue.push({action:e,data:t,callback:n})}},{key:"setSize",value:function(e,t,n){this.postMessage("set-size",{type:e,width:t,height:n},(function(e){}))}},{key:"requestPermissions",value:function(e,t){this.postMessage("request-permissions",{permissions:e},function(e){t&&t()}.bind(this))}},{key:"streamItems",value:function(e,t){Array.isArray(e)||(e=[e]),this.postMessage("stream-items",{content_types:e},function(e){t(e.items)}.bind(this))}},{key:"streamContextItem",value:function(e){var t=this;this.postMessage("stream-context-item",null,(function(n){var r=n.item;(!t.lastStreamedItem||t.lastStreamedItem.uuid!==r.uuid)&&t.pendingSaveTimeout&&(clearTimeout(t.pendingSaveTimeout),t._performSavingOfItems(t.pendingSaveParams),t.pendingSaveTimeout=null,t.pendingSaveParams=null),t.lastStreamedItem=r,e(t.lastStreamedItem)}))}},{key:"selectItem",value:function(e){this.postMessage("select-item",{item:this.jsonObjectForItem(e)})}},{key:"createItem",value:function(e,t){this.postMessage("create-item",{item:this.jsonObjectForItem(e)},function(e){var n=e.item;!n&&e.items&&e.items.length>0&&(n=e.items[0]),this.associateItem(n),t&&t(n)}.bind(this))}},{key:"createItems",value:function(e,t){var n=this,r=e.map((function(e){return n.jsonObjectForItem(e)}));this.postMessage("create-items",{items:r},function(e){t&&t(e.items)}.bind(this))}},{key:"associateItem",value:function(e){this.postMessage("associate-item",{item:this.jsonObjectForItem(e)})}},{key:"deassociateItem",value:function(e){this.postMessage("deassociate-item",{item:this.jsonObjectForItem(e)})}},{key:"clearSelection",value:function(){this.postMessage("clear-selection",{content_type:"Tag"})}},{key:"deleteItem",value:function(e,t){this.deleteItems([e],t)}},{key:"deleteItems",value:function(e,t){var n={items:e.map(function(e){return this.jsonObjectForItem(e)}.bind(this))};this.postMessage("delete-items",n,(function(e){t&&t(e)}))}},{key:"sendCustomEvent",value:function(e,t,n){this.postMessage(e,t,function(e){n&&n(e)}.bind(this))}},{key:"saveItem",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.saveItems([e],t,n)}},{key:"saveItemWithPresave",value:function(e,t,n){this.saveItemsWithPresave([e],t,n)}},{key:"saveItemsWithPresave",value:function(e,t,n){this.saveItems(e,n,!1,t)}},{key:"_performSavingOfItems",value:function(e){var t=e.items,n=e.presave,r=e.callback;n&&n();var a=[],i=!0,o=!1,s=void 0;try{for(var c,u=t[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var l=c.value;a.push(this.jsonObjectForItem(l))}}catch(d){o=!0,s=d}finally{try{!i&&u.return&&u.return()}finally{if(o)throw s}}this.postMessage("save-items",{items:a},(function(e){r&&r()}))}},{key:"saveItems",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments[3];if(this.pendingSaveItems||(this.pendingSaveItems=[]),1!=this.coallesedSaving||r)this._performSavingOfItems({items:e,presave:a,callback:t});else{this.pendingSaveTimeout&&clearTimeout(this.pendingSaveTimeout);var i=e.map((function(e){return e.uuid})),o=this.pendingSaveItems.filter((function(e){return!i.includes(e.uuid)}));this.pendingSaveItems=o.concat(e),this.pendingSaveParams={items:this.pendingSaveItems,presave:a,callback:t},this.pendingSaveTimeout=setTimeout((function(){n._performSavingOfItems(n.pendingSaveParams),n.pendingSaveItems=[],n.pendingSaveTimeout=null,n.pendingSaveParams=null}),this.coallesedSavingDelay)}}},{key:"jsonObjectForItem",value:function(e){var t=Object.assign({},e);return t.children=null,t.parent=null,t}},{key:"getItemAppDataValue",value:function(e,t){var n=e.content.appData&&e.content.appData["org.standardnotes.sn"];return n?n[t]:null}},{key:"activateThemes",value:function(e){if(this.loggingEnabled&&console.log("Incoming themes",e),this.activeThemes.sort().toString()!=e.sort().toString()){var t=e||[],n=[],r=!0,a=!1,i=void 0;try{for(var o,s=this.activeThemes[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value;e.includes(c)?t=t.filter((function(e){return e!=c})):n.push(c)}}catch(k){a=!0,i=k}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}this.loggingEnabled&&(console.log("Deactivating themes:",n),console.log("Activating themes:",t));var u=!0,l=!1,d=void 0;try{for(var f,p=n[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value;this.deactivateTheme(h)}}catch(k){l=!0,d=k}finally{try{!u&&p.return&&p.return()}finally{if(l)throw d}}this.activeThemes=e;var v=!0,g=!1,m=void 0;try{for(var b,y=t[Symbol.iterator]();!(v=(b=y.next()).done);v=!0){var w=b.value;if(w){var O=document.createElement("link");O.id=btoa(w),O.href=w,O.type="text/css",O.rel="stylesheet",O.media="screen,print",O.className="custom-theme",document.getElementsByTagName("head")[0].appendChild(O)}}}catch(k){g=!0,m=k}finally{try{!v&&y.return&&y.return()}finally{if(g)throw m}}}}},{key:"themeElementForUrl",value:function(e){return Array.from(document.getElementsByClassName("custom-theme")).slice().find((function(t){return t.id==btoa(e)}))}},{key:"deactivateTheme",value:function(e){var t=this.themeElementForUrl(e);t&&(t.disabled=!0,t.parentNode.removeChild(t))}},{key:"generateUUID",value:function(){var e=window.crypto||window.msCrypto;if(e){var t=new Uint32Array(4);e.getRandomValues(t);var n=-1;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){n++;var r=t[n>>3]>>n%8*4&15;return("x"==e?r:3&r|8).toString(16)}))}var r=(new Date).getTime();return window.performance&&"function"===typeof window.performance.now&&(r+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=(r+16*Math.random())%16|0;return r=Math.floor(r/16),("x"==e?t:3&t|8).toString(16)}))}}]),e}();"undefined"!=typeof e&&"undefined"!=typeof e.exports&&(e.exports=a),window&&(window.ComponentManager=a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(0);function i(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,a)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t){var n=t.filesafe,r=t.getElementsBySelector,a=t.preprocessElement,i=t.insertElement;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.filesafe=n,this.getElementsBySelector=r,this.insertElement=i,this.preprocessElement=a,this.uuidToFileTempUrlAndTypeMapping={},this.currentlyLoadingIds=[],this.statusElementMapping={},this.fileTypeToElementType={"image/png":"img","image/jpg":"img","image/jpeg":"img","image/gif":"img","image/tiff":"img","image/bmp":"img","video/mp4":"video","audio/mpeg":"audio","audio/mp3":"audio"}}var t,n,s;return t=e,(n=[{key:"fileTypeForElementType",value:function(e){return this.fileTypeToElementType[e.toLowerCase()]}},{key:"loadFilesafeElements",value:function(){var e=this.getElementsBySelector("*[fsplaceholder]"),t=!0,n=!1,r=void 0;try{for(var a,i=e[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value;this.loadFilesafeElement(o)}}catch(s){n=!0,r=s}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}},{key:"loadFilesafeElement",value:function(){var e,t=(e=r.mark((function e(t){var n,i,o,s,c,u,l,d,f,p,h,v=this;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.getAttribute("fsid"),i=t.getAttribute("fsname"),o=i&&"undefined"!=i?i:"file",!(s=this.uuidToFileTempUrlAndTypeMapping[n])){e.next=7;break}return this.insertMediaElement({url:s.url,fsid:n,fileType:s.fileType,fsname:s.fsname,fsElement:t}),e.abrupt("return");case 7:if(!this.currentlyLoadingIds.includes(n)){e.next=9;break}return e.abrupt("return");case 9:if(c=this.filesafe.findFileDescriptor(n)){e.next=13;break}return this.setStatus("Unable to find ".concat(o," ").concat(n,"."),t,n,i,!0),e.abrupt("return",{success:!1});case 13:if(u='[fsid="'.concat(c.uuid,'"][fscollapsable]'),!(document.querySelectorAll("img".concat(u,", figure").concat(u,", video").concat(u,", audio").concat(u)).length>0)){e.next=17;break}return e.abrupt("return",{success:!1});case 17:return l=function(){v.currentlyLoadingIds.splice(v.currentlyLoadingIds.indexOf(n),1)},this.currentlyLoadingIds.push(n),this.setStatus("Downloading ".concat(o,"..."),t,n,i),e.next=22,a.a.sleep(.05);case 22:return e.next=24,this.filesafe.downloadFileFromDescriptor(c).catch((function(e){v.setStatus("Unable to download ".concat(o," ").concat(n,"."),t,n,i)}));case 24:if(d=e.sent){e.next=27;break}return e.abrupt("return");case 27:return this.setStatus("Decrypting ".concat(o,"..."),t,n,i),e.next=30,a.a.sleep(.05);case 30:return e.next=32,this.filesafe.decryptFile({fileDescriptor:c,fileItem:d}).catch((function(e){v.setStatus("Unable to decrypt ".concat(o," ").concat(n,"."),t,n,i)}));case 32:if(f=e.sent){e.next=35;break}return e.abrupt("return");case 35:return this.setStatus(null,t,n),e.next=38,a.a.sleep(.05);case 38:return p=c.content.fileType,h=this.filesafe.createTemporaryFileUrl({base64Data:f.decryptedData,dataType:p}),this.insertMediaElement({url:h,fsid:n,fileType:p,fsname:i,fsElement:t}),l(),this.uuidToFileTempUrlAndTypeMapping[n]={url:h,fileType:p,fsname:i},e.abrupt("return",{success:!0});case 44:case"end":return e.stop()}}),e,this)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){i(o,r,a,s,c,"next",e)}function c(e){i(o,r,a,s,c,"throw",e)}s(void 0)}))});return function(e){return t.apply(this,arguments)}}()},{key:"insertMediaElement",value:function(e){var t,n=e.url,r=e.fsid,a=e.fsname,i=e.fileType,o=e.fsElement,s=this.fileTypeForElementType(i);return t="img"==s?this.createImageElement({url:n,fsid:r,fsname:a,fsElement:o}):"video"==s?this.createVideoElement({url:n,fsid:r,fileType:i,fsname:a,fsElement:o}):"audio"==s?this.createAudioElement({url:n,fsid:r,fsname:a}):this.createDownloadElement({url:n,fsid:r,fileType:i,fsname:a,fsElement:o}),this.insertElementNearElement(t,o),o.remove(),!0}},{key:"wrapElementInTag",value:function(e){var t=e.element,n=e.tagName,r=e.fsid,a=e.fsname,i=document.createElement(n);return i.setAttribute("fsid",r),i.setAttribute("fsname",a),i.setAttribute("fscollapsable",!0),i.setAttribute("contenteditable",!0),i.append(t),i}},{key:"basicwrapElementInTag",value:function(e,t){var n=document.createElement(t);return n.append(e),n}},{key:"createImageElement",value:function(e){var t=e.url,n=e.fsid,r=e.fsname,a=e.fsElement,i=document.createElement("img");return i.setAttribute("src",t),i.setAttribute("srcset","".concat(t," 2x")),i.setAttribute("fsid",n),i.setAttribute("fsname",r),i.setAttribute("fscollapsable",!0),a.getAttribute("width")&&(i.setAttribute("width",a.getAttribute("width")),i.setAttribute("height",a.getAttribute("height"))),i}},{key:"createVideoElement",value:function(e){var t=e.url,n=e.fsid,r=e.fileType,a=e.fsname,i=e.fsElement,o=document.createElement("video");o.setAttribute("controls",!0),o.setAttribute("fsid",n),o.setAttribute("fsname",a),o.setAttribute("fscollapsable",!0),i.getAttribute("width")&&(o.setAttribute("width",i.getAttribute("width")),o.setAttribute("height",i.getAttribute("height")));var s=document.createElement("source");return s.setAttribute("src",t),s.setAttribute("type",r),o.append(s),this.wrapElementInTag({element:o,tagName:"p",fsid:n,fsname:a})}},{key:"createDownloadElement",value:function(e){var t=e.url,n=e.fsid,r=(e.fileType,e.fsname),a=(e.fsElement,document.createElement("a"));return a.setAttribute("fsid",n),a.setAttribute("fsname",r),a.setAttribute("ghost","true"),a.setAttribute("fscollapsable",!0),a.setAttribute("href",t),a.textContent="".concat(r),a}},{key:"createAudioElement",value:function(e){var t=e.url,n=e.fsid,r=e.fsname,a=document.createElement("audio");return a.setAttribute("src",t),a.setAttribute("controls",!0),a.setAttribute("fsid",n),a.setAttribute("fsname",r),a.setAttribute("fscollapsable",!0),this.wrapElementInTag({element:a,tagName:"p",fsid:n,fsname:r})}},{key:"setStatus",value:function(e,t,n,r,a){if(n){var i=this.statusElementMapping[n];i&&(i.remove(),delete this.statusElementMapping[n])}if(e){var o=document.createElement("label");return o.setAttribute("id",n),o.setAttribute("ghost","true"),o.setAttribute("contenteditable",!1),o.style.fontWeight="bold",o.textContent=e,a&&(o.style.userSelect="all"),o=this.insertElementNearElement(o,t),n&&(this.statusElementMapping[n]=o),o}}},{key:"insertStatusAtCursor",value:function(e){var t=Math.random().toString(36).substring(7);return this.setStatus(e,null,t),t}},{key:"removeCursorStatus",value:function(e){var t=this.getElementsBySelector("#".concat(e));t.length>0&&t[0].remove()}},{key:"insertElementNearElement",value:function(e,t){var n=this.preprocessElement(e),r="child";if("figure"==n.tagName.toLowerCase()){var a=t.closest("p");a&&(t=a,r="afterend")}return this.insertElement(n,t,r),n}}])&&o(t.prototype,n),s&&o(t,s),e}()},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",(function(){return a}));var a=function(){function e(t){var n=t.patterns,r=t.afterExpand,a=t.beforeExpand,i=t.getCurrentLineText,o=t.getPreviousLineText,s=t.replaceText;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.patterns=n,this.afterExpand=r,this.beforeExpand=a,this.getCurrentLineText=i,this.getPreviousLineText=o,this.replaceText=s}var t,n,a;return t=e,(n=[{key:"onKeyUp",value:function(e){e.key;var t=e.isSpace,n=e.isEnter,r=e.isPaste;(t||n||r)&&this.searchPatterns({searchPreviousLine:n})}},{key:"searchPatterns",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.searchPreviousLine;e=n?this.getPreviousLineText():this.getCurrentLineText();var r=!0,a=!1,i=void 0;try{for(var o,s=this.patterns[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value,u=c.regex.exec(e);if(u){var l=u[0];if(l){var d=c.callback(l);this.replaceSelection(c.regex,d,n)}}}}catch(f){a=!0,i=f}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}}},{key:"replaceSelection",value:function(e,t,n){this.beforeExpand&&this.beforeExpand(),this.replaceText({regex:e,replacement:t,previousLine:n}),this.afterExpand&&this.afterExpand()}}])&&r(t.prototype,n),a&&r(t,a),e}()},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",(function(){return s}));var a,i,o,s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"expandedFilesafeSyntax",value:function(e){var t=this;return e.replace(this.FilesafeSyntaxPattern,(function(e){return t.filesafeSyntaxToHtmlElement(e)}))}},{key:"removeFilesafeSyntaxFromHtml",value:function(e){return e.replace(this.FilesafeSyntaxPattern,(function(e){return""}))}},{key:"insertionSyntaxForFileDescriptor",value:function(e){return"[FileSafe:".concat(e.uuid,":").concat(e.content.fileName,"]")}},{key:"filesafeSyntaxToHtmlElement",value:function(e){var t=(e=(e=(e=e.replace("<p>","")).replace("</p>","")).replace("[","").replace("]","")).split(":"),n=t[1],r=t[2],a=t[3],i="";if(a){var o=a.split("x");i="width=".concat(o[0]," height=").concat(o[1])}return"<p fsplaceholder=true style='display: none;' fscollapsable=true ghost=true fsid='".concat(n,"' fsname='").concat(r,"' ").concat(i,"></p>")}},{key:"collapseFilesafeSyntax",value:function(e){var t=(new DOMParser).parseFromString(e,"text/html"),n=t.querySelectorAll("*[fscollapsable]"),r=!0,a=!1,i=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value,u=c.getAttribute("fsid"),l=c.getAttribute("fsname"),d=c.getAttribute("width"),f=c.getAttribute("height"),p=["FileSafe",u,l];if(d||f){var h="".concat(d,"x").concat(f);p.push(h)}var v="<p>[".concat(p.join(":"),"]</p>");c.insertAdjacentHTML("afterend",v),c.remove()}}catch(g){a=!0,i=g}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return t.querySelectorAll("*[ghost]").forEach((function(e){e.remove()})),t.body.innerHTML}}],(n=null)&&r(t.prototype,n),a&&r(t,a),e}();o=/(<p>)?\[FileSafe[^\]]*\](<\/p>)?/g,(i="FilesafeSyntaxPattern")in(a=s)?Object.defineProperty(a,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[i]=o},function(e,t){e.exports=n(48)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function e(t){var n=t.insertRawText,r=t.onReceiveNote,a=t.setEditorRawText,i=t.getCurrentLineText,o=t.getPreviousLineText,s=t.replaceText,c=t.getElementsBySelector,u=t.insertElement,l=t.preprocessElement,d=t.clearUndoHistory,f=t.generateCustomPreview;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.insertRawText=n,this.onReceiveNote=r,this.setEditorRawText=a,this.getCurrentLineText=i,this.getPreviousLineText=o,this.replaceText=s,this.getElementsBySelector=c,this.insertElement=u,this.preprocessElement=l,this.clearUndoHistory=d,this.generateCustomPreview=f}}])},function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return w}));var r=n(6),a=n(10),i=n(9),o=n(16),s=n(4),c=n(14);function u(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l={target:function(e){if(e)return function(){return"current"in e?e.current:e}},enabled:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.c.isBrowser?window:void 0;return e})),eventOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.passive,n=void 0===t||t,r=e.capture,a=void 0!==r&&r;return{passive:n,capture:a}},transform:function(e){return e}},d=["target","eventOptions","window","enabled","transform"];function f(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n={},r=0,a=Object.entries(t);r<a.length;r++){var i=Object(s.a)(a[r],2),o=i[0],c=i[1];switch(typeof c){case"function":n[o]=c.call(n,e[o],o,e);break;case"object":n[o]=f(e[o],c);break;case"boolean":c&&(n[o]=e[o])}}return n}var p=function(){function e(t){Object(i.a)(this,e),Object(c.e)(this,"_listeners",[]),this._ctrl=t}return Object(o.a)(e,[{key:"add",value:function(e,t,n,r,a){var i=Object(c.p)(t,n),o=Object(c.d)(Object(c.d)({},this._ctrl.config.shared.eventOptions),a);e.addEventListener(i,r,o),this._listeners.push((function(){return e.removeEventListener(i,r,o)}))}},{key:"clean",value:function(){this._listeners.forEach((function(e){return e()})),this._listeners=[]}}]),e}(),h=function(){function e(){Object(i.a)(this,e),Object(c.e)(this,"_timeouts",new Map)}return Object(o.a)(e,[{key:"add",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:140;this.remove(e);for(var a=arguments.length,i=new Array(a>3?a-3:0),o=3;o<a;o++)i[o-3]=arguments[o];this._timeouts.set(e,(n=window).setTimeout.apply(n,[t,r].concat(i)))}},{key:"remove",value:function(e){var t=this._timeouts.get(e);t&&window.clearTimeout(t)}},{key:"clean",value:function(){this._timeouts.forEach((function(e){window.clearTimeout(e)})),this._timeouts.clear()}}]),e}(),v=function(){function e(t){Object(i.a)(this,e),Object(c.e)(this,"gestures",new Set),Object(c.e)(this,"_targetEventStore",new p(this)),Object(c.e)(this,"gestureEventStores",{}),Object(c.e)(this,"gestureTimeoutStores",{}),Object(c.e)(this,"handlers",{}),Object(c.e)(this,"config",{}),Object(c.e)(this,"pointerIds",new Set),Object(c.e)(this,"touchIds",new Set),Object(c.e)(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),function(e,t){t.drag&&g(e,"drag");t.wheel&&g(e,"wheel");t.scroll&&g(e,"scroll");t.move&&g(e,"move");t.pinch&&g(e,"pinch");t.hover&&g(e,"hover")}(this,t)}return Object(o.a)(e,[{key:"setEventIds",value:function(e){Object(c.k)(e)?this.touchIds=new Set(Object(c.f)(e)):"pointerId"in e&&("pointerup"===e.type||"pointercancel"===e.type?this.pointerIds.delete(e.pointerId):"pointerdown"===e.type&&this.pointerIds.add(e.pointerId))}},{key:"applyHandlers",value:function(e,t){this.handlers=e,this.nativeHandlers=t}},{key:"applyConfig",value:function(e,t){this.config=function(e,t){var n=e,r=n.target,a=n.eventOptions,i=n.window,o=n.enabled,s=n.transform,p=u(n,d),h={shared:f({target:r,eventOptions:a,window:i,enabled:o,transform:s},l)};if(t){var v=c.a.get(t);h[t]=f(Object(c.d)({shared:h.shared},p),v)}else for(var g in p){var m=c.a.get(g);m&&(h[g]=f(Object(c.d)({shared:h.shared},p[g]),m))}return h}(e,t)}},{key:"clean",value:function(){this._targetEventStore.clean();var e,t=Object(a.a)(this.gestures);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.gestureEventStores[n].clean(),this.gestureTimeoutStores[n].clean()}}catch(r){t.e(r)}finally{t.f()}}},{key:"effect",value:function(){var e=this;return this.config.shared.target&&this.bind(),function(){return e._targetEventStore.clean()}}},{key:"bind",value:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var o,s=this.config.shared,u=s.eventOptions,l={};if(!s.target||(o=s.target())){var d=m(l,u,!!o);if(s.enabled){var f,p=Object(a.a)(this.gestures);try{for(p.s();!(f=p.n()).done;){var h=f.value;if(this.config[h].enabled){var v=c.b.get(h);new v(this,n,h).bind(d)}}}catch(x){p.e(x)}finally{p.f()}var g=function(t){d(t,"",(function(r){return e.nativeHandlers[t](Object(c.d)(Object(c.d)({},e.state.shared),{},{event:r,args:n}))}),void 0,!0)};for(var b in this.nativeHandlers)g(b)}for(var y in l)l[y]=c.g.apply(void 0,Object(r.a)(l[y]));if(!o)return l;for(var w in l){var O=w.substr(2).toLowerCase(),k=!!~O.indexOf("capture"),S=!!~O.indexOf("passive");(k||S)&&(O=O.replace(/capture|passive/g,"")),this._targetEventStore.add(o,O,"",l[w],{capture:k,passive:S})}}}}]),e}();function g(e,t){e.gestures.add(t),e.gestureEventStores[t]=new p(e),e.gestureTimeoutStores[t]=new h}var m=function(e,t,n){return function(r,a,i){var o,s,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],d=null!==(o=u.capture)&&void 0!==o?o:t.capture,f=null!==(s=u.passive)&&void 0!==s?s:t.passive,p=l?r:Object(c.h)(r,a,d);n&&f&&(p+="Passive"),e[p]=e[p]||[],e[p].push(i)}},b=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function y(e,t,n,r,a,i){if(e.has(n)&&c.b.has(r)){var o=n+"Start",s=n+"End";a[r]=function(e){var r=void 0;return e.first&&o in t&&t[o](e),n in t&&(r=t[n](e)),e.last&&s in t&&t[s](e),r},i[r]=i[r]||{}}}function w(e,t){var n=function(e){var t={},n={},r=new Set;for(var a in e)b.test(a)?(r.add(RegExp.lastMatch),n[a]=e[a]):t[a]=e[a];return[n,t,r]}(e),r=Object(s.a)(n,3),a=r[0],i=r[1],o=r[2],c={};return y(o,a,"onDrag","drag",c,t),y(o,a,"onWheel","wheel",c,t),y(o,a,"onScroll","scroll",c,t),y(o,a,"onPinch","pinch",c,t),y(o,a,"onMove","move",c,t),y(o,a,"onHover","hover",c,t),{handlers:c,config:t,nativeHandlers:i}}},,function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){},function(e,t){},function(e,t,n){"use strict";function r(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"useGesture",(function(){return u}));var r=n(18),a=n(0),i=n.n(a),o=n(29);n(32),n(33);function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=i.a.useMemo((function(){return new o.a(e)}),[]);if(a.applyHandlers(e,r),a.applyConfig(t,n),i.a.useEffect(a.effect.bind(a)),i.a.useEffect((function(){return a.clean.bind(a)}),[]),void 0===t.target)return a.bind.bind(a)}function c(e){return e.forEach(r.e),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(o.b)(e,t),r=n.handlers,a=n.nativeHandlers,i=n.config;return s(r,i,void 0,a)}}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=c([r.a,r.d,r.f,r.g,r.c,r.b]);return n(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=new Set,r=function(e,r){var a="function"===typeof e?e(t):e;if(a!==t){var i=t;t=r?a:Object.assign({},t,a),n.forEach((function(e){return e(t,i)}))}},a=function(){return t},i={setState:r,getState:a,subscribe:function(e,r,i){return r||i?function(e,r,i){void 0===r&&(r=a),void 0===i&&(i=Object.is),console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");var o=r(t);function s(){var n=r(t);if(!i(o,n)){var a=o;e(o=n,a)}}return n.add(s),function(){return n.delete(s)}}(e,r,i):(n.add(e),function(){return n.delete(e)})},destroy:function(){return n.clear()}};return t=e(r,a,i),i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);function a(e){var t,n=new Set,r=function(e,r){var a="function"===typeof e?e(t):e;if(a!==t){var i=t;t=r?a:Object.assign({},t,a),n.forEach((function(e){return e(t,i)}))}},a=function(){return t},i={setState:r,getState:a,subscribe:function(e,r,i){return r||i?function(e,r,i){void 0===r&&(r=a),void 0===i&&(i=Object.is),console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");var o=r(t);function s(){var n=r(t);if(!i(o,n)){var a=o;e(o=n,a)}}return n.add(s),function(){return n.delete(s)}}(e,r,i):(n.add(e),function(){return n.delete(e)})},destroy:function(){return n.clear()}};return t=e(r,a,i),i}var i="undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?r.useEffect:r.useLayoutEffect;t.default=function(e){var t="function"===typeof e?a(e):e,n=function(e,n){void 0===e&&(e=t.getState),void 0===n&&(n=Object.is);var a,o=r.useReducer((function(e){return e+1}),0)[1],s=t.getState(),c=r.useRef(s),u=r.useRef(e),l=r.useRef(n),d=r.useRef(!1),f=r.useRef();void 0===f.current&&(f.current=e(s));var p=!1;(c.current!==s||u.current!==e||l.current!==n||d.current)&&(a=e(s),p=!n(f.current,a)),i((function(){p&&(f.current=a),c.current=s,u.current=e,l.current=n,d.current=!1}));var h=r.useRef(s);i((function(){var e=function(){try{var e=t.getState(),n=u.current(e);l.current(f.current,n)||(c.current=e,f.current=n,o())}catch(r){d.current=!0,o()}},n=t.subscribe(e);return t.getState()!==h.current&&e(),n}),[]);var v=p?a:f.current;return r.useDebugValue(v),v};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");var e=[n,t];return{next:function(){var t=e.length<=0;return{value:e.shift(),done:t}}}},n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return Zg}));var r=n(25),a=n(26);function i(e,t,n){return(i=Object(a.a)()?Reflect.construct:function(e,t,n){var a=[null];a.push.apply(a,t);var i=new(Function.bind.apply(e,a));return n&&Object(r.a)(i,n.prototype),i}).apply(null,arguments)}var o=n(5),s=n(12),c=n(13),u=n(16),l=n(2),d=n(4),f=n(9),p=n(7),h=n.n(p),v=n(6),g=n(10),m=n(0),b=n.n(m),y=n(3),w=n(8);function O(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var k,S="colors",x="sizes",j="space",_={gap:j,gridGap:j,columnGap:j,gridColumnGap:j,rowGap:j,gridRowGap:j,inset:j,insetBlock:j,insetBlockEnd:j,insetBlockStart:j,insetInline:j,insetInlineEnd:j,insetInlineStart:j,margin:j,marginTop:j,marginRight:j,marginBottom:j,marginLeft:j,marginBlock:j,marginBlockEnd:j,marginBlockStart:j,marginInline:j,marginInlineEnd:j,marginInlineStart:j,padding:j,paddingTop:j,paddingRight:j,paddingBottom:j,paddingLeft:j,paddingBlock:j,paddingBlockEnd:j,paddingBlockStart:j,paddingInline:j,paddingInlineEnd:j,paddingInlineStart:j,top:j,right:j,bottom:j,left:j,scrollMargin:j,scrollMarginTop:j,scrollMarginRight:j,scrollMarginBottom:j,scrollMarginLeft:j,scrollMarginX:j,scrollMarginY:j,scrollMarginBlock:j,scrollMarginBlockEnd:j,scrollMarginBlockStart:j,scrollMarginInline:j,scrollMarginInlineEnd:j,scrollMarginInlineStart:j,scrollPadding:j,scrollPaddingTop:j,scrollPaddingRight:j,scrollPaddingBottom:j,scrollPaddingLeft:j,scrollPaddingX:j,scrollPaddingY:j,scrollPaddingBlock:j,scrollPaddingBlockEnd:j,scrollPaddingBlockStart:j,scrollPaddingInline:j,scrollPaddingInlineEnd:j,scrollPaddingInlineStart:j,fontSize:"fontSizes",background:S,backgroundColor:S,backgroundImage:S,borderImage:S,border:S,borderBlock:S,borderBlockEnd:S,borderBlockStart:S,borderBottom:S,borderBottomColor:S,borderColor:S,borderInline:S,borderInlineEnd:S,borderInlineStart:S,borderLeft:S,borderLeftColor:S,borderRight:S,borderRightColor:S,borderTop:S,borderTopColor:S,caretColor:S,color:S,columnRuleColor:S,fill:S,outline:S,outlineColor:S,stroke:S,textDecorationColor:S,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:x,minBlockSize:x,maxBlockSize:x,inlineSize:x,minInlineSize:x,maxInlineSize:x,width:x,minWidth:x,maxWidth:x,height:x,minHeight:x,maxHeight:x,flexBasis:x,gridTemplateColumns:x,gridTemplateRows:x,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},C=function(e,t){return"function"==typeof t?{"()":Function.prototype.toString.call(t)}:t},E=function(){var e=Object.create(null);return function(t,n){for(var r=function(e){return JSON.stringify(e,C)}(t),a=arguments.length,i=new Array(a>2?a-2:0),o=2;o<a;o++)i[o-2]=arguments[o];return r in e?e[r]:e[r]=n.apply(void 0,[t].concat(i))}},I=Symbol.for("sxs.internal"),P=function(e,t){return Object.defineProperties(e,Object.getOwnPropertyDescriptors(t))},M=function(e){for(var t in e)return!0;return!1},A=Object.prototype.hasOwnProperty,T=function(e){return e.includes("-")?e:e.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()}))},D=/\s+(?![^()]*\))/,R=function(e){return function(t){return e.apply(void 0,Object(v.a)("string"==typeof t?String(t).split(D):[t]))}},B={appearance:function(e){return{WebkitAppearance:e,appearance:e}},backfaceVisibility:function(e){return{WebkitBackfaceVisibility:e,backfaceVisibility:e}},backdropFilter:function(e){return{WebkitBackdropFilter:e,backdropFilter:e}},backgroundClip:function(e){return{WebkitBackgroundClip:e,backgroundClip:e}},boxDecorationBreak:function(e){return{WebkitBoxDecorationBreak:e,boxDecorationBreak:e}},clipPath:function(e){return{WebkitClipPath:e,clipPath:e}},content:function(e){return{content:e.includes('"')||e.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(e)?e:'"'.concat(e,'"')}},hyphens:function(e){return{WebkitHyphens:e,hyphens:e}},maskImage:function(e){return{WebkitMaskImage:e,maskImage:e}},maskSize:function(e){return{WebkitMaskSize:e,maskSize:e}},tabSize:function(e){return{MozTabSize:e,tabSize:e}},textSizeAdjust:function(e){return{WebkitTextSizeAdjust:e,textSizeAdjust:e}},userSelect:function(e){return{WebkitUserSelect:e,userSelect:e}},marginBlock:R((function(e,t){return{marginBlockStart:e,marginBlockEnd:t||e}})),marginInline:R((function(e,t){return{marginInlineStart:e,marginInlineEnd:t||e}})),maxSize:R((function(e,t){return{maxBlockSize:e,maxInlineSize:t||e}})),minSize:R((function(e,t){return{minBlockSize:e,minInlineSize:t||e}})),paddingBlock:R((function(e,t){return{paddingBlockStart:e,paddingBlockEnd:t||e}})),paddingInline:R((function(e,t){return{paddingInlineStart:e,paddingInlineEnd:t||e}}))},L=/([\d.]+)([^]*)/,F=function(e,t){return e.length?e.reduce((function(e,n){return e.push.apply(e,Object(v.a)(t.map((function(e){return e.includes("&")?e.replace(/&/g,/[ +>|~]/.test(n)&&/&.*&/.test(e)?":is(".concat(n,")"):n):n+" "+e})))),e}),[]):t},H=function(e,t){return e in z&&"string"==typeof t?t.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(function(t,n,r,a){return n+("stretch"===r?"-moz-available".concat(a,";").concat(T(e),":").concat(n,"-webkit-fill-available"):"-moz-fit-content".concat(a,";").concat(T(e),":").concat(n,"fit-content"))+a})):String(t)},z={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},N=function(e){return e?e+"-":""},U=function(e,t,n){return e.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(function(e,r,a,i,o){return"$"==i==!!a?e:(r||"--"==i?"calc(":"")+"var(--"+("$"===i?N(t)+(o.includes("$")?"":N(n))+o.replace(/\$/g,"-"):o)+")"+(r||"--"==i?"*"+(r||"")+(a||"1")+")":"")}))},K=/\s*,\s*(?![^()]*\))/,V=Object.prototype.toString,W=function(e,t,n,r,a){var i,o,s;!function e(t,n,c){var u,l;(function t(f){for(u in f){var p,h=64===u.charCodeAt(0),m=h&&Array.isArray(f[u])?f[u]:[f[u]],b=Object(g.a)(m);try{for(b.s();!(p=b.n()).done;){l=p.value;var y=/[A-Z]/.test(_=u)?_:_.replace(/-[^]/g,(function(e){return e[1].toUpperCase()})),w="object"==typeof l&&l&&l.toString===V&&(!r.utils[y]||!n.length);if(y in r.utils&&!w){var O=r.utils[y];if(O!==o){o=O,t(O(l)),o=null;continue}}else if(y in B){var k=B[y];if(k!==s){s=k,t(k(l)),s=null;continue}}if(h&&(j=u.slice(1)in r.media?"@media "+r.media[u.slice(1)]:u,u=j.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(function(e,t,n,r,a,i){var o=L.test(t),s=.0625*(o?-1:1),c=o?[r,t]:[t,r],u=Object(d.a)(c,2),l=u[0],f=u[1];return"("+("="===n[0]?"":">"===n[0]===o?"max-":"min-")+l+":"+("="!==n[0]&&1===n.length?f.replace(L,(function(e,t,r){return Number(t)+s*(">"===n?1:-1)+r})):f)+(a?") and ("+(">"===a[0]?"min-":"max-")+l+":"+(1===a.length?i.replace(L,(function(e,t,n){return Number(t)+s*(">"===a?-1:1)+n})):i):"")+")"}))),w){var S=h?c.concat(u):Object(v.a)(c),x=h?Object(v.a)(n):F(n,u.split(K));void 0!==i&&a(X.apply(void 0,Object(v.a)(i))),i=void 0,e(l,x,S)}else void 0===i&&(i=[[],n,c]),u=h||36!==u.charCodeAt(0)?u:"--".concat(N(r.prefix)).concat(u.slice(1).replace(/\$/g,"-")),l=w?l:"number"==typeof l?l&&y in Y?String(l)+"px":String(l):U(H(y,null==l?"":l),r.prefix,r.themeMap[y]),i[0].push("".concat(h?"".concat(u," "):"".concat(T(u),":")).concat(l))}}catch(C){b.e(C)}finally{b.f()}}var j,_})(t),void 0!==i&&a(X.apply(void 0,Object(v.a)(i))),i=void 0}(e,t,n)},X=function(e,t,n){return"".concat(n.map((function(e){return"".concat(e,"{")})).join("")).concat(t.length?"".concat(t.join(","),"{"):"").concat(e.join(";")).concat(t.length?"}":"").concat(Array(n.length?n.length+1:0).join("}"))},Y={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},G=function(e){return String.fromCharCode(e+(e>25?39:97))},$=function(e){return function(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=G(t%52)+n;return G(t%52)+n}(function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e}(5381,JSON.stringify(e))>>>0)},q=["themed","global","styled","onevar","resonevar","allvar","inline"],Z=function(e){if(e.href&&!e.href.startsWith(location.origin))return!1;try{return e.cssRules,!0}catch(e){return!1}},J=function(e){var t=e.group,n=t.cssRules.length;e.apply=function(e){try{t.insertRule(e,n),++n}catch(r){}}},Q=Symbol(),ee=E(),te=function(e,t){return ee(e,(function(){return function(){for(var n={type:null,composers:new Set},r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];for(var o=0,s=a;o<s.length;o++){var c=s[o];if(null!=c)if(c[I]){null==n.type&&(n.type=c[I].type);var u,l=Object(g.a)(c[I].composers);try{for(l.s();!(u=l.n()).done;){var d=u.value;n.composers.add(d)}}catch(f){l.e(f)}finally{l.f()}}else c.constructor!==Object||c.$$typeof?null==n.type&&(n.type=c):n.composers.add(ne(c,e))}return null==n.type&&(n.type="span"),n.composers.size||n.composers.add(["PJLV",{},[],[],{},[]]),re(e,n,t)}}))},ne=function(e,t){var n,r,a=e.variants,i=e.compoundVariants,o=e.defaultVariants,s=O(e,["variants","compoundVariants","defaultVariants"]),c="".concat(N(t.prefix),"c-").concat($(s)),u=[],d=[],f=Object.create(null),p=[];for(var h in o)f[h]=String(o[h]);if("object"==typeof a&&a)for(var v in a){n=f,r=v,A.call(n,r)||(f[v]="undefined");var m=a[v];for(var b in m){var y=Object(l.a)({},v,String(b));"undefined"===String(b)&&p.push(v);var w=m[b],k=[y,w,!M(w)];u.push(k)}}if("object"==typeof i&&i){var S,x=Object(g.a)(i);try{for(x.s();!(S=x.n()).done;){var j=S.value,_=j.css,C=O(j,["css"]);for(var E in _="object"==typeof _&&_||{},C)C[E]=String(C[E]);var I=[C,_,!M(_)];d.push(I)}}catch(P){x.e(P)}finally{x.f()}}return[c,s,u,d,f,p]},re=function(e,t,n){var r,a=ae(t.composers),i=Object(d.a)(a,4),o=i[0],s=i[1],c=i[2],u=i[3],f="function"==typeof t.type||t.type.$$typeof?function(e){function t(){for(var n=0;n<t[Q].length;n++){var r=Object(d.a)(t[Q][n],2),a=r[0],i=r[1];e.rules[a].apply(i)}return t[Q]=[],null}return t[Q]=[],t.rules={},q.forEach((function(e){return t.rules[e]={apply:function(n){return t[Q].push([e,n])}}})),t}(n):null,p=(f||n).rules,h=".".concat(o).concat(s.length>1?":where(.".concat(s.slice(1).join("."),")"):""),m=function(r){var a=r="object"==typeof r&&r||oe,i=a.css,l=O(a,["css"]),m={};for(var b in c)if(delete l[b],b in r){var y=r[b];"object"==typeof y&&y?m[b]=Object(w.a)({"@initial":c[b]},y):(y=String(y),m[b]="undefined"!==y||u.has(b)?y:c[b])}else m[b]=c[b];var k,S=new Set(Object(v.a)(s)),x=Object(g.a)(t.composers);try{for(x.s();!(k=x.n()).done;){var j=Object(d.a)(k.value,4),_=j[0],C=j[1],E=j[2],I=j[3];n.rules.styled.cache.has(_)||(n.rules.styled.cache.add(_),W(C,[".".concat(_)],[],e,(function(e){p.styled.apply(e)})));var P,M=ie(E,m,e.media),A=ie(I,m,e.media,!0),T=Object(g.a)(M);try{for(T.s();!(P=T.n()).done;){var D=P.value;if(void 0!==D){var R,B=Object(g.a)(D);try{var L=function(){var t=Object(d.a)(R.value,3),r=t[0],a=t[1],i=t[2],o="".concat(_,"-").concat($(a),"-").concat(r);S.add(o);var s=(i?n.rules.resonevar:n.rules.onevar).cache,c=i?p.resonevar:p.onevar;s.has(o)||(s.add(o),W(a,[".".concat(o)],[],e,(function(e){c.apply(e)})))};for(B.s();!(R=B.n()).done;)L()}catch(ee){B.e(ee)}finally{B.f()}}}}catch(ee){T.e(ee)}finally{T.f()}var F,H=Object(g.a)(A);try{for(H.s();!(F=H.n()).done;){var z=F.value;if(void 0!==z){var N,U=Object(g.a)(z);try{for(U.s();!(N=U.n()).done;){var K=Object(d.a)(N.value,2),V=K[0],X=K[1],Y="".concat(_,"-").concat($(X),"-").concat(V);S.add(Y),n.rules.allvar.cache.has(Y)||(n.rules.allvar.cache.add(Y),W(X,[".".concat(Y)],[],e,(function(e){p.allvar.apply(e)})))}}catch(ee){U.e(ee)}finally{U.f()}}}}catch(ee){H.e(ee)}finally{H.f()}}}catch(ee){x.e(ee)}finally{x.f()}if("object"==typeof i&&i){var G="".concat(o,"-i").concat($(i),"-css");S.add(G),n.rules.inline.cache.has(G)||(n.rules.inline.cache.add(G),W(i,[".".concat(G)],[],e,(function(e){p.inline.apply(e)})))}var q,Z=Object(g.a)(String(r.className||"").trim().split(/\s+/));try{for(Z.s();!(q=Z.n()).done;){var J=q.value;J&&S.add(J)}}catch(ee){Z.e(ee)}finally{Z.f()}var Q=l.className=Object(v.a)(S).join(" ");return{type:t.type,className:Q,selector:h,props:l,toString:function(){return Q},deferredInjector:f}};return P(m,(r={className:o,selector:h},Object(l.a)(r,I,t),Object(l.a)(r,"toString",(function(){return n.rules.styled.cache.has(o)||m(),o})),r))},ae=function(e){var t,n="",r=[],a={},i=[],o=Object(g.a)(e);try{for(o.s();!(t=o.n()).done;){var s=Object(d.a)(t.value,6),c=s[0],u=s[4],l=s[5];for(var f in""===n&&(n=c),r.push(c),i.push.apply(i,Object(v.a)(l)),u){var p=u[f];(void 0===a[f]||"undefined"!==p||l.includes(p))&&(a[f]=p)}}}catch(h){o.e(h)}finally{o.f()}return[n,r,a,new Set(i)]},ie=function(e,t,n,r){var a,i=[],o=Object(g.a)(e);try{e:for(o.s();!(a=o.n()).done;){var s=Object(d.a)(a.value,3),c=s[0],u=s[1];if(!s[2]){var f=void 0,p=0,h=!1;for(f in c){var v=c[f],m=t[f];if(m!==v){if("object"!=typeof m||!m)continue e;var b=void 0,y=void 0,w=0;for(var O in m){if(v===String(m[O])){if("@initial"!==O){var k=O.slice(1);(y=y||[]).push(k in n?n[k]:O.replace(/^@media ?/,"")),h=!0}p+=w,b=!0}++w}if(y&&y.length&&(u=Object(l.a)({},"@media "+y.join(", "),u)),!b)continue e}}(i[p]=i[p]||[]).push([r?"cv":"".concat(f,"-").concat(c[f]),u,h])}}}catch(S){o.e(S)}finally{o.f()}return i},oe={},se=E(),ce=function(e,t){return se(e,(function(){return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i=function(){var n,a=Object(g.a)(r);try{for(a.s();!(n=a.n()).done;){var i=n.value,o=$(i="object"==typeof i&&i||{});if(!t.rules.global.cache.has(o)){if(t.rules.global.cache.add(o),"@import"in i){var s,c=[].indexOf.call(t.sheet.cssRules,t.rules.themed.group)-1,u=Object(g.a)([].concat(i["@import"]));try{for(u.s();!(s=u.n()).done;){var l=s.value;l=l.includes('"')||l.includes("'")?l:'"'.concat(l,'"'),t.sheet.insertRule("@import ".concat(l,";"),c++)}}catch(d){u.e(d)}finally{u.f()}delete i["@import"]}W(i,[],[],e,(function(e){t.rules.global.apply(e)}))}}}catch(d){a.e(d)}finally{a.f()}return""};return P(i,{toString:i})}}))},ue=E(),le=function(e,t){return ue(e,(function(){return function(n){var r="".concat(N(e.prefix),"k-").concat($(n)),a=function(){if(!t.rules.global.cache.has(r)){t.rules.global.cache.add(r);var a=[];W(n,[],[],e,(function(e){return a.push(e)}));var i="@keyframes ".concat(r,"{").concat(a.join(""),"}");t.rules.global.apply(i)}return r};return P(a,{get name(){return a()},toString:a})}}))},de=function(){function e(t,n,r,a){Object(f.a)(this,e),this.token=null==t?"":String(t),this.value=null==n?"":String(n),this.scale=null==r?"":String(r),this.prefix=null==a?"":String(a)}return Object(u.a)(e,[{key:"toString",value:function(){return this.computedValue}},{key:"computedValue",get:function(){return"var("+this.variable+")"}},{key:"variable",get:function(){return"--"+N(this.prefix)+N(this.scale)+this.token}}]),e}(),fe=E(),pe=function(e,t){return fe(e,(function(){return function(n,r){r="object"==typeof n&&n||Object(r);var a=".".concat(n=(n="string"==typeof n?n:"")||"".concat(N(e.prefix),"t-").concat($(r))),i={},o=[];for(var s in r)for(var c in i[s]={},r[s]){var u="--".concat(N(e.prefix)).concat(s,"-").concat(c),l=U(String(r[s][c]),e.prefix,s);i[s][c]=new de(c,l,s,e.prefix),o.push("".concat(u,":").concat(l))}var d=function(){if(o.length&&!t.rules.themed.cache.has(n)){t.rules.themed.cache.add(n);var a="".concat(r===e.theme?":root,":"",".").concat(n,"{").concat(o.join(";"),"}");t.rules.themed.apply(a)}return n};return Object(w.a)(Object(w.a)({},i),{},{get className(){return d()},selector:a,toString:d})}}))},he=E(),ve=E(),ge=function(e){var t=function(e){var t=!1,n=he(e,(function(e){t=!0;var n="prefix"in(e="object"==typeof e&&e||{})?String(e.prefix):"",r="object"==typeof e.media&&e.media||{},a="object"==typeof e.root?e.root||null:globalThis.document||null,i="object"==typeof e.theme&&e.theme||{},o={prefix:n,media:r,theme:i,themeMap:"object"==typeof e.themeMap&&e.themeMap||Object(w.a)({},_),utils:"object"==typeof e.utils&&e.utils||{}},s=function(e){var t;return function n(){if(t){var r=t,a=r.rules,i=r.sheet;if(!i.deleteRule){for(;3===Object(Object(i.cssRules)[0]).type;)i.cssRules.splice(0,1);i.cssRules=[]}for(var o in a)delete a[o]}var s,c=Object(e).styleSheets||[],u=Object(g.a)(c);try{for(u.s();!(s=u.n()).done;){var l=s.value;if(Z(l)){for(var d=0,f=l.cssRules;f[d];++d){var p=Object(f[d]);if(1===p.type){var h=Object(f[d+1]);if(4===h.type){++d;var m=p.cssText;if(m.startsWith("--sxs")){var b=m.slice(14,-3).trim().split(/\s+/),y=q[b[0]];y&&(t||(t={sheet:l,reset:n,rules:{}}),t.rules[y]={group:h,index:d,cache:new Set(b)})}}}}if(t)break}}}catch(C){u.e(C)}finally{u.f()}t||(t={sheet:e?(e.head||e).appendChild(document.createElement("style")).sheet:function e(t,n){return{type:n,cssRules:[],insertRule:function(t,n){this.cssRules.splice(n,0,e(t,{import:3,undefined:1}[(t.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return"@media{}"===t?"@media{".concat([].map.call(this.cssRules,(function(e){return e.cssText})).join(""),"}"):t}}}("","text/css"),rules:{},reset:n,toString:function(){var e=t.sheet.cssRules;return[].map.call(e,(function(n,r){var a=n.cssText,i="";if(a.startsWith("--sxs"))return"";if(e[r-1]&&(i=e[r-1].cssText).startsWith("--sxs")){if(!n.cssRules.length)return"";for(var o in t.rules)if(t.rules[o].group===n)return"--sxs{--sxs:".concat(Object(v.a)(t.rules[o].cache).join(" "),"}").concat(a);return n.cssRules.length?"".concat(i).concat(a):""}return a})).join("")}});for(var w=t,O=w.sheet,k=w.rules,S=q.length-1;S>=0;--S){var x=q[S];if(!k[x]){var j=q[S+1],_=k[j]?k[j].index:O.cssRules.length;O.insertRule("@media{}",_),O.insertRule("--sxs{--sxs:".concat(S,"}"),_),k[x]={group:O.cssRules[_+1],index:_,cache:new Set([S])}}J(k[x])}}(),t}(a),c={css:te(o,s),globalCss:ce(o,s),keyframes:le(o,s),createTheme:pe(o,s),reset:function(){s.reset(),c.theme.toString()},theme:{},sheet:s,config:o,prefix:n,getCssText:s.toString,toString:s.toString};return String(c.theme=c.createTheme(i)),c}));return t||n.reset(),n}(e);return t.styled=function(e){var t=e.config,n=e.sheet;return ve(t,(function(){var e=te(t,n);return function(){var t=e.apply(void 0,arguments),n=t[I].type,r=m.forwardRef((function(e,r){var a=e&&e.as||n,i=t(e),o=i.props,s=i.deferredInjector;return delete o.as,o.ref=r,s?m.createElement(m.Fragment,null,m.createElement(a,o),m.createElement(s,null)):m.createElement(a,o)}));return r.className=t.className,r.displayName="Styled.".concat(n.displayName||n.name||n),r.selector=t.selector,r.toString=function(){return t.selector},r[I]=t[I],r}}))}(t),t},me=function(){return k||(k=ge())},be=function(){var e;return(e=me()).styled.apply(e,arguments)},ye=n(1);var we,Oe=function(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()})).finally((function(){return clearInterval(e)})):Promise.resolve()};function ke(e){return new Promise((function(t,n){e.oncomplete=e.onsuccess=function(){return t(e.result)},e.onabort=e.onerror=function(){return n(e.error)}}))}function Se(){return we||(we=function(e,t){var n=Oe().then((function(){var n=indexedDB.open(e);return n.onupgradeneeded=function(){return n.result.createObjectStore(t)},ke(n)}));return function(e,r){return n.then((function(n){return r(n.transaction(t,e).objectStore(t))}))}}("keyval-store","keyval")),we}function xe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Se();return t("readonly",(function(t){return ke(t.get(e))}))}function je(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Se();return n("readwrite",(function(n){return n.put(t,e),ke(n.transaction)}))}var _e=n(15);function Ce(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return e};return e*r(.5-t*(.5-n))}function Ee(e){return[-e[0],-e[1]]}function Ie(e,t){return[e[0]+t[0],e[1]+t[1]]}function Pe(e,t){return[e[0]-t[0],e[1]-t[1]]}function Me(e,t){return[e[0]*t,e[1]*t]}function Ae(e){return[e[1],-e[0]]}function Te(e,t){return e[0]*t[0]+e[1]*t[1]}function De(e,t){return e[0]===t[0]&&e[1]===t[1]}function Re(e,t){return function(e){return e[0]*e[0]+e[1]*e[1]}(Pe(e,t))}function Be(e){return function(e,t){return[e[0]/t,e[1]/t]}(e,function(e){return Math.hypot(e[0],e[1])}(e))}function Le(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function Fe(e,t,n){var r=Math.sin(n),a=Math.cos(n),i=e[0]-t[0],o=e[1]-t[1],s=i*r+o*a;return[i*a-o*r+t[0],s+t[1]]}function He(e,t,n){return Ie(e,Me(Pe(t,e),n))}function ze(e,t,n){return Ie(e,Me(t,n))}var Ne=Math.min,Ue=Math.PI,Ke=.275,Ve=Ue+1e-4;function We(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.size,r=void 0===n?16:n,a=t.smoothing,i=void 0===a?.5:a,o=t.thinning,s=void 0===o?.5:o,c=t.simulatePressure,u=void 0===c||c,l=t.easing,d=void 0===l?function(e){return e}:l,f=t.start,p=void 0===f?{}:f,h=t.end,v=void 0===h?{}:h,g=t.last,m=void 0!==g&&g,b=p.cap,y=void 0===b||b,w=p.taper,O=void 0===w?0:w,k=p.easing,S=void 0===k?function(e){return e*(2-e)}:k,x=v.cap,j=void 0===x||x,_=v.taper,C=void 0===_?0:_,E=v.easing,I=void 0===E?function(e){return--e*e*e+1}:E;if(0===e.length||r<=0)return[];for(var P,M=e[e.length-1].runningLength,A=Math.pow(r*i,2),T=[],D=[],R=e.slice(0,10).reduce((function(e,t){var n=t.pressure;if(u){var a=Ne(1,t.distance/r),i=Ne(1,1-a);n=Ne(1,e+a*Ke*(i-e))}return(e+n)/2}),e[0].pressure),B=Ce(r,s,e[e.length-1].pressure,d),L=e[0].vector,F=e[0].point,H=F,z=F,N=H,U=0;U<e.length;U++){var K=e[U].pressure,V=e[U],W=V.point,X=V.vector,Y=V.distance,G=V.runningLength;if(!(U<e.length-1&&M-G<3)){if(s){if(u){var $=Ne(1,Y/r),q=Ne(1,1-$);K=Ne(1,R+$*Ke*(q-R))}B=Ce(r,s,K,d)}else B=r/2;void 0===P&&(P=B);var Z=G<O?S(G/O):1,J=M-G<C?I((M-G)/C):1;if(B=Math.max(.01,B*Math.min(Z,J)),U!==e.length-1){var Q=e[U+1].vector,ee=Te(X,Q);if(ee<0){for(var te=Me(Ae(L),B),ne=1/13,re=0;re<=1;re+=ne)z=Fe(Pe(W,te),W,Ve*re),T.push(z),N=Fe(Ie(W,te),W,Ve*-re),D.push(N);F=z,H=N}else{var ae=Me(Ae(He(Q,X,ee)),B);z=Pe(W,ae),(U<=1||Re(F,z)>A)&&(T.push(z),F=z),N=Ie(W,ae),(U<=1||Re(H,N)>A)&&(D.push(N),H=N),R=K,L=X}}else{var ie=Me(Ae(X),B);T.push(Pe(W,ie)),D.push(Ie(W,ie))}}}var oe=e[0].point.slice(0,2),se=e.length>1?e[e.length-1].point.slice(0,2):Ie(e[0].point,[1,1]),ce=[],ue=[];if(1===e.length){if(!O&&!C||m){for(var le=ze(oe,Be(Ae(Pe(oe,se))),-(P||B)),de=[],fe=1/13,pe=fe;pe<=1;pe+=fe)de.push(Fe(le,oe,2*Ve*pe));return de}}else{if(!(O||C&&1===e.length))if(y)for(var he=1/13,ve=he;ve<=1;ve+=he){var ge=Fe(D[0],oe,Ve*ve);ce.push(ge)}else{var me=Pe(T[0],D[0]),be=Me(me,.5),ye=Me(me,.51);ce.push(Pe(oe,be),Pe(oe,ye),Ie(oe,ye),Ie(oe,be))}var we=Ae(Ee(e[e.length-1].vector));if(C||O&&1===e.length)ue.push(se);else if(j)for(var Oe=ze(se,we,B),ke=1/29,Se=ke;Se<1;Se+=ke)ue.push(Fe(Oe,se,3*Ve*Se));else ue.push(Ie(se,Me(we,B)),Ie(se,Me(we,.99*B)),Pe(se,Me(we,.99*B)),Pe(se,Me(we,B)))}return T.concat(ue,D.reverse(),ce)}function Xe(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.streamline,a=void 0===r?.5:r,i=n.size,o=void 0===i?16:i,s=n.last,c=void 0!==s&&s;if(0===e.length)return[];var u=.15+.85*(1-a),l=Array.isArray(e[0])?e:e.map((function(e){var t=e.x,n=e.y,r=e.pressure;return[t,n,void 0===r?.5:r]}));if(2===l.length){var d=l[1];l=l.slice(0,-1);for(var f=1;f<5;f++)l.push(He(l[0],d,f/4))}1===l.length&&(l=[].concat(Object(v.a)(l),[[].concat(Object(v.a)(Ie(l[0],[1,1])),Object(v.a)(l[0].slice(2)))]));for(var p=[{point:[l[0][0],l[0][1]],pressure:l[0][2]>=0?l[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],h=!1,g=0,m=p[0],b=l.length-1,y=1;y<l.length;y++){var w=c&&y===b?l[y].slice(0,2):He(m.point,l[y],u);if(!De(m.point,w)){var O=Le(w,m.point);if(g+=O,y<b&&!h){if(g<o)continue;h=!0}m={point:w,pressure:l[y][2]>=0?l[y][2]:.5,vector:Be(Pe(m.point,w)),distance:O,runningLength:g},p.push(m)}}return p[0].vector=(null==(t=p[1])?void 0:t.vector)||[0,0],p}var Ye=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return We(Xe(e,t),t)},Ge=n(36),$e=n.n(Ge),qe=n(37),Ze=n.n(qe),Je="undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>0;function Qe(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on".concat(t),(function(){n(window.event)}))}function et(e,t){for(var n=t.slice(0,t.length-1),r=0;r<n.length;r++)n[r]=e[n[r].toLowerCase()];return n}function tt(e){"string"!==typeof e&&(e="");for(var t=(e=e.replace(/\s/g,"")).split(","),n=t.lastIndexOf("");n>=0;)t[n-1]+=",",t.splice(n,1),n=t.lastIndexOf("");return t}for(var nt={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"\u21ea":20,",":188,".":190,"/":191,"`":192,"-":Je?173:189,"=":Je?61:187,";":Je?59:186,"'":222,"[":219,"]":221,"\\":220},rt={"\u21e7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,cmd:91,command:91},at={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},it={16:!1,18:!1,17:!1,91:!1},ot={},st=1;st<20;st++)nt["f".concat(st)]=111+st;var ct=[],ut="all",lt=[],dt=function(e){return nt[e.toLowerCase()]||rt[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)};function ft(e){ut=e||"all"}function pt(){return ut||"all"}var ht=function(e){var t=e.key,n=e.scope,r=e.method,a=e.splitKey,i=void 0===a?"+":a;tt(t).forEach((function(e){var t=e.split(i),a=t.length,o=t[a-1],s="*"===o?"*":dt(o);if(ot[s]){n||(n=pt());var c=a>1?et(rt,t):[];ot[s]=ot[s].map((function(e){return(!r||e.method===r)&&e.scope===n&&function(e,t){for(var n=e.length>=t.length?e:t,r=e.length>=t.length?t:e,a=!0,i=0;i<n.length;i++)-1===r.indexOf(n[i])&&(a=!1);return a}(e.mods,c)?{}:e}))}}))};function vt(e,t,n){var r;if(t.scope===n||"all"===t.scope){for(var a in r=t.mods.length>0,it)Object.prototype.hasOwnProperty.call(it,a)&&(!it[a]&&t.mods.indexOf(+a)>-1||it[a]&&-1===t.mods.indexOf(+a))&&(r=!1);(0!==t.mods.length||it[16]||it[18]||it[17]||it[91])&&!r&&"*"!==t.shortcut||!1===t.method(e,t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}function gt(e){var t=ot["*"],n=e.keyCode||e.which||e.charCode;if(mt.filter.call(this,e)){if(93!==n&&224!==n||(n=91),-1===ct.indexOf(n)&&229!==n&&ct.push(n),["ctrlKey","altKey","shiftKey","metaKey"].forEach((function(t){var n=at[t];e[t]&&-1===ct.indexOf(n)?ct.push(n):!e[t]&&ct.indexOf(n)>-1?ct.splice(ct.indexOf(n),1):"metaKey"===t&&e[t]&&3===ct.length&&(e.ctrlKey||e.shiftKey||e.altKey||(ct=ct.slice(ct.indexOf(n))))})),n in it){for(var r in it[n]=!0,rt)rt[r]===n&&(mt[r]=!0);if(!t)return}for(var a in it)Object.prototype.hasOwnProperty.call(it,a)&&(it[a]=e[at[a]]);e.getModifierState&&(!e.altKey||e.ctrlKey)&&e.getModifierState("AltGraph")&&(-1===ct.indexOf(17)&&ct.push(17),-1===ct.indexOf(18)&&ct.push(18),it[17]=!0,it[18]=!0);var i=pt();if(t)for(var o=0;o<t.length;o++)t[o].scope===i&&("keydown"===e.type&&t[o].keydown||"keyup"===e.type&&t[o].keyup)&&vt(e,t[o],i);if(n in ot)for(var s=0;s<ot[n].length;s++)if(("keydown"===e.type&&ot[n][s].keydown||"keyup"===e.type&&ot[n][s].keyup)&&ot[n][s].key){for(var c=ot[n][s],u=c.splitKey,l=c.key.split(u),d=[],f=0;f<l.length;f++)d.push(dt(l[f]));d.sort().join("")===ct.sort().join("")&&vt(e,c,i)}}}function mt(e,t,n){ct=[];var r=tt(e),a=[],i="all",o=document,s=0,c=!1,u=!0,l="+";for(void 0===n&&"function"===typeof t&&(n=t),"[object Object]"===Object.prototype.toString.call(t)&&(t.scope&&(i=t.scope),t.element&&(o=t.element),t.keyup&&(c=t.keyup),void 0!==t.keydown&&(u=t.keydown),"string"===typeof t.splitKey&&(l=t.splitKey)),"string"===typeof t&&(i=t);s<r.length;s++)a=[],(e=r[s].split(l)).length>1&&(a=et(rt,e)),(e="*"===(e=e[e.length-1])?"*":dt(e))in ot||(ot[e]=[]),ot[e].push({keyup:c,keydown:u,scope:i,mods:a,shortcut:r[s],method:n,key:r[s],splitKey:l});"undefined"!==typeof o&&!function(e){return lt.indexOf(e)>-1}(o)&&window&&(lt.push(o),Qe(o,"keydown",(function(e){gt(e)})),Qe(window,"focus",(function(){ct=[]})),Qe(o,"keyup",(function(e){gt(e),function(e){var t=e.keyCode||e.which||e.charCode,n=ct.indexOf(t);if(n>=0&&ct.splice(n,1),e.key&&"meta"===e.key.toLowerCase()&&ct.splice(0,ct.length),93!==t&&224!==t||(t=91),t in it)for(var r in it[t]=!1,rt)rt[r]===t&&(mt[r]=!1)}(e)})))}var bt={setScope:ft,getScope:pt,deleteScope:function(e,t){var n,r;for(var a in e||(e=pt()),ot)if(Object.prototype.hasOwnProperty.call(ot,a))for(n=ot[a],r=0;r<n.length;)n[r].scope===e?n.splice(r,1):r++;pt()===e&&ft(t||"all")},getPressedKeyCodes:function(){return ct.slice(0)},isPressed:function(e){return"string"===typeof e&&(e=dt(e)),-1!==ct.indexOf(e)},filter:function(e){var t=e.target||e.srcElement,n=t.tagName,r=!0;return!t.isContentEditable&&("INPUT"!==n&&"TEXTAREA"!==n&&"SELECT"!==n||t.readOnly)||(r=!1),r},unbind:function(e){if(e){if(Array.isArray(e))e.forEach((function(e){e.key&&ht(e)}));else if("object"===typeof e)e.key&&ht(e);else if("string"===typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n[0],i=n[1];"function"===typeof a&&(i=a,a=""),ht({key:e,scope:a,method:i,splitKey:"+"})}}else Object.keys(ot).forEach((function(e){return delete ot[e]}))}};for(var yt in bt)Object.prototype.hasOwnProperty.call(bt,yt)&&(mt[yt]=bt[yt]);if("undefined"!==typeof window){var wt=window.hotkeys;mt.noConflict=function(e){return e&&window.hotkeys===mt&&(window.hotkeys=wt),mt},window.hotkeys=mt}var Ot=mt;Ot.filter=function(){return!0};var kt=function(e,t){var n=e.target,r=n&&n.tagName;return Boolean(r&&t&&t.includes(r))};function St(e,t,n,r){n instanceof Array&&(r=n,n=void 0);var a=n||{},i=a.enableOnTags,o=a.filter,s=a.keyup,c=a.keydown,u=a.filterPreventDefault,l=void 0===u||u,d=a.enabled,f=void 0===d||d,p=a.enableOnContentEditable,h=void 0!==p&&p,v=Object(m.useRef)(null),g=Object(m.useCallback)((function(e,n){var r;return o&&!o(e)?!l:!!(kt(e,["INPUT","TEXTAREA","SELECT"])&&!kt(e,i)||null!=(r=e.target)&&r.isContentEditable&&!h)||(null===v.current||document.activeElement===v.current)&&(t(e,n),!0)}),r?[v,i,o].concat(r):[v,i,o]);return Object(m.useEffect)((function(){if(f)return s&&!0!==c&&(n.keydown=!1),Ot(e,n||{},g),function(){return Ot.unbind(e,g)};Ot.unbind(e,g)}),[g,e,f]),v}Ot.isPressed;var xt=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?m.useLayoutEffect:function(){},jt=m["useId".toString()]||function(){},_t=0;function Ct(e){var t=m.useState(jt()),n=Object(d.a)(t,2),r=n[0],a=n[1];return xt((function(){e||a((function(e){return null!=e?e:String(_t++)}))}),[e]),e||(r?"radix-".concat(r):"")}var Et=0;function It(){m.useEffect((function(){var e,t,n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(e=n[0])&&void 0!==e?e:Pt()),document.body.insertAdjacentElement("beforeend",null!==(t=n[1])&&void 0!==t?t:Pt()),Et++,function(){1===Et&&document.querySelectorAll("[data-radix-focus-guard]").forEach((function(e){return e.remove()})),Et--}}),[])}function Pt(){var e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}function Mt(e){var t=m.useRef(e);return m.useEffect((function(){t.current=e})),m.useMemo((function(){return function(){for(var e,n,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return null===(n=t.current)||void 0===n?void 0:(e=n).call.apply(e,[t].concat(a))}}),[])}function At(e){var t=e.prop,n=e.defaultProp,r=e.onChange,a=void 0===r?function(){}:r,i=function(e){var t=e.defaultProp,n=e.onChange,r=m.useState(t),a=Object(d.a)(r,1)[0],i=m.useRef(a),o=Mt(n);return m.useEffect((function(){i.current!==a&&(o(a),i.current=a)}),[a,i,o]),r}({defaultProp:n,onChange:a}),o=Object(d.a)(i,2),s=o[0],c=o[1],u=void 0!==t,l=u?t:s,f=Mt(a);return[l,m.useCallback((function(e){if(u){var n="function"==typeof e?e(t):e;n!==t&&f(n)}else c(e)}),[u,t,c,f])]}function Tt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.forEach((function(t){return function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}(t,e)}))}}function Dt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return m.useCallback(Tt.apply(void 0,t),t)}function Rt(){return(Rt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Bt=m.forwardRef((function(e,t){var n=e.children,r=O(e,["children"]);return m.Children.toArray(n).some(Ht)?m.createElement(m.Fragment,null,m.Children.map(n,(function(e){return Ht(e)?m.createElement(Lt,Rt({},r,{ref:t}),e.props.children):e}))):m.createElement(Lt,Rt({},r,{ref:t}),n)}));Bt.displayName="Slot";var Lt=m.forwardRef((function(e,t){var n=e.children,r=O(e,["children"]);return m.isValidElement(n)?m.cloneElement(n,Object(w.a)(Object(w.a)({},function(e,t){var n=Object(w.a)({},t),r=function(r){var a=e[r],i=t[r];/^on[A-Z]/.test(r)?n[r]=function(){null==i||i.apply(void 0,arguments),null==a||a.apply(void 0,arguments)}:"style"===r?n[r]=Object(w.a)(Object(w.a)({},a),i):"className"===r&&(n[r]=[a,i].filter(Boolean).join(" "))};for(var a in t)r(a);return Object(w.a)(Object(w.a)({},e),n)}(r,n.props)),{},{ref:Tt(t,n.ref)})):m.Children.count(n)>1?m.Children.only(null):null}));Lt.displayName="SlotClone";var Ft=function(e){var t=e.children;return m.createElement(m.Fragment,null,t)};function Ht(e){return m.isValidElement(e)&&e.type===Ft}var zt=["a","button","div","h2","h3","img","li","nav","p","span","svg","ul"].reduce((function(e,t){return Object(w.a)(Object(w.a)({},e),{},Object(l.a)({},t,m.forwardRef((function(e,n){var r=e.asChild,a=O(e,["asChild"]),i=r?Bt:t;return m.useEffect((function(){window[Symbol.for("radix-ui")]=!0}),[]),e.as&&console.error(Nt),m.createElement(i,Rt({},a,{ref:n}))}))))}),{}),Nt="Warning: The `as` prop has been removed in favour of `asChild`. For details, see https://radix-ui.com/docs/primitives/overview/styling#changing-the-rendered-element";function Ut(e,t){var n=m.createContext(t);function r(e){var t=e.children,r=O(e,["children"]),a=m.useMemo((function(){return r}),Object.values(r));return m.createElement(n.Provider,{value:a},t)}return r.displayName=e+"Provider",[r,function(r){var a=m.useContext(n);if(a)return a;if(void 0!==t)return t;throw new Error("`".concat(r,"` must be used within `").concat(e,"`"))}]}function Kt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=function(){var t=n.map((function(e){return m.createContext(e)}));return function(n){var r=(null==n?void 0:n[e])||t;return m.useMemo((function(){return Object(l.a)({},"__scope".concat(e),Object(w.a)(Object(w.a)({},n),{},Object(l.a)({},e,r)))}),[n,r])}};return r.scopeName=e,[function(t,r){var a=m.createContext(r),i=n.length;function o(t){var n=t.scope,r=t.children,o=O(t,["scope","children"]),s=(null==n?void 0:n[e][i])||a,c=m.useMemo((function(){return o}),Object.values(o));return m.createElement(s.Provider,{value:c},r)}return n=[].concat(Object(v.a)(n),[r]),o.displayName=t+"Provider",[o,function(n,o){var s=(null==o?void 0:o[e][i])||a,c=m.useContext(s);if(c)return c;if(void 0!==r)return r;throw new Error("`".concat(n,"` must be used within `").concat(t,"`"))}]},Vt.apply(void 0,[r].concat(Object(v.a)(t)))]}function Vt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];if(1===t.length)return r;var a=function(){var e=t.map((function(e){return{useScope:e(),scopeName:e.scopeName}}));return function(t){var n=e.reduce((function(e,n){var r=n.useScope,a=n.scopeName;return Object(w.a)(Object(w.a)({},e),r(t)["__scope".concat(a)])}),{});return m.useMemo((function(){return Object(l.a)({},"__scope".concat(r.scopeName),n)}),[n])}};return a.scopeName=r.scopeName,a}function Wt(e){var t=e+"CollectionProvider",n=Kt(t),r=Object(d.a)(n,2),a=r[0],i=r[1],o=a(t,{collectionRef:{current:null},itemMap:new Map}),s=Object(d.a)(o,2),c=s[0],u=s[1],f=e+"CollectionSlot",p=e+"CollectionItemSlot",h="data-radix-collection-item";return[{Provider:function(e){var t=e.scope,n=e.children,r=b.a.useRef(null),a=b.a.useRef(new Map).current;return b.a.createElement(c,{scope:t,itemMap:a,collectionRef:r},n)},Slot:b.a.forwardRef((function(e,t){var n=e.scope,r=e.children,a=Dt(t,u(f,n).collectionRef);return b.a.createElement(Bt,{ref:a},r)})),ItemSlot:b.a.forwardRef((function(e,t){var n,r=e.scope,a=e.children,i=O(e,["scope","children"]),o=b.a.useRef(null),s=Dt(t,o),c=u(p,r);return b.a.useEffect((function(){return c.itemMap.set(o,Object(w.a)({ref:o},i)),function(){c.itemMap.delete(o)}})),b.a.createElement(Bt,(n={},Object(l.a)(n,h,""),Object(l.a)(n,"ref",s),n),a)}))},function(t){var n=u(e+"CollectionConsumer",t);return b.a.useCallback((function(){var e=n.collectionRef.current;if(!e)return[];var t=Array.from(e.querySelectorAll("[".concat(h,"]")));return Array.from(n.itemMap.values()).sort((function(e,n){return t.indexOf(e.ref.current)-t.indexOf(n.ref.current)}))}),[n.collectionRef,n.itemMap])},i]}function Xt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.checkForDefaultPrevented,a=void 0===r||r;return function(n){if(null==e||e(n),!1===a||!n.defaultPrevented)return null==t?void 0:t(n)}}var Yt={bubbles:!1,cancelable:!0},Gt=Wt("RovingFocusGroup"),$t=Object(d.a)(Gt,3),qt=$t[0],Zt=$t[1],Jt=Kt("RovingFocusGroup",[$t[2]]),Qt=Object(d.a)(Jt,2),en=Qt[0],tn=Qt[1],nn=en("RovingFocusGroup"),rn=Object(d.a)(nn,2),an=rn[0],on=rn[1],sn=m.forwardRef((function(e,t){return m.createElement(qt.Provider,{scope:e.__scopeRovingFocusGroup},m.createElement(qt.Slot,{scope:e.__scopeRovingFocusGroup},m.createElement(cn,Rt({},e,{ref:t}))))})),cn=m.forwardRef((function(e,t){var n=e.__scopeRovingFocusGroup,r=e.orientation,a=e.dir,i=void 0===a?"ltr":a,o=e.loop,s=void 0!==o&&o,c=e.currentTabStopId,u=e.defaultCurrentTabStopId,l=e.onCurrentTabStopIdChange,f=e.onEntryFocus,p=O(e,["__scopeRovingFocusGroup","orientation","dir","loop","currentTabStopId","defaultCurrentTabStopId","onCurrentTabStopIdChange","onEntryFocus"]),h=m.useRef(null),g=Dt(t,h),b=At({prop:c,defaultProp:u,onChange:l}),y=Object(d.a)(b,2),k=y[0],S=void 0===k?null:k,x=y[1],j=m.useState(!1),_=Object(d.a)(j,2),C=_[0],E=_[1],I=Mt(f),P=Zt(n),M=m.useRef(!1);return m.useEffect((function(){var e=h.current;if(e)return e.addEventListener("rovingFocusGroup.onEntryFocus",I),function(){return e.removeEventListener("rovingFocusGroup.onEntryFocus",I)}}),[I]),m.createElement(an,{scope:n,orientation:r,dir:i,loop:s,currentTabStopId:S,onItemFocus:m.useCallback((function(e){return x(e)}),[x]),onItemShiftTab:m.useCallback((function(){return E(!0)}),[])},m.createElement(zt.div,Rt({tabIndex:C?-1:0,"data-orientation":r},p,{ref:g,style:Object(w.a)({outline:"none"},e.style),onMouseDown:Xt(e.onMouseDown,(function(){M.current=!0})),onFocus:Xt(e.onFocus,(function(e){var t=!M.current;if(e.target===e.currentTarget&&t&&!C){var n=new Event("rovingFocusGroup.onEntryFocus",Yt);if(e.currentTarget.dispatchEvent(n),!n.defaultPrevented){var r=P().filter((function(e){return e.focusable}));dn([r.find((function(e){return e.active})),r.find((function(e){return e.id===S}))].concat(Object(v.a)(r)).filter(Boolean).map((function(e){return e.ref.current})))}}M.current=!1})),onBlur:Xt(e.onBlur,(function(){return E(!1)}))})))})),un=m.forwardRef((function(e,t){var n=e.__scopeRovingFocusGroup,r=e.focusable,a=void 0===r||r,i=e.active,o=void 0!==i&&i,s=O(e,["__scopeRovingFocusGroup","focusable","active"]),c=Ct(),u=on("RovingFocusGroupItem",n),l=u.currentTabStopId===c,d=Zt(n);return m.createElement(qt.ItemSlot,{scope:n,id:c,focusable:a,active:o},m.createElement(zt.span,Rt({tabIndex:l?0:-1,"data-orientation":u.orientation},s,{ref:t,onMouseDown:Xt(e.onMouseDown,(function(e){a?u.onItemFocus(c):e.preventDefault()})),onFocus:Xt(e.onFocus,(function(){return u.onItemFocus(c)})),onKeyDown:Xt(e.onKeyDown,(function(e){if("Tab"===e.key&&e.shiftKey)u.onItemShiftTab();else if(e.target===e.currentTarget){var t,n,r=function(e,t,n){var r=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,n);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(r)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(r)?void 0:ln[r]}(e,u.orientation,u.dir);if(void 0!==r){e.preventDefault();var a=d().filter((function(e){return e.focusable})).map((function(e){return e.ref.current}));if("last"===r)a.reverse();else if("prev"===r||"next"===r){"prev"===r&&a.reverse();var i=a.indexOf(e.currentTarget);a=u.loop?(n=i+1,(t=a).map((function(e,r){return t[(n+r)%t.length]}))):a.slice(i+1)}setTimeout((function(){return dn(a)}))}}}))})))})),ln={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function dn(e){var t,n=document.activeElement,r=Object(g.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(a===n)return;if(a.focus(),document.activeElement!==n)return}}catch(i){r.e(i)}finally{r.f()}}var fn=sn,pn=un,hn=n(21),vn=n.n(hn),gn=m.forwardRef((function(e,t){var n,r,a=e.containerRef,i=e.style,o=O(e,["containerRef","style"]),s=null!==(n=null==a?void 0:a.current)&&void 0!==n?n:null===globalThis||void 0===globalThis||null===(r=globalThis.document)||void 0===r?void 0:r.body,c=m.useState({}),u=Object(d.a)(c,2)[1];return xt((function(){u({})}),[]),s?vn.a.createPortal(m.createElement(zt.div,Rt({"data-radix-portal":""},o,{ref:t,style:s===document.body?Object(w.a)({position:"absolute",top:0,left:0,zIndex:2147483647},i):void 0})),s):null})),mn=m.forwardRef((function(e,t){var n,r=e.container,a=void 0===r?null===globalThis||void 0===globalThis||null===(n=globalThis.document)||void 0===n?void 0:n.body:r,i=O(e,["container"]);return a?vn.a.createPortal(m.createElement(zt.div,Rt({},i,{ref:t})),a):null}));var bn,yn=m.forwardRef((function(e,t){var n=e.children,r=e.width,a=void 0===r?10:r,i=e.height,o=void 0===i?5:i,s=O(e,["children","width","height"]);return m.createElement(zt.svg,Rt({},s,{ref:t,width:a,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),e.asChild?n:m.createElement("polygon",{points:"0,0 30,0 15,10"}))}));function wn(e){var t=m.useState(void 0),n=Object(d.a)(t,2),r=n[0],a=n[1];return m.useEffect((function(){if(e){var t=new ResizeObserver((function(t){if(Array.isArray(t)&&t.length){var n,r,i=t[0];if("borderBoxSize"in i){var o=i.borderBoxSize,s=Array.isArray(o)?o[0]:o;n=s.inlineSize,r=s.blockSize}else{var c=e.getBoundingClientRect();n=c.width,r=c.height}a({width:n,height:r})}}));return t.observe(e,{box:"border-box"}),function(){a(void 0),t.unobserve(e)}}}),[e]),r}var On=new Map;function kn(){var e=[];On.forEach((function(t,n){var r,a,i=n.getBoundingClientRect();a=i,((r=t.rect).width!==a.width||r.height!==a.height||r.top!==a.top||r.right!==a.right||r.bottom!==a.bottom||r.left!==a.left)&&(t.rect=i,e.push(t))})),e.forEach((function(e){e.callbacks.forEach((function(t){return t(e.rect)}))})),bn=requestAnimationFrame(kn)}function Sn(e){var t=m.useState(),n=Object(d.a)(t,2),r=n[0],a=n[1];return m.useEffect((function(){if(e){var t=function(e,t){var n=On.get(e);return void 0===n?(On.set(e,{rect:{},callbacks:[t]}),1===On.size&&(bn=requestAnimationFrame(kn))):(n.callbacks.push(t),t(e.getBoundingClientRect())),function(){var n=On.get(e);if(void 0!==n){var r=n.callbacks.indexOf(t);r>-1&&n.callbacks.splice(r,1),0===n.callbacks.length&&(On.delete(e),0===On.size&&cancelAnimationFrame(bn))}}}(e,a);return function(){a(void 0),t()}}}),[e]),r}function xn(e,t,n){var r=e["x"===n?"left":"top"],a="x"===n?"width":"height",i=e[a],o=t[a];return{before:r-o,start:r,center:r+(i-o)/2,end:r+i-o,after:r+i}}function jn(e){return{position:"absolute",top:0,left:0,minWidth:"max-content",willChange:"transform",transform:"translate3d(".concat(Math.round(e.x+window.scrollX),"px, ").concat(Math.round(e.y+window.scrollY),"px, 0)")}}function _n(e,t,n,r,a){var i="top"===t||"bottom"===t,o=a?a.width:0,s=a?a.height:0,c=o/2+r,u="",l="";return i?(u={start:"".concat(c,"px"),center:"center",end:e.width-c+"px"}[n],l="top"===t?"".concat(e.height+s,"px"):-s+"px"):(u="left"===t?"".concat(e.width+s,"px"):-s+"px",l={start:"".concat(c,"px"),center:"center",end:e.height-c+"px"}[n]),"".concat(u," ").concat(l)}var Cn={position:"fixed",top:0,left:0,opacity:0,transform:"translate3d(0, -200%, 0)"},En={position:"absolute",opacity:0};function In(e){var t,n=e.popperSize,r=e.arrowSize,a=e.arrowOffset,i=e.side,o=e.align,s=(n.width-r.width)/2,c=(n.height-r.width)/2,u={top:0,right:90,bottom:180,left:-90}[i],d=Math.max(r.width,r.height),f=(t={width:"".concat(d,"px"),height:"".concat(d,"px"),transform:"rotate(".concat(u,"deg)"),willChange:"transform",position:"absolute"},Object(l.a)(t,i,"100%"),Object(l.a)(t,"direction",function(e,t){return("top"!==e&&"right"!==e||"end"!==t)&&("bottom"!==e&&"left"!==e||"end"===t)?"ltr":"rtl"}(i,o)),t);return"top"!==i&&"bottom"!==i||("start"===o&&(f.left="".concat(a,"px")),"center"===o&&(f.left="".concat(s,"px")),"end"===o&&(f.right="".concat(a,"px"))),"left"!==i&&"right"!==i||("start"===o&&(f.top="".concat(a,"px")),"center"===o&&(f.top="".concat(c,"px")),"end"===o&&(f.bottom="".concat(a,"px"))),f}function Pn(e){return{top:"bottom",right:"left",bottom:"top",left:"right"}[e]}function Mn(e,t){return{top:e.top<t.top,right:e.right>t.right,bottom:e.bottom>t.bottom,left:e.left<t.left}}var An=Kt("Popper"),Tn=Object(d.a)(An,2),Dn=Tn[0],Rn=Tn[1],Bn=Dn("Popper"),Ln=Object(d.a)(Bn,2),Fn=Ln[0],Hn=Ln[1],zn=m.forwardRef((function(e,t){var n=e.__scopePopper,r=e.virtualRef,a=O(e,["__scopePopper","virtualRef"]),i=Hn("PopperAnchor",n),o=m.useRef(null),s=Dt(t,o);return m.useEffect((function(){i.onAnchorChange((null==r?void 0:r.current)||o.current)})),r?null:m.createElement(zt.div,Rt({},a,{ref:s}))})),Nn=Dn("PopperContent"),Un=Object(d.a)(Nn,2),Kn=Un[0],Vn=Un[1],Wn=function(e){var t=e.__scopePopper,n=e.children,r=m.useState(null),a=Object(d.a)(r,2),i=a[0],o=a[1];return m.createElement(Fn,{scope:t,anchor:i,onAnchorChange:o},n)},Xn=zn,Yn=m.forwardRef((function(e,t){var n=e.__scopePopper,r=e.side,a=void 0===r?"bottom":r,i=e.sideOffset,o=e.align,s=void 0===o?"center":o,c=e.alignOffset,u=e.collisionTolerance,l=e.avoidCollisions,f=void 0===l||l,p=O(e,["__scopePopper","side","sideOffset","align","alignOffset","collisionTolerance","avoidCollisions"]),h=Hn("PopperContent",n),v=m.useState(),g=Object(d.a)(v,2),b=g[0],y=g[1],k=Sn(h.anchor),S=m.useState(null),x=Object(d.a)(S,2),j=x[0],_=x[1],C=wn(j),E=m.useState(null),I=Object(d.a)(E,2),P=I[0],M=I[1],A=wn(P),T=Dt(t,(function(e){return _(e)})),D=function(){var e=m.useState(void 0),t=Object(d.a)(e,2),n=t[0],r=t[1];return m.useEffect((function(){var e;function t(){r({width:window.innerWidth,height:window.innerHeight})}function n(){window.clearTimeout(e),function(e){throw new Error('"'+e+'" is read-only')}("e"),e=window.setTimeout(t,100)}return t(),window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}}),[]),n}(),R=function(e){var t=e.anchorRect,n=e.popperSize,r=e.arrowSize,a=e.arrowOffset,i=void 0===a?0:a,o=e.side,s=e.sideOffset,c=void 0===s?0:s,u=e.align,l=e.alignOffset,d=void 0===l?0:l,f=e.shouldAvoidCollisions,p=void 0===f||f,h=e.collisionBoundariesRect,v=e.collisionTolerance,g=void 0===v?0:v;if(!t||!n||!h)return{popperStyles:Cn,arrowStyles:En};var m=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4?arguments[4]:void 0,i=a?a.height:0,o=xn(t,e,"x"),s=xn(t,e,"y"),c=s.before-n-i,u=s.after+n+i,l=o.before-n-i,d=o.after+n+i;return{top:{start:{x:o.start+r,y:c},center:{x:o.center,y:c},end:{x:o.end-r,y:c}},right:{start:{x:d,y:s.start+r},center:{x:d,y:s.center},end:{x:d,y:s.end-r}},bottom:{start:{x:o.start+r,y:u},center:{x:o.center,y:u},end:{x:o.end-r,y:u}},left:{start:{x:l,y:s.start+r},center:{x:l,y:s.center},end:{x:l,y:s.end-r}}}}(n,t,c,d,r),b=m[o][u];if(!1===p){var y=jn(b),O=En;return r&&(O=In({popperSize:n,arrowSize:r,arrowOffset:i,side:o,align:u})),{popperStyles:Object(w.a)(Object(w.a)({},y),{},{"--radix-popper-transform-origin":_n(n,o,u,i,r)}),arrowStyles:O,placedSide:o,placedAlign:u}}var k,S,x=DOMRect.fromRect(Object(w.a)(Object(w.a)({},n),b)),j=(k=h,S=g,DOMRect.fromRect({width:k.width-2*S,height:k.height-2*S,x:k.left+S,y:k.top+S})),_=Mn(x,j),C=m[Pn(o)][u],E=function(e,t,n){var r=Pn(e);return t[e]&&!n[r]?r:e}(o,_,Mn(DOMRect.fromRect(Object(w.a)(Object(w.a)({},n),C)),j)),I=function(e,t,n,r,a){var i="top"===n||"bottom"===n,o=i?"left":"top",s=i?"right":"bottom",c=i?"width":"height",u=t[c]>e[c];return"start"!==r&&"center"!==r||!(a[o]&&u||a[s]&&!u)?"end"!==r&&"center"!==r||!(a[s]&&u||a[o]&&!u)?r:"start":"end"}(n,t,o,u,_),P=jn(m[E][I]),M=En;return r&&(M=In({popperSize:n,arrowSize:r,arrowOffset:i,side:E,align:I})),{popperStyles:Object(w.a)(Object(w.a)({},P),{},{"--radix-popper-transform-origin":_n(n,E,I,i,r)}),arrowStyles:M,placedSide:E,placedAlign:I}}({anchorRect:k,popperSize:C,arrowSize:A,arrowOffset:b,side:a,sideOffset:i,align:s,alignOffset:c,shouldAvoidCollisions:f,collisionBoundariesRect:D?DOMRect.fromRect(Object(w.a)(Object(w.a)({},D),{},{x:0,y:0})):void 0,collisionTolerance:u}),B=R.popperStyles,L=R.arrowStyles,F=R.placedSide,H=R.placedAlign,z=void 0!==F;return m.createElement("div",{style:B,"data-radix-popper-content-wrapper":""},m.createElement(Kn,{scope:n,arrowStyles:L,onArrowChange:M,onArrowOffsetChange:y},m.createElement(zt.div,Rt({"data-side":F,"data-align":H},p,{style:Object(w.a)(Object(w.a)({},p.style),{},{animation:z?void 0:"none"}),ref:T}))))})),Gn=m.forwardRef((function(e,t){var n=e.__scopePopper,r=e.offset,a=O(e,["__scopePopper","offset"]),i=Vn("PopperArrow",n),o=i.onArrowOffsetChange;return m.useEffect((function(){return o(r)}),[o,r]),m.createElement("span",{style:Object(w.a)(Object(w.a)({},i.arrowStyles),{},{pointerEvents:"none"})},m.createElement("span",{ref:i.onArrowChange,style:{display:"inline-block",verticalAlign:"top",pointerEvents:"auto"}},m.createElement(yn,Rt({},a,{ref:t,style:Object(w.a)(Object(w.a)({},a.style),{},{display:"block"})}))))})),$n=function(e){var t=e.present,n=e.children,r=function(e){var t=m.useState(),n=Object(d.a)(t,2),r=n[0],a=n[1],i=m.useRef({}),o=m.useRef(e),s=m.useRef("none"),c=function(e,t){return m.useReducer((function(e,n){var r=t[e][n];return null!=r?r:e}),e)}(e?"mounted":"unmounted",{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),u=Object(d.a)(c,2),l=u[0],f=u[1];return m.useEffect((function(){var e=qn(i.current);s.current="mounted"===l?e:"none"}),[l]),xt((function(){var t=i.current,n=o.current;if(n!==e){var r=s.current,a=qn(t);if(e)f("MOUNT");else if("none"===a||"none"===(null==t?void 0:t.display))f("UNMOUNT");else{f(n&&r!==a?"ANIMATION_OUT":"UNMOUNT")}o.current=e}}),[e,f]),xt((function(){if(r){var e=function(e){var t=qn(i.current).includes(e.animationName);e.target===r&&t&&f("ANIMATION_END")},t=function(e){e.target===r&&(s.current=qn(i.current))};return r.addEventListener("animationstart",t),r.addEventListener("animationcancel",e),r.addEventListener("animationend",e),function(){r.removeEventListener("animationstart",t),r.removeEventListener("animationcancel",e),r.removeEventListener("animationend",e)}}}),[r,f]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:m.useCallback((function(e){e&&(i.current=getComputedStyle(e)),a(e)}),[])}}(t),a="function"==typeof n?n({present:r.isPresent}):m.Children.only(n),i=Dt(r.ref,a.ref);return"function"==typeof n||r.isPresent?m.cloneElement(a,{ref:i}):null};function qn(e){return(null==e?void 0:e.animationName)||"none"}$n.displayName="Presence";var Zn={bubbles:!1,cancelable:!0},Jn=m.forwardRef((function(e,t){var n=e.loop,r=void 0!==n&&n,a=e.trapped,i=void 0!==a&&a,o=e.onMountAutoFocus,s=e.onUnmountAutoFocus,c=O(e,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]),u=m.useState(null),l=Object(d.a)(u,2),f=l[0],p=l[1],h=Mt(o),v=Mt(s),b=m.useRef(null),y=Dt(t,(function(e){return p(e)})),w=m.useRef({paused:!1,pause:function(){this.paused=!0},resume:function(){this.paused=!1}}).current;m.useEffect((function(){if(i){var e=function(e){if(!w.paused&&f){var t=e.target;f.contains(t)?b.current=t:nr(b.current,{select:!0})}},t=function(e){!w.paused&&f&&(f.contains(e.relatedTarget)||nr(b.current,{select:!0}))};return document.addEventListener("focusin",e),document.addEventListener("focusout",t),function(){document.removeEventListener("focusin",e),document.removeEventListener("focusout",t)}}}),[i,f,w.paused]),m.useEffect((function(){if(f){rr.add(w);var e=document.activeElement;if(!f.contains(e)){var t=new Event("focusScope.autoFocusOnMount",Zn);f.addEventListener("focusScope.autoFocusOnMount",h),f.dispatchEvent(t),t.defaultPrevented||(function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.select,a=void 0!==r&&r,i=document.activeElement,o=Object(g.a)(e);try{for(o.s();!(t=o.n()).done;){var s=t.value;if(nr(s,{select:a}),document.activeElement!==i)return}}catch(c){o.e(c)}finally{o.f()}}(Qn(f).filter((function(e){return"A"!==e.tagName})),{select:!0}),document.activeElement===e&&nr(f))}return function(){f.removeEventListener("focusScope.autoFocusOnMount",h),setTimeout((function(){var t=new Event("focusScope.autoFocusOnUnmount",Zn);f.addEventListener("focusScope.autoFocusOnUnmount",v),f.dispatchEvent(t),t.defaultPrevented||nr(null!=e?e:document.body,{select:!0}),f.removeEventListener("focusScope.autoFocusOnUnmount",v),rr.remove(w)}),0)}}}),[f,h,v,w]);var k=m.useCallback((function(e){if((r||i)&&!w.paused){var t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,n=document.activeElement;if(t&&n){var a=e.currentTarget,o=function(e){var t=Qn(e);return[er(t,e),er(t.reverse(),e)]}(a),s=Object(d.a)(o,2),c=s[0],u=s[1];c&&u?e.shiftKey||n!==u?e.shiftKey&&n===c&&(e.preventDefault(),r&&nr(u,{select:!0})):(e.preventDefault(),r&&nr(c,{select:!0})):n===a&&e.preventDefault()}}}),[r,i,w.paused]);return m.createElement(zt.div,Rt({tabIndex:-1},c,{ref:y,onKeyDown:k}))}));function Qn(e){for(var t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:function(e){var t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});n.nextNode();)t.push(n.currentNode);return t}function er(e,t){var n,r=Object(g.a)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(!tr(a,{upTo:t}))return a}}catch(i){r.e(i)}finally{r.f()}}function tr(e,t){var n=t.upTo;if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==n&&e===n)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function nr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.select,r=void 0!==n&&n;if(e&&e.focus){var a=document.activeElement;e.focus({preventScroll:!0}),e!==a&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&r&&e.select()}}var rr=function(){var e=[];return{add:function(t){var n=e[0];t!==n&&(null==n||n.pause()),(e=ar(e,t)).unshift(t)},remove:function(t){var n;null===(n=(e=ar(e,t))[0])||void 0===n||n.resume()}}}();function ar(e,t){var n=Object(v.a)(e),r=n.indexOf(t);return-1!==r&&n.splice(r,1),n}function ir(e){var t=Mt(e);m.useEffect((function(){var e=function(e){"Escape"===e.key&&t(e)};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[t])}var or,sr=0;var cr=_r(),ur=Object(d.a)(cr,2),lr=ur[0],dr=ur[1],fr=Cr(),pr=Object(d.a)(fr,2),hr=pr[0],vr=pr[1],gr=_r("TotalLayerCountWithDisabledOutsidePointerEventsProvider"),mr=Object(d.a)(gr,2),br=mr[0],yr=mr[1],wr=Cr("RunningLayerCountWithDisabledOutsidePointerEventsProvider"),Or=Object(d.a)(wr,2),kr=Or[0],Sr=Or[1],xr=m.forwardRef((function(e,t){var n=0===vr(),r=m.createElement(jr,Rt({},e,{ref:t}));return n?m.createElement(lr,null,m.createElement(br,null,r)):r})),jr=m.forwardRef((function(e,t){var n=e.disableOutsidePointerEvents,r=void 0!==n&&n,a=e.onEscapeKeyDown,i=e.onPointerDownOutside,o=e.onFocusOutside,s=e.onInteractOutside,c=e.onDismiss,u=O(e,["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"]),l=dr(),d=vr()+1,f=d===l,p=yr(r),h=Sr()+(r?1:0),v=h<p;(function(e){var t=e.disabled,n=m.useRef(!1),r=m.useRef(!1);m.useEffect((function(){var e=function(e){var t="mouse"===e.pointerType;n.current=!t,r.current=t&&0===e.button},t=function(){n.current=!1,r.current=!1};return document.addEventListener("pointerdown",e),document.addEventListener("pointerup",t),function(){document.removeEventListener("pointerdown",e),document.removeEventListener("pointerup",t)}}),[]),xt((function(){if(t){var e=function(){0===--sr&&(document.body.style.pointerEvents=or)};return 0===sr&&(or=document.body.style.pointerEvents),document.body.style.pointerEvents="none",sr++,function(){n.current?document.addEventListener("click",e,{once:!0}):r.current?document.addEventListener("pointerup",e,{once:!0}):e()}}}),[t])})({disabled:r}),ir((function(e){f&&(null==a||a(e),e.defaultPrevented||null==c||c())}));var g=function(e){var t=Mt((function(e){v||(null==i||i(e),null==s||s(e),e.defaultPrevented||null==c||c())})),n=m.useRef(!1);return m.useEffect((function(){var e=function(e){var r=e.target;if(r&&!n.current){var a=new CustomEvent("dismissableLayer.pointerDownOutside",{bubbles:!1,cancelable:!0,detail:{originalEvent:e}});r.addEventListener("dismissableLayer.pointerDownOutside",t,{once:!0}),r.dispatchEvent(a)}n.current=!1},r=window.setTimeout((function(){document.addEventListener("pointerdown",e)}),0);return function(){window.clearTimeout(r),document.removeEventListener("pointerdown",e)}}),[t]),{onPointerDownCapture:function(){return n.current=!0}}}().onPointerDownCapture,b=function(e){var t=Mt((function(e){null==o||o(e),null==s||s(e),e.defaultPrevented||null==c||c()})),n=m.useRef(!1);return m.useEffect((function(){var e=function(e){var r=e.target;if(r&&!n.current){var a=new CustomEvent("dismissableLayer.focusOutside",{bubbles:!1,cancelable:!0,detail:{originalEvent:e}});r.addEventListener("dismissableLayer.focusOutside",t,{once:!0}),r.dispatchEvent(a)}};return document.addEventListener("focusin",e),function(){return document.removeEventListener("focusin",e)}}),[t]),{onFocusCapture:function(){return n.current=!0},onBlurCapture:function(){return n.current=!1}}}(),y=b.onBlurCapture,k=b.onFocusCapture,S=p>0&&!v;return m.createElement(hr,{runningCount:d},m.createElement(kr,{runningCount:h},m.createElement(zt.div,Rt({},u,{ref:t,style:Object(w.a)({pointerEvents:S?"auto":void 0},u.style),onPointerDownCapture:Xt(e.onPointerDownCapture,g),onBlurCapture:Xt(e.onBlurCapture,y),onFocusCapture:Xt(e.onFocusCapture,k)}))))}));function _r(e){var t=Ut("TotalLayerCount",{total:0,onTotalIncrease:function(){},onTotalDecrease:function(){}}),n=Object(d.a)(t,2),r=n[0],a=n[1];return[function(e){var t=e.children,n=m.useState(0),a=Object(d.a)(n,2),i=a[0],o=a[1];return m.createElement(r,{total:i,onTotalIncrease:m.useCallback((function(){return o((function(e){return e+1}))}),[]),onTotalDecrease:m.useCallback((function(){return o((function(e){return e-1}))}),[])},t)},function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=a("TotalLayerCountConsumer"),n=t.total,r=t.onTotalIncrease,i=t.onTotalDecrease;return m.useLayoutEffect((function(){if(e)return r(),function(){return i()}}),[e,r,i]),n}]}function Cr(e){var t=Ut("RunningLayerCount",{count:0}),n=Object(d.a)(t,2),r=n[0],a=n[1];return[function(e){var t=e.children,n=e.runningCount;return m.createElement(r,{count:n},t)},function(){return a("RunningLayerCountConsumer").count||0}]}var Er=new WeakMap,Ir=new WeakMap,Pr={},Mr=0,Ar=function(e,t,n){void 0===t&&(t=function(e){return"undefined"===typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e)),void 0===n&&(n="data-aria-hidden");var r=Array.isArray(e)?e:[e];Pr[n]||(Pr[n]=new WeakMap);var a=Pr[n],i=[],o=new Set;r.forEach((function e(t){t&&!o.has(t)&&(o.add(t),e(t.parentNode))}));return function e(t){!t||r.indexOf(t)>=0||Array.prototype.forEach.call(t.children,(function(t){if(o.has(t))e(t);else{var r=t.getAttribute("aria-hidden"),s=null!==r&&"false"!==r,c=(Er.get(t)||0)+1,u=(a.get(t)||0)+1;Er.set(t,c),a.set(t,u),i.push(t),1===c&&s&&Ir.set(t,!0),1===u&&t.setAttribute(n,"true"),s||t.setAttribute("aria-hidden","true")}}))}(t),o.clear(),Mr++,function(){i.forEach((function(e){var t=Er.get(e)-1,r=a.get(e)-1;Er.set(e,t),a.set(e,r),t||(Ir.has(e)||e.removeAttribute("aria-hidden"),Ir.delete(e)),r||e.removeAttribute(n)})),--Mr||(Er=new WeakMap,Er=new WeakMap,Ir=new WeakMap,Pr={})}};var Tr=function(){return(Tr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function Dr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}var Rr="right-scroll-bar-position",Br="width-before-scroll-bar";function Lr(e){return e}function Fr(e,t){void 0===t&&(t=Lr);var n=[],r=!1;return{read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var a=t(e,r);return n.push(a),function(){n=n.filter((function(e){return e!==a}))}},assignSyncMedium:function(e){for(r=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){r=!0;var t=[];if(n.length){var a=n;n=[],a.forEach(e),t=n}var i=function(){var n=t;t=[],n.forEach(e)},o=function(){return Promise.resolve().then(i)};o(),n={push:function(e){t.push(e),o()},filter:function(e){return t=t.filter(e),n}}}}}var Hr=function(e){void 0===e&&(e={});var t=Fr(null);return t.options=Tr({async:!0,ssr:!1},e),t}();function zr(e,t){return function(e,t){var n=Object(m.useState)((function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(e){var t=n.value;t!==e&&(n.value=e,n.callback(e,t))}}}}))[0];return n.callback=t,n.facade}(t,(function(t){return e.forEach((function(e){return function(e,t){return"function"===typeof e?e(t):e&&(e.current=t),e}(e,t)}))}))}var Nr=function(){},Ur=m.forwardRef((function(e,t){var n=m.useRef(null),r=m.useState({onScrollCapture:Nr,onWheelCapture:Nr,onTouchMoveCapture:Nr}),a=r[0],i=r[1],o=e.forwardProps,s=e.children,c=e.className,u=e.removeScrollBar,l=e.enabled,d=e.shards,f=e.sideCar,p=e.noIsolation,h=e.inert,v=e.allowPinchZoom,g=e.as,b=void 0===g?"div":g,y=Dr(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),w=f,O=zr([n,t]),k=Tr({},y,a);return m.createElement(m.Fragment,null,l&&m.createElement(w,{sideCar:Hr,removeScrollBar:u,shards:d,noIsolation:p,inert:h,setCallbacks:i,allowPinchZoom:!!v,lockRef:n}),o?m.cloneElement(m.Children.only(s),Tr({},k,{ref:O})):m.createElement(b,Tr({},k,{className:c,ref:O}),s))}));Ur.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},Ur.classNames={fullWidth:Br,zeroRight:Rr};var Kr,Vr=function(e){var t=e.sideCar,n=Dr(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return m.createElement(r,Tr({},n))};Vr.isSideCarExport=!0;function Wr(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Kr||n.nc;return t&&e.setAttribute("nonce",t),e}var Xr=function(){var e=0,t=null;return{add:function(n){var r,a;0==e&&(t=Wr())&&(a=n,(r=t).styleSheet?r.styleSheet.cssText=a:r.appendChild(document.createTextNode(a)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){!--e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Yr=function(){var e=function(){var e=Xr();return function(t){m.useEffect((function(){return e.add(t),function(){e.remove()}}),[])}}();return function(t){var n=t.styles;return e(n),null}},Gr={left:0,top:0,right:0,gap:0},$r=function(e){return parseInt(e||"",10)||0},qr=function(e){if(void 0===e&&(e="margin"),"undefined"===typeof window)return Gr;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],a=t["padding"===e?"paddingRight":"marginRight"];return[$r(n),$r(r),$r(a)]}(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Zr=Yr(),Jr=function(e,t,n,r){var a=e.left,i=e.top,o=e.right,s=e.gap;return void 0===n&&(n="margin"),"\n  .with-scroll-bars-hidden {\n   overflow: hidden "+r+";\n   padding-right: "+s+"px "+r+";\n  }\n  body {\n    overflow: hidden "+r+";\n    "+[t&&"position: relative "+r+";","margin"===n&&"\n    padding-left: "+a+"px;\n    padding-top: "+i+"px;\n    padding-right: "+o+"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: "+s+"px "+r+";\n    ","padding"===n&&"padding-right: "+s+"px "+r+";"].filter(Boolean).join("")+"\n  }\n  \n  ."+Rr+" {\n    right: "+s+"px "+r+";\n  }\n  \n  ."+Br+" {\n    margin-right: "+s+"px "+r+";\n  }\n  \n  ."+Rr+" ."+Rr+" {\n    right: 0 "+r+";\n  }\n  \n  ."+Br+" ."+Br+" {\n    margin-right: 0 "+r+";\n  }\n  \n  body {\n    --removed-body-scroll-bar-size: "+s+"px;\n  }\n"},Qr=function(e){var t=m.useState(qr(e.gapMode)),n=t[0],r=t[1];m.useEffect((function(){r(qr(e.gapMode))}),[e.gapMode]);var a=e.noRelative,i=e.noImportant,o=e.gapMode,s=void 0===o?"margin":o;return m.createElement(Zr,{styles:Jr(n,!a,s,i?"":"!important")})},ea=function(e,t){var n=t;do{if("undefined"!==typeof ShadowRoot&&n instanceof ShadowRoot&&(n=n.host),ta(e,n)){var r=na(e,n);if(r[1]>r[2])return!0}n=n.parentNode}while(n&&n!==document.body);return!1},ta=function(e,t){return"v"===e?function(e){var t=window.getComputedStyle(e);return"hidden"!==t.overflowY&&!(t.overflowY===t.overflowX&&"visible"===t.overflowY)}(t):function(e){var t=window.getComputedStyle(e);return"range"===e.type||"hidden"!==t.overflowX&&!(t.overflowY===t.overflowX&&"visible"===t.overflowX)}(t)},na=function(e,t){return"v"===e?[(n=t).scrollTop,n.scrollHeight,n.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var n},ra=!1;if("undefined"!==typeof window)try{var aa=Object.defineProperty({},"passive",{get:function(){return ra=!0,!0}});window.addEventListener("test",aa,aa),window.removeEventListener("test",aa,aa)}catch(rm){ra=!1}var ia=!!ra&&{passive:!1},oa=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},sa=function(e){return[e.deltaX,e.deltaY]},ca=function(e){return e&&"current"in e?e.current:e},ua=function(e){return"\n  .block-interactivity-"+e+" {pointer-events: none;}\n  .allow-interactivity-"+e+" {pointer-events: all;}\n"},la=0,da=[];var fa,pa=(fa=function(e){var t=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),a=m.useState(la++)[0],i=m.useState((function(){return Yr()}))[0],o=m.useRef(e);m.useEffect((function(){o.current=e}),[e]),m.useEffect((function(){if(e.inert){document.body.classList.add("block-interactivity-"+a);var t=[e.lockRef.current].concat((e.shards||[]).map(ca)).filter(Boolean);return t.forEach((function(e){return e.classList.add("allow-interactivity-"+a)})),function(){document.body.classList.remove("block-interactivity-"+a),t.forEach((function(e){return e.classList.remove("allow-interactivity-"+a)}))}}}),[e.inert,e.lockRef.current,e.shards]);var s=m.useCallback((function(e,t){if("touches"in e&&2===e.touches.length)return!o.current.allowPinchZoom;var a,i=oa(e),s=n.current,c="deltaX"in e?e.deltaX:s[0]-i[0],u="deltaY"in e?e.deltaY:s[1]-i[1],l=e.target,d=Math.abs(c)>Math.abs(u)?"h":"v",f=ea(d,l);if(!f)return!0;if(f?a=d:(a="v"===d?"h":"v",f=ea(d,l)),!f)return!1;if(!r.current&&"changedTouches"in e&&(c||u)&&(r.current=a),!a)return!0;var p=r.current||a;return function(e,t,n,r,a){var i=r,o=n.target,s=t.contains(o),c=!1,u=i>0,l=0,d=0;do{var f=na(e,o),p=f[0],h=f[1]-f[2]-p;(p||h)&&ta(e,o)&&(l+=h,d+=p),o=o.parentNode}while(!s&&o!==document.body||s&&(t.contains(o)||t===o));return(u&&(a&&0===l||!a&&i>l)||!u&&(a&&0===d||!a&&-i>d))&&(c=!0),c}(p,t,e,"h"===p?c:u,!0)}),[]),c=m.useCallback((function(e){var n=e;if(da.length&&da[da.length-1]===i){var r="deltaY"in n?sa(n):oa(n),a=t.current.filter((function(e){return e.name===n.type&&e.target===n.target&&(t=e.delta,a=r,t[0]===a[0]&&t[1]===a[1]);var t,a}))[0];if(a&&a.should)n.preventDefault();else if(!a){var c=(o.current.shards||[]).map(ca).filter(Boolean).filter((function(e){return e.contains(n.target)}));(c.length>0?s(n,c[0]):!o.current.noIsolation)&&n.preventDefault()}}}),[]),u=m.useCallback((function(e,n,r,a){var i={name:e,delta:n,target:r,should:a};t.current.push(i),setTimeout((function(){t.current=t.current.filter((function(e){return e!==i}))}),1)}),[]),l=m.useCallback((function(e){n.current=oa(e),r.current=void 0}),[]),d=m.useCallback((function(t){u(t.type,sa(t),t.target,s(t,e.lockRef.current))}),[]),f=m.useCallback((function(t){u(t.type,oa(t),t.target,s(t,e.lockRef.current))}),[]);m.useEffect((function(){return da.push(i),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",c,ia),document.addEventListener("touchmove",c,ia),document.addEventListener("touchstart",l,ia),function(){da=da.filter((function(e){return e!==i})),document.removeEventListener("wheel",c,ia),document.removeEventListener("touchmove",c,ia),document.removeEventListener("touchstart",l,ia)}}),[]);var p=e.removeScrollBar,h=e.inert;return m.createElement(m.Fragment,null,h?m.createElement(i,{styles:ua(a)}):null,p?m.createElement(Qr,{gapMode:"margin"}):null)},Hr.useMedium(fa),Vr),ha=m.forwardRef((function(e,t){return m.createElement(Ur,Tr({},e,{ref:t,sideCar:pa}))}));ha.classNames=Ur.classNames;var va=ha,ga=["Enter"," "],ma=["ArrowUp","PageDown","End"],ba=["ArrowDown","PageUp","Home"].concat(ma),ya={ltr:[].concat(ga,["ArrowRight"]),rtl:[].concat(ga,["ArrowLeft"])},wa={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Oa=Wt("Menu"),ka=Object(d.a)(Oa,3),Sa=ka[0],xa=ka[1],ja=Kt("Menu",[ka[2],Rn,tn]),_a=Object(d.a)(ja,2),Ca=_a[0],Ea=_a[1],Ia=Rn(),Pa=tn(),Ma=Ca("Menu"),Aa=Object(d.a)(Ma,2),Ta=Aa[0],Da=Aa[1],Ra=m.forwardRef((function(e,t){var n=e.__scopeMenu,r=O(e,["__scopeMenu"]),a=Ia(n);return m.createElement(Xn,Rt({},a,r,{ref:t}))})),Ba=Ca("MenuContent"),La=Object(d.a)(Ba,2),Fa=La[0],Ha=La[1],za=m.forwardRef((function(e,t){var n=e.forceMount,r=O(e,["forceMount"]),a=Da("MenuContent",e.__scopeMenu);return m.createElement(Sa.Provider,{scope:e.__scopeMenu},m.createElement($n,{present:n||a.open},m.createElement(Sa.Slot,{scope:e.__scopeMenu},a.isSubmenu?m.createElement(Va,Rt({},r,{ref:t})):m.createElement(Na,Rt({},r,{ref:t})))))})),Na=m.forwardRef((function(e,t){return Da("MenuContent",e.__scopeMenu).modal?m.createElement(Ua,Rt({},e,{ref:t})):m.createElement(Ka,Rt({},e,{ref:t}))})),Ua=m.forwardRef((function(e,t){var n=Da("MenuContent",e.__scopeMenu),r=m.useRef(null),a=Dt(t,r);return m.useEffect((function(){var e=r.current;if(e)return Ar(e)}),[]),m.createElement(Wa,Rt({},e,{ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Xt(e.onFocusOutside,(function(e){return e.preventDefault()}),{checkForDefaultPrevented:!1}),onDismiss:function(){return n.onOpenChange(!1)}}))})),Ka=m.forwardRef((function(e,t){var n=Da("MenuContent",e.__scopeMenu);return m.createElement(Wa,Rt({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:function(){return n.onOpenChange(!1)}}))})),Va=m.forwardRef((function(e,t){var n=Da("MenuContent",e.__scopeMenu),r=m.useRef(null),a=Dt(t,r);return n.isSubmenu?m.createElement(Wa,Rt({id:n.contentId,"aria-labelledby":n.triggerId},e,{ref:a,align:"start",side:"rtl"===n.dir?"left":"right",portalled:!0,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:function(e){var t;n.isUsingKeyboardRef.current&&(null===(t=r.current)||void 0===t||t.focus()),e.preventDefault()},onCloseAutoFocus:function(e){return e.preventDefault()},onFocusOutside:Xt(e.onFocusOutside,(function(e){e.target!==n.trigger&&n.onOpenChange(!1)})),onEscapeKeyDown:Xt(e.onEscapeKeyDown,n.onRootClose),onKeyDown:Xt(e.onKeyDown,(function(e){var t,r=e.currentTarget.contains(e.target),a=wa[n.dir].includes(e.key);r&&a&&(n.onOpenChange(!1),null===(t=n.trigger)||void 0===t||t.focus(),e.preventDefault())}))})):null})),Wa=m.forwardRef((function(e,t){var n=e.__scopeMenu,r=e.loop,a=void 0!==r&&r,i=e.trapFocus,o=e.onOpenAutoFocus,s=e.onCloseAutoFocus,c=e.disableOutsidePointerEvents,u=e.onEscapeKeyDown,l=e.onPointerDownOutside,f=e.onFocusOutside,p=e.onInteractOutside,h=e.onDismiss,v=e.disableOutsideScroll,b=e.allowPinchZoom,y=e.portalled,k=O(e,["__scopeMenu","loop","trapFocus","onOpenAutoFocus","onCloseAutoFocus","disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss","disableOutsideScroll","allowPinchZoom","portalled"]),S=Da("MenuContent",n),x=Ia(n),j=Pa(n),_=xa(n),C=m.useState(null),E=Object(d.a)(C,2),I=E[0],P=E[1],M=m.useRef(null),A=Dt(t,M,S.onContentChange),T=m.useRef(0),D=m.useRef(""),R=m.useRef(0),B=m.useRef(null),L=m.useRef("right"),F=m.useRef(0),H=y?gn:m.Fragment,z=v?va:m.Fragment,N=v?{allowPinchZoom:b}:void 0;m.useEffect((function(){return function(){return window.clearTimeout(T.current)}}),[]),It();var U=m.useCallback((function(e){var t,n;return L.current===(null===(t=B.current)||void 0===t?void 0:t.side)&&function(e,t){return!!t&&function(e,t){for(var n=e.x,r=e.y,a=!1,i=0,o=t.length-1;i<t.length;o=i++){var s=t[i].x,c=t[i].y,u=t[o].x,l=t[o].y;c>r!=l>r&&n<(u-s)*(r-c)/(l-c)+s&&(a=!a)}return a}({x:e.clientX,y:e.clientY},t)}(e,null===(n=B.current)||void 0===n?void 0:n.area)}),[]);return m.createElement(H,null,m.createElement(z,N,m.createElement(Fa,{scope:n,searchRef:D,onItemEnter:m.useCallback((function(e){U(e)&&e.preventDefault()}),[U]),onItemLeave:m.useCallback((function(e){var t;U(e)||(null===(t=M.current)||void 0===t||t.focus(),P(null))}),[U]),onTriggerLeave:m.useCallback((function(e){U(e)&&e.preventDefault()}),[U]),pointerGraceTimerRef:R,onPointerGraceIntentChange:m.useCallback((function(e){B.current=e}),[])},m.createElement(Jn,{asChild:!0,trapped:i,onMountAutoFocus:Xt(o,(function(e){var t;e.preventDefault(),null===(t=M.current)||void 0===t||t.focus()})),onUnmountAutoFocus:s},m.createElement(xr,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:u,onPointerDownOutside:l,onFocusOutside:f,onInteractOutside:p,onDismiss:h},m.createElement(fn,Rt({asChild:!0},j,{dir:S.dir,orientation:"vertical",loop:a,currentTabStopId:I,onCurrentTabStopIdChange:P,onEntryFocus:function(e){S.isUsingKeyboardRef.current||e.preventDefault()}}),m.createElement(Yn,Rt({role:"menu","aria-orientation":"vertical","data-state":si(S.open),dir:S.dir},x,k,{ref:A,style:Object(w.a)({outline:"none"},k.style),onKeyDown:Xt(k.onKeyDown,(function(e){var t=e.target,n=e.currentTarget.contains(t),r=e.ctrlKey||e.altKey||e.metaKey;n&&!r&&1===e.key.length&&function(e){var t,n,r=D.current+e,a=_().filter((function(e){return!e.disabled})),i=document.activeElement,o=null===(t=a.find((function(e){return e.ref.current===i})))||void 0===t?void 0:t.textValue,s=function(e,t,n){var r,a,i=t.length>1&&Array.from(t).every((function(e){return e===t[0]}))?t[0]:t,o=n?e.indexOf(n):-1,s=(r=e,a=Math.max(o,0),r.map((function(e,t){return r[(a+t)%r.length]})));1===i.length&&(s=s.filter((function(e){return e!==n})));var c=s.find((function(e){return e.toLowerCase().startsWith(i.toLowerCase())}));return c!==n?c:void 0}(a.map((function(e){return e.textValue})),r,o),c=null===(n=a.find((function(e){return e.textValue===s})))||void 0===n?void 0:n.ref.current;!function e(t){D.current=t,window.clearTimeout(T.current),""!==t&&(T.current=window.setTimeout((function(){return e("")}),1e3))}(r),c&&setTimeout((function(){return c.focus()}))}(e.key),"Tab"===e.key&&e.preventDefault();var a=M.current;if(e.target===a&&ba.includes(e.key)){e.preventDefault();var i=_().filter((function(e){return!e.disabled})).map((function(e){return e.ref.current}));ma.includes(e.key)&&i.reverse(),function(e){var t,n=document.activeElement,r=Object(g.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(a===n)return;if(a.focus(),document.activeElement!==n)return}}catch(rm){r.e(rm)}finally{r.f()}}(i)}})),onBlur:Xt(e.onBlur,(function(e){e.currentTarget.contains(e.target)||(window.clearTimeout(T.current),D.current="")})),onPointerMove:Xt(e.onPointerMove,ui((function(e){var t=e.target,n=F.current!==e.clientX;if(e.currentTarget.contains(t)&&n){var r=e.clientX>F.current?"right":"left";L.current=r,F.current=e.clientX}})))}))))))))})),Xa=m.forwardRef((function(e,t){e.__scopeMenu;var n=O(e,["__scopeMenu"]);return m.createElement(zt.div,Rt({role:"group"},n,{ref:t}))})),Ya=m.forwardRef((function(e,t){var n=e.disabled,r=void 0!==n&&n,a=e.onSelect,i=O(e,["disabled","onSelect"]),o=m.useRef(null),s=Da("MenuItem",e.__scopeMenu),c=Ha("MenuItem",e.__scopeMenu),u=Dt(t,o),l=m.useRef(!1);return m.createElement($a,Rt({},i,{ref:u,disabled:r,onClick:Xt(e.onClick,(function(){var e=o.current;if(!r&&e){var t=new Event("menu.itemSelect",{bubbles:!0,cancelable:!0});e.addEventListener("menu.itemSelect",(function(e){return null==a?void 0:a(e)}),{once:!0}),e.dispatchEvent(t),t.defaultPrevented?l.current=!1:s.onRootClose()}})),onPointerDown:function(t){var n;null===(n=e.onPointerDown)||void 0===n||n.call(e,t),l.current=!0},onPointerUp:Xt(e.onPointerUp,(function(e){var t;l.current||null===(t=e.currentTarget)||void 0===t||t.click()})),onKeyDown:Xt(e.onKeyDown,(function(e){var t=""!==c.searchRef.current;r||t&&" "===e.key||ga.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())}))}))})),Ga=m.forwardRef((function(e,t){var n=Da("MenuSubTrigger",e.__scopeMenu),r=Ha("MenuSubTrigger",e.__scopeMenu),a=m.useRef(null),i=r.pointerGraceTimerRef,o=r.onPointerGraceIntentChange,s=m.useCallback((function(){a.current&&window.clearTimeout(a.current),a.current=null}),[]);return m.useEffect((function(){return s}),[s]),m.useEffect((function(){var e=i.current;return function(){window.clearTimeout(e),o(null)}}),[i,o]),n.isSubmenu?m.createElement(Ra,Rt({asChild:!0},e),m.createElement($a,Rt({id:n.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":si(n.open)},e,{ref:Tt(t,n.onTriggerChange),onClick:function(t){var r;null===(r=e.onClick)||void 0===r||r.call(e,t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Xt(e.onPointerMove,ui((function(t){r.onItemEnter(t),t.defaultPrevented||e.disabled||n.open||a.current||(r.onPointerGraceIntentChange(null),a.current=window.setTimeout((function(){n.onOpenChange(!0),s()}),100))}))),onPointerLeave:Xt(e.onPointerLeave,ui((function(e){var t;s();var a=null===(t=n.content)||void 0===t?void 0:t.getBoundingClientRect();if(a){var o,c=null===(o=n.content)||void 0===o?void 0:o.dataset.side,u="right"===c,l=u?-5:5,d=a[u?"left":"right"],f=a[u?"right":"left"];r.onPointerGraceIntentChange({area:[{x:e.clientX+l,y:e.clientY},{x:d,y:a.top},{x:f,y:a.top},{x:f,y:a.bottom},{x:d,y:a.bottom}],side:c}),window.clearTimeout(i.current),i.current=window.setTimeout((function(){return r.onPointerGraceIntentChange(null)}),300)}else{if(r.onTriggerLeave(e),e.defaultPrevented)return;r.onPointerGraceIntentChange(null)}}))),onKeyDown:Xt(e.onKeyDown,(function(t){var a,i=""!==r.searchRef.current;e.disabled||i&&" "===t.key||ya[n.dir].includes(t.key)&&(n.onOpenChange(!0),null===(a=n.content)||void 0===a||a.focus(),t.preventDefault())}))}))):null})),$a=m.forwardRef((function(e,t){var n=e.__scopeMenu,r=e.disabled,a=void 0!==r&&r,i=e.textValue,o=O(e,["__scopeMenu","disabled","textValue"]),s=Ha("MenuItem",n),c=Pa(n),u=m.useRef(null),l=Dt(t,u),f=m.useState(""),p=Object(d.a)(f,2),h=p[0],v=p[1];return m.useEffect((function(){var e,t=u.current;t&&v((null!==(e=t.textContent)&&void 0!==e?e:"").trim())}),[o.children]),m.createElement(Sa.ItemSlot,{scope:n,disabled:a,textValue:null!=i?i:h},m.createElement(pn,Rt({asChild:!0},c,{focusable:!a}),m.createElement(zt.div,Rt({role:"menuitem","aria-disabled":a||void 0,"data-disabled":a?"":void 0},o,{ref:l,onPointerMove:Xt(e.onPointerMove,ui((function(e){a?s.onItemLeave(e):(s.onItemEnter(e),e.defaultPrevented||e.currentTarget.focus())}))),onPointerLeave:Xt(e.onPointerLeave,ui((function(e){return s.onItemLeave(e)})))}))))})),qa=m.forwardRef((function(e,t){var n=e.checked,r=void 0!==n&&n,a=e.onCheckedChange,i=O(e,["checked","onCheckedChange"]);return m.createElement(ii,{scope:e.__scopeMenu,checked:r},m.createElement(Ya,Rt({role:"menuitemcheckbox","aria-checked":r},i,{ref:t,"data-state":ci(r),onSelect:Xt(i.onSelect,(function(){return null==a?void 0:a(!r)}),{checkForDefaultPrevented:!1})})))})),Za=Ca("MenuRadioGroup",{value:void 0,onValueChange:function(){}}),Ja=Object(d.a)(Za,2),Qa=Ja[0],ei=Ja[1],ti=m.forwardRef((function(e,t){var n=e.value,r=e.onValueChange,a=O(e,["value","onValueChange"]),i=Mt(r);return m.createElement(Qa,{scope:e.__scopeMenu,value:n,onValueChange:i},m.createElement(Xa,Rt({},a,{ref:t})))})),ni=m.forwardRef((function(e,t){var n=e.value,r=O(e,["value"]),a=ei("MenuRadioItem",e.__scopeMenu),i=n===a.value;return m.createElement(ii,{scope:e.__scopeMenu,checked:i},m.createElement(Ya,Rt({role:"menuitemradio","aria-checked":i},r,{ref:t,"data-state":ci(i),onSelect:Xt(r.onSelect,(function(){var e;return null===(e=a.onValueChange)||void 0===e?void 0:e.call(a,n)}),{checkForDefaultPrevented:!1})})))})),ri=Ca("MenuItemIndicator",{checked:!1}),ai=Object(d.a)(ri,2),ii=ai[0],oi=ai[1];function si(e){return e?"open":"closed"}function ci(e){return e?"checked":"unchecked"}function ui(e){return function(t){return"mouse"===t.pointerType?e(t):void 0}}var li=function(e){var t=e.__scopeMenu,n=e.open,r=void 0!==n&&n,a=e.children,i=e.onOpenChange,o=e.modal,s=void 0===o||o,c=Ia(t),u=m.useState(null),l=Object(d.a)(u,2),f=l[0],p=l[1],h=m.useRef(!1),v=Mt(i),g=function(e,t){var n=m.useState("ltr"),r=Object(d.a)(n,2),a=r[0],i=r[1],o=m.useState(),s=Object(d.a)(o,2),c=s[0],u=s[1],l=m.useRef(0);return m.useEffect((function(){if(void 0===t&&null!=e&&e.parentElement){var n=getComputedStyle(e.parentElement);u(n)}}),[e,t]),m.useEffect((function(){return void 0===t&&function e(){l.current=requestAnimationFrame((function(){var t=null==c?void 0:c.direction;t&&i(t),e()}))}(),function(){return cancelAnimationFrame(l.current)}}),[c,t,i]),t||a}(f,e.dir);return m.useEffect((function(){var e=function(){return h.current=!0},t=function(){return h.current=!1};return document.addEventListener("keydown",e,{capture:!0}),document.addEventListener("pointerdown",t,{capture:!0}),document.addEventListener("pointermove",t,{capture:!0}),function(){document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}}),[]),m.createElement(Wn,c,m.createElement(Ta,{scope:t,isSubmenu:!1,isUsingKeyboardRef:h,dir:g,open:r,onOpenChange:v,content:f,onContentChange:p,onRootClose:m.useCallback((function(){return v(!1)}),[v]),modal:s},a))},di=function(e){var t=e.__scopeMenu,n=e.children,r=e.open,a=void 0!==r&&r,i=e.onOpenChange,o=Da("MenuSub",t),s=Ia(t),c=m.useState(null),u=Object(d.a)(c,2),l=u[0],f=u[1],p=m.useState(null),h=Object(d.a)(p,2),v=h[0],g=h[1],b=Mt(i);return m.useEffect((function(){return!1===o.open&&b(!1),function(){return b(!1)}}),[o.open,b]),m.createElement(Wn,s,m.createElement(Ta,{scope:t,isSubmenu:!0,isUsingKeyboardRef:o.isUsingKeyboardRef,dir:o.dir,open:a,onOpenChange:b,content:v,onContentChange:g,onRootClose:o.onRootClose,contentId:Ct(),trigger:l,onTriggerChange:f,triggerId:Ct(),modal:!1},n))},fi=Ra,pi=Ga,hi=za,vi=Ya,gi=qa,mi=ti,bi=ni,yi=m.forwardRef((function(e,t){var n=e.__scopeMenu,r=e.forceMount,a=O(e,["__scopeMenu","forceMount"]),i=oi("MenuItemIndicator",n);return m.createElement($n,{present:r||i.checked},m.createElement(zt.span,Rt({},a,{ref:t,"data-state":ci(i.checked)})))})),wi=m.forwardRef((function(e,t){e.__scopeMenu;var n=O(e,["__scopeMenu"]);return m.createElement(zt.div,Rt({role:"separator","aria-orientation":"horizontal"},n,{ref:t}))})),Oi=m.forwardRef((function(e,t){var n=e.__scopeMenu,r=O(e,["__scopeMenu"]),a=Ia(n);return m.createElement(Gn,Rt({},a,r,{ref:t}))})),ki=Kt("DropdownMenu",[Ea]),Si=Object(d.a)(ki,2),xi=Si[0],ji=(Si[1],Ea()),_i=xi("DropdownMenu"),Ci=Object(d.a)(_i,2),Ei=Ci[0],Ii=Ci[1],Pi=function(e){var t=e.__scopeDropdownMenu,n=e.children,r=e.dir,a=e.open,i=e.onOpenChange,o=e.onOpenToggle,s=e.modal,c=void 0===s||s,u=ji(t),l=m.useRef(null);return m.createElement(Ei,{scope:t,isRootMenu:!0,triggerId:Ct(),triggerRef:l,contentId:Ct(),open:a,onOpenChange:i,onOpenToggle:o,modal:c},m.createElement(li,Rt({},u,{open:a,onOpenChange:i,dir:r,modal:c}),n))},Mi=m.forwardRef((function(e,t){var n=e.__scopeDropdownMenu,r=e.disabled,a=void 0!==r&&r,i=O(e,["__scopeDropdownMenu","disabled"]),o=Ii("DropdownMenuTrigger",n),s=ji(n);return o.isRootMenu?m.createElement(fi,Rt({asChild:!0},s),m.createElement(zt.button,Rt({type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":!!o.open||void 0,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":a?"":void 0,disabled:a},i,{ref:Tt(t,o.triggerRef),onClick:Xt(e.onClick,(function(){return o.onOpenChange(!0)})),onPointerDown:Xt(e.onPointerDown,(function(e){a||0!==e.button||!1!==e.ctrlKey||(o.open||e.preventDefault(),o.onOpenToggle())})),onKeyDown:Xt(e.onKeyDown,(function(e){a||"ArrowDown"!==e.key||(e.preventDefault(),o.onOpenChange(!0))}))}))):null})),Ai=xi("DropdownMenuContent",{isInsideContent:!1}),Ti=Object(d.a)(Ai,2),Di=Ti[0],Ri=Ti[1],Bi=m.forwardRef((function(e,t){var n=e.__scopeDropdownMenu,r=O(e,["__scopeDropdownMenu"]),a=Ii("DropdownMenuContent",n),i=ji(n),o=Object(w.a)(Object(w.a)({},r),{},{style:Object(w.a)(Object(w.a)({},e.style),{},{"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)"})});return m.createElement(Di,{scope:n,isInsideContent:!0},a.isRootMenu?m.createElement(Li,Rt({__scopeDropdownMenu:n},o,{ref:t})):m.createElement(hi,Rt({},i,o,{ref:t})))})),Li=m.forwardRef((function(e,t){var n=e.__scopeDropdownMenu,r=e.portalled,a=void 0===r||r,i=O(e,["__scopeDropdownMenu","portalled"]),o=Ii("DropdownMenuContent",n),s=ji(n),c=m.useRef(!1);return o.isRootMenu?m.createElement(hi,Rt({id:o.contentId,"aria-labelledby":o.triggerId},s,i,{ref:t,portalled:a,onCloseAutoFocus:function(t){var n,r;null===(n=e.onCloseAutoFocus)||void 0===n||n.call(e,t),t.defaultPrevented||(c.current||null===(r=o.triggerRef.current)||void 0===r||r.focus(),t.preventDefault()),c.current=!1},onInteractOutside:function(t){var n,r;if(null===(n=e.onInteractOutside)||void 0===n||n.call(e,t),!t.defaultPrevented){var a=t.detail.originalEvent,i=0===a.button&&!0===a.ctrlKey,s=2===a.button||i;o.modal&&!s||(c.current=!0)}var u=t.target;(null===(r=o.triggerRef.current)||void 0===r?void 0:r.contains(u))&&t.preventDefault()}})):null})),Fi=m.forwardRef((function(e,t){var n=e.__scopeDropdownMenu,r=O(e,["__scopeDropdownMenu"]),a=ji(n);return m.createElement(vi,Rt({},a,r,{ref:t}))})),Hi=m.forwardRef((function(e,t){var n=e.__scopeDropdownMenu,r=O(e,["__scopeDropdownMenu"]),a=ji(n);return m.createElement(pi,Rt({},a,r,{ref:t}))})),zi=m.forwardRef((function(e,t){var n=e.__scopeDropdownMenu,r=O(e,["__scopeDropdownMenu"]),a=ji(n);return m.createElement(gi,Rt({},a,r,{ref:t}))})),Ni=m.forwardRef((function(e,t){var n=e.__scopeDropdownMenu,r=O(e,["__scopeDropdownMenu"]),a=ji(n);return m.createElement(mi,Rt({},a,r,{ref:t}))})),Ui=function(e){var t=e.__scopeDropdownMenu,n=e.children,r=e.open,a=e.defaultOpen,i=e.onOpenChange,o=Ri("DropdownMenu",t),s=ji(t),c=At({prop:r,defaultProp:a,onChange:i}),u=Object(d.a)(c,2),l=u[0],f=void 0!==l&&l,p=u[1],h=m.useCallback((function(){return p((function(e){return!e}))}),[p]);return o.isInsideContent?m.createElement(Ei,{scope:t,isRootMenu:!1,open:f,onOpenChange:p,onOpenToggle:h},m.createElement(di,Rt({},s,{open:f,onOpenChange:p}),n)):m.createElement(Pi,Rt({},e,{open:f,onOpenChange:p,onOpenToggle:h}),n)},Ki=Mi,Vi=Bi,Wi=Fi,Xi=Hi,Yi=zi,Gi=Ni,$i=m.forwardRef((function(e,t){var n=e.__scopeDropdownMenu,r=O(e,["__scopeDropdownMenu"]),a=ji(n);return m.createElement(bi,Rt({},a,r,{ref:t}))})),qi=m.forwardRef((function(e,t){var n=e.__scopeDropdownMenu,r=O(e,["__scopeDropdownMenu"]),a=ji(n);return m.createElement(yi,Rt({},a,r,{ref:t}))})),Zi=m.forwardRef((function(e,t){var n=e.__scopeDropdownMenu,r=O(e,["__scopeDropdownMenu"]),a=ji(n);return m.createElement(wi,Rt({},a,r,{ref:t}))})),Ji=m.forwardRef((function(e,t){var n=e.__scopeDropdownMenu,r=O(e,["__scopeDropdownMenu"]),a=ji(n);return m.createElement(Oi,Rt({},a,r,{ref:t}))}));function Qi(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var eo=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M9 3C9 2.44772 8.55229 2 8 2H7C6.44772 2 6 2.44772 6 3L6 14H1.5C1.22386 14 1 14.2239 1 14.5C1 14.7761 1.22386 15 1.5 15L6 15H9H13.5C13.7761 15 14 14.7761 14 14.5C14 14.2239 13.7761 14 13.5 14H9V3Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),to=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M1.99988 6C1.44759 6 0.999877 6.44772 0.999877 7L0.999877 8C0.999877 8.55228 1.44759 9 1.99988 9L6.99988 9L6.99988 13.5C6.99988 13.7761 7.22374 14 7.49988 14C7.77602 14 7.99988 13.7761 7.99988 13.5L7.99988 9L12.9999 9C13.5522 9 13.9999 8.55228 13.9999 8L13.9999 7C13.9999 6.44772 13.5522 6 12.9999 6L7.99988 6L7.99988 1.5C7.99988 1.22386 7.77602 1 7.49988 1C7.22373 1 6.99988 1.22386 6.99988 1.5L6.99988 6L1.99988 6Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),no=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M6.99988 1C6.44759 1 5.99988 1.44772 5.99988 2V7H1.49988C1.22374 7 0.999878 7.22386 0.999878 7.5C0.999878 7.77614 1.22374 8 1.49988 8H5.99988V13C5.99988 13.5523 6.44759 14 6.99988 14H7.99988C8.55216 14 8.99988 13.5523 8.99988 13V8H13.4999C13.776 8 13.9999 7.77614 13.9999 7.5C13.9999 7.22386 13.776 7 13.4999 7H8.99988V2C8.99988 1.44772 8.55216 1 7.99988 1L6.99988 1Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),ro=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M0.499995 0.999995C0.223855 0.999995 -5.58458e-07 1.22385 -5.46388e-07 1.49999L-2.18554e-08 13.4999C-9.78492e-09 13.776 0.223855 13.9999 0.499995 13.9999C0.776136 13.9999 0.999991 13.776 0.999991 13.4999L0.999991 8.99993L12 8.99993C12.5523 8.99993 13 8.55222 13 7.99993L13 6.99994C13 6.44766 12.5523 5.99995 12 5.99995L0.999991 5.99995L0.999991 1.49999C0.999991 1.22385 0.776135 0.999995 0.499995 0.999995Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),ao=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M14.4999 1C14.2237 1 13.9999 1.22386 13.9999 1.5L13.9999 6L2.99988 6C2.44759 6 1.99988 6.44772 1.99988 7L1.99988 8C1.99988 8.55228 2.44759 9 2.99988 9L13.9999 9L13.9999 13.5C13.9999 13.7761 14.2237 14 14.4999 14C14.776 14 14.9999 13.7761 14.9999 13.5L14.9999 9L14.9999 6L14.9999 1.5C14.9999 1.22386 14.776 1 14.4999 1Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),io=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M1.5 0C1.22386 0 1 0.223858 1 0.5C1 0.776142 1.22386 1 1.5 1H6V12C6 12.5523 6.44772 13 7 13H8C8.55228 13 9 12.5523 9 12V1H13.5C13.7761 1 14 0.776142 14 0.5C14 0.223858 13.7761 0 13.5 0H9H6H1.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),oo=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M8.8914 2.1937C9.1158 2.35464 9.16725 2.66701 9.00631 2.89141L2.47388 12H13.5C13.7761 12 14 12.2239 14 12.5C14 12.7762 13.7761 13 13.5 13H1.5C1.31254 13 1.14082 12.8952 1.0552 12.7284C0.969578 12.5616 0.984438 12.361 1.09369 12.2086L8.19369 2.30862C8.35462 2.08422 8.667 2.03277 8.8914 2.1937ZM11.1 6.50001C11.1 6.22387 11.3238 6.00001 11.6 6.00001C11.8761 6.00001 12.1 6.22387 12.1 6.50001C12.1 6.77615 11.8761 7.00001 11.6 7.00001C11.3238 7.00001 11.1 6.77615 11.1 6.50001ZM10.4 4.00001C10.1239 4.00001 9.90003 4.22387 9.90003 4.50001C9.90003 4.77615 10.1239 5.00001 10.4 5.00001C10.6762 5.00001 10.9 4.77615 10.9 4.50001C10.9 4.22387 10.6762 4.00001 10.4 4.00001ZM12.1 8.50001C12.1 8.22387 12.3238 8.00001 12.6 8.00001C12.8761 8.00001 13.1 8.22387 13.1 8.50001C13.1 8.77615 12.8761 9.00001 12.6 9.00001C12.3238 9.00001 12.1 8.77615 12.1 8.50001ZM13.4 10C13.1239 10 12.9 10.2239 12.9 10.5C12.9 10.7761 13.1239 11 13.4 11C13.6762 11 13.9 10.7761 13.9 10.5C13.9 10.2239 13.6762 10 13.4 10Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),so=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M7.5 2C7.77614 2 8 2.22386 8 2.5L8 11.2929L11.1464 8.14645C11.3417 7.95118 11.6583 7.95118 11.8536 8.14645C12.0488 8.34171 12.0488 8.65829 11.8536 8.85355L7.85355 12.8536C7.75979 12.9473 7.63261 13 7.5 13C7.36739 13 7.24021 12.9473 7.14645 12.8536L3.14645 8.85355C2.95118 8.65829 2.95118 8.34171 3.14645 8.14645C3.34171 7.95118 3.65829 7.95118 3.85355 8.14645L7 11.2929L7 2.5C7 2.22386 7.22386 2 7.5 2Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),co=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M3.64645 11.3536C3.45118 11.1583 3.45118 10.8417 3.64645 10.6465L10.2929 4L6 4C5.72386 4 5.5 3.77614 5.5 3.5C5.5 3.22386 5.72386 3 6 3L11.5 3C11.6326 3 11.7598 3.05268 11.8536 3.14645C11.9473 3.24022 12 3.36739 12 3.5L12 9.00001C12 9.27615 11.7761 9.50001 11.5 9.50001C11.2239 9.50001 11 9.27615 11 9.00001V4.70711L4.35355 11.3536C4.15829 11.5488 3.84171 11.5488 3.64645 11.3536Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),uo=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M7.14645 2.14645C7.34171 1.95118 7.65829 1.95118 7.85355 2.14645L11.8536 6.14645C12.0488 6.34171 12.0488 6.65829 11.8536 6.85355C11.6583 7.04882 11.3417 7.04882 11.1464 6.85355L8 3.70711L8 12.5C8 12.7761 7.77614 13 7.5 13C7.22386 13 7 12.7761 7 12.5L7 3.70711L3.85355 6.85355C3.65829 7.04882 3.34171 7.04882 3.14645 6.85355C2.95118 6.65829 2.95118 6.34171 3.14645 6.14645L7.14645 2.14645Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),lo=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M2.5 2H12.5C12.7761 2 13 2.22386 13 2.5V12.5C13 12.7761 12.7761 13 12.5 13H2.5C2.22386 13 2 12.7761 2 12.5V2.5C2 2.22386 2.22386 2 2.5 2ZM1 2.5C1 1.67157 1.67157 1 2.5 1H12.5C13.3284 1 14 1.67157 14 2.5V12.5C14 13.3284 13.3284 14 12.5 14H2.5C1.67157 14 1 13.3284 1 12.5V2.5ZM7.5 4C7.77614 4 8 3.77614 8 3.5C8 3.22386 7.77614 3 7.5 3C7.22386 3 7 3.22386 7 3.5C7 3.77614 7.22386 4 7.5 4ZM8 5.5C8 5.77614 7.77614 6 7.5 6C7.22386 6 7 5.77614 7 5.5C7 5.22386 7.22386 5 7.5 5C7.77614 5 8 5.22386 8 5.5ZM7.5 8C7.77614 8 8 7.77614 8 7.5C8 7.22386 7.77614 7 7.5 7C7.22386 7 7 7.22386 7 7.5C7 7.77614 7.22386 8 7.5 8ZM10 7.5C10 7.77614 9.77614 8 9.5 8C9.22386 8 9 7.77614 9 7.5C9 7.22386 9.22386 7 9.5 7C9.77614 7 10 7.22386 10 7.5ZM11.5 8C11.7761 8 12 7.77614 12 7.5C12 7.22386 11.7761 7 11.5 7C11.2239 7 11 7.22386 11 7.5C11 7.77614 11.2239 8 11.5 8Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),fo=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M12.5 2H2.5C2.22386 2 2 2.22386 2 2.5V12.5C2 12.7761 2.22386 13 2.5 13H12.5C12.7761 13 13 12.7761 13 12.5V2.5C13 2.22386 12.7761 2 12.5 2ZM2.5 1C1.67157 1 1 1.67157 1 2.5V12.5C1 13.3284 1.67157 14 2.5 14H12.5C13.3284 14 14 13.3284 14 12.5V2.5C14 1.67157 13.3284 1 12.5 1H2.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),po=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),ho=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),vo=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M0.877075 7.49991C0.877075 3.84222 3.84222 0.877075 7.49991 0.877075C11.1576 0.877075 14.1227 3.84222 14.1227 7.49991C14.1227 11.1576 11.1576 14.1227 7.49991 14.1227C3.84222 14.1227 0.877075 11.1576 0.877075 7.49991ZM7.49991 1.82708C4.36689 1.82708 1.82708 4.36689 1.82708 7.49991C1.82708 10.6329 4.36689 13.1727 7.49991 13.1727C10.6329 13.1727 13.1727 10.6329 13.1727 7.49991C13.1727 4.36689 10.6329 1.82708 7.49991 1.82708Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),go=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M1 9.50006C1 10.3285 1.67157 11.0001 2.5 11.0001H4L4 10.0001H2.5C2.22386 10.0001 2 9.7762 2 9.50006L2 2.50006C2 2.22392 2.22386 2.00006 2.5 2.00006L9.5 2.00006C9.77614 2.00006 10 2.22392 10 2.50006V4.00002H5.5C4.67158 4.00002 4 4.67159 4 5.50002V12.5C4 13.3284 4.67158 14 5.5 14H12.5C13.3284 14 14 13.3284 14 12.5V5.50002C14 4.67159 13.3284 4.00002 12.5 4.00002H11V2.50006C11 1.67163 10.3284 1.00006 9.5 1.00006H2.5C1.67157 1.00006 1 1.67163 1 2.50006V9.50006ZM5 5.50002C5 5.22388 5.22386 5.00002 5.5 5.00002H12.5C12.7761 5.00002 13 5.22388 13 5.50002V12.5C13 12.7762 12.7761 13 12.5 13H5.5C5.22386 13 5 12.7762 5 12.5V5.50002Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),mo=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M3.29227 0.048984C3.47033 -0.032338 3.67946 -0.00228214 3.8274 0.125891L12.8587 7.95026C13.0134 8.08432 13.0708 8.29916 13.0035 8.49251C12.9362 8.68586 12.7578 8.81866 12.5533 8.82768L9.21887 8.97474L11.1504 13.2187C11.2648 13.47 11.1538 13.7664 10.9026 13.8808L8.75024 14.8613C8.499 14.9758 8.20255 14.8649 8.08802 14.6137L6.15339 10.3703L3.86279 12.7855C3.72196 12.934 3.50487 12.9817 3.31479 12.9059C3.1247 12.8301 3 12.6461 3 12.4414V0.503792C3 0.308048 3.11422 0.130306 3.29227 0.048984ZM4 1.59852V11.1877L5.93799 9.14425C6.05238 9.02363 6.21924 8.96776 6.38319 8.99516C6.54715 9.02256 6.68677 9.12965 6.75573 9.2809L8.79056 13.7441L10.0332 13.178L8.00195 8.71497C7.93313 8.56376 7.94391 8.38824 8.03072 8.24659C8.11753 8.10494 8.26903 8.01566 8.435 8.00834L11.2549 7.88397L4 1.59852Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),bo=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:r}))})),yo=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M3.625 7.5C3.625 8.12132 3.12132 8.625 2.5 8.625C1.87868 8.625 1.375 8.12132 1.375 7.5C1.375 6.87868 1.87868 6.375 2.5 6.375C3.12132 6.375 3.625 6.87868 3.625 7.5ZM8.625 7.5C8.625 8.12132 8.12132 8.625 7.5 8.625C6.87868 8.625 6.375 8.12132 6.375 7.5C6.375 6.87868 6.87868 6.375 7.5 6.375C8.12132 6.375 8.625 6.87868 8.625 7.5ZM12.5 8.625C13.1213 8.625 13.625 8.12132 13.625 7.5C13.625 6.87868 13.1213 6.375 12.5 6.375C11.8787 6.375 11.375 6.87868 11.375 7.5C11.375 8.12132 11.8787 8.625 12.5 8.625Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),wo=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M3 1C2.44771 1 2 1.44772 2 2V13C2 13.5523 2.44772 14 3 14H10.5C10.7761 14 11 13.7761 11 13.5C11 13.2239 10.7761 13 10.5 13H3V2L10.5 2C10.7761 2 11 1.77614 11 1.5C11 1.22386 10.7761 1 10.5 1H3ZM12.6036 4.89645C12.4083 4.70118 12.0917 4.70118 11.8964 4.89645C11.7012 5.09171 11.7012 5.40829 11.8964 5.60355L13.2929 7H6.5C6.22386 7 6 7.22386 6 7.5C6 7.77614 6.22386 8 6.5 8H13.2929L11.8964 9.39645C11.7012 9.59171 11.7012 9.90829 11.8964 10.1036C12.0917 10.2988 12.4083 10.2988 12.6036 10.1036L14.8536 7.85355C15.0488 7.65829 15.0488 7.34171 14.8536 7.14645L12.6036 4.89645Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),Oo=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M7.49936 0.850006C3.82767 0.850006 0.849976 3.8273 0.849976 7.50023C0.849976 10.4379 2.75523 12.9306 5.39775 13.8104C5.73047 13.8712 5.85171 13.6658 5.85171 13.4895C5.85171 13.3315 5.846 12.9135 5.84273 12.3587C3.99301 12.7604 3.60273 11.4671 3.60273 11.4671C3.30022 10.6988 2.86423 10.4942 2.86423 10.4942C2.26044 10.0819 2.90995 10.0901 2.90995 10.0901C3.57742 10.137 3.9285 10.7755 3.9285 10.7755C4.52167 11.7916 5.48512 11.4981 5.86396 11.3279C5.92438 10.8984 6.09625 10.6053 6.28608 10.4391C4.80948 10.2709 3.25695 9.70063 3.25695 7.15241C3.25695 6.42615 3.51618 5.83298 3.94157 5.368C3.87299 5.1998 3.64478 4.52375 4.00689 3.60807C4.00689 3.60807 4.56494 3.42926 5.83538 4.28941C6.36568 4.14204 6.93477 4.06856 7.50018 4.0657C8.06518 4.06856 8.63386 4.14204 9.16498 4.28941C10.4346 3.42926 10.9918 3.60807 10.9918 3.60807C11.3548 4.52375 11.1266 5.1998 11.0584 5.368C11.4846 5.83298 11.7418 6.42615 11.7418 7.15241C11.7418 9.70716 10.1868 10.2693 8.70571 10.4338C8.94412 10.6392 9.15681 11.045 9.15681 11.6655C9.15681 12.5542 9.14865 13.2715 9.14865 13.4895C9.14865 13.6675 9.26867 13.8745 9.60588 13.8095C12.2464 12.9282 14.15 10.4375 14.15 7.50023C14.15 3.8273 11.1723 0.850006 7.49936 0.850006Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),ko=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M1.44995 0.949951C1.31734 0.949951 1.19016 1.00263 1.0964 1.0964C1.00263 1.19017 0.949951 1.31735 0.949951 1.44995L0.949966 3.44995C0.949969 3.7261 1.17383 3.94995 1.44997 3.94995C1.72611 3.94995 1.94997 3.72609 1.94997 3.44995L1.94995 1.94995H3.44997C3.72611 1.94995 3.94997 1.72609 3.94997 1.44995C3.94997 1.17381 3.72611 0.949951 3.44997 0.949951H1.44995ZM5.94995 0.949951C5.67381 0.949951 5.44995 1.17381 5.44995 1.44995C5.44995 1.72609 5.67381 1.94995 5.94995 1.94995H8.94995C9.22609 1.94995 9.44995 1.72609 9.44995 1.44995C9.44995 1.17381 9.22609 0.949951 8.94995 0.949951H5.94995ZM5.44995 13.45C5.44995 13.1738 5.67381 12.95 5.94995 12.95H8.94995C9.22609 12.95 9.44995 13.1738 9.44995 13.45C9.44995 13.7261 9.22609 13.95 8.94995 13.95H5.94995C5.67381 13.95 5.44995 13.7261 5.44995 13.45ZM1.94995 5.94995C1.94995 5.67381 1.72609 5.44995 1.44995 5.44995C1.17381 5.44995 0.949951 5.67381 0.949951 5.94995V8.94995C0.949951 9.22609 1.17381 9.44995 1.44995 9.44995C1.72609 9.44995 1.94995 9.22609 1.94995 8.94995V5.94995ZM13.45 5.44995C13.7261 5.44995 13.95 5.67381 13.95 5.94995V8.94995C13.95 9.22609 13.7261 9.44995 13.45 9.44995C13.1738 9.44995 12.95 9.22609 12.95 8.94995V5.94995C12.95 5.67381 13.1738 5.44995 13.45 5.44995ZM11.45 0.949951C11.1738 0.949951 10.95 1.17381 10.95 1.44995C10.95 1.72609 11.1738 1.94995 11.45 1.94995H12.9499V3.44995C12.9499 3.72609 13.1738 3.94995 13.4499 3.94995C13.7261 3.94995 13.9499 3.72609 13.9499 3.44995V1.44995C13.9499 1.17381 13.7252 0.949951 13.449 0.949951H11.45ZM1.44995 10.95C1.72609 10.95 1.94995 11.1738 1.94995 11.45V12.95H3.44997C3.72611 12.95 3.94997 13.1738 3.94997 13.45C3.94997 13.7261 3.72611 13.95 3.44997 13.95H1.44995C1.17381 13.95 0.949951 13.7261 0.949951 13.45V11.45C0.949951 11.1738 1.17381 10.95 1.44995 10.95ZM13.95 11.45C13.95 11.1738 13.7261 10.95 13.45 10.95C13.1738 10.9499 12.95 11.1738 12.95 11.4499L12.9491 12.95H11.45C11.1738 12.95 10.95 13.1738 10.95 13.45C10.95 13.7261 11.1738 13.95 11.45 13.95H13.4499C13.7261 13.95 13.9499 13.7261 13.9499 13.45L13.95 11.45Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),So=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M1.5 3C1.22386 3 1 3.22386 1 3.5C1 3.77614 1.22386 4 1.5 4H13.5C13.7761 4 14 3.77614 14 3.5C14 3.22386 13.7761 3 13.5 3H1.5ZM1 7.5C1 7.22386 1.22386 7 1.5 7H13.5C13.7761 7 14 7.22386 14 7.5C14 7.77614 13.7761 8 13.5 8H1.5C1.22386 8 1 7.77614 1 7.5ZM1 11.5C1 11.2239 1.22386 11 1.5 11H13.5C13.7761 11 14 11.2239 14 11.5C14 11.7761 13.7761 12 13.5 12H1.5C1.22386 12 1 11.7761 1 11.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),xo=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),jo=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M7.4986 0C6.3257 0 5.36107 0.38943 4.73753 1.19361C4.23745 1.83856 4 2.68242 4 3.63325H5C5 2.84313 5.19691 2.23312 5.5278 1.80636C5.91615 1.30552 6.55152 1 7.4986 1C8.35683 1 8.96336 1.26502 9.35846 1.68623C9.75793 2.11211 10 2.76044 10 3.63601V6H3C2.44772 6 2 6.44772 2 7V13C2 13.5523 2.44772 14 3 14H12C12.5523 14 13 13.5523 13 13V7C13 6.44771 12.5523 6 12 6H11V3.63601C11 2.58135 10.7065 1.66167 10.0878 1.0021C9.46477 0.337871 8.57061 0 7.4986 0ZM3 7H12V13H3V7Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),_o=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M5 1.5C5 1.22386 4.77614 1 4.5 1C4.22386 1 4 1.22386 4 1.5L4 7C4 7.01671 4.00082 7.03323 4.00242 7.04952C2.86009 7.28022 2 8.28967 2 9.5C2 10.7103 2.86009 11.7198 4.00242 11.9505C4.00082 11.9668 4 11.9833 4 12V13.5C4 13.7761 4.22386 14 4.5 14C4.77614 14 5 13.7761 5 13.5V12C5 11.9833 4.99918 11.9668 4.99758 11.9505C6.1399 11.7198 7 10.7103 7 9.5C7 8.28967 6.1399 7.28022 4.99758 7.04952C4.99918 7.03323 5 7.01671 5 7L5 1.5ZM11 1.5C11 1.22386 10.7761 1 10.5 1C10.2239 1 10 1.22386 10 1.5V3C10 3.01671 10.0008 3.03323 10.0024 3.04952C8.8601 3.28022 8 4.28967 8 5.5C8 6.71033 8.8601 7.71978 10.0024 7.95048C10.0008 7.96677 10 7.98329 10 8V13.5C10 13.7761 10.2239 14 10.5 14C10.7761 14 11 13.7761 11 13.5V8C11 7.98329 10.9992 7.96677 10.9976 7.95048C12.1399 7.71978 13 6.71033 13 5.5C13 4.28967 12.1399 3.28022 10.9976 3.04952C10.9992 3.03323 11 3.01671 11 3V1.5ZM4.5 8C3.67157 8 3 8.67157 3 9.5C3 10.3284 3.67157 11 4.5 11C5.32843 11 6 10.3284 6 9.5C6 8.67157 5.32843 8 4.5 8ZM9 5.5C9 4.67157 9.67157 4 10.5 4C11.3284 4 12 4.67157 12 5.5C12 6.32843 11.3284 7 10.5 7C9.67157 7 9 6.32843 9 5.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),Co=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M11.8536 1.14645C11.6583 0.951184 11.3417 0.951184 11.1465 1.14645L3.71455 8.57836C3.62459 8.66832 3.55263 8.77461 3.50251 8.89155L2.04044 12.303C1.9599 12.491 2.00189 12.709 2.14646 12.8536C2.29103 12.9981 2.50905 13.0401 2.69697 12.9596L6.10847 11.4975C6.2254 11.4474 6.3317 11.3754 6.42166 11.2855L13.8536 3.85355C14.0488 3.65829 14.0488 3.34171 13.8536 3.14645L11.8536 1.14645ZM4.42166 9.28547L11.5 2.20711L12.7929 3.5L5.71455 10.5784L4.21924 11.2192L3.78081 10.7808L4.42166 9.28547Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),Eo=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M12.1464 1.14645C12.3417 0.951184 12.6583 0.951184 12.8535 1.14645L14.8535 3.14645C15.0488 3.34171 15.0488 3.65829 14.8535 3.85355L10.9109 7.79618C10.8349 7.87218 10.7471 7.93543 10.651 7.9835L6.72359 9.94721C6.53109 10.0435 6.29861 10.0057 6.14643 9.85355C5.99425 9.70137 5.95652 9.46889 6.05277 9.27639L8.01648 5.34897C8.06455 5.25283 8.1278 5.16507 8.2038 5.08907L12.1464 1.14645ZM12.5 2.20711L8.91091 5.79618L7.87266 7.87267L8.12731 8.12732L10.2038 7.08907L13.7929 3.5L12.5 2.20711ZM9.99998 2L8.99998 3H4.9C4.47171 3 4.18056 3.00039 3.95552 3.01877C3.73631 3.03668 3.62421 3.06915 3.54601 3.10899C3.35785 3.20487 3.20487 3.35785 3.10899 3.54601C3.06915 3.62421 3.03669 3.73631 3.01878 3.95552C3.00039 4.18056 3 4.47171 3 4.9V11.1C3 11.5283 3.00039 11.8194 3.01878 12.0445C3.03669 12.2637 3.06915 12.3758 3.10899 12.454C3.20487 12.6422 3.35785 12.7951 3.54601 12.891C3.62421 12.9309 3.73631 12.9633 3.95552 12.9812C4.18056 12.9996 4.47171 13 4.9 13H11.1C11.5283 13 11.8194 12.9996 12.0445 12.9812C12.2637 12.9633 12.3758 12.9309 12.454 12.891C12.6422 12.7951 12.7951 12.6422 12.891 12.454C12.9309 12.3758 12.9633 12.2637 12.9812 12.0445C12.9996 11.8194 13 11.5283 13 11.1V6.99998L14 5.99998V11.1V11.1207C14 11.5231 14 11.8553 13.9779 12.1259C13.9549 12.407 13.9057 12.6653 13.782 12.908C13.5903 13.2843 13.2843 13.5903 12.908 13.782C12.6653 13.9057 12.407 13.9549 12.1259 13.9779C11.8553 14 11.5231 14 11.1207 14H11.1H4.9H4.87934C4.47686 14 4.14468 14 3.87409 13.9779C3.59304 13.9549 3.33469 13.9057 3.09202 13.782C2.7157 13.5903 2.40973 13.2843 2.21799 12.908C2.09434 12.6653 2.04506 12.407 2.0221 12.1259C1.99999 11.8553 1.99999 11.5231 2 11.1207V11.1206V11.1V4.9V4.87935V4.87932V4.87931C1.99999 4.47685 1.99999 4.14468 2.0221 3.87409C2.04506 3.59304 2.09434 3.33469 2.21799 3.09202C2.40973 2.71569 2.7157 2.40973 3.09202 2.21799C3.33469 2.09434 3.59304 2.04506 3.87409 2.0221C4.14468 1.99999 4.47685 1.99999 4.87932 2H4.87935H4.9H9.99998Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),Io=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M13.5 13.95C13.7485 13.95 13.95 13.7485 13.95 13.5C13.95 13.2514 13.7485 13.05 13.5 13.05L1.49995 13.05C1.25142 13.05 1.04995 13.2514 1.04995 13.5C1.04995 13.7485 1.25142 13.95 1.49995 13.95L13.5 13.95ZM11.0681 7.5683C11.2439 7.39257 11.2439 7.10764 11.0681 6.93191C10.8924 6.75617 10.6075 6.75617 10.4317 6.93191L7.94993 9.41371L7.94993 1.49998C7.94993 1.25146 7.74846 1.04998 7.49993 1.04998C7.2514 1.04998 7.04993 1.25146 7.04993 1.49998L7.04993 9.41371L4.56813 6.93191C4.39239 6.75617 4.10746 6.75617 3.93173 6.93191C3.75599 7.10764 3.75599 7.39257 3.93173 7.5683L7.18173 10.8183C7.35746 10.994 7.64239 10.994 7.81812 10.8183L11.0681 7.5683Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),Po=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M1.50005 1.05005C1.25152 1.05005 1.05005 1.25152 1.05005 1.50005C1.05005 1.74858 1.25152 1.95005 1.50005 1.95005L13.5 1.95005C13.7486 1.95005 13.95 1.74858 13.95 1.50005C13.95 1.25152 13.7486 1.05005 13.5 1.05005H1.50005ZM3.93188 7.43169C3.75614 7.60743 3.75614 7.89236 3.93188 8.06809C4.10761 8.24383 4.39254 8.24383 4.56827 8.06809L7.05007 5.58629V13.5C7.05007 13.7485 7.25155 13.95 7.50007 13.95C7.7486 13.95 7.95007 13.7485 7.95007 13.5L7.95007 5.58629L10.4319 8.06809C10.6076 8.24383 10.8925 8.24383 11.0683 8.06809C11.244 7.89235 11.244 7.60743 11.0683 7.43169L7.81827 4.18169C7.64254 4.00596 7.35761 4.00596 7.18188 4.18169L3.93188 7.43169Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),Mo=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M8 2.75C8 2.47386 7.77614 2.25 7.5 2.25C7.22386 2.25 7 2.47386 7 2.75V7H2.75C2.47386 7 2.25 7.22386 2.25 7.5C2.25 7.77614 2.47386 8 2.75 8H7V12.25C7 12.5261 7.22386 12.75 7.5 12.75C7.77614 12.75 8 12.5261 8 12.25V8H12.25C12.5261 8 12.75 7.77614 12.75 7.5C12.75 7.22386 12.5261 7 12.25 7H8V2.75Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),Ao=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M7.59664 2.93628C7.76085 3.06401 8.00012 2.94698 8.00012 2.73895V1.99998C9.98143 2 11.1848 2.3637 11.9105 3.08945C12.6363 3.81522 13 5.0186 13 6.99998C13 7.27613 13.2239 7.49998 13.5 7.49998C13.7761 7.49998 14 7.27613 14 6.99998C14 4.9438 13.6325 3.39719 12.6176 2.38234C11.6028 1.36752 10.0562 0.999999 8.00012 0.999984V0.261266C8.00012 0.0532293 7.76085 -0.0637944 7.59664 0.063928L6.00384 1.30277C5.87516 1.40286 5.87516 1.59735 6.00384 1.69744L7.59664 2.93628ZM9.5 5H2.5C2.22386 5 2 5.22386 2 5.5V12.5C2 12.7761 2.22386 13 2.5 13H9.5C9.77614 13 10 12.7761 10 12.5V5.5C10 5.22386 9.77614 5 9.5 5ZM2.5 4C1.67157 4 1 4.67157 1 5.5V12.5C1 13.3284 1.67157 14 2.5 14H9.5C10.3284 14 11 13.3284 11 12.5V5.5C11 4.67157 10.3284 4 9.5 4H2.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),To=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M14.4999 0.999992C14.2237 0.999992 13.9999 1.22385 13.9999 1.49999L13.9999 13.4999C13.9999 13.776 14.2237 13.9999 14.4999 13.9999C14.776 13.9999 14.9999 13.776 14.9999 13.4999L14.9999 1.49999C14.9999 1.22385 14.776 0.999992 14.4999 0.999992ZM0.499996 0.999992C0.223856 0.999992 -9.78509e-09 1.22385 -2.18556e-08 1.49999L4.07279e-07 13.4999C3.95208e-07 13.776 0.223855 13.9999 0.499996 13.9999C0.776136 13.9999 0.999992 13.776 0.999992 13.4999L0.999992 1.49999C0.999992 1.22385 0.776136 0.999992 0.499996 0.999992ZM1.99998 6.99994C1.99998 6.44766 2.44769 5.99995 2.99998 5.99995L5.99995 5.99995C6.55223 5.99995 6.99994 6.44766 6.99994 6.99994L6.99994 7.99993C6.99994 8.55221 6.55223 8.99992 5.99995 8.99992L2.99998 8.99992C2.4477 8.99992 1.99998 8.55221 1.99998 7.99993L1.99998 6.99994ZM8.99993 5.99995C8.44765 5.99995 7.99993 6.44766 7.99993 6.99994L7.99993 7.99993C7.99993 8.55221 8.44765 8.99992 8.99993 8.99992L11.9999 8.99992C12.5522 8.99992 12.9999 8.55221 12.9999 7.99993L12.9999 6.99994C12.9999 6.44766 12.5522 5.99995 11.9999 5.99995L8.99993 5.99995Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),Do=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M0.999878 0.5C0.999878 0.223858 1.22374 0 1.49988 0H13.4999C13.776 0 13.9999 0.223858 13.9999 0.5C13.9999 0.776142 13.776 1 13.4999 1H1.49988C1.22374 1 0.999878 0.776142 0.999878 0.5ZM7 2C6.44772 2 6 2.44772 6 3V6C6 6.55228 6.44772 7 7 7H8C8.55228 7 9 6.55228 9 6V3C9 2.44772 8.55228 2 8 2H7ZM7 8C6.44772 8 6 8.44771 6 9V12C6 12.5523 6.44772 13 7 13H8C8.55228 13 9 12.5523 9 12V9C9 8.44772 8.55228 8 8 8H7ZM1.49988 14C1.22374 14 0.999878 14.2239 0.999878 14.5C0.999878 14.7761 1.22374 15 1.49988 15H13.4999C13.776 15 13.9999 14.7761 13.9999 14.5C13.9999 14.2239 13.776 14 13.4999 14H1.49988Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),Ro=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M1 1H1.5H13.5H14V1.5V13.5V14H13.5H1.5H1V13.5V1.5V1ZM2 2V13H13V2H2Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),Bo=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M14.4999 0.999992C14.2237 0.999992 13.9999 1.22385 13.9999 1.49999L13.9999 5.99995L0.999992 5.99995L0.999992 1.49999C0.999992 1.22385 0.776136 0.999992 0.499996 0.999992C0.223856 0.999992 -9.78509e-09 1.22385 -2.18556e-08 1.49999L4.07279e-07 13.4999C3.95208e-07 13.776 0.223855 13.9999 0.499996 13.9999C0.776136 13.9999 0.999992 13.776 0.999992 13.4999L0.999992 8.99992L13.9999 8.99992L13.9999 13.4999C13.9999 13.776 14.2237 13.9999 14.4999 13.9999C14.776 13.9999 14.9999 13.776 14.9999 13.4999L14.9999 1.49999C14.9999 1.22385 14.776 0.999992 14.4999 0.999992Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),Lo=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M0.999878 0.5C0.999878 0.223858 1.22374 0 1.49988 0H13.4999C13.776 0 13.9999 0.223858 13.9999 0.5C13.9999 0.776142 13.776 1 13.4999 1H6H1.49988C1.22374 1 0.999878 0.776142 0.999878 0.5ZM9 14V1L6 1V14H1.49988C1.22374 14 0.999878 14.2239 0.999878 14.5C0.999878 14.7761 1.22374 15 1.49988 15H13.4999C13.776 15 13.9999 14.7761 13.9999 14.5C13.9999 14.2239 13.776 14 13.4999 14H9Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),Fo=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M3.94993 2.95002L3.94993 4.49998C3.94993 4.74851 3.74845 4.94998 3.49993 4.94998C3.2514 4.94998 3.04993 4.74851 3.04993 4.49998V2.50004C3.04993 2.45246 3.05731 2.40661 3.07099 2.36357C3.12878 2.18175 3.29897 2.05002 3.49993 2.05002H11.4999C11.6553 2.05002 11.7922 2.12872 11.8731 2.24842C11.9216 2.32024 11.9499 2.40682 11.9499 2.50002L11.9499 2.50004V4.49998C11.9499 4.74851 11.7485 4.94998 11.4999 4.94998C11.2514 4.94998 11.0499 4.74851 11.0499 4.49998V2.95002H8.04993V12.05H9.25428C9.50281 12.05 9.70428 12.2515 9.70428 12.5C9.70428 12.7486 9.50281 12.95 9.25428 12.95H5.75428C5.50575 12.95 5.30428 12.7486 5.30428 12.5C5.30428 12.2515 5.50575 12.05 5.75428 12.05H6.94993V2.95002H3.94993Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),Ho=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M2 4.5C2 4.22386 2.22386 4 2.5 4H12.5C12.7761 4 13 4.22386 13 4.5C13 4.77614 12.7761 5 12.5 5H2.5C2.22386 5 2 4.77614 2 4.5ZM4 7.5C4 7.22386 4.22386 7 4.5 7H10.5C10.7761 7 11 7.22386 11 7.5C11 7.77614 10.7761 8 10.5 8H4.5C4.22386 8 4 7.77614 4 7.5ZM3 10.5C3 10.2239 3.22386 10 3.5 10H11.5C11.7761 10 12 10.2239 12 10.5C12 10.7761 11.7761 11 11.5 11H3.5C3.22386 11 3 10.7761 3 10.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),zo=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M2.5 4C2.22386 4 2 4.22386 2 4.5C2 4.77614 2.22386 5 2.5 5H12.5C12.7761 5 13 4.77614 13 4.5C13 4.22386 12.7761 4 12.5 4H2.5ZM2 7.5C2 7.22386 2.22386 7 2.5 7H12.5C12.7761 7 13 7.22386 13 7.5C13 7.77614 12.7761 8 12.5 8H2.5C2.22386 8 2 7.77614 2 7.5ZM2 10.5C2 10.2239 2.22386 10 2.5 10H12.5C12.7761 10 13 10.2239 13 10.5C13 10.7761 12.7761 11 12.5 11H2.5C2.22386 11 2 10.7761 2 10.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),No=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M2 4.5C2 4.22386 2.22386 4 2.5 4H12.5C12.7761 4 13 4.22386 13 4.5C13 4.77614 12.7761 5 12.5 5H2.5C2.22386 5 2 4.77614 2 4.5ZM2 7.5C2 7.22386 2.22386 7 2.5 7H7.5C7.77614 7 8 7.22386 8 7.5C8 7.77614 7.77614 8 7.5 8H2.5C2.22386 8 2 7.77614 2 7.5ZM2 10.5C2 10.2239 2.22386 10 2.5 10H10.5C10.7761 10 11 10.2239 11 10.5C11 10.7761 10.7761 11 10.5 11H2.5C2.22386 11 2 10.7761 2 10.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),Uo=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M2 4.5C2 4.22386 2.22386 4 2.5 4H12.5C12.7761 4 13 4.22386 13 4.5C13 4.77614 12.7761 5 12.5 5H2.5C2.22386 5 2 4.77614 2 4.5ZM7 7.5C7 7.22386 7.22386 7 7.5 7H12.5C12.7761 7 13 7.22386 13 7.5C13 7.77614 12.7761 8 12.5 8H7.5C7.22386 8 7 7.77614 7 7.5ZM4 10.5C4 10.2239 4.22386 10 4.5 10H12.5C12.7761 10 13 10.2239 13 10.5C13 10.7761 12.7761 11 12.5 11H4.5C4.22386 11 4 10.7761 4 10.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),Ko=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M7.23336 4.69629C7.23336 2.96884 8.63335 1.56857 10.36 1.56857C11.3736 1.56857 12.183 2.04804 12.7254 2.74385C13.3079 2.62467 13.8557 2.40913 14.3513 2.11508C14.1559 2.72598 13.7424 3.2396 13.2033 3.56463C13.2038 3.56568 13.2042 3.56674 13.2047 3.56779C13.7334 3.50361 14.2364 3.36302 14.7048 3.15546L14.7037 3.15715C14.3667 3.66183 13.9431 4.10736 13.4561 4.47034C13.4823 4.64672 13.4956 4.82427 13.4956 5.00079C13.4956 8.6871 10.6873 12.9746 5.52122 12.9746C3.93906 12.9746 2.46544 12.511 1.22505 11.7152C0.992632 11.5661 0.925108 11.2568 1.07423 11.0244C1.0874 11.0038 1.10183 10.9846 1.11734 10.9666C1.20582 10.8202 1.37438 10.7309 1.5554 10.7522C2.47066 10.8601 3.38568 10.7485 4.19219 10.3962C3.39226 10.0434 2.77129 9.35975 2.50204 8.51974C2.45359 8.3686 2.48835 8.20311 2.59351 8.08422C2.59716 8.0801 2.60087 8.07606 2.60464 8.0721C1.96391 7.50819 1.55973 6.68208 1.55973 5.76143V5.72759C1.55973 5.56814 1.64411 5.42059 1.78155 5.33974C1.82671 5.31317 1.87537 5.29511 1.92532 5.28558C1.70549 4.86154 1.58116 4.37984 1.58116 3.86958C1.58116 3.40165 1.58384 2.81192 1.91332 2.28081C1.98718 2.16175 2.10758 2.08915 2.2364 2.07195C2.42588 2.01237 2.64087 2.06969 2.77406 2.23302C3.86536 3.57126 5.44066 4.49583 7.23366 4.73961L7.23336 4.69629ZM5.52122 11.9746C4.73387 11.9746 3.97781 11.8435 3.27248 11.6023C4.13012 11.4538 4.95307 11.1159 5.66218 10.5602C5.81211 10.4427 5.87182 10.2435 5.81126 10.0629C5.7507 9.88234 5.583 9.75943 5.39255 9.75607C4.68968 9.74366 4.06712 9.39716 3.67793 8.86845C3.86828 8.85306 4.05428 8.82039 4.23445 8.77167C4.43603 8.71716 4.57363 8.53114 4.56674 8.32243C4.55985 8.11372 4.41029 7.93718 4.20555 7.89607C3.42694 7.73977 2.79883 7.16764 2.56169 6.42174C2.76255 6.47025 2.97102 6.4991 3.18482 6.5061C3.38563 6.51267 3.56646 6.38533 3.62795 6.19405C3.68943 6.00277 3.61666 5.79391 3.44963 5.68224C2.86523 5.29155 2.48116 4.62464 2.48116 3.86958C2.48116 3.70213 2.48352 3.55268 2.49355 3.41719C3.85115 4.79913 5.70873 5.68931 7.77588 5.79338C7.93225 5.80126 8.08328 5.73543 8.18395 5.61553C8.28463 5.49562 8.32332 5.33548 8.28851 5.18284C8.25255 5.02517 8.23336 4.86284 8.23336 4.69629C8.23336 3.52085 9.18591 2.56857 10.36 2.56857C11.5943 2.56857 12.4956 3.71208 12.4956 5.00079C12.4956 8.25709 10.0202 11.9746 5.52122 11.9746Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),Vo=Object(m.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=Qi(e,["color"]);return Object(m.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a,{ref:t}),Object(m.createElement)("path",{d:"M7.49998 1L6.92321 2.00307L1.17498 12L0.599976 13H1.7535H13.2464H14.4L13.825 12L8.07674 2.00307L7.49998 1ZM7.49998 3.00613L2.3285 12H12.6714L7.49998 3.00613Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))})),Wo=m.forwardRef((function(e,t){return m.createElement(zt.span,Rt({},e,{ref:t,style:Object(w.a)(Object(w.a)({},e.style),{},{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"})}))}));function Xo(e){var t=m.useRef(e);return m.useEffect((function(){t.current=e}),[e]),t.current}var Yo=Kt("Tooltip",[Rn]),Go=Object(d.a)(Yo,2),$o=Go[0],qo=(Go[1],Rn()),Zo=$o("TooltipProvider",{isOpenDelayed:!0,delayDuration:700,onOpen:function(){},onClose:function(){}}),Jo=Object(d.a)(Zo,2),Qo=(Jo[0],Jo[1]),es=$o("Tooltip"),ts=Object(d.a)(es,2),ns=ts[0],rs=ts[1],as=m.forwardRef((function(e,t){var n=e.__scopeTooltip,r=O(e,["__scopeTooltip"]),a=rs("TooltipTrigger",n),i=qo(n),o=Dt(t,a.onTriggerChange),s=m.useRef(!1),c=m.useCallback((function(){return s.current=!1}),[]);return m.useEffect((function(){return function(){return document.removeEventListener("mouseup",c)}}),[c]),m.createElement(Xn,Rt({asChild:!0},i),m.createElement(zt.button,Rt({"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute},r,{ref:o,onMouseEnter:Xt(e.onMouseEnter,a.onTriggerEnter),onMouseLeave:Xt(e.onMouseLeave,a.onClose),onMouseDown:Xt(e.onMouseDown,(function(){a.onClose(),s.current=!0,document.addEventListener("mouseup",c,{once:!0})})),onFocus:Xt(e.onFocus,(function(){s.current||a.onOpen()})),onBlur:Xt(e.onBlur,a.onClose),onClick:Xt(e.onClick,a.onClose)})))})),is=m.forwardRef((function(e,t){var n=e.forceMount,r=O(e,["forceMount"]),a=rs("TooltipContent",e.__scopeTooltip);return m.createElement($n,{present:n||a.open},m.createElement(os,Rt({ref:t},r)))})),os=m.forwardRef((function(e,t){var n=e.__scopeTooltip,r=e.children,a=e["aria-label"],i=e.portalled,o=void 0===i||i,s=O(e,["__scopeTooltip","children","aria-label","portalled"]),c=rs("TooltipContent",n),u=qo(n),l=o?gn:m.Fragment,d=c.onClose;return ir((function(){return d()})),m.useEffect((function(){return document.addEventListener("tooltip.open",d),function(){return document.removeEventListener("tooltip.open",d)}}),[d]),m.createElement(l,null,m.createElement(ss,{__scopeTooltip:n}),m.createElement(Yn,Rt({"data-state":c.stateAttribute},u,s,{ref:t,style:Object(w.a)(Object(w.a)({},s.style),{},{"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)"})}),m.createElement(Ft,null,r),m.createElement(Wo,{id:c.contentId,role:"tooltip"},a||r)))}));function ss(e){var t=e.__scopeTooltip,n=rs("CheckTriggerMoved",t),r=Sn(n.trigger),a=null==r?void 0:r.left,i=Xo(a),o=null==r?void 0:r.top,s=Xo(o),c=n.onClose;return m.useEffect((function(){(void 0!==i&&i!==a||void 0!==s&&s!==o)&&c()}),[c,i,s,a,o]),null}var cs=function(e){var t=e.__scopeTooltip,n=e.children,r=e.open,a=e.defaultOpen,i=void 0!==a&&a,o=e.onOpenChange,s=e.delayDuration,c=Qo("Tooltip",t),u=qo(t),l=m.useState(null),f=Object(d.a)(l,2),p=f[0],h=f[1],v=Ct(),g=m.useRef(0),b=null!=s?s:c.delayDuration,y=m.useRef(!1),w=c.onOpen,O=c.onClose,k=At({prop:r,defaultProp:i,onChange:function(e){e&&(document.dispatchEvent(new CustomEvent("tooltip.open")),w()),null==o||o(e)}}),S=Object(d.a)(k,2),x=S[0],j=void 0!==x&&x,_=S[1],C=m.useMemo((function(){return j?y.current?"delayed-open":"instant-open":"closed"}),[j]),E=m.useCallback((function(){window.clearTimeout(g.current),y.current=!1,_(!0)}),[_]),I=m.useCallback((function(){window.clearTimeout(g.current),g.current=window.setTimeout((function(){y.current=!0,_(!0)}),b)}),[b,_]);return m.useEffect((function(){return function(){return window.clearTimeout(g.current)}}),[]),m.createElement(Wn,u,m.createElement(ns,{scope:t,contentId:v,open:j,stateAttribute:C,trigger:p,onTriggerChange:h,onTriggerEnter:m.useCallback((function(){c.isOpenDelayed?I():E()}),[c.isOpenDelayed,I,E]),onOpen:m.useCallback(E,[E]),onClose:m.useCallback((function(){window.clearTimeout(g.current),_(!1),O()}),[_,O])},n))},us=as,ls=is,ds=m.forwardRef((function(e,t){var n=e.__scopeTooltip,r=O(e,["__scopeTooltip"]),a=qo(n);return m.createElement(Gn,Rt({},a,r,{ref:t}))})),fs=Kt("Dialog"),ps=Object(d.a)(fs,2),hs=ps[0],vs=ps[1],gs=hs("Dialog"),ms=Object(d.a)(gs,2),bs=ms[0],ys=ms[1],ws=m.forwardRef((function(e,t){var n=e.__scopeDialog,r=O(e,["__scopeDialog"]),a=ys("DialogTrigger",n),i=Dt(t,a.triggerRef);return m.createElement(zt.button,Rt({type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Es(a.open)},r,{ref:i,onClick:Xt(e.onClick,a.onOpenToggle)}))})),Os=m.forwardRef((function(e,t){var n=e.forceMount,r=O(e,["forceMount"]),a=ys("DialogOverlay",e.__scopeDialog);return a.modal?m.createElement($n,{present:n||a.open},m.createElement(ks,Rt({},r,{ref:t}))):null})),ks=m.forwardRef((function(e,t){var n=e.__scopeDialog,r=O(e,["__scopeDialog"]),a=ys("DialogOverlay",n);return m.createElement(va,{as:Bt,allowPinchZoom:a.allowPinchZoom,shards:[a.contentRef]},m.createElement(zt.div,Rt({"data-state":Es(a.open)},r,{ref:t,style:Object(w.a)({pointerEvents:"auto"},r.style)})))})),Ss=m.forwardRef((function(e,t){var n=e.forceMount,r=O(e,["forceMount"]),a=ys("DialogContent",e.__scopeDialog);return m.createElement($n,{present:n||a.open},a.modal?m.createElement(xs,Rt({},r,{ref:t})):m.createElement(js,Rt({},r,{ref:t})))})),xs=m.forwardRef((function(e,t){var n=ys("DialogContent",e.__scopeDialog),r=m.useRef(null),a=Dt(t,n.contentRef,r);return m.useEffect((function(){var e=r.current;if(e)return Ar(e)}),[]),m.createElement(_s,Rt({},e,{ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Xt(e.onCloseAutoFocus,(function(e){var t;e.preventDefault(),null===(t=n.triggerRef.current)||void 0===t||t.focus()})),onPointerDownOutside:Xt(e.onPointerDownOutside,(function(e){var t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;(2===t.button||n)&&e.preventDefault()})),onFocusOutside:Xt(e.onFocusOutside,(function(e){return e.preventDefault()}))}))})),js=m.forwardRef((function(e,t){var n=ys("DialogContent",e.__scopeDialog),r=m.useRef(!1);return m.createElement(_s,Rt({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:function(t){var a,i;null===(a=e.onCloseAutoFocus)||void 0===a||a.call(e,t),t.defaultPrevented||(r.current||null===(i=n.triggerRef.current)||void 0===i||i.focus(),t.preventDefault()),r.current=!1},onInteractOutside:function(t){var a,i;null===(a=e.onInteractOutside)||void 0===a||a.call(e,t),t.defaultPrevented||(r.current=!0);var o=t.target;(null===(i=n.triggerRef.current)||void 0===i?void 0:i.contains(o))&&t.preventDefault()}}))})),_s=m.forwardRef((function(e,t){var n=e.__scopeDialog,r=e["aria-label"],a=e["aria-labelledby"],i=e["aria-describedby"],o=e.trapFocus,s=e.onOpenAutoFocus,c=e.onCloseAutoFocus,u=O(e,["__scopeDialog","aria-label","aria-labelledby","aria-describedby","trapFocus","onOpenAutoFocus","onCloseAutoFocus"]),l=ys("DialogContent",n),d=Dt(t,m.useRef(null));return It(),m.createElement(m.Fragment,null,m.createElement(Jn,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:s,onUnmountAutoFocus:c},m.createElement(xr,Rt({role:"dialog",id:l.contentId,"aria-describedby":i||l.descriptionId,"aria-labelledby":r?void 0:a||l.titleId,"aria-label":r||void 0,"data-state":Es(l.open)},u,{ref:d,onDismiss:function(){return l.onOpenChange(!1)}}))),!1)})),Cs=m.forwardRef((function(e,t){var n=e.__scopeDialog,r=O(e,["__scopeDialog"]),a=ys("DialogClose",n);return m.createElement(zt.button,Rt({type:"button"},r,{ref:t,onClick:Xt(e.onClick,(function(){return a.onOpenChange(!1)}))}))}));function Es(e){return e?"open":"closed"}var Is=Ut("DialogLabelWarning",{contentName:"DialogContent",titleName:"DialogTitle",docsSlug:"dialog"}),Ps=Object(d.a)(Is,2),Ms=Ps[0],As=(Ps[1],function(e){var t=e.__scopeDialog,n=e.children,r=e.open,a=e.defaultOpen,i=e.onOpenChange,o=e.modal,s=void 0===o||o,c=e.allowPinchZoom,u=m.useRef(null),l=m.useRef(null),f=At({prop:r,defaultProp:a,onChange:i}),p=Object(d.a)(f,2),h=p[0],v=void 0!==h&&h,g=p[1];return m.createElement(bs,{scope:t,triggerRef:u,contentRef:l,contentId:Ct(),titleId:Ct(),descriptionId:Ct(),open:v,onOpenChange:g,onOpenToggle:m.useCallback((function(){return g((function(e){return!e}))}),[g]),modal:s,allowPinchZoom:c},n)}),Ts=ws,Ds=function(e){var t=e.__scopeDialog,n=e.forceMount,r=e.children,a=e.container,i=ys("DialogPortal",t);return m.createElement(m.Fragment,null,m.Children.map(r,(function(e){return m.createElement($n,{present:n||i.open},m.createElement(mn,{asChild:!0,container:a},e))})))},Rs=Os,Bs=Ss,Ls=Cs,Fs=Kt("AlertDialog",[vs]),Hs=Object(d.a)(Fs,2),zs=Hs[0],Ns=(Hs[1],vs()),Us=m.forwardRef((function(e,t){var n=e.__scopeAlertDialog,r=O(e,["__scopeAlertDialog"]),a=Ns(n);return m.createElement(Ts,Rt({},a,r,{ref:t}))})),Ks=m.forwardRef((function(e,t){var n=e.__scopeAlertDialog,r=O(e,["__scopeAlertDialog"]),a=Ns(n);return m.createElement(Rs,Rt({},a,r,{ref:t}))})),Vs=zs("AlertDialogContent"),Ws=Object(d.a)(Vs,2),Xs=Ws[0],Ys=Ws[1],Gs=m.forwardRef((function(e,t){var n=e.__scopeAlertDialog,r=e.children,a=O(e,["__scopeAlertDialog","children"]),i=Ns(n),o=Dt(t,m.useRef(null)),s=m.useRef(null);return m.createElement(Ms,{contentName:"AlertDialogContent",titleName:$s,docsSlug:"alert-dialog"},m.createElement(Xs,{scope:n,cancelRef:s},m.createElement(Bs,Rt({role:"alertdialog"},i,a,{ref:o,onOpenAutoFocus:Xt(a.onOpenAutoFocus,(function(e){var t;e.preventDefault(),null===(t=s.current)||void 0===t||t.focus({preventScroll:!0})})),onPointerDownOutside:function(e){return e.preventDefault()},onInteractOutside:function(e){return e.preventDefault()}}),m.createElement(Ft,null,r),!1)))})),$s="AlertDialogTitle",qs=function(e){var t=e.__scopeAlertDialog,n=O(e,["__scopeAlertDialog"]),r=Ns(t);return m.createElement(As,Rt({},r,n,{modal:!0}))},Zs=Us,Js=function(e){var t=e.__scopeAlertDialog,n=O(e,["__scopeAlertDialog"]),r=Ns(t);return m.createElement(Ds,Rt({},r,n))},Qs=Ks,ec=Gs,tc=m.forwardRef((function(e,t){var n=e.__scopeAlertDialog,r=O(e,["__scopeAlertDialog"]),a=Ns(n);return m.createElement(Ls,Rt({},a,r,{ref:t}))})),nc=m.forwardRef((function(e,t){var n=e.__scopeAlertDialog,r=O(e,["__scopeAlertDialog"]),a=Ys("AlertDialogCancel",n).cancelRef,i=Ns(n),o=Dt(t,a);return m.createElement(Ls,Rt({},i,r,{ref:o}))})),rc=Kt("ContextMenu",[Ea]),ac=Object(d.a)(rc,2),ic=ac[0],oc=(ac[1],Ea()),sc=ic("ContextMenu"),cc=Object(d.a)(sc,2),uc=cc[0],lc=cc[1],dc=m.forwardRef((function(e,t){var n=e.__scopeContextMenu,r=O(e,["__scopeContextMenu"]),a=lc("ContextMenuTrigger",n),i=oc(n),o=m.useRef({x:0,y:0}),s=m.useRef({getBoundingClientRect:function(){return DOMRect.fromRect(Object(w.a)({width:0,height:0},o.current))}}),c=m.useRef(0),u=m.useCallback((function(){return window.clearTimeout(c.current)}),[]),l=function(e){o.current={x:e.clientX,y:e.clientY},a.onOpenChange(!0)};return m.useEffect((function(){return u}),[u]),m.createElement(hc,{scope:n,isInsideContent:!1},m.createElement(fi,Rt({},i,{virtualRef:s})),m.createElement(zt.span,Rt({},r,{ref:t,style:Object(w.a)({WebkitTouchCallout:"none"},e.style),onContextMenu:Xt(e.onContextMenu,(function(e){u(),e.preventDefault(),l(e)})),onPointerDown:Xt(e.onPointerDown,Oc((function(e){u(),c.current=window.setTimeout((function(){return l(e)}),700)}))),onPointerMove:Xt(e.onPointerMove,Oc(u)),onPointerCancel:Xt(e.onPointerCancel,Oc(u)),onPointerUp:Xt(e.onPointerUp,Oc(u))})))})),fc=ic("ContextMenuContent",{isInsideContent:!1}),pc=Object(d.a)(fc,2),hc=pc[0],vc=pc[1],gc=m.forwardRef((function(e,t){var n=e.__scopeContextMenu,r=O(e,["__scopeContextMenu"]),a=lc("ContextMenuContent",n),i=oc(n),o=Object(w.a)(Object(w.a)({},r),{},{style:Object(w.a)(Object(w.a)({},e.style),{},{"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)"})});return m.createElement(hc,{scope:n,isInsideContent:!0},a.isRootMenu?m.createElement(mc,Rt({__scopeContextMenu:n},o,{ref:t})):m.createElement(hi,Rt({},i,o,{ref:t})))})),mc=m.forwardRef((function(e,t){var n=e.__scopeContextMenu,r=O(e,["__scopeContextMenu"]),a=lc("ContextMenuContent",n),i=oc(n),o=m.useRef(!1);return m.createElement(hi,Rt({},i,r,{ref:t,portalled:!0,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:function(t){var n;null===(n=e.onCloseAutoFocus)||void 0===n||n.call(e,t),!t.defaultPrevented&&o.current&&t.preventDefault(),o.current=!1},onInteractOutside:function(t){var n;null===(n=e.onInteractOutside)||void 0===n||n.call(e,t),t.defaultPrevented||a.modal||(o.current=!0)}}))})),bc=m.forwardRef((function(e,t){var n=e.__scopeContextMenu,r=O(e,["__scopeContextMenu"]),a=oc(n);return m.createElement(vi,Rt({},a,r,{ref:t}))})),yc=m.forwardRef((function(e,t){var n=e.__scopeContextMenu,r=O(e,["__scopeContextMenu"]),a=oc(n);return m.createElement(pi,Rt({},a,r,{ref:t}))})),wc=m.forwardRef((function(e,t){var n=e.__scopeContextMenu,r=O(e,["__scopeContextMenu"]),a=oc(n);return m.createElement(Oi,Rt({},a,r,{ref:t}))}));function Oc(e){return function(t){return"mouse"!==t.pointerType?e(t):void 0}}var kc,Sc,xc,jc,_c,Cc,Ec,Ic,Pc,Mc,Ac,Tc,Dc,Rc,Bc,Lc,Fc,Hc,zc,Nc,Uc,Kc,Vc,Wc,Xc,Yc,Gc,$c,qc=function(e){var t=e.__scopeContextMenu,n=e.children,r=e.onOpenChange,a=e.dir,i=e.modal,o=void 0===i||i,s=m.useState(!1),c=Object(d.a)(s,2),u=c[0],l=c[1],f=vc("ContextMenu",t),p=oc(t),h=Mt(r),v=m.useCallback((function(e){l(e),h(e)}),[h]);return f.isInsideContent?m.createElement(uc,{scope:t,isRootMenu:!1,open:u,onOpenChange:v,modal:o},m.createElement(di,Rt({},p,{open:u,onOpenChange:v}),n)):m.createElement(uc,{scope:t,isRootMenu:!0,open:u,onOpenChange:v,modal:o},m.createElement(li,Rt({},p,{dir:a,open:u,onOpenChange:v,modal:o}),n))},Zc=dc,Jc=gc,Qc=Object.defineProperty,eu=Object.defineProperties,tu=Object.getOwnPropertyDescriptors,nu=Object.getOwnPropertySymbols,ru=Object.prototype.hasOwnProperty,au=Object.prototype.propertyIsEnumerable,iu=function(e,t,n){return t in e?Qc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},ou=function(e,t){for(var n in t||(t={}))ru.call(t,n)&&iu(e,n,t[n]);if(nu){var r,a=Object(g.a)(nu(t));try{for(a.s();!(r=a.n()).done;){n=r.value;au.call(t,n)&&iu(e,n,t[n])}}catch(rm){a.e(rm)}finally{a.f()}}return e},su=function(e,t){return eu(e,tu(t))},cu=function(e,t){var n={};for(var r in e)ru.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&nu){var a,i=Object(g.a)(nu(e));try{for(i.s();!(a=i.n()).done;){r=a.value;t.indexOf(r)<0&&au.call(e,r)&&(n[r]=e[r])}}catch(rm){i.e(rm)}finally{i.f()}}return n},uu=function(e,t){return function(){return e&&(t=(0,e[Object.keys(e)[0]])(e=0)),t}},lu=function(e,t){for(var n in function(e){Qc(e,"__esModule",{value:!0})}(e),t)Qc(e,n,{get:t[n],enumerable:!0})},du=function(e,t,n){return new Promise((function(r,a){var i=function(e){try{s(n.next(e))}catch(t){a(t)}},o=function(e){try{s(n.throw(e))}catch(t){a(t)}},s=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(i,o)};s((n=n.apply(e,t)).next())}))},fu=uu({"src/state/data/browser-fs-access/supported.js":function(){Yc=function(){if("undefined"===typeof self)return!1;if("top"in self&&self!==top)try{top.location}catch(e){return!1}else if("showOpenFilePicker"in self)return"showOpenFilePicker";return!1}(),Gc=Yc}}),pu={};lu(pu,{default:function(){return $c}});var hu,vu,gu=uu({"src/state/data/browser-fs-access/legacy/file-open.js":function(){$c=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return du(void 0,[].concat(t),h.a.mark((function e(){var t,n=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:[{}],Array.isArray(t)||(t=[t]),e.abrupt("return",new Promise((function(e,n){var r=document.createElement("input");r.type="file";var a=[].concat(Object(v.a)(t.map((function(e){return e.mimeTypes||[]})).join()),[t.map((function(e){return e.extensions||[]})).join()]).join();r.multiple=t[0].multiple||!1,r.accept=a||"";var i=function(t){"function"===typeof o&&o(),e(t)},o=t[0].legacySetup&&t[0].legacySetup(i,(function(){return o(n)}),r);r.addEventListener("change",(function(){i(r.multiple?Array.from(r.files):r.files[0])})),r.click()})));case 3:case"end":return e.stop()}}),e)})))}}}),mu={};lu(mu,{default:function(){return vu}});var bu,yu=uu({"src/state/data/browser-fs-access/fs-access/file-open.js":function(){hu=function(e){return du(void 0,null,h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getFile();case 2:return(n=t.sent).handle=e,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))},vu=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return du(void 0,[].concat(t),h.a.mark((function e(){var t,n,r,a,i=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:[{}],Array.isArray(t)||(t=[t]),n=[],t.forEach((function(e,t){n[t]={description:e.description||"",accept:{}},e.mimeTypes?e.mimeTypes.map((function(r){n[t].accept[r]=e.extensions||[]})):n[t].accept["*/*"]=e.extensions||[]})),e.next=6,window.showOpenFilePicker({id:t[0].id,startIn:t[0].startIn,types:n,multiple:t[0].multiple||!1,excludeAcceptAllOption:t[0].excludeAcceptAllOption||!1});case 6:return r=e.sent,e.next=9,Promise.all(r.map(hu));case 9:if(a=e.sent,!t[0].multiple){e.next=12;break}return e.abrupt("return",a);case 12:return e.abrupt("return",a[0]);case 13:case"end":return e.stop()}}),e)})))}}});function wu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return du(this,null,h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bu;case 2:return e.abrupt("return",(n=e.sent).default.apply(n,t));case 3:case"end":return e.stop()}}),e)})))}var Ou,ku=uu({"src/state/data/browser-fs-access/file-open.js":function(){fu(),bu=Gc?Promise.resolve().then((function(){return yu(),mu})):Promise.resolve().then((function(){return gu(),pu}))}}),Su={};lu(Su,{default:function(){return Ou}});var xu,ju,_u=uu({"src/state/data/browser-fs-access/legacy/directory-open.js":function(){Ou=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return du(void 0,[].concat(t),h.a.mark((function e(){var t,n=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:[{}],Array.isArray(t)||(t=[t]),t[0].recursive=t[0].recursive||!1,e.abrupt("return",new Promise((function(e,n){var r=document.createElement("input");r.type="file",r.webkitdirectory=!0;var a=function(t){"function"===typeof i&&i(),e(t)},i=t[0].legacySetup&&t[0].legacySetup(a,(function(){return i(n)}),r);r.addEventListener("change",(function(){var e=Array.from(r.files);t[0].recursive?t[0].recursive&&t[0].skipDirectory&&(e=e.filter((function(e){return e.webkitRelativePath.split("/").every((function(e){return!t[0].skipDirectory({name:e,kind:"directory"})}))}))):e=e.filter((function(e){return 2===e.webkitRelativePath.split("/").length})),a(e)})),r.click()})));case 4:case"end":return e.stop()}}),e)})))}}}),Cu={};lu(Cu,{default:function(){return ju}});var Eu,Iu=uu({"src/state/data/browser-fs-access/fs-access/directory-open.js":function(){xu=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return du(void 0,[e,t].concat(r),h.a.mark((function e(t,n){var r,a,i,o,s,c,u,l=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=l.length>2&&void 0!==l[2]?l[2]:t.name,a=l.length>3?l[3]:void 0,i=[],o=[],s=Object(g.a)(t.values()),e.prev=5,u=h.a.mark((function e(){var s,u;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=c.value,u="".concat(r,"/").concat(s.name),"file"!==s.kind){e.next=10;break}return e.t0=o,e.next=6,s.getFile().then((function(e){return e.directoryHandle=t,Object.defineProperty(e,"webkitRelativePath",{configurable:!0,enumerable:!0,get:function(){return u}})}));case 6:e.t1=e.sent,e.t0.push.call(e.t0,e.t1),e.next=16;break;case 10:if("directory"!==s.kind||!n||a&&a(s)){e.next=16;break}return e.t2=i,e.next=14,xu(s,n,u,a);case 14:e.t3=e.sent,e.t2.push.call(e.t2,e.t3);case 16:case"end":return e.stop()}}),e)})),s.s();case 8:if((c=s.n()).done){e.next=12;break}return e.delegateYield(u(),"t0",10);case 10:e.next=8;break;case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(5),s.e(e.t1);case 17:return e.prev=17,s.f(),e.finish(17);case 20:return e.t2=[],e.t3=v.a,e.next=24,Promise.all(i);case 24:return e.t4=e.sent.flat(),e.t5=(0,e.t3)(e.t4),e.t6=v.a,e.next=29,Promise.all(o);case 29:return e.t7=e.sent,e.t8=(0,e.t6)(e.t7),e.abrupt("return",e.t2.concat.call(e.t2,e.t5,e.t8));case 32:case"end":return e.stop()}}),e,null,[[5,14,17,20]])})))},ju=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return du(void 0,[].concat(t),h.a.mark((function e(){var t,n,r=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=r.length>0&&void 0!==r[0]?r[0]:{}).recursive=t.recursive||!1,e.next=4,window.showDirectoryPicker({id:t.id,startIn:t.startIn});case 4:return n=e.sent,e.abrupt("return",xu(n,t.recursive,void 0,t.skipDirectory));case 6:case"end":return e.stop()}}),e)})))}}});function Pu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return du(this,null,h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Eu;case 2:return e.abrupt("return",(n=e.sent).default.apply(n,t));case 3:case"end":return e.stop()}}),e)})))}var Mu,Au=uu({"src/state/data/browser-fs-access/directory-open.js":function(){fu(),Eu=Gc?Promise.resolve().then((function(){return Iu(),Cu})):Promise.resolve().then((function(){return _u(),Su}))}}),Tu={};function Du(e,t){return du(this,null,h.a.mark((function n(){var r,a,i;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.getReader(),a=new ReadableStream({start:function(e){return function t(){return du(this,null,h.a.mark((function n(){return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",r.read().then((function(n){var r=n.done,a=n.value;if(!r)return e.enqueue(a),t();e.close()})));case 1:case"end":return n.stop()}}),n)})))}()}}),i=new Response(a),r.releaseLock(),n.t0=Blob,n.next=7,i.blob();case 7:return n.t1=n.sent,n.t2=[n.t1],n.t3={type:t},n.abrupt("return",new n.t0(n.t2,n.t3));case 11:case"end":return n.stop()}}),n)})))}lu(Tu,{default:function(){return Mu}});var Ru,Bu=uu({"src/state/data/browser-fs-access/legacy/file-save.js":function(){Mu=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return du(void 0,[e].concat(n),h.a.mark((function e(t){var n,r,a,i,o,s,c=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]?c[1]:{},Array.isArray(n)&&(n=n[0]),r=document.createElement("a"),a=t,!("body"in t)){e.next=8;break}return e.next=7,Du(t.body,t.headers.get("content-type"));case 7:a=e.sent;case 8:return r.download=n.fileName||"Untitled",r.href=URL.createObjectURL(a),i=function(){return s(reject)},o=function(){"function"===typeof s&&s()},s=n.legacySetup&&n.legacySetup(o,i,r),r.addEventListener("click",(function(){setTimeout((function(){return URL.revokeObjectURL(r.href)}),3e4),o(null)})),r.click(),e.abrupt("return",null);case 16:case"end":return e.stop()}}),e)})))}}}),Lu={};lu(Lu,{default:function(){return Ru}});var Fu,Hu=uu({"src/state/data/browser-fs-access/fs-access/file-save.js":function(){Ru=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return du(void 0,[e].concat(n),h.a.mark((function e(t){var n,r,a,i,o,s,c,u=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.length>1&&void 0!==u[1]?u[1]:[{}],r=u.length>2&&void 0!==u[2]?u[2]:null,a=u.length>3&&void 0!==u[3]&&u[3],Array.isArray(n)||(n=[n]),n[0].fileName=n[0].fileName||"Untitled",i=[],n.forEach((function(e,n){i[n]={description:e.description||"",accept:{}},e.mimeTypes?(0===n&&(t.type?e.mimeTypes.push(t.type):t.headers&&t.headers.get("content-type")&&e.mimeTypes.push(t.headers.get("content-type"))),e.mimeTypes.map((function(t){i[n].accept[t]=e.extensions||[]}))):t.type&&(i[n].accept[t.type]=e.extensions||[])})),!r){e.next=18;break}return e.prev=8,e.next=11,r.getFile();case 11:e.next=18;break;case 13:if(e.prev=13,e.t0=e.catch(8),r=null,!a){e.next=18;break}throw e.t0;case 18:if(e.t1=r,e.t1){e.next=23;break}return e.next=22,window.showSaveFilePicker({suggestedName:n[0].fileName,id:n[0].id,startIn:n[0].startIn,types:i,excludeAcceptAllOption:n[0].excludeAcceptAllOption||!1});case 22:e.t1=e.sent;case 23:return o=e.t1,e.next=26,o.createWritable();case 26:if(s=e.sent,!("stream"in t)){e.next=34;break}return c=t.stream(),e.next=31,c.pipeTo(s);case 31:return e.abrupt("return",o);case 34:if(!("body"in t)){e.next=38;break}return e.next=37,t.body.pipeTo(s);case 37:return e.abrupt("return",o);case 38:return e.next=40,s.write(blob);case 40:return e.next=42,s.close();case 42:return e.abrupt("return",o);case 43:case"end":return e.stop()}}),e,null,[[8,13]])})))}}});function zu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return du(this,null,h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fu;case 2:return e.abrupt("return",(n=e.sent).default.apply(n,t));case 3:case"end":return e.stop()}}),e)})))}var Nu=uu({"src/state/data/browser-fs-access/file-save.js":function(){fu(),Fu=Gc?Promise.resolve().then((function(){return Hu(),Lu})):Promise.resolve().then((function(){return Bu(),Tu}))}}),Uu={};lu(Uu,{directoryOpen:function(){return Pu},fileOpen:function(){return wu},fileSave:function(){return zu},supported:function(){return Gc}});var Ku,Vu,Wu,Xu,Yu,Gu,$u,qu,Zu,Ju,Qu,el,tl,nl,rl,al,il,ol,sl,cl,ul,ll,dl,fl,pl,hl,vl,gl,ml,bl,yl,wl,Ol,kl,Sl,xl=uu({"src/state/data/browser-fs-access/index.js":function(){ku(),Au(),Nu(),fu()}}),jl=ge({themeMap:ou({},_),theme:{colors:{bounds:"rgba(65, 132, 244, 1.000)",boundsBg:"rgba(65, 132, 244, 0.05)",hover:"#ececec",overlay:"rgba(0, 0, 0, 0.15)",overlayContrast:"rgba(255, 255, 255, 0.15)",panel:"#fefefe",panelContrast:"#ffffff",selected:"rgba(66, 133, 244, 1.000)",selectedContrast:"#fefefe",sponsor:"#ec6cb9",sponsorContrast:"#ec6cb944",text:"#333333",tooltip:"#1d1d1d",tooltipContrast:"#ffffff",warn:"rgba(255, 100, 100, 1)"},shadows:{2:"0px 1px 1px rgba(0, 0, 0, 0.14)",3:"0px 2px 3px rgba(0, 0, 0, 0.14)",4:"0px 4px 5px -1px rgba(0, 0, 0, 0.14)",8:"0px 12px 17px rgba(0, 0, 0, 0.14)",12:"0px 12px 17px rgba(0, 0, 0, 0.14)",24:"0px 24px 38px rgba(0, 0, 0, 0.14)",key:"1px 1px rgba(0,0,0,1)",panel:"0px 0px 16px -1px rgba(0, 0, 0, 0.05), \n        0px 0px 16px -8px rgba(0, 0, 0, 0.05), \n        0px 0px 16px -12px rgba(0, 0, 0, 0.12),\n        0px 0px 2px 0px rgba(0, 0, 0, 0.08)"},space:{0:"2px",1:"3px",2:"4px",3:"8px",4:"12px",5:"16px"},fontSizes:{0:"10px",1:"12px",2:"13px",3:"16px",4:"18px"},fonts:{ui:'"Recursive", system-ui, sans-serif',body:'"Recursive", system-ui, sans-serif',mono:'"Recursive Mono", monospace'},fontWeights:{},lineHeights:{},letterSpacings:{},sizes:{},borderWidths:{0:"$1"},borderStyles:{},radii:{0:"2px",1:"4px",2:"8px",3:"12px",4:"16px"},zIndices:{},transitions:{}},media:{micro:"(max-width: 370px)",sm:"(min-width: 640px)",md:"(min-width: 768px)",lg:"(min-width: 1024px)"},utils:{zStrokeWidth:function(){return function(e){return Array.isArray(e)?{strokeWidth:"calc(".concat(e[0],"px / var(--camera-zoom))")}:{strokeWidth:"calc(".concat(e,"px / var(--camera-zoom))")}}}}}),_l=jl.styled,Cl=(0,jl.createTheme)({colors:{bounds:"rgba(38, 150, 255, 1.000)",boundsBg:"rgba(38, 150, 255, 0.05)",hover:"#444A50",overlay:"rgba(0, 0, 0, 0.15)",overlayContrast:"rgba(255, 255, 255, 0.15)",panel:"#363D44",panelContrast:"#49555f",selected:"rgba(38, 150, 255, 1.000)",selectedContrast:"#fefefe",text:"#f8f9fa",tooltip:"#1d1d1d",tooltipContrast:"#ffffff"},shadows:{2:"0px 1px 1px rgba(0, 0, 0, 0.24)",3:"0px 2px 3px rgba(0, 0, 0, 0.24)",4:"0px 4px 5px -1px rgba(0, 0, 0, 0.24)",8:"0px 12px 17px rgba(0, 0, 0, 0.24)",12:"0px 12px 17px rgba(0, 0, 0, 0.24)",24:"0px 24px 38px rgba(0, 0, 0, 0.24)",panel:"0px 0px 16px -1px rgba(0, 0, 0, 0.05), \n      0px 0px 16px -8px rgba(0, 0, 0, 0.09), \n      0px 0px 16px -12px rgba(0, 0, 0, 0.2)"}}),El=function e(){Object(f.a)(this,e)};function Il(e,t){var n=e.version,r=void 0===n?0:n;if("assets"in e){var a=new Set;Object.values(e.pages).forEach((function(e){return Object.values(e.shapes).forEach((function(e){e.assetId&&a.add(e.assetId)}))})),Object.keys(e.assets).forEach((function(t){a.has(t)||delete e.assets[t]}))}return r===t||(r<14&&Object.values(e.pages).forEach((function(e){Object.values(e.shapes).filter((function(e){return e.type===il.Text})).forEach((function(e){return e.style.font===bl.Script}))})),r<=13&&Object.values(e.pages).forEach((function(e){Object.values(e.bindings).forEach((function(e){Object.assign(e,e.meta)})),Object.values(e.shapes).forEach((function(e){Object.entries(e.style).forEach((function(t){var n=Object(d.a)(t,2),r=n[0],a=n[1];"string"===typeof a&&(e.style[r]=a.toLowerCase())})),e.type===il.Arrow&&e.decorations&&Object.entries(e.decorations).forEach((function(t){var n=Object(d.a)(t,2),r=n[0];"Arrow"===n[1]&&(e.decorations=su(ou({},e.decorations),Object(l.a)({},r,sl.Arrow)))}))}))})),r<=13.1&&(e.name="New Document"),r<15&&(e.assets={}),Object.values(e.pages).forEach((function(e){Object.values(e.shapes).forEach((function(e){r<15.2&&(e.type!==il.Image&&e.type!==il.Video||(e.style.isFilled=!0)),r<15.3&&(e.type!==il.Rectangle&&e.type!==il.Triangle&&e.type!==il.Ellipse&&e.type!==il.Arrow||(e.label=e.text||"",e.labelPoint=[.5,.5]))}))})),Object.values(e.pageStates).forEach((function(t){t.selectedIds=t.selectedIds.filter((function(n){return void 0!==e.pages[t.id].shapes[n]})),t.bindingId=void 0,t.editingId=void 0,t.hoveredId=void 0,t.pointedId=void 0})),e.version=t),e}(Vu=Ku||(Ku={})).Idle="idle",Vu.Connecting="connecting",Vu.Connected="connected",Vu.Disconnected="disconnected",(Xu=Wu||(Wu={})).Transform="transform",Xu.Translate="translate",Xu.TransformSingle="transformSingle",Xu.Brush="brush",Xu.Arrow="arrow",Xu.Draw="draw",Xu.Erase="erase",Xu.Rotate="rotate",Xu.Handle="handle",Xu.Grid="grid",(Gu=Yu||(Yu={})).Idle="idle",Gu.PointingHandle="pointingHandle",Gu.PointingBounds="pointingBounds",Gu.PointingBoundsHandle="pointingBoundsHandle",Gu.TranslatingLabel="translatingLabel",Gu.TranslatingHandle="translatingHandle",Gu.Translating="translating",Gu.Transforming="transforming",Gu.Rotating="rotating",Gu.Pinching="pinching",Gu.Brushing="brushing",Gu.Creating="creating",Gu.EditingText="editing-text",(qu=$u||($u={})).Backward="backward",qu.Forward="forward",qu.ToFront="toFront",qu.ToBack="toBack",(Ju=Zu||(Zu={})).Top="top",Ju.CenterVertical="centerVertical",Ju.Bottom="bottom",Ju.Left="left",Ju.CenterHorizontal="centerHorizontal",Ju.Right="right",(el=Qu||(Qu={})).Horizontal="horizontal",el.Vertical="vertical",(nl=tl||(tl={})).Horizontal="horizontal",nl.Vertical="vertical",(al=rl||(rl={})).Horizontal="horizontal",al.Vertical="vertical",(ol=il||(il={})).Sticky="sticky",ol.Ellipse="ellipse",ol.Rectangle="rectangle",ol.Triangle="triangle",ol.Draw="draw",ol.Arrow="arrow",ol.Line="line",ol.Text="text",ol.Group="group",ol.Image="image",ol.Video="video",(sl||(sl={})).Arrow="arrow",(ul=cl||(cl={})).White="white",ul.LightGray="lightGray",ul.Gray="gray",ul.Black="black",ul.Green="green",ul.Cyan="cyan",ul.Blue="blue",ul.Indigo="indigo",ul.Violet="violet",ul.Red="red",ul.Orange="orange",ul.Yellow="yellow",(dl=ll||(ll={})).Small="small",dl.Medium="medium",dl.Large="large",(pl=fl||(fl={})).Draw="draw",pl.Solid="solid",pl.Dashed="dashed",pl.Dotted="dotted",(vl=hl||(hl={})).Small="small",vl.Medium="medium",vl.Large="large",vl.ExtraLarge="extraLarge",(ml=gl||(gl={})).Start="start",ml.Middle="middle",ml.End="end",ml.Justify="justify",(yl=bl||(bl={})).Script="script",yl.Sans="sans",yl.Serif="erif",yl.Mono="mono",(Ol=wl||(wl={})).Image="image",Ol.Video="video",(Sl=kl||(kl={})).PNG="png",Sl.JPG="jpeg",Sl.WEBP="webp",Sl.PDF="pdf",Sl.SVG="svg",Sl.JSON="json";var Pl="-0.03em",Ml=16,Al=16,Tl=32,Dl=128,Rl=10,Bl=.3,Ll=[.5,.5],Fl=(Math.PI,{linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},easeInSine:function(e){return 1-Math.cos(e*Math.PI/2)},easeOutSine:function(e){return Math.sin(e*Math.PI/2)},easeInOutSine:function(e){return-(Math.cos(Math.PI*e)-1)/2},easeInExpo:function(e){return e<=0?0:Math.pow(2,10*e-10)},easeOutExpo:function(e){return e>=1?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return e<=0?0:e>=1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}}),Hl=["#EC5E41","#F2555A","#F04F88","#E34BA9","#BD54C6","#9D5BD2","#7B66DC","#02B1CC","#11B3A3","#39B178","#55B467","#FF802B"],zl="undefined"!==typeof Window&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent),Nl=[".png",".svg",".jpg",".jpeg",".gif"],Ul=zl?[]:[".mp4",".webm"],Kl={mode:"readwrite"},Vl=function(e){return du(void 0,null,h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.queryPermission(Kl);case 2:if(t.t1=t.sent,t.t0="granted"===t.t1,t.t0){t.next=9;break}return t.next=7,e.requestPermission(Kl);case 7:t.t2=t.sent,t.t0="granted"===t.t2;case 9:return t.abrupt("return",t.t0);case 10:case"end":return t.stop()}}),t)})))};function Wl(){return du(this,null,h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof Window&&"_location"in Window){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,xe("Tldraw_file_handle_".concat(window.location.origin));case 4:if(t=e.sent){e.next=7;break}return e.abrupt("return",null);case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})))}function Xl(e){return du(this,null,h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",je("Tldraw_file_handle_".concat(window.location.origin),e));case 1:case"end":return t.stop()}}),t)})))}function Yl(e,t){return du(this,null,h.a.mark((function n(){var r,a,i,o,s,c;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r={name:e.name||"New Document",fileHandle:null!=t?t:null,document:e,assets:{}},a=JSON.stringify(r,null,2),i=new Blob([a],{type:"application/vnd.Tldraw+json"}),!t){n.next=9;break}return n.next=6,Vl(t);case 6:if(n.sent){n.next=9;break}return n.abrupt("return",null);case 9:return n.next=11,Promise.resolve().then((function(){return xl(),Uu}));case 11:return o=n.sent,s=o.fileSave,n.next=15,s(i,{fileName:"".concat(r.name,".tldr"),description:"Tldraw File",extensions:[".tldr"]},t);case 15:return c=n.sent,n.next=18,Xl(c);case 18:return n.abrupt("return",c);case 19:case"end":return n.stop()}}),n)})))}function Gl(){return du(this,null,h.a.mark((function e(){var t,n,r,a,i,o,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return xl(),Uu}));case 2:return n=e.sent,r=n.fileOpen,e.next=6,r({description:"Tldraw File",extensions:[".tldr"],multiple:!1});case 6:if(a=e.sent){e.next=9;break}return e.abrupt("return",null);case 9:return e.next=11,new Promise((function(e){var t=new FileReader;t.onloadend=function(){t.readyState===FileReader.DONE&&e(t.result)},t.readAsText(a,"utf8")}));case 11:return i=e.sent,o=JSON.parse(i),s=null!=(t=a.handle)?t:null,e.next=16,Xl(s);case 16:return e.abrupt("return",{fileHandle:s,document:o.document});case 17:case"end":return e.stop()}}),e)})))}function $l(){return du(this,null,h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){return xl(),Uu}));case 2:return t=e.sent,n=t.fileOpen,e.abrupt("return",n({description:"Image or Video",extensions:[].concat(Nl,Ul),multiple:!1}));case 5:case"end":return e.stop()}}),e)})))}function ql(e){return new Promise((function(t,n){if(e){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return t(r.result)},r.onerror=function(e){return n(e)},r.onabort=function(e){return n(e)}}}))}function Zl(e){return new Promise((function(t,n){var r=new Image;r.onload=function(){return t([r.width,r.height])},r.onerror=function(){return n(new Error("Could not get image size"))},r.src=e}))}function Jl(e){return new Promise((function(t,n){var r=document.createElement("video");r.onloadedmetadata=function(){return t([r.videoWidth,r.videoHeight])},r.onerror=function(){return n(new Error("Could not get video size"))},r.src=e}))}xl();var Ql="#fafafa",ed="#343d45",td=(kc={},Object(l.a)(kc,cl.White,"#f0f1f3"),Object(l.a)(kc,cl.LightGray,"#c6cbd1"),Object(l.a)(kc,cl.Gray,"#788492"),Object(l.a)(kc,cl.Black,"#1d1d1d"),Object(l.a)(kc,cl.Green,"#36b24d"),Object(l.a)(kc,cl.Cyan,"#0e98ad"),Object(l.a)(kc,cl.Blue,"#1c7ed6"),Object(l.a)(kc,cl.Indigo,"#4263eb"),Object(l.a)(kc,cl.Violet,"#7746f1"),Object(l.a)(kc,cl.Red,"#ff2133"),Object(l.a)(kc,cl.Orange,"#ff9433"),Object(l.a)(kc,cl.Yellow,"#ffc936"),kc),nd={light:su(ou({},Object.fromEntries(Object.entries(td).map((function(e){var t=Object(d.a)(e,2),n=t[0],r=t[1];return[n,y.f.lerpColor(r,Ql,.45)]})))),(Sc={},Object(l.a)(Sc,cl.White,"#ffffff"),Object(l.a)(Sc,cl.Black,"#3d3d3d"),Sc)),dark:su(ou({},Object.fromEntries(Object.entries(td).map((function(e){var t=Object(d.a)(e,2),n=t[0],r=t[1];return[n,y.f.lerpColor(y.f.lerpColor(r,"#999999",.3),ed,.4)]})))),(xc={},Object(l.a)(xc,cl.White,"#1d1d1d"),Object(l.a)(xc,cl.Black,"#bbbbbb"),xc))},rd={light:su(ou({},td),Object(l.a)({},cl.White,"#1d1d1d")),dark:su(ou({},Object.fromEntries(Object.entries(td).map((function(e){var t=Object(d.a)(e,2),n=t[0],r=t[1];return[n,y.f.lerpColor(r,ed,.1)]})))),(jc={},Object(l.a)(jc,cl.White,"#cecece"),Object(l.a)(jc,cl.Black,"#cecece"),jc))},ad={light:su(ou({},Object.fromEntries(Object.entries(td).map((function(e){var t=Object(d.a)(e,2),n=t[0],r=t[1];return[n,y.f.lerpColor(r,Ql,.82)]})))),Object(l.a)({},cl.White,"#fefefe")),dark:su(ou({},Object.fromEntries(Object.entries(td).map((function(e){var t=Object(d.a)(e,2),n=t[0],r=t[1];return[n,y.f.lerpColor(r,ed,.82)]})))),(_c={},Object(l.a)(_c,cl.White,"rgb(30,33,37)"),Object(l.a)(_c,cl.Black,"#1e1e1f"),_c))},id=(Cc={},Object(l.a)(Cc,ll.Small,2),Object(l.a)(Cc,ll.Medium,3.5),Object(l.a)(Cc,ll.Large,5),Cc),od=(Ec={},Object(l.a)(Ec,ll.Small,28),Object(l.a)(Ec,ll.Medium,48),Object(l.a)(Ec,ll.Large,96),Object(l.a)(Ec,"auto","auto"),Ec),sd=(Ic={},Object(l.a)(Ic,bl.Script,'"Caveat Brush"'),Object(l.a)(Ic,bl.Sans,'"Source Sans Pro", sans-serif'),Object(l.a)(Ic,bl.Serif,'"Crimson Pro", serif'),Object(l.a)(Ic,bl.Mono,'"Source Code Pro", monospace'),Ic),cd=(Pc={},Object(l.a)(Pc,bl.Script,1),Object(l.a)(Pc,bl.Sans,1),Object(l.a)(Pc,bl.Serif,1),Object(l.a)(Pc,bl.Mono,1),Pc),ud=(Mc={},Object(l.a)(Mc,ll.Small,24),Object(l.a)(Mc,ll.Medium,36),Object(l.a)(Mc,ll.Large,48),Object(l.a)(Mc,"auto","auto"),Mc);function ld(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bl.Script;return od[e]*cd[t]}function dd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bl.Script;return sd[e]}function fd(e){var t=ld(e.size,e.font),n=dd(e.font),r=e.scale;return"".concat(t*(void 0===r?1:r),"px/1 ").concat(n)}function pd(e){var t,n=(t=e.size,ud[t]),r=dd(e.font),a=e.scale;return"".concat(n*(void 0===a?1:a),"px/1 ").concat(r)}function hd(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.color,r=t?"dark":"light",a=n===cl.White||n===cl.Black?cl.Yellow:n;return{fill:nd[r][a],stroke:rd[r][a],color:t?"#1d1d1d":"#0d0d0d"}}function vd(e,t){var n=e.color,r=e.size,a=e.isFilled,i=function(e){return id[e]}(r),o=t?"dark":"light";return{stroke:rd[o][n],fill:a?ad[o][n]:"none",strokeWidth:i}}var gd,md={color:cl.Black,size:ll.Small,isFilled:!1,dash:fl.Draw,scale:1},bd=su(ou({},md),{font:bl.Script,textAlign:gl.Middle}),yd=(Ac={},Object(l.a)(Ac,gl.Start,"left"),Object(l.a)(Ac,gl.Middle,"center"),Object(l.a)(Ac,gl.End,"right"),Object(l.a)(Ac,gl.Justify,"justify"),Ac);function wd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gl.Start;return yd[e]}function Od(e,t,n){var r=ld(t.size,t.font),a=document.createElementNS("http://www.w3.org/2000/svg","g"),i=e.split("\n").map((function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","text");return n.textContent=e,n.setAttribute("y",1.3*r*(.5+t)+""),a.appendChild(n),n}));switch(a.setAttribute("font-size",r+""),a.setAttribute("font-family",dd(t.font).slice(1,-1)),a.setAttribute("text-align",wd(t.textAlign)),t.textAlign){case gl.Middle:a.setAttribute("text-align","center"),a.setAttribute("text-anchor","middle"),i.forEach((function(e){return e.setAttribute("x",n.width/2+"")}));break;case gl.End:a.setAttribute("text-align","right"),a.setAttribute("text-anchor","end"),i.forEach((function(e){return e.setAttribute("x",n.width+"")}));break;case gl.Start:a.setAttribute("text-anchor","start"),a.setAttribute("alignment-baseline","central")}return a}"undefined"!==typeof window&&(gd=function(){var e;null==(e=document.getElementById("__textLabelMeasure"))||e.remove();var t=document.createElement("pre");return t.id="__textLabelMeasure",Object.assign(t.style,{whiteSpace:"pre",width:"auto",border:"1px solid transparent",padding:"4px",margin:"0px",letterSpacing:Pl,opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",pointerEvents:"none",userSelect:"none",alignmentBaseline:"mathematical",dominantBaseline:"mathematical"}),t.tabIndex=-1,document.body.appendChild(t),t}());var kd="",Sd="",xd=[0,0];function jd(e,t){if(!e)return[16,32];if(!gd)return[10,10];if(e===kd&&t===Sd)return xd;kd=e,Sd=t,gd.textContent="".concat(e),gd.style.font=t;var n=gd.offsetWidth||1,r=gd.offsetHeight||1;return xd=[n,r]}function _d(e,t){var n=y.f.getFromCache(t,e,(function(){var t=Object(d.a)(e.size,2),n=t[0],r=t[1];return{minX:0,maxX:n,minY:0,maxY:r,width:n,height:r}}));return y.f.translateBounds(n,e.point)}function Cd(e,t,n){var r=n.initialShape,a=n.transformOrigin,i=n.scaleX,o=n.scaleY;return e.rotation||r.isAspectRatioLocked?{size:ye.b.toFixed(ye.b.mul(r.size,Math.min(Math.abs(i),Math.abs(o)))),point:ye.b.toFixed([t.minX+(t.width-e.size[0])*(i<0?1-a[0]:a[0]),t.minY+(t.height-e.size[1])*(o<0?1-a[1]:a[1])]),rotation:i<0&&o>=0||o<0&&i>=0?r.rotation?-r.rotation:0:r.rotation}:{point:ye.b.toFixed([t.minX,t.minY]),size:ye.b.toFixed([t.width,t.height])}}function Ed(e,t){return{size:ye.b.toFixed([t.width,t.height]),point:ye.b.toFixed([t.minX,t.minY])}}var Id=function(){function e(){Object(f.a)(this,e)}return Object(u.a)(e,null,[{key:"insertTextFirefox",value:function(e,t){e.setRangeText(t,e.selectionStart||0,e.selectionEnd||0,"end"),e.dispatchEvent(new InputEvent("input",{data:t,inputType:"insertText",isComposing:!1}))}},{key:"insert",value:function(t,n){var r=t.ownerDocument,a=r.activeElement;a!==t&&t.focus(),r.execCommand("insertText",!1,n)||e.insertTextFirefox(t,n),a===r.body?t.blur():a instanceof HTMLElement&&a!==t&&a.focus()}},{key:"set",value:function(t,n){t.select(),e.insert(t,n)}},{key:"getSelection",value:function(e){var t=e.selectionStart,n=e.selectionEnd;return e.value.slice(t||void 0,n||void 0)}},{key:"wrapSelection",value:function(t,n,r){var a=t.selectionStart,i=t.selectionEnd,o=e.getSelection(t);e.insert(t,n+o+(null!=r?r:n)),t.selectionStart=(a||0)+n.length,t.selectionEnd=(i||0)+n.length}},{key:"replace",value:function(t,n,r){var a=0;t.value.replace(n,(function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var s=a+i[i.length-2],c=i[0].length;t.selectionStart=s,t.selectionEnd=s+c;var u="string"===typeof r?r:r.apply(void 0,i);return e.insert(t,u),t.selectionStart=s,a+=u.length-c,u}))}},{key:"findLineEnd",value:function(e,t){var n=e.lastIndexOf("\n",t-1)+1;return"\t"!==e.charAt(n)?t:n+1}},{key:"indent",value:function(t){var n,r=t.selectionStart,a=t.selectionEnd,i=t.value,o=i.slice(r,a),s=null==(n=/\n/g.exec(o))?void 0:n.length;if(s&&s>0){var c=i.lastIndexOf("\n",r-1)+1,u=t.value.slice(c,a-1),l=u.replace(/^|\n/g,"$&".concat("  ")),d=l.length-u.length;t.setSelectionRange(c,a-1),e.insert(t,l),t.setSelectionRange(r+1,a+d)}else e.insert(t,"  ")}},{key:"unindent",value:function(t){var n=t.selectionStart,r=t.selectionEnd,a=t.value,i=a.lastIndexOf("\n",n-1)+1,o=e.findLineEnd(a,r),s=t.value.slice(i,o),c=s.replace(/(^|\n)(\t| {1,2})/g,"$1"),u=s.length-c.length;t.setSelectionRange(i,o),e.insert(t,c);var l=/\t| {1,2}/.exec(a.slice(i,n)),d=l?l[0].length:0,f=n-d;t.setSelectionRange(n-d,Math.max(f,r-u))}}]),e}(),Pd=function(e){return e.stopPropagation()};function Md(e){return Object(m.useCallback)((function(t){switch(t.metaKey&&t.stopPropagation(),t.key){case"Meta":t.stopPropagation();break;case"z":t.metaKey&&(t.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1),t.preventDefault());break;case"Escape":t.currentTarget.blur();break;case"Enter":(t.ctrlKey||t.metaKey)&&t.currentTarget.blur();break;case"Tab":t.preventDefault(),t.shiftKey?Id.unindent(t.currentTarget):Id.indent(t.currentTarget),e(dp.normalizeText(t.currentTarget.value))}}),[e])}var Ad=Object(m.memo)((function(e){var t=e.font,n=e.text,r=e.color,a=e.offsetX,i=void 0===a?0:a,o=e.offsetY,s=void 0===o?0:o,c=e.scale,u=void 0===c?1:c,l=e.isEditing,d=void 0!==l&&l,f=e.onBlur,p=e.onChange,h=Object(m.useRef)(null),v=Object(m.useRef)(!1),g=jd(n,t),b=Object(m.useCallback)((function(e){p(dp.normalizeText(e.currentTarget.value))}),[p]),y=Md(p),w=Object(m.useCallback)((function(e){e.currentTarget.setSelectionRange(0,0),null==f||f()}),[f]),O=Object(m.useCallback)((function(e){d&&v.current&&document.activeElement===e.currentTarget&&e.currentTarget.select()}),[d]),k=Object(m.useCallback)((function(e){d&&e.stopPropagation()}),[d]);Object(m.useEffect)((function(){d?requestAnimationFrame((function(){v.current=!0;var e=h.current;e&&(e.focus(),e.select())})):null==f||f()}),[d,f]);var S=Object(m.useRef)(null);return Object(m.useLayoutEffect)((function(){var e=S.current;e&&(e.style.transform="scale(".concat(u,", ").concat(u,") translate(").concat(i,"px, ").concat(s,"px)"),e.style.width=g[0]+"px",e.style.height=g[1]+"px")}),[g,s,i,u]),Object(m.createElement)(Td,null,Object(m.createElement)(Rd,{ref:S,hasText:!!n,isEditing:d,style:{font:t,color:r}},d?Object(m.createElement)(Bd,{ref:h,style:{font:t,color:r},name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:n,color:r,onFocus:O,onChange:b,onKeyDown:y,onBlur:w,onPointerDown:k,onContextMenu:Pd}):n,"\u200b"))})),Td=_l("div",{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",userSelect:"none",variants:{isGhost:{false:{opacity:1},true:{transition:"opacity .2s",opacity:Bl}}}}),Dd={whiteSpace:"pre-wrap",overflowWrap:"break-word"},Rd=_l("div",ou({position:"absolute",padding:"4px",zIndex:1,minHeight:1,minWidth:1,lineHeight:1,letterSpacing:Pl,outline:0,fontWeight:"500",textAlign:"center",backfaceVisibility:"hidden",userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",variants:{hasText:{false:{pointerEvents:"none"},true:{pointerEvents:"all"}},isEditing:{false:{userSelect:"none"},true:{background:"$boundsBg",userSelect:"text",WebkitUserSelect:"text"}}}},Dd)),Bd=_l("textarea",ou({position:"absolute",top:0,left:0,zIndex:1,width:"100%",height:"100%",border:"none",padding:"4px",resize:"none",textAlign:"inherit",minHeight:"inherit",minWidth:"inherit",lineHeight:"inherit",letterSpacing:"inherit",outline:0,fontWeight:"inherit",overflow:"hidden",backfaceVisibility:"hidden",display:"inline-block",pointerEvents:"all",background:"$boundsBg",userSelect:"text",WebkitUserSelect:"text"},Dd)),Ld=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(f.a)(this,n),(e=t.apply(this,arguments)).canBind=!1,e.canEdit=!1,e.canClone=!1,e.isAspectRatioLocked=!1,e.hideResizeHandles=!1,e.bindingDistance=Al,e.hitTestPoint=function(t,n){return y.f.pointInBounds(n,e.getRotatedBounds(t))},e.hitTestLineSegment=function(t,n,r){var a=y.f.getBoundsFromPoints([n,r]),i=e.getBounds(t);return y.f.boundsContain(i,a)||t.rotation?Object(_e.l)(n,r,y.f.getRotatedCorners(e.getBounds(t))).didIntersect:Object(_e.i)(n,r,e.getBounds(t)).length>0},e.create=function(t){return e.refMap.set(t.id,Object(m.createRef)()),e.getShape(t)},e.getCenter=function(t){return y.f.getBoundsCenter(e.getBounds(t))},e.getExpandedBounds=function(t){return y.f.expandBounds(e.getBounds(t),e.bindingDistance)},e.getBindingPoint=function(t,n,r,a,i,o){var s=e.getBounds(t),c=e.getExpandedBounds(t);if(y.f.pointInBounds(r,c)){var u=Object(_e.n)(a,i,c).filter((function(e){return e.didIntersect})).map((function(e){return e.points[0]}));if(u.length){var l,d,f=e.getCenter(t),p=u.sort((function(e,t){return ye.a.dist(t,a)-ye.a.dist(e,a)}))[0],h=ye.a.med(r,p);o?(l=ye.a.dist(r,f)<8?f:r,d=0):(l=ye.a.distanceToLineSegment(r,h,f)<8?f:h,d=y.f.pointInBounds(r,s)?e.bindingDistance:Math.max(e.bindingDistance,y.f.getBoundsSides(s).map((function(e){return ye.a.distanceToLineSegment(e[1][0],e[1][1],r)})).sort((function(e,t){return e-t}))[0]));var v=ye.a.divV(ye.a.sub(l,[c.minX,c.minY]),[c.width,c.height]);return{point:ye.a.clampV(v,0,1),distance:d}}}},e.mutate=function(e,t){return t},e.transform=function(e,t,n){return su(ou({},e),{point:[t.minX,t.minY]})},e.transformSingle=function(t,n,r){return e.transform(t,n,r)},e.getSvgElement=function(t){var n,r=null==(n=document.getElementById(t.id+"_svg"))?void 0:n.cloneNode(!0);if(r){if("label"in t&&void 0!==t.label){var a=t,i=document.createElementNS("http://www.w3.org/2000/svg","g"),o=e.getBounds(t),s=Od(a.label,t.style,o);s.setAttribute("fill",vd(t.style).stroke);var c=fd(t.style),u=jd(a.label,c);return s.setAttribute("transform-origin","top left"),s.setAttribute("transform","translate(".concat((o.width-u[0])/2,", ").concat((o.height-u[1])/2,")")),i.appendChild(r),i.appendChild(s),i}return r}},e}return n}(y.e);function Fd(e,t,n){return{points:function(e,t,n){var r=vd(t),a=y.f.rng(e),i=r.strokeWidth,o=Math.max(0,n[0]),s=Math.max(0,n[1]),c=Array.from(Array(4)).map((function(){return[a()*i*.75,a()*i*.75]})),u=ye.b.add([i/2,i/2],c[0]),l=ye.b.add([o-i/2,i/2],c[1]),d=ye.b.add([o-i/2,s-i/2],c[2]),f=ye.b.add([i/2,s-i/2],c[3]),p=Math.round(Math.abs(2*a()*4)),h=Math.min(o/2,2*i),g=Math.min(s/2,2*i),m=Math.max(8,Math.floor(o/16)),b=Math.max(8,Math.floor(s/16)),w=y.f.rotateArray([ye.b.pointsBetween(ye.b.add(u,[h,0]),ye.b.sub(l,[h,0]),m),ye.b.pointsBetween(ye.b.add(l,[0,g]),ye.b.sub(d,[0,g]),b),ye.b.pointsBetween(ye.b.sub(d,[h,0]),ye.b.add(f,[h,0]),m),ye.b.pointsBetween(ye.b.sub(f,[0,g]),ye.b.add(u,[0,g]),b)],p);return{points:[].concat(Object(v.a)(w.flat()),Object(v.a)(w[0])).slice(5,Math.floor((p%2===0?m:b)/-2)+3)}}(e,t,n).points,options:{size:vd(t).strokeWidth,thinning:.65,streamline:.3,smoothing:1,simulatePressure:!1,last:!0}}}function Hd(e,t,n){var r=Fd(e,t,n),a=Xe(r.points,r.options);return y.f.getSvgPathFromStroke(a.map((function(e){return e.point.slice(0,2)})),!1)}var zd=Object(m.memo)((function(e){var t=e.id,n=e.style,r=e.size,a=e.isSelected,i=e.isDarkMode,o=n.isFilled,s=vd(n,i),c=s.stroke,u=s.strokeWidth,l=s.fill,d=function(e,t,n){var r=Fd(e,t,n),a=r.points,i=r.options,o=Ye(a,i);return y.f.getSvgPathFromStroke(o)}(t,n,r),f=Hd(t,n,r);return Object(m.createElement)(m.Fragment,null,Object(m.createElement)("path",{className:n.isFilled||a?"tl-fill-hitarea":"tl-stroke-hitarea",d:f}),o&&Object(m.createElement)("path",{d:f,fill:l,pointerEvents:"none"}),Object(m.createElement)("path",{d:d,fill:c,stroke:c,strokeWidth:u,pointerEvents:"none"}))})),Nd=Object(m.memo)((function(e){var t=e.id,n=e.style,r=e.size,a=e.isSelected,i=e.isDarkMode,o=vd(n,i),s=o.stroke,c=o.strokeWidth,u=o.fill,l=1+1.618*c,f=Math.max(0,r[0]-l/2),p=Math.max(0,r[1]-l/2),h=[[[l/2,l/2],[f,l/2],f-l/2],[[f,l/2],[f,p],p-l/2],[[f,p],[l/2,p],f-l/2],[[l/2,p],[l/2,l/2],p-l/2]].map((function(e,r){var a=Object(d.a)(e,3),i=a[0],o=a[1],s=a[2],u=y.f.getPerfectDashProps(s,1.618*c,n.dash),l=u.strokeDasharray,f=u.strokeDashoffset;return Object(m.createElement)("line",{key:t+"_"+r,x1:i[0],y1:i[1],x2:o[0],y2:o[1],strokeDasharray:l,strokeDashoffset:f})}));return Object(m.createElement)(m.Fragment,null,Object(m.createElement)("rect",{className:a||n.isFilled?"tl-fill-hitarea":"tl-stroke-hitarea",x:l/2,y:l/2,width:f,height:p,strokeWidth:Al}),n.isFilled&&Object(m.createElement)("rect",{x:l/2,y:l/2,width:f,height:p,fill:u,pointerEvents:"none"}),Object(m.createElement)("g",{pointerEvents:"none",stroke:s,strokeWidth:l,strokeLinecap:"round"},h))}));function Ud(e){var t=e.strokeWidth,n=e.size;return Object(m.createElement)("rect",{className:"tl-binding-indicator",x:t,y:t,width:Math.max(0,n[0]-t/2),height:Math.max(0,n[1]-t/2),strokeWidth:32})}var Kd=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(f.a)(this,n),(e=t.apply(this,arguments)).type=il.Rectangle,e.canBind=!0,e.canClone=!0,e.canEdit=!0,e.getShape=function(e){return y.f.deepMerge({id:"id",type:il.Rectangle,name:"Rectangle",parentId:"page",childIndex:1,point:[0,0],size:[1,1],rotation:0,style:md,label:"",labelPoint:[.5,.5]},e)},e.Component=Ld.Component((function(e,t){var n=e.shape,r=e.isEditing,a=e.isBinding,i=e.isSelected,o=e.isGhost,s=e.meta,c=e.bounds,u=e.events,l=e.onShapeBlur,d=e.onShapeChange,f=n.id,p=n.size,h=n.style,v=n.label,g=void 0===v?"":v,b=n.labelPoint,w=void 0===b?Ll:b,O=fd(h),k=vd(h,s.isDarkMode),S=h.dash===fl.Draw?zd:Nd,x=Object(m.useCallback)((function(e){return null==d?void 0:d({id:f,label:e})}),[d]);return Object(m.createElement)(Vd,ou({ref:t},u),Object(m.createElement)(Ad,{isEditing:r,onChange:x,onBlur:l,font:O,text:g,color:k.stroke,offsetX:(w[0]-.5)*c.width,offsetY:(w[1]-.5)*c.height}),Object(m.createElement)(y.c,{id:n.id+"_svg",opacity:o?Bl:1},a&&Object(m.createElement)(Ud,{strokeWidth:k.strokeWidth,size:p}),Object(m.createElement)(S,{id:f,style:h,size:p,isSelected:i,isDarkMode:s.isDarkMode})))})),e.Indicator=Ld.Indicator((function(e){var t=e.shape,n=t.id,r=t.style,a=t.size,i=vd(r,!1).strokeWidth;return r.dash===fl.Draw?Object(m.createElement)("path",{d:Hd(n,r,a)}):Object(m.createElement)("rect",{x:i,y:i,rx:1,ry:1,width:Math.max(1,a[0]-2*i),height:Math.max(1,a[1]-2*i)})})),e.getBounds=function(t){return _d(t,e.boundsCache)},e.shouldRender=function(e,t){return t.size!==e.size||t.style!==e.style||t.label!==e.label},e.transform=Cd,e.transformSingle=Ed,e}return n}(Ld),Vd=_l("div",{width:"100%",height:"100%"}),Wd=2*Math.PI;function Xd(e,t){if(e.length<3)throw Error("Polygon must have at least 3 points");var n=e.length;return e.map((function(t,r){return[t,e[(r+1)%n]]})).map((function(e){var n=Object(d.a)(e,2),r=n[0],a=n[1],i=ye.b.mul(ye.b.per(ye.b.uni(ye.b.sub(a,r))),t);return[ye.b.add(r,i),ye.b.add(a,i)]})).map((function(e,t,n){var r=Object(_e.h)(e,n[(t+1)%n.length]);if(void 0===r)throw Error("Expected an intersection");return r}))}function Yd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Object(d.a)(e,2),a=r[0],i=r[1],o=[[a/2,0],[a,i],[0,i]];return t&&(o=Xd(o,t)),n&&(o=o.map((function(e){return ye.b.rotWith(e,[a/2,i/2],n)}))),o}function Gd(e){var t=Object(d.a)(e,2),n=t[0],r=t[1],a=[[n/2,0],[n,r],[0,r]];return[(a[0][0]+a[1][0]+a[2][0])/3,(a[0][1]+a[1][1]+a[2][1])/3]}function $d(e,t,n){var r=vd(n).strokeWidth;return{points:function(e,t,n){var r=Object(d.a)(t,2),a=r[0],i=r[1],o=y.f.rng(e),s=Array.from(Array(3)).map((function(){return[o()*n*.75,o()*n*.75]})),c=[ye.b.add([a/2,0],s[0]),ye.b.add([a,i],s[1]),ye.b.add([0,i],s[2])],u=Math.round(Math.abs(2*o()*3)),l=y.f.rotateArray([ye.b.pointsBetween(c[0],c[1],32),ye.b.pointsBetween(c[1],c[2],32),ye.b.pointsBetween(c[2],c[0],32)],u);return{points:[].concat(Object(v.a)(l.flat()),Object(v.a)(l[0]))}}(e,t,r).points,options:{size:r,thinning:.65,streamline:.3,smoothing:1,simulatePressure:!1,last:!0}}}(function(){function e(){Object(f.a)(this,e)}return Object(u.a)(e,null,[{key:"inwardEdgeNormal",value:function(e){var t=ye.b.sub(e[1],e[0]),n=ye.b.len2(t);return[-t[0]/n,t[1]/n]}},{key:"outwardEdgeNormal",value:function(t){return ye.b.neg(e.inwardEdgeNormal(t))}},{key:"isReflexVertex",value:function(t,n){var r=t.length,a=t[(n+r-1)%r],i=t[n],o=t[(n+1)%r];return e.leftSide(a,o,i)<0}},{key:"getEdges",value:function(e){return e.map((function(t,n){return[t,e[(n+1)%e.length]]}))}},{key:"edgesIntersection",value:function(e,t){var n=Object(d.a)(e,2),r=n[0],a=n[1],i=Object(d.a)(t,2),o=i[0],s=i[1],c=(s[1]-o[1])*(a[0]-r[0])-(s[0]-o[0])*(a[1]-r[1]);if(0==c)return null;var u=((s[0]-o[0])*(r[1]-o[1])-(s[1]-o[1])*(r[0]-o[0]))/c,l=((a[0]-r[0])*(r[1]-o[1])-(a[1]-r[1])*(r[0]-o[0]))/c;return u<0||l<0||u>1||l>1?null:[r[0]+u*(a[0]-r[0]),r[1]+u*(a[1]-r[1])]}},{key:"appendArc",value:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=Object(v.a)(e),s=Math.atan2(r[1]-t[1],r[0]-t[0]),c=Math.atan2(a[1]-t[1],a[0]-t[0]);s<0&&(s+=Wd),c<0&&(c+=Wd);var u=5,l=s>c?s-c:s+Wd-c,d=(i?-l:Wd-l)/u;o.push(r);for(var f=1;f<u;++f){var p=s+d*f;o.push([t[0]+Math.cos(p)*n,t[1]+Math.sin(p)*n])}return o.push(a),o}},{key:"createOffsetEdge",value:function(e,t){return e.map((function(e){return ye.b.add(e,t)}))}},{key:"getOffsetPolygon",value:function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e.getEdges(t),a=r.map((function(t){return e.createOffsetEdge(t,ye.b.mul(e.outwardEdgeNormal(t),n))})),i=[],o=0;o<a.length;o++){var s=a[o],c=a[(o+a.length-1)%a.length],u=e.edgesIntersection(c,s);u?i.push(u):e.appendArc(i,r[o][0],n,c[1],s[0],!1)}return i}},{key:"createPaddingPolygon",value:function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=t.map((function(t){return e.createOffsetEdge(t,e.inwardEdgeNormal(t))})),a=[],i=0;i<r.length;i++){var o=r[i],s=r[(i+r.length-1)%r.length],c=e.edgesIntersection(s,o);c?a.push(c):e.appendArc(a,t[i][0],n,s[1],o[0],!0)}return a}}]),e}()).leftSide=ye.b.isLeft;var qd=Object(m.memo)((function(e){var t=e.id,n=e.size,r=e.style,a=e.isSelected,i=vd(r,e.isDarkMode),o=i.stroke,s=i.strokeWidth,c=i.fill,u=function(e,t,n){var r=$d(e,t,n),a=r.points,i=r.options,o=Ye(a,i);return y.f.getSvgPathFromStroke(o)}(t,n,r),l=function(e,t,n){var r=$d(e,t,n),a=Xe(r.points,r.options);return y.f.getSvgPathFromStroke(a.map((function(e){return e.point.slice(0,2)})),!1)}(t,n,r);return Object(m.createElement)(m.Fragment,null,Object(m.createElement)("path",{className:r.isFilled||a?"tl-fill-hitarea":"tl-stroke-hitarea",d:l}),r.isFilled&&Object(m.createElement)("path",{d:l,fill:c,pointerEvents:"none"}),Object(m.createElement)("path",{d:u,fill:o,stroke:o,strokeWidth:s,pointerEvents:"none"}))})),Zd=Object(m.memo)((function(e){var t=e.id,n=e.size,r=e.style,a=e.isSelected,i=e.isDarkMode,o=vd(r,i),s=o.stroke,c=o.strokeWidth,u=o.fill,l=1+1.618*c,f=Yd(n),p=y.f.pointsToLineSegments(f,!0).map((function(e,n){var a=Object(d.a)(e,2),i=a[0],o=a[1],u=y.f.getPerfectDashProps(ye.b.dist(i,o),1.618*c,r.dash),f=u.strokeDasharray,p=u.strokeDashoffset;return Object(m.createElement)("line",{key:t+"_"+n,x1:i[0],y1:i[1],x2:o[0],y2:o[1],stroke:s,strokeWidth:l,strokeLinecap:"round",strokeDasharray:f,strokeDashoffset:p})})),h=f.join();return Object(m.createElement)(m.Fragment,null,Object(m.createElement)("polygon",{className:r.isFilled||a?"tl-fill-hitarea":"tl-stroke-hitarea",points:h}),r.isFilled&&Object(m.createElement)("polygon",{fill:u,points:h,pointerEvents:"none"}),Object(m.createElement)("g",{pointerEvents:"stroke"},p))}));function Jd(e){var t=Yd(e.size).join();return Object(m.createElement)("polygon",{className:"tl-binding-indicator",points:t,strokeWidth:32})}var Qd=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(f.a)(this,n),(e=t.apply(this,arguments)).type=il.Triangle,e.canBind=!0,e.canClone=!0,e.canEdit=!0,e.getShape=function(e){return y.f.deepMerge({id:"id",type:il.Triangle,name:"Triangle",parentId:"page",childIndex:1,point:[0,0],size:[1,1],rotation:0,style:md,label:"",labelPoint:[.5,.5]},e)},e.Component=Ld.Component((function(e,t){var n=e.shape,r=e.bounds,a=e.isBinding,i=e.isEditing,o=e.isSelected,s=e.isGhost,c=e.meta,u=e.events,l=e.onShapeChange,d=e.onShapeBlur,f=n.id,p=n.label,h=void 0===p?"":p,v=n.size,g=n.style,b=n.labelPoint,w=void 0===b?Ll:b,O=fd(g),k=vd(g),S=g.dash===fl.Draw?qd:Zd,x=Object(m.useCallback)((function(e){return null==l?void 0:l({id:f,label:e})}),[l]),j=Object(m.useMemo)((function(){var e=ye.b.div(v,2);return.72*(Gd(v)[1]-e[1])}),[v]);return Object(m.createElement)(ef,ou({ref:t},u),Object(m.createElement)(Ad,{font:O,text:h,color:k.stroke,offsetX:(w[0]-.5)*r.width,offsetY:j+(w[1]-.5)*r.height,isEditing:i,onChange:x,onBlur:d}),Object(m.createElement)(y.c,{id:n.id+"_svg",opacity:s?Bl:1},a&&Object(m.createElement)(Jd,{size:v}),Object(m.createElement)(S,{id:f,style:g,size:v,isSelected:o,isDarkMode:c.isDarkMode})))})),e.Indicator=Ld.Indicator((function(e){var t=e.shape.size;return Object(m.createElement)("polygon",{points:Yd(t).join()})})),e.shouldRender=function(e,t){return t.size!==e.size||t.style!==e.style||t.label!==e.label},e.getBounds=function(t){return _d(t,e.boundsCache)},e.getExpandedBounds=function(t){return y.f.getBoundsFromPoints(Yd(t.size,e.bindingDistance).map((function(e){return ye.b.add(e,t.point)})))},e.hitTestLineSegment=function(t,n,r){return Object(_e.l)(n,r,e.getPoints(t)).didIntersect},e.hitTestBounds=function(t,n){return y.f.boundsContained(e.getBounds(t),n)||Object(_e.c)(n,e.getPoints(t)).length>0},e.getBindingPoint=function(t,n,r,a,i,o){var s=e.getExpandedBounds(t);if(y.f.pointInBounds(r,s)){var c=Yd(t.size).map((function(e){return ye.b.add(e,t.point)})),u=Yd(t.size,e.bindingDistance).map((function(e){return ye.b.add(e,t.point)})),l=y.f.pointsToLineSegments(c,!0).map((function(e){var t=Object(d.a)(e,2),n=t[0],a=t[1];return ye.b.distanceToLineSegment(n,a,r)})).sort((function(e,t){return e-t}))[0];if(y.f.pointInPolygon(r,u)||l<e.bindingDistance){var f=y.f.pointsToLineSegments(u.concat([u[0]])).map((function(e){return Object(_e.p)(a,i,e[0],e[1])})).filter((function(e){return e.didIntersect})).flatMap((function(e){return e.points}));if(f.length){var p,h,v=ye.b.add(Gd(t.size),t.point),g=f.sort((function(e,t){return ye.b.dist(t,a)-ye.b.dist(e,a)}))[0],m=ye.b.med(r,g);o?(p=ye.b.dist(r,v)<8?v:r,h=0):(p=ye.b.distanceToLineSegment(r,m,v)<8?v:m,h=y.f.pointInPolygon(r,c)?e.bindingDistance:Math.max(e.bindingDistance,l));var b=ye.b.divV(ye.b.sub(p,[s.minX,s.minY]),[s.width,s.height]);return{point:ye.b.clampV(b,0,1),distance:h}}}}},e.transform=Cd,e.transformSingle=Ed,e}return Object(u.a)(n,[{key:"getPoints",value:function(e){var t=this,n=e.rotation,r=void 0===n?0:n,a=Object(d.a)(e.point,2),i=a[0],o=a[1],s=Object(d.a)(e.size,2),c=s[0],u=s[1];return[[i+c/2,o],[i,o+u],[i+c,o+u]].map((function(n){return ye.b.rotWith(n,t.getCenter(e),r)}))}}]),n}(Ld),ef=_l("div",{width:"100%",height:"100%"});function tf(e,t,n){for(var r=vd(n).strokeWidth,a=y.f.rng(e),i=t[0]+a()*r*2,o=t[1]+a()*r*2,s=y.f.perimeterOfEllipse(i,o),c=[],u=Math.PI+Math.PI*a(),l=Math.abs(a()),d=Math.max(16,s/10),f=0;f<d;f++){var p=Fl.easeInOutSine(f/(d+1)),h=2*u+Math.PI*(2+l)*p,v=Math.cos(h),g=Math.sin(h);c.push([i*v+t[0],o*g+t[1],p+.5+a()/2])}return Xe(c,{size:1+2*r,thinning:.618,end:{taper:s/8},start:{taper:s/12},streamline:0,simulatePressure:!0})}function nf(e,t,n){return y.f.getSvgPathFromStroke(tf(e,t,n).map((function(e){return e.point.slice(0,2)})),!1)}var rf=Object(m.memo)((function(e){var t=e.id,n=e.radius,r=e.style,a=e.isSelected,i=vd(r,e.isDarkMode),o=i.stroke,s=i.strokeWidth,c=i.fill,u=function(e,t,n){var r=vd(n).strokeWidth,a=y.f.rng(e),i=t[0]+a()*r*2,o=t[1]+a()*r*2,s=y.f.perimeterOfEllipse(i,o);return y.f.getSvgPathFromStroke(We(tf(e,t,n),{size:2+2*r,thinning:.618,end:{taper:s/8},start:{taper:s/12},streamline:0,simulatePressure:!0}))}(t,n,r);return Object(m.createElement)(m.Fragment,null,Object(m.createElement)("ellipse",{className:r.isFilled||a?"tl-fill-hitarea":"tl-stroke-hitarea",cx:n[0],cy:n[1],rx:n[0],ry:n[1]}),r.isFilled&&Object(m.createElement)("path",{d:nf(t,n,r),stroke:"none",fill:c,pointerEvents:"none"}),Object(m.createElement)("path",{d:u,fill:o,stroke:o,strokeWidth:s,pointerEvents:"none",strokeLinecap:"round",strokeLinejoin:"round"}))})),af=Object(m.memo)((function(e){var t=e.radius,n=e.style,r=e.isSelected,a=vd(n,e.isDarkMode),i=a.stroke,o=a.strokeWidth,s=a.fill,c=1+1.618*o,u=Math.max(0,t[0]-c/2),l=Math.max(0,t[1]-c/2),d=y.f.perimeterOfEllipse(u,l),f=y.f.getPerfectDashProps(d<64?2*d:d,1.618*o,n.dash,4),p=f.strokeDasharray,h=f.strokeDashoffset;return Object(m.createElement)(m.Fragment,null,Object(m.createElement)("ellipse",{className:n.isFilled||r?"tl-fill-hitarea":"tl-stroke-hitarea",cx:t[0],cy:t[1],rx:t[0],ry:t[1]}),Object(m.createElement)("ellipse",{cx:t[0],cy:t[1],rx:u,ry:l,fill:s,stroke:i,strokeWidth:c,strokeDasharray:p,strokeDashoffset:h,pointerEvents:"none",strokeLinecap:"round",strokeLinejoin:"round"}))})),of=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(f.a)(this,n),(e=t.apply(this,arguments)).type=il.Ellipse,e.canBind=!0,e.canClone=!0,e.canEdit=!0,e.getShape=function(e){return y.f.deepMerge({id:"id",type:il.Ellipse,name:"Ellipse",parentId:"page",childIndex:1,point:[0,0],radius:[1,1],rotation:0,style:md,label:"",labelPoint:[.5,.5]},e)},e.Component=Ld.Component((function(t,n){var r=t.shape,a=t.isGhost,i=t.isSelected,o=t.isBinding,s=t.isEditing,c=t.meta,u=t.bounds,l=t.events,d=t.onShapeChange,f=t.onShapeBlur,p=r.id,h=r.radius,v=r.style,g=r.label,b=void 0===g?"":g,w=r.labelPoint,O=void 0===w?Ll:w,k=fd(r.style),S=vd(v,c.isDarkMode),x=1+1.618*S.strokeWidth,j=Math.max(0,h[0]-x/2),_=Math.max(0,h[1]-x/2),C=v.dash===fl.Draw?rf:af,E=Object(m.useCallback)((function(e){return null==d?void 0:d({id:p,label:e})}),[d]);return Object(m.createElement)(sf,ou({ref:n},l),Object(m.createElement)(Ad,{isEditing:s,onChange:E,onBlur:f,font:k,text:b,color:S.stroke,offsetX:(O[0]-.5)*u.width,offsetY:(O[1]-.5)*u.height}),Object(m.createElement)(y.c,{id:r.id+"_svg",opacity:a?Bl:1},o&&Object(m.createElement)("ellipse",{className:"tl-binding-indicator",cx:h[0],cy:h[1],rx:j,ry:_,strokeWidth:e.bindingDistance}),Object(m.createElement)(C,{id:p,radius:h,style:v,isSelected:i,isDarkMode:c.isDarkMode})))})),e.Indicator=Ld.Indicator((function(e){var t=e.shape,n=t.id,r=t.radius,a=t.style,i=1+1.618*vd(a).strokeWidth,o=Math.max(0,r[0]-i/2),s=Math.max(0,r[1]-i/2);return a.dash===fl.Draw?Object(m.createElement)("path",{d:nf(n,r,a)}):Object(m.createElement)("ellipse",{cx:r[0],cy:r[1],rx:o,ry:s})})),e.hitTestPoint=function(t,n){return y.f.pointInBounds(n,e.getRotatedBounds(t))&&y.f.pointInEllipse(n,e.getCenter(t),t.radius[0],t.radius[1],t.rotation||0)},e.hitTestLineSegment=function(t,n,r){return Object(_e.j)(n,r,e.getCenter(t),t.radius[0],t.radius[1],t.rotation||0).didIntersect},e.getBounds=function(t){return y.f.getFromCache(e.boundsCache,t,(function(){return y.f.getRotatedEllipseBounds(t.point[0],t.point[1],t.radius[0],t.radius[1],0)}))},e.getRotatedBounds=function(e){return y.f.getRotatedEllipseBounds(e.point[0],e.point[1],e.radius[0],e.radius[1],e.rotation)},e.hitTestBounds=function(t,n){var r=e.getBounds(t);return y.f.boundsContained(r,n)||Object(_e.g)(e.getCenter(t),t.radius[0],t.radius[1],t.rotation||0,n).length>0},e.shouldRender=function(e,t){return t.radius!==e.radius||t.style!==e.style||t.label!==e.label},e.getCenter=function(e){return ye.a.add(e.point,e.radius)},e.getBindingPoint=function(t,n,r,a,i,o){var s,c,u=e.getExpandedBounds(t),l=e.getCenter(t);if(y.f.pointInEllipse(r,l,t.radius[0]+e.bindingDistance,t.radius[1]+e.bindingDistance)){if(o)s=ye.a.dist(r,e.getCenter(t))<12?[.5,.5]:ye.a.divV(ye.a.sub(r,[u.minX,u.minY]),[u.width,u.height]),c=0;else{var d=Object(_e.o)(a,i,l,t.radius[0],t.radius[1],t.rotation||0).points.sort((function(e,t){return ye.a.dist(e,a)-ye.a.dist(t,a)}))[0];if(d||(d=Object(_e.j)(r,l,l,t.radius[0],t.radius[1],t.rotation||0).points.sort((function(e,t){return ye.a.dist(e,r)-ye.a.dist(t,r)}))[0]),!d)return;var f=ye.a.med(r,d);if(s=ye.a.distanceToLineSegment(r,f,e.getCenter(t))<12?[.5,.5]:ye.a.divV(ye.a.sub(f,[u.minX,u.minY]),[u.width,u.height]),y.f.pointInEllipse(r,l,t.radius[0],t.radius[1],t.rotation||0))c=e.bindingDistance/2;else{var p=Object(_e.j)(r,l,l,t.radius[0],t.radius[1],t.rotation||0).points[0];if(!p)return;c=Math.max(e.bindingDistance/2,ye.a.dist(r,p))}}return{point:s,distance:c}}},e.transform=function(e,t,n){var r=n.scaleX,a=n.scaleY,i=n.initialShape.rotation,o=void 0===i?0:i;return{point:[t.minX,t.minY],radius:[t.width/2,t.height/2],rotation:r<0&&a>=0||a<0&&r>=0?-(o||0):o||0}},e.transformSingle=function(e,t){return{point:ye.a.toFixed([t.minX,t.minY]),radius:ye.a.div([t.width,t.height],2)}},e}return n}(Ld),sf=_l("div",{width:"100%",height:"100%"});function cf(e,t){var n=e.start,r=e.end,a=ye.b.dist(n.point,r.point),i=ye.b.med(n.point,r.point),o=a/2*t,s=ye.b.uni(ye.b.vec(n.point,r.point));return ye.b.toFixed(Math.abs(o)<10?i:ye.b.add(i,ye.b.mul(ye.b.per(s),o)))}function uf(e,t,n){return y.f.circleFromThreePoints(e,n,t)}function lf(e,t,n,r,a){var i=Object(_e.e)(e,.618*t,n,r).points;if(!i)return dp.warn("Could not find an intersection for the arrow head."),{left:e,right:e};var o=a?i[0]:i[1];return{left:o?ye.b.nudge(ye.b.rotWith(o,e,Math.PI/6),e,-.382*t):e,right:o?ye.b.nudge(ye.b.rotWith(o,e,-Math.PI/6),e,-.382*t):e}}function df(e,t,n){var r=Object(_e.f)(e,n,e,t).points;if(!r)return dp.warn("Could not find an intersection for the arrow head."),{left:e,right:e};var a=r[0];return{left:a?ye.b.rotWith(a,e,Math.PI/6):e,right:a?ye.b.rotWith(a,e,-Math.PI/6):e}}function ff(e,t,n,r,a){var i=lf(e,t,n,r,a),o=i.left,s=i.right;return"M ".concat(o," L ").concat(e," ").concat(s)}function pf(e,t,n){var r=df(e,t,n),a=r.left,i=r.right;return"M ".concat(a," L ").concat(e," ").concat(i)}function hf(e,t,n,r,a,i){var o=vd(e,!1).strokeWidth,s=ye.b.dist(t,r),c=Math.min(s/3,8*o),u=[];if(ye.b.dist(n,ye.b.toFixed(ye.b.med(t,r)))<1)u.push("M ".concat(t," L ").concat(r)),a&&u.push(pf(t,r,c)),i&&u.push(pf(r,t,c));else{var l=uf(t,n,r),d=[l[0],l[1]],f=l[2],p=mf(d,f,t,r);u.push("M ".concat(t," A ").concat(f," ").concat(f," 0 0 ").concat(p>0?"1":"0"," ").concat(r)),a&&u.push(ff(t,c,d,f,p<0)),i&&u.push(ff(r,c,d,f,p>=0))}return u.join(" ")}function vf(e,t,n){if(ye.b.dist2(t,ye.b.med(e,n))<=4)return[e,n];for(var r=[],a=uf(e,t,n),i=[a[0],a[1]],o=a[2],s=ye.b.angle(i,e),c=ye.b.angle(i,n),u=.05;u<1;u+=.05){var l=y.f.lerpAngles(s,c,u);r.push(ye.b.nudgeAtAngle(i,l,o))}return r}function gf(e,t,n){if(n===e||n===t)return!0;var r=2*Math.PI,a=(t-e+r)%r,i=(n-e+r)%r;return a<=Math.PI!==i>a}function mf(e,t,n,r){var a=y.f.getSweep(e,n,r);return t*(2*Math.PI)*(a/(2*Math.PI))}function bf(e){var t=e.left,n=e.middle,r=e.right,a=e.stroke,i=e.strokeWidth;return Object(m.createElement)("g",null,Object(m.createElement)("path",{className:"tl-stroke-hitarea",d:"M ".concat(t," L ").concat(n," ").concat(r)}),Object(m.createElement)("path",{d:"M ".concat(t," L ").concat(n," ").concat(r),fill:"none",stroke:a,strokeWidth:i,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"}))}var yf=Object(m.memo)((function(e){var t=e.id,n=e.style,r=e.start,a=e.end,i=e.decorationStart,o=e.decorationEnd,s=e.isDraw,c=e.isDarkMode,u=ye.b.dist(r,a);if(u<2)return null;var l=vd(n,c),d=l.strokeWidth,f=1+1.618*d,p=s?function(e,t,n,r,a,i){var o=y.f.rng(e),s=vd(t).strokeWidth,c=a?ye.b.nudge(n,r,s):n,u=i?ye.b.nudge(r,n,s):r,l=Ye([c,u],{size:s,thinning:.618+.2*o(),easing:Fl.easeOutQuad,simulatePressure:!0,streamline:0,last:!0});return y.f.getSvgPathFromStroke(l)}(t,n,r,a,i,o):"M"+ye.b.toFixed(r)+"L"+ye.b.toFixed(a),h=y.f.getPerfectDashProps(u,1.618*d,n.dash,2,!1),v=h.strokeDasharray,g=h.strokeDashoffset,b=Math.min(u/3,8*d),w=i?df(r,a,b):null,O=o?df(a,r,b):null;return Object(m.createElement)(m.Fragment,null,Object(m.createElement)("path",{className:"tl-stroke-hitarea",d:p}),Object(m.createElement)("path",{d:p,fill:l.stroke,stroke:l.stroke,strokeWidth:s?f/2:f,strokeDasharray:v,strokeDashoffset:g,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"stroke"}),w&&Object(m.createElement)(bf,{left:w.left,middle:r,right:w.right,stroke:l.stroke,strokeWidth:f}),O&&Object(m.createElement)(bf,{left:O.left,middle:a,right:O.right,stroke:l.stroke,strokeWidth:f}))})),wf=Object(m.memo)((function(e){var t=e.id,n=e.style,r=e.start,a=e.bend,i=e.end,o=e.arrowBend,s=e.decorationStart,c=e.decorationEnd,u=e.isDraw,l=e.isDarkMode,d=ye.b.dist(r,i);if(d<2)return null;var f=vd(n,l),p=f.strokeWidth,h=1+1.618*p,v=uf(r,a,i),g=[v[0],v[1]],b=v[2],w=mf(g,b,r,i),O=y.f.rng(t),k=Fl[O()>0?"easeInOutSine":"easeInOutCubic"],S=u?function(e,t,n,r,a,i,o,s,c,u){for(var l=y.f.rng(e),d=vd(t).strokeWidth,f=a?ye.b.rotWith(n,o,d/c):n,p=i?ye.b.rotWith(r,o,-d/c):r,h=ye.b.angle(o,f),v=ye.b.angle(o,p),g=[],m=8+Math.floor(Math.abs(c)/20*1+l()/2),b=0;b<m;b++){var w=u(b/m),O=y.f.lerpAngles(h,v,w);g.push(ye.b.toFixed(ye.b.nudgeAtAngle(o,O,s)))}var k=Ye([f].concat(g,[p]),{size:1+d,thinning:.618+.2*l(),easing:Fl.easeOutQuad,simulatePressure:!1,streamline:0,last:!0});return y.f.getSvgPathFromStroke(k)}(t,n,r,i,s,c,g,b,w,k):function(e,t,n,r){return["M",e[0],e[1],"A",n[2],n[2],0,0,r<0?0:1,t[0],t[1]].join(" ")}(r,i,v,o),x=y.f.getPerfectDashProps(Math.abs(w),h,n.dash,2,!1),j=x.strokeDasharray,_=x.strokeDashoffset,C=Math.min(d/3,8*p),E=s?lf(r,C,g,b,w<0):null,I=c?lf(i,C,g,b,w>=0):null;return Object(m.createElement)(m.Fragment,null,Object(m.createElement)("path",{className:"tl-stroke-hitarea",d:S}),Object(m.createElement)("path",{d:S,fill:u?f.stroke:"none",stroke:f.stroke,strokeWidth:u?0:h,strokeDasharray:j,strokeDashoffset:_,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"}),E&&Object(m.createElement)(bf,{left:E.left,middle:r,right:E.right,stroke:f.stroke,strokeWidth:h}),I&&Object(m.createElement)(bf,{left:I.left,middle:i,right:I.right,stroke:f.stroke,strokeWidth:h}))}));function Of(e){var t=e.id,n=e.bounds,r=e.labelSize,a=e.offset,i=e.scale,o=void 0===i?1:i;return Object(m.createElement)("defs",null,Object(m.createElement)("mask",{id:t+"_clip"},Object(m.createElement)("rect",{x:-100,y:-100,width:n.width+200,height:n.height+200,fill:"white"}),Object(m.createElement)("rect",{x:n.width/2-r[0]/2*o+((null==a?void 0:a[0])||0),y:n.height/2-r[1]/2*o+((null==a?void 0:a[1])||0),width:r[0]*o,height:r[1]*o,rx:4*o,ry:4*o,fill:"black",opacity:Math.max(o,.8)})))}var kf,Sf=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(f.a)(this,n),(e=t.apply(this,arguments)).type=il.Arrow,e.hideBounds=!0,e.canEdit=!0,e.pathCache=new WeakMap,e.getShape=function(e){var t,n,r,a;return ou({id:"id",type:il.Arrow,name:"Arrow",parentId:"page",childIndex:1,point:[0,0],rotation:0,bend:0,handles:{start:ou({id:"start",index:0,point:[0,0],canBind:!0},null==(t=e.handles)?void 0:t.start),end:ou({id:"end",index:1,point:[1,1],canBind:!0},null==(n=e.handles)?void 0:n.end),bend:ou({id:"bend",index:2,point:[.5,.5]},null==(r=e.handles)?void 0:r.bend)},decorations:null!=(a=e.decorations)?a:{end:sl.Arrow},style:ou(su(ou({},md),{isFilled:!1}),e.style),label:"",labelPoint:[.5,.5]},e)},e.Component=Ld.Component((function(t,n){var r=t.shape,a=t.isEditing,i=t.isGhost,o=t.meta,s=t.events,c=t.onShapeChange,u=t.onShapeBlur,l=r.id,d=r.label,f=void 0===d?"":d,p=r.handles,h=p.start,v=p.bend,g=p.end,b=r.decorations,w=void 0===b?{}:b,O=r.style,k=ye.a.dist(v.point,ye.a.toFixed(ye.a.med(h.point,g.point)))<1,S=fd(O),x=vd(O),j=f||a?jd(f,S):[0,0],_=e.getBounds(r),C=Object(m.useMemo)((function(){var e=r.handles,t=e.start,n=e.bend,a=e.end;if(k)return ye.a.dist(t.point,a.point);var i=uf(t.point,n.point,a.point),o=mf(i.slice(0,2),i[2],t.point,a.point);return Math.abs(o)}),[r.handles]),E=Math.max(.5,Math.min(1,Math.max(C/(j[1]+128),C/(j[0]+128)))),I=Object(m.useMemo)((function(){var t=e.getBounds(r);return ye.a.sub(r.handles.bend.point,[t.width/2,t.height/2])}),[r,E]),P=Object(m.useCallback)((function(e){null==c||c({id:l,label:e})}),[c]),M=k?yf:wf;return Object(m.createElement)(xf,ou({ref:n},s),Object(m.createElement)(Ad,{font:S,text:f,color:x.stroke,offsetX:I[0],offsetY:I[1],scale:E,isEditing:a,onChange:P,onBlur:u}),Object(m.createElement)(y.c,{id:r.id+"_svg"},Object(m.createElement)("defs",null,Object(m.createElement)("mask",{id:r.id+"_clip"},Object(m.createElement)("rect",{x:-100,y:-100,width:_.width+200,height:_.height+200,fill:"white"}),Object(m.createElement)("rect",{x:_.width/2-j[0]/2*E+I[0],y:_.height/2-j[1]/2*E+I[1],width:j[0]*E,height:j[1]*E,rx:4*E,ry:4*E,fill:"black",opacity:Math.max(E,.9)}))),Object(m.createElement)("g",{pointerEvents:"none",opacity:i?Bl:1,mask:f||a?"url(#".concat(r.id,"_clip)"):""},Object(m.createElement)(M,{id:l,style:O,start:h.point,end:g.point,bend:v.point,arrowBend:r.bend,decorationStart:null==w?void 0:w.start,decorationEnd:null==w?void 0:w.end,isDraw:O.dash===fl.Draw,isDarkMode:o.isDarkMode}))))})),e.Indicator=Ld.Indicator((function(t){var n=t.shape,r=t.bounds,a=n.style,i=n.decorations,o=n.label,s=n.handles,c=s.start,u=s.bend,l=s.end,d=fd(a),f=o?jd(o,d):[0,0],p=ye.a.dist(u.point,ye.a.toFixed(ye.a.med(c.point,l.point)))<1,h=Object(m.useMemo)((function(){var e=n.handles,t=e.start,r=e.bend,a=e.end;if(p)return ye.a.dist(t.point,a.point);var i=uf(t.point,r.point,a.point),o=mf(i.slice(0,2),i[2],t.point,a.point);return Math.abs(o)}),[n.handles]),v=Math.max(.5,Math.min(1,Math.max(h/(f[1]+128),h/(f[0]+128)))),g=Object(m.useMemo)((function(){var t=e.getBounds(n);return ye.a.sub(n.handles.bend.point,[t.width/2,t.height/2])}),[n,v]);return Object(m.createElement)(m.Fragment,null,Object(m.createElement)(Of,{id:n.id,scale:v,offset:g,bounds:r,labelSize:f}),Object(m.createElement)("path",{d:hf(a,c.point,u.point,l.point,null==i?void 0:i.start,null==i?void 0:i.end),mask:o?"url(#".concat(n.id,"_clip)"):""}),o&&Object(m.createElement)("rect",{x:r.width/2-f[0]/2*v+g[0],y:r.height/2-f[1]/2*v+g[1],width:f[0]*v,height:f[1]*v,rx:4*v,ry:4*v,fill:"transparent"}))})),e.getBounds=function(t){var n=y.f.getFromCache(e.boundsCache,t,(function(){var e=t.handles,n=e.start,r=e.bend,a=e.end;return y.f.getBoundsFromPoints(vf(n.point,r.point,a.point))}));return y.f.translateBounds(n,t.point)},e.getRotatedBounds=function(e){var t=e.handles,n=t.start,r=t.bend,a=t.end,i=vf(n.point,r.point,a.point),o=y.f.getBoundsFromPoints(i),s=o.minX,c=o.minY,u=o.maxX,l=o.maxY;return 0!==e.rotation&&(i=i.map((function(t){return ye.a.rotWith(t,[(s+u)/2,(c+l)/2],e.rotation||0)}))),y.f.translateBounds(y.f.getBoundsFromPoints(i),e.point)},e.getCenter=function(e){var t=e.handles,n=t.start,r=t.end;return ye.a.add(e.point,ye.a.med(n.point,r.point))},e.shouldRender=function(e,t){return t.decorations!==e.decorations||t.handles!==e.handles||t.style!==e.style||t.label!==e.label},e.hitTestPoint=function(e,t){for(var n=e.handles,r=n.start,a=n.bend,i=n.end,o=ye.a.sub(t,e.point),s=vf(r.point,a.point,i.point),c=1;c<s.length;c++)if(ye.a.distanceToLineSegment(s[c-1],s[c],o)<1)return!0;return!1},e.hitTestLineSegment=function(e,t,n){for(var r=e.handles,a=r.start,i=r.bend,o=r.end,s=ye.a.sub(t,e.point),c=ye.a.sub(n,e.point),u=vf(a.point,i.point,o.point),l=1;l<u.length;l++)if(Object(_e.k)(u[l-1],u[l],s,c).didIntersect)return!0;return!1},e.hitTestBounds=function(e,t){var n=e.handles,r=n.start,a=n.end,i=n.bend,o=ye.a.add(e.point,r.point),s=ye.a.add(e.point,a.point);if(y.f.pointInBounds(o,t)||y.f.pointInBounds(s,t))return!0;if(ye.a.isEqual(ye.a.med(r.point,a.point),i.point))return Object(_e.i)(o,s,t).length>0;var c=uf(r.point,i.point,a.point),u=Object(d.a)(c,3),l=u[0],f=u[1],p=u[2],h=ye.a.add(e.point,[l,f]);return Object(_e.a)(h,p,o,s,t).length>0},e.transform=function(t,n,r){var a=r.initialShape,i=r.scaleX,o=r.scaleY,s=e.getBounds(a),c=ou({},a.handles);["start","end"].forEach((function(e){var t=Object(d.a)(c[e].point,2),r=t[0],a=t[1],u=r/s.width,l=a/s.height;c[e]=su(ou({},c[e]),{point:[n.width*(i<0?1-u:u),n.height*(o<0?1-l:l)]})}));var u=c.start,l=c.bend,f=c.end,p=ye.a.dist(u.point,f.point),h=ye.a.med(u.point,f.point),v=p/2*a.bend,g=ye.a.uni(ye.a.vec(u.point,f.point)),m=ye.a.add(h,ye.a.mul(ye.a.per(g),v));return c.bend=su(ou({},l),{point:ye.a.toFixed(Math.abs(v)<10?h:m)}),{point:ye.a.toFixed([n.minX,n.minY]),handles:c}},e.onDoubleClickHandle=function(t,n){var r,a;switch(n){case"bend":return{bend:0,handles:su(ou({},t.handles),{bend:su(ou({},t.handles.bend),{point:cf(t.handles,t.bend)})})};case"start":return{decorations:su(ou({},t.decorations),{start:(null==(r=t.decorations)?void 0:r.start)?void 0:sl.Arrow})};case"end":return{decorations:su(ou({},t.decorations),{end:(null==(a=t.decorations)?void 0:a.end)?void 0:sl.Arrow})}}return Object(o.a)(e)},e.onBindingChange=function(t,n,r,a,i,o){var s=t.handles[n.handleId],c=ye.a.sub(ye.a.add([i.minX,i.minY],ye.a.mulV([i.width,i.height],ye.a.rotWith(n.point,[.5,.5],r.rotation||0))),t.point);if(n.distance){var u=y.f.expandBounds(a,n.distance),d=ye.a.add(t.point,t.handles["start"===s.id?"end":"start"].point),f=ye.a.uni(ye.a.sub(ye.a.add(c,t.point),d));if(r.type===il.Ellipse){var p=Object(_e.o)(d,f,o,r.radius[0]+n.distance,r.radius[1]+n.distance,r.rotation||0).points.sort((function(e,t){return ye.a.dist(e,d)-ye.a.dist(t,d)}));p[0]&&(c=ye.a.sub(p[0],t.point))}else if(r.type===il.Triangle){var h=Yd(r.size,Al,r.rotation).map((function(e){return ye.a.add(e,r.point)})),v=y.f.pointsToLineSegments(h,!0).map((function(e){return Object(_e.p)(d,f,e[0],e[1])})).filter((function(e){return e.didIntersect})).flatMap((function(e){return e.points})).sort((function(e,t){return ye.a.dist(e,d)-ye.a.dist(t,d)}));v[0]&&(c=ye.a.sub(v[0],t.point))}else{var g=Object(_e.n)(d,f,u,r.rotation).filter((function(e){return e.didIntersect})).map((function(e){return e.points[0]})).sort((function(e,t){return ye.a.dist(e,d)-ye.a.dist(t,d)}));g.length<2&&(g=Object(_e.n)(d,ye.a.neg(f),u).filter((function(e){return e.didIntersect})).map((function(e){return e.points[0]})).sort((function(e,t){return ye.a.dist(e,d)-ye.a.dist(t,d)}))),g[0]&&(c=ye.a.sub(g[0],t.point))}}return e.onHandleChange(t,Object(l.a)({},s.id,su(ou({},s),{point:ye.a.toFixed(c)})))},e.onHandleChange=function(t,n){var r=y.f.deepMerge(t.handles,n),a=t.bend;if(r=su(ou({},r),{start:su(ou({},r.start),{point:ye.a.toFixed(r.start.point)}),end:su(ou({},r.end),{point:ye.a.toFixed(r.end.point)})}),"bend"in n){var i=r,o=i.start,s=i.end,c=i.bend,u=ye.a.dist(o.point,s.point),l=ye.a.med(o.point,s.point),d=ye.a.angle(o.point,s.point),f=ye.a.uni(ye.a.vec(o.point,s.point)),p=ye.a.add(l,ye.a.mul(ye.a.per(f),u/2)),h=ye.a.sub(l,ye.a.mul(ye.a.per(f),u/2)),v=ye.a.nearestPointOnLineSegment(p,h,c.point,!0),g=ye.a.dist(l,v);a=y.f.clamp(g/(u/2),-.99,.99);var m=ye.a.angle(o.point,v);ye.a.isEqual(l,cf(r,a))?a=0:gf(d,d+Math.PI,m)&&(a*=-1)}var b={point:t.point,bend:a,handles:su(ou({},r),{bend:su(ou({},r.bend),{point:cf(r,a)})})},w=t.point,O=e.getBounds(ou({},b)),k=ye.a.sub([O.minX,O.minY],w);return ye.a.isEqual(k,[0,0])||(Object.values(b.handles).forEach((function(e){e.point=ye.a.toFixed(ye.a.sub(e.point,k))})),b.point=ye.a.toFixed(ye.a.add(b.point,k))),b},e}return n}(Ld),xf=_l("div",{width:"100%",height:"100%"}),jf=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(f.a)(this,n),(e=t.apply(this,arguments)).type=il.Group,e.canBind=!0,e.getShape=function(e){return y.f.deepMerge({id:"id",type:il.Group,name:"Group",parentId:"page",childIndex:1,point:[0,0],size:[100,100],rotation:0,children:[],style:md},e)},e.Component=Ld.Component((function(t,n){var r=t.shape,a=t.isBinding,i=t.isGhost,o=t.isHovered,s=t.isSelected,c=t.events,u=r.id,l=r.size,f=Math.max(0,l[0]-1),p=Math.max(0,l[1]-1),h=[[[1,1],[f,1],f-1],[[f,1],[f,p],p-1],[[f,p],[1,p],f-1],[[1,p],[1,1],p-1]].map((function(e,t){var n=Object(d.a)(e,2),r=n[0],a=n[1];return Object(m.createElement)("line",{key:u+"_"+t,x1:r[0],y1:r[1],x2:a[0],y2:a[1]})}));return Object(m.createElement)(y.c,ou({ref:n},c),a&&Object(m.createElement)("rect",{className:"tl-binding-indicator",strokeWidth:e.bindingDistance}),Object(m.createElement)("g",{opacity:i?Bl:1},Object(m.createElement)("rect",{x:0,y:0,width:l[0],height:l[1],fill:"transparent",pointerEvents:"all"}),Object(m.createElement)(_f,{stroke:cl.Black,opacity:o||s?1:0,strokeLinecap:"round",pointerEvents:"stroke"},h)))})),e.Indicator=Ld.Indicator((function(e){var t=e.shape,n=t.id,r=t.size,a=Math.max(0,r[0]-1),i=Math.max(0,r[1]-1),o=[[[1,1],[a,1],a-1],[[a,1],[a,i],i-1],[[a,i],[1,i],a-1],[[1,i],[1,1],i-1]].map((function(e,t){var r=Object(d.a)(e,2),a=r[0],i=r[1];return Object(m.createElement)("line",{key:n+"_"+t,x1:a[0],y1:a[1],x2:i[0],y2:i[1]})}));return Object(m.createElement)(_f,{strokeLinecap:"round",pointerEvents:"stroke"},o)})),e.getBounds=function(t){return _d(t,e.boundsCache)},e.shouldRender=function(e,t){return t.size!==e.size||t.style!==e.style},e}return n}(Ld),_f=_l("g",{strokeWidth:"calc(1.5px * var(--tl-scale))",strokeDasharray:"calc(1px * var(--tl-scale)), calc(3px * var(--tl-scale))"}),Cf=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(f.a)(this,n),(e=t.apply(this,arguments)).type=il.Sticky,e.canBind=!0,e.canEdit=!0,e.canClone=!0,e.hideResizeHandles=!0,e.showCloneHandles=!0,e.getShape=function(e){return y.f.deepMerge({id:"id",type:il.Sticky,name:"Sticky",parentId:"page",childIndex:1,point:[0,0],size:[200,200],text:"",rotation:0,style:bd},e)},e.Component=Ld.Component((function(t,n){var r=t.shape,a=t.meta,i=t.events,o=t.isGhost,s=t.isBinding,c=t.isEditing,u=t.onShapeBlur,l=t.onShapeChange,d=pd(r.style),f=hd(r.style,a.isDarkMode),p=f.color,h=f.fill,v=Object(m.useRef)(null),g=Object(m.useRef)(null),b=Object(m.useRef)(null),w=Object(m.useRef)(!1),O=Object(m.useCallback)((function(e){e.stopPropagation()}),[]),k=Object(m.useCallback)((function(e){null==l||l({id:r.id,type:r.type,text:dp.normalizeText(e.currentTarget.value)})}),[l]),S=Object(m.useCallback)((function(e){if("Escape"!==e.key)if("Tab"!==e.key||0!==r.text.length){if("Meta"===e.key||e.metaKey){if("z"===e.key&&e.metaKey)return e.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1),e.stopPropagation(),void e.preventDefault()}else e.stopPropagation();"Tab"===e.key&&(e.preventDefault(),e.shiftKey?Id.unindent(e.currentTarget):Id.indent(e.currentTarget),null==l||l(su(ou({},r),{text:dp.normalizeText(e.currentTarget.value)})))}else e.preventDefault()}),[r,l]),x=Object(m.useCallback)((function(e){e.currentTarget.setSelectionRange(0,0),null==u||u()}),[]),j=Object(m.useCallback)((function(e){c&&w.current&&e.currentTarget.select()}),[c]);Object(m.useEffect)((function(){if(c){w.current=!0;var e=g.current;e.focus(),e.select()}}),[c]),Object(m.useEffect)((function(){var e=b.current,t=r.size,n=e.offsetHeight,a=If-2*Ef;if(n!==t[1]-2*Ef)if(n>a)null==l||l({id:r.id,size:[t[0],n+2*Ef]});else if(n<a&&t[1]>If)null==l||l({id:r.id,size:[t[0],If]});else{var i=g.current;null==i||i.focus()}}),[r.text,r.size[1],r.style]);var _={font:d,color:p,textShadow:a.isDarkMode?"0.5px 0.5px 2px rgba(255, 255, 255,.25)":"0.5px 0.5px 2px rgba(255, 255, 255,.5)"};return Object(m.createElement)(y.a,ou({ref:n},i),Object(m.createElement)(Pf,{ref:v,isDarkMode:a.isDarkMode,isGhost:o,style:ou({backgroundColor:h},_)},s&&Object(m.createElement)("div",{className:"tl-binding-indicator",style:{position:"absolute",top:-e.bindingDistance,left:-e.bindingDistance,width:"calc(100% + ".concat(2*e.bindingDistance,"px)"),height:"calc(100% + ".concat(2*e.bindingDistance,"px)"),backgroundColor:"var(--tl-selectFill)"}}),Object(m.createElement)(Af,{ref:b,isEditing:c,alignment:r.style.textAlign},r.text,"\u200b"),c&&Object(m.createElement)(Tf,{ref:g,onPointerDown:O,value:r.text,onChange:k,onKeyDown:S,onFocus:j,onBlur:x,tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,spellCheck:!0,alignment:r.style.textAlign,onContextMenu:Pd})))})),e.Indicator=Ld.Indicator((function(e){var t=e.shape,n=Object(d.a)(t.size,2),r=n[0],a=n[1];return Object(m.createElement)("rect",{x:0,y:0,rx:3,ry:3,width:Math.max(1,r),height:Math.max(1,a)})})),e.getBounds=function(t){return _d(t,e.boundsCache)},e.shouldRender=function(e,t){return t.size!==e.size||t.style!==e.style||t.text!==e.text},e.transform=function(e,t,n){var r=n.scaleX,a=n.scaleY,i=n.transformOrigin;return{point:ye.a.toFixed([t.minX+(t.width-e.size[0])*(r<0?1-i[0]:i[0]),t.minY+(t.height-e.size[1])*(a<0?1-i[1]:i[1])])}},e.transformSingle=function(e){return e},e.getSvgElement=function(t){var n=e.getBounds(t),r=y.f.expandBounds(n,-Ef),a=Od(t.text,t.style,r),i=hd(t.style);a.setAttribute("fill",i.color),a.setAttribute("transform","translate(".concat(Ef,", ").concat(Ef,")"));var o=document.createElementNS("http://www.w3.org/2000/svg","g"),s=document.createElementNS("http://www.w3.org/2000/svg","rect");return s.setAttribute("width",n.width+""),s.setAttribute("height",n.height+""),s.setAttribute("fill",i.fill),s.setAttribute("rx","3"),s.setAttribute("ry","3"),o.appendChild(s),o.appendChild(a),o},e}return n}(Ld),Ef=16,If=200,Pf=_l("div",{pointerEvents:"all",position:"relative",backgroundColor:"rgba(255, 220, 100)",fontFamily:"sans-serif",height:"100%",width:"100%",padding:Ef+"px",borderRadius:"3px",perspective:"800px",variants:{isGhost:{false:{opacity:1},true:{transition:"opacity .2s",opacity:Bl}},isDarkMode:{true:{boxShadow:"2px 3px 12px -2px rgba(0,0,0,.3), 1px 1px 4px rgba(0,0,0,.3), 1px 1px 2px rgba(0,0,0,.3)"},false:{boxShadow:"2px 3px 12px -2px rgba(0,0,0,.2), 1px 1px 4px rgba(0,0,0,.16),  1px 1px 2px rgba(0,0,0,.16)"}}}}),Mf={whiteSpace:"pre-wrap",overflowWrap:"break-word"},Af=_l("div",ou({position:"absolute",top:Ef,left:Ef,width:"calc(100% - ".concat(2*Ef,"px)"),height:"fit-content",font:"inherit",pointerEvents:"none",userSelect:"none",variants:{isEditing:{true:{opacity:1},false:{opacity:1}},alignment:(Tc={},Object(l.a)(Tc,gl.Start,{textAlign:"left"}),Object(l.a)(Tc,gl.Middle,{textAlign:"center"}),Object(l.a)(Tc,gl.End,{textAlign:"right"}),Object(l.a)(Tc,gl.Justify,{textAlign:"justify"}),Tc)}},Mf)),Tf=_l("textarea",su(ou({width:"100%",height:"100%",border:"none",overflow:"hidden",background:"none",outline:"none",textAlign:"left",font:"inherit",padding:0,color:"transparent",verticalAlign:"top",resize:"none",caretColor:"black"},Mf),{variants:{alignment:(Dc={},Object(l.a)(Dc,gl.Start,{textAlign:"left"}),Object(l.a)(Dc,gl.Middle,{textAlign:"center"}),Object(l.a)(Dc,gl.End,{textAlign:"right"}),Object(l.a)(Dc,gl.Justify,{textAlign:"justify"}),Dc)}})),Df=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(f.a)(this,n),(e=t.apply(this,arguments)).type=il.Text,e.isAspectRatioLocked=!0,e.canEdit=!0,e.canBind=!0,e.canClone=!0,e.bindingDistance=8,e.getShape=function(e){return y.f.deepMerge({id:"id",type:il.Text,name:"Text",parentId:"page",childIndex:1,point:[0,0],rotation:0,text:" ",style:bd},e)},e.Component=Ld.Component((function(t,n){var r=t.shape,a=t.isBinding,i=t.isGhost,o=t.isEditing,s=t.onShapeBlur,c=t.onShapeChange,u=t.meta,l=t.events,d=r.text,f=r.style,p=vd(f,u.isDarkMode),h=fd(r.style),v=Object(m.useRef)(null),g=Object(m.useRef)(!1),b=Object(m.useCallback)((function(t){var n=[0,0],a=e.getBounds(r);switch(r.style.textAlign){case gl.Start:break;case gl.Middle:var i=e.getBounds(su(ou({},r),{text:dp.normalizeText(t.currentTarget.value)}));n=ye.a.div([i.width-a.width,0],2);break;case gl.End:n=[e.getBounds(su(ou({},r),{text:dp.normalizeText(t.currentTarget.value)})).width-a.width,0]}null==c||c({id:r.id,point:ye.a.sub(r.point,n),text:dp.normalizeText(t.currentTarget.value)})}),[r.id,r.point]),w=Md(Object(m.useCallback)((function(e){null==c||c({id:r.id,text:e})}),[r.id])),O=Object(m.useCallback)((function(e){e.currentTarget.setSelectionRange(0,0),null==s||s()}),[]),k=Object(m.useCallback)((function(e){o&&g.current&&document.activeElement===e.currentTarget&&e.currentTarget.select()}),[o]),S=Object(m.useCallback)((function(e){o&&e.stopPropagation()}),[o]);return Object(m.useEffect)((function(){o?requestAnimationFrame((function(){g.current=!0;var e=v.current;e&&(e.focus(),e.select())})):null==s||s()}),[o]),Object(m.createElement)(y.a,ou({ref:n},l),Object(m.createElement)(Rf,{isGhost:i,isEditing:o,onPointerDown:S},Object(m.createElement)(Lf,{style:{font:h,color:p.stroke,textAlign:wd(f.textAlign)}},a&&Object(m.createElement)("div",{className:"tl-binding-indicator",style:{position:"absolute",top:-e.bindingDistance,left:-e.bindingDistance,width:"calc(100% + ".concat(2*e.bindingDistance,"px)"),height:"calc(100% + ".concat(2*e.bindingDistance,"px)"),backgroundColor:"var(--tl-selectFill)"}}),o?Object(m.createElement)(Ff,{ref:v,style:{font:h,color:p.stroke},name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:d,color:p.stroke,onFocus:k,onChange:b,onKeyDown:w,onBlur:O,onPointerDown:S,onContextMenu:Pd}):d,"\u200b")))})),e.Indicator=Ld.Indicator((function(t){var n=t.shape,r=e.getBounds(n),a=r.width,i=r.height;return Object(m.createElement)("rect",{x:0,y:0,width:a,height:i})})),e.getBounds=function(t){var n=y.f.getFromCache(e.boundsCache,t,(function(){if(!kf)return{minX:0,minY:0,maxX:10,maxY:10,width:10,height:10};kf.textContent=t.text,kf.style.font=fd(t.style);var e=kf.offsetWidth||1,n=kf.offsetHeight||1;return{minX:0,maxX:e,minY:0,maxY:n,width:e,height:n}}));return y.f.translateBounds(n,t.point)},e.shouldRender=function(e,t){return t.text!==e.text||t.style.scale!==e.style.scale||t.style!==e.style},e.transform=function(e,t,n){var r=n.initialShape,a=n.scaleX,i=n.scaleY,o=r.rotation,s=void 0===o?0:o,c=r.style.scale,u=(void 0===c?1:c)*Math.abs(Math.min(a,i));return{point:[t.minX,t.minY],rotation:a<0&&i>=0||i<0&&a>=0?-(s||0):s,style:su(ou({},r.style),{scale:u})}},e.transformSingle=function(e,t,n){var r=n.initialShape,a=n.scaleX,i=n.scaleY,o=r.style.scale,s=void 0===o?1:o;return{point:ye.a.toFixed([t.minX,t.minY]),style:su(ou({},r.style),{scale:s*Math.max(Math.abs(i),Math.abs(a))})}},e.onDoubleClickBoundsHandle=function(t){var n=e.getCenter(t),r=e.getCenter(su(ou({},t),{style:su(ou({},t.style),{scale:1})}));return{style:su(ou({},t.style),{scale:1}),point:ye.a.toFixed(ye.a.add(t.point,ye.a.sub(n,r)))}},e.getSvgElement=function(t){var n=e.getBounds(t),r=Od(t.text,t.style,n);return r.setAttribute("fill",vd(t.style).stroke),r},e}return n}(Ld);"undefined"!==typeof window&&(kf=function(){var e;null==(e=document.getElementById("__textMeasure"))||e.remove();var t=document.createElement("pre");return t.id="__textMeasure",Object.assign(t.style,{whiteSpace:"pre",width:"auto",border:"1px solid transparent",padding:"4px",margin:"0px",letterSpacing:Pl,opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",pointerEvents:"none",userSelect:"none",alignmentBaseline:"mathematical",dominantBaseline:"mathematical"}),t.tabIndex=-1,document.body.appendChild(t),t}());var Rf=_l("div",{width:"100%",height:"100%",variants:{isGhost:{false:{opacity:1},true:{transition:"opacity .2s",opacity:Bl}},isEditing:{false:{pointerEvents:"all",userSelect:"all"},true:{pointerEvents:"none",userSelect:"none"}}}}),Bf={whiteSpace:"pre-wrap",overflowWrap:"break-word"},Lf=_l("div",ou({position:"absolute",width:"100%",height:"100%",padding:"4px",zIndex:1,minHeight:1,minWidth:1,lineHeight:1,letterSpacing:Pl,outline:0,fontWeight:"500",backfaceVisibility:"hidden",userSelect:"none",pointerEvents:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none",isEditing:{false:{},true:{pointerEvents:"all",background:"$boundsBg",userSelect:"text",WebkitUserSelect:"text"}}},Bf)),Ff=_l("textarea",ou({position:"absolute",top:0,left:0,zIndex:1,width:"100%",height:"100%",border:"none",padding:"4px",resize:"none",textAlign:"inherit",minHeight:"inherit",minWidth:"inherit",lineHeight:"inherit",letterSpacing:"inherit",outline:0,fontWeight:"inherit",overflow:"hidden",backfaceVisibility:"hidden",display:"inline-block",pointerEvents:"all",background:"$boundsBg",userSelect:"text",WebkitUserSelect:"text"},Bf)),Hf={easing:function(e){return Math.sin(e*Math.PI/2)},simulatePressure:!0},zf={easing:function(e){return e*e},simulatePressure:!1};function Nf(e){var t=vd(e.style);return su(ou({size:1+1.5*t.strokeWidth,thinning:.65,streamline:.65,smoothing:.65},.5===e.points[1][2]?Hf:zf),{last:e.isComplete})}function Uf(e){return e.points.length<2?"":y.f.getSvgPathFromStroke(Xe(e.points,Nf(e)).map((function(e){return e.point})))}function Kf(e,t){return Xe(e.points,t)}function Vf(e){if(e.points.length<2)return"";var t=Nf(e),n=Kf(e,t);return y.f.getSvgPathFromStroke(We(n,t))}function Wf(e){var t=e.points;if(t.length<2)return"M 0 0 L 0 0";var n=Kf(e,Nf(e)).map((function(e){return e.point.slice(0,2)})),r=t[t.length-1].slice(0,2);return ye.b.isEqual(n[0],r)||n.push(r),y.f.getSvgPathFromStroke(n,!1)}var Xf=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(f.a)(this,n),(e=t.apply(this,arguments)).type=il.Draw,e.pointsBoundsCache=new WeakMap([]),e.shapeBoundsCache=new Map,e.rotatedCache=new WeakMap([]),e.pointCache={},e.canClone=!0,e.getShape=function(e){return y.f.deepMerge({id:"id",type:il.Draw,name:"Draw",parentId:"page",childIndex:1,point:[0,0],rotation:0,style:md,points:[],isComplete:!1},e)},e.Component=Ld.Component((function(t,n){var r,a,i=t.shape,o=t.meta,s=t.isSelected,c=t.isGhost,u=t.events,d=i.points,f=i.style,p=i.isComplete,h=Object(m.useMemo)((function(){return Uf(i)}),[d,f.size]),v=Object(m.useMemo)((function(){return f.dash===fl.Draw?Vf(i):Wf(i)}),[d,f.size,f.dash,p]),g=vd(f,o.isDarkMode),b=g.stroke,w=g.fill,O=g.strokeWidth,k=e.getBounds(i);if(k.width<=O/2&&k.height<=O/2){var S=1+O;return Object(m.createElement)(y.c,ou({ref:n,id:i.id+"_svg"},u),Object(m.createElement)("circle",{r:S,fill:b,stroke:b,pointerEvents:"all",opacity:c?Bl:1}))}var x=f.isFilled&&d.length>3&&ye.a.dist(d[0],d[d.length-1])<2*O;if(i.style.dash===fl.Draw)return Object(m.createElement)(y.c,ou({ref:n,id:i.id+"_svg"},u),Object(m.createElement)("g",{opacity:c?Bl:1},Object(m.createElement)("path",{className:x||s?"tl-fill-hitarea":"tl-stroke-hitarea",d:v}),x&&Object(m.createElement)("path",{d:h,stroke:"none",fill:w,strokeLinejoin:"round",strokeLinecap:"round",pointerEvents:"none"}),Object(m.createElement)("path",{d:v,fill:b,stroke:b,strokeWidth:O/2,strokeLinejoin:"round",strokeLinecap:"round",pointerEvents:"none"})));var j=(r={},Object(l.a)(r,fl.Draw,"none"),Object(l.a)(r,fl.Solid,"none"),Object(l.a)(r,fl.Dotted,"0.1 ".concat(4*O)),Object(l.a)(r,fl.Dashed,"".concat(4*O," ").concat(4*O)),r)[f.dash],_=(a={},Object(l.a)(a,fl.Draw,"none"),Object(l.a)(a,fl.Solid,"none"),Object(l.a)(a,fl.Dotted,"0"),Object(l.a)(a,fl.Dashed,"0"),a)[f.dash],C=1+1.5*O;return Object(m.createElement)(y.c,ou({ref:n,id:i.id+"_svg"},u),Object(m.createElement)("g",{opacity:c?Bl:1},Object(m.createElement)("path",{className:x&&s?"tl-fill-hitarea":"tl-stroke-hitarea",d:v}),Object(m.createElement)("path",{d:v,fill:x?w:"none",stroke:"none",strokeWidth:Math.min(4,2*O),strokeLinejoin:"round",strokeLinecap:"round",pointerEvents:"none"}),Object(m.createElement)("path",{d:v,fill:"none",stroke:b,strokeWidth:C,strokeDasharray:j,strokeDashoffset:_,strokeLinejoin:"round",strokeLinecap:"round",pointerEvents:"none"})))})),e.Indicator=Ld.Indicator((function(t){var n=t.shape,r=n.points,a=Object(m.useMemo)((function(){return Wf(n)}),[r]),i=e.getBounds(n);return i.width<4&&i.height<4?Object(m.createElement)("circle",{x:i.width/2,y:i.height/2,r:1}):Object(m.createElement)("path",{d:a})})),e.transform=function(t,n,r){var a=r.initialShape,i=r.scaleX,o=r.scaleY,s=y.f.getFromCache(e.boundsCache,a,(function(){return y.f.getBoundsFromPoints(a.points)})),c=a.points.map((function(e){var t=Object(d.a)(e,3),r=t[0],a=t[1],c=t[2];return[n.width*(i<0?1-r/s.width:r/s.width),n.height*(o<0?1-a/s.height:a/s.height),c]})),u=y.f.getBoundsFromPoints(t.points);return{points:c,point:ye.a.sub([n.minX,n.minY],[u.minX,u.minY])}},e.getBounds=function(t){var n=!e.pointsBoundsCache.has(t.points),r=!(e.pointCache[t.id]===t.point);if(n){var a=y.f.getBoundsFromPoints(t.points);e.pointsBoundsCache.set(t.points,a),e.shapeBoundsCache.set(t.id,y.f.translateBounds(a,t.point)),e.pointCache[t.id]=t.point}else r&&!n&&(e.pointCache[t.id]=t.point,e.shapeBoundsCache.set(t.id,y.f.translateBounds(e.pointsBoundsCache.get(t.points),t.point)));return e.shapeBoundsCache.get(t.id)},e.shouldRender=function(e,t){return t.points!==e.points||t.style!==e.style||t.isComplete!==e.isComplete},e.hitTestPoint=function(e,t){var n=ye.a.sub(t,e.point);return y.f.pointInPolyline(n,e.points)},e.hitTestLineSegment=function(t,n,r){var a=t.points,i=t.point,o=ye.a.sub(n,i),s=ye.a.sub(r,i),c=e.getBounds(t);if(a.length<=2)return ye.a.distanceToLineSegment(n,r,t.point)<4;if(Object(_e.i)(o,s,c))for(var u=1;u<a.length;u++)if(Object(_e.k)(a[u-1],a[u],o,s).didIntersect)return!0;return!1},e.hitTestBounds=function(t,n){if(!t.rotation){var r=e.getBounds(t);return y.f.boundsContain(n,r)||(y.f.boundsContain(r,n)||Object(_e.b)(r,n).length>0)&&Object(_e.d)(y.f.translateBounds(n,ye.a.neg(t.point)),t.points).length>0}var a=e.getRotatedBounds(t),i=y.f.getFromCache(e.rotatedCache,t,(function(){var e=y.f.getBoundsCenter(y.f.getBoundsFromPoints(t.points));return t.points.map((function(n){return ye.a.rotWith(n,e,t.rotation||0)}))}));return y.f.boundsContain(n,a)||Object(_e.d)(y.f.translateBounds(n,ye.a.neg(t.point)),i).length>0},e}return n}(Ld),Yf=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(f.a)(this,n),(e=t.apply(this,arguments)).type=il.Image,e.canBind=!0,e.canClone=!0,e.isAspectRatioLocked=!0,e.showCloneHandles=!0,e.getShape=function(e){return y.f.deepMerge({id:"image",type:il.Image,name:"Image",parentId:"page",childIndex:1,point:[0,0],size:[1,1],rotation:0,style:su(ou({},md),{isFilled:!0}),assetId:"assetId"},e)},e.Component=Ld.Component((function(t,n){var r=t.shape,a=t.asset,i=void 0===a?{src:""}:a,o=t.isBinding,s=t.isGhost,c=t.meta,u=t.events,l=(t.onShapeChange,r.size),f=r.style,p=Object(m.useRef)(null),h=Object(m.useRef)(null);return Object(m.useLayoutEffect)((function(){var e=h.current;if(e){var t=Object(d.a)(l,2),n=t[0],r=t[1];e.style.width="".concat(n,"px"),e.style.height="".concat(r,"px")}}),[l]),Object(m.createElement)(y.a,ou({ref:n},u),o&&Object(m.createElement)("div",{className:"tl-binding-indicator",style:{position:"absolute",top:"calc(".concat(-e.bindingDistance,"px * var(--tl-zoom))"),left:"calc(".concat(-e.bindingDistance,"px * var(--tl-zoom))"),width:"calc(100% + ".concat(2*e.bindingDistance,"px * var(--tl-zoom))"),height:"calc(100% + ".concat(2*e.bindingDistance,"px * var(--tl-zoom))"),backgroundColor:"var(--tl-selectFill)"}}),Object(m.createElement)(Gf,{ref:h,isDarkMode:c.isDarkMode,isFilled:f.isFilled,isGhost:s},Object(m.createElement)($f,{ref:p,src:i.src,alt:"tl_image_asset",draggable:!1})))})),e.Indicator=Ld.Indicator((function(e){var t=e.shape,n=Object(d.a)(t.size,2),r=n[0],a=n[1];return Object(m.createElement)("rect",{x:0,y:0,rx:2,ry:2,width:Math.max(1,r),height:Math.max(1,a)})})),e.getBounds=function(t){return _d(t,e.boundsCache)},e.shouldRender=function(e,t){return t.size!==e.size||t.style!==e.style},e.transform=Cd,e.transformSingle=Ed,e.getSvgElement=function(t){var n=e.getBounds(t),r=document.createElementNS("http://www.w3.org/2000/svg","image");return r.setAttribute("width","".concat(n.width)),r.setAttribute("height","".concat(n.height)),r.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),r},e}return n}(Ld),Gf=be("div",{pointerEvents:"all",position:"relative",fontFamily:"sans-serif",fontSize:"2em",height:"100%",width:"100%",borderRadius:"3px",perspective:"800px",overflow:"hidden",p:{userSelect:"none"},img:{userSelect:"none"},variants:{isGhost:{false:{opacity:1},true:{transition:"opacity .2s",opacity:Bl}},isFilled:{true:{},false:{}},isDarkMode:{true:{},false:{}}},compoundVariants:[{isFilled:!0,isDarkMode:!0,css:{boxShadow:"2px 3px 12px -2px rgba(0,0,0,.3), 1px 1px 4px rgba(0,0,0,.3), 1px 1px 2px rgba(0,0,0,.3)"}},{isFilled:!0,isDarkMode:!1,css:{boxShadow:"2px 3px 12px -2px rgba(0,0,0,.2), 1px 1px 4px rgba(0,0,0,.16),  1px 1px 2px rgba(0,0,0,.16)"}}]}),$f=be("img",{position:"absolute",top:0,left:0,width:"100%",height:"100%",maxWidth:"100%",minWidth:"100%",pointerEvents:"none",objectFit:"cover",userSelect:"none",borderRadius:2}),qf=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(f.a)(this,n),(e=t.apply(this,arguments)).type=il.Video,e.canBind=!0,e.canEdit=!0,e.canClone=!0,e.isAspectRatioLocked=!0,e.showCloneHandles=!0,e.isStateful=!0,e.getShape=function(e){return y.f.deepMerge({id:"video",type:il.Video,name:"Video",parentId:"page",childIndex:1,point:[0,0],size:[1,1],rotation:0,style:md,assetId:"assetId",isPlaying:!0,currentTime:0},e)},e.Component=Ld.Component((function(t,n){var r=t.shape,a=t.asset,i=void 0===a?{src:""}:a,o=t.isBinding,s=t.isEditing,c=t.isGhost,u=t.meta,l=t.events,f=t.onShapeChange,p=Object(m.useRef)(null),h=Object(m.useRef)(null),v=r.currentTime,g=void 0===v?0:v,b=r.size,w=r.isPlaying,O=r.style;Object(m.useLayoutEffect)((function(){var e=h.current;if(e){var t=Object(d.a)(b,2),n=t[0],r=t[1];e.style.width="".concat(n,"px"),e.style.height="".concat(r,"px")}}),[b]),Object(m.useLayoutEffect)((function(){var e=p.current;e&&(w?e.play():e.pause())}),[w]),Object(m.useLayoutEffect)((function(){var e=p.current;e&&g!==e.currentTime&&(e.currentTime=g)}),[g]);var k=Object(m.useCallback)((function(){null==f||f({id:r.id,isPlaying:!0})}),[]),S=Object(m.useCallback)((function(){null==f||f({id:r.id,isPlaying:!1})}),[]),x=Object(m.useCallback)((function(){var e=p.current;e&&s&&(null==f||f({id:r.id,currentTime:e.currentTime}))}),[s]);return Object(m.createElement)(y.a,ou({ref:n},l),o&&Object(m.createElement)("div",{className:"tl-binding-indicator",style:{position:"absolute",top:-e.bindingDistance,left:-e.bindingDistance,width:"calc(100% + ".concat(2*e.bindingDistance,"px)"),height:"calc(100% + ".concat(2*e.bindingDistance,"px)"),backgroundColor:"var(--tl-selectFill)"}}),Object(m.createElement)(Zf,{ref:h,isDarkMode:u.isDarkMode,isGhost:c,isFilled:O.isFilled},Object(m.createElement)(Jf,{ref:p,id:r.id+"_video",muted:!0,loop:!0,playsInline:!0,disableRemotePlayback:!0,disablePictureInPicture:!0,controls:s,autoPlay:w,onPlay:k,onPause:S,onTimeUpdate:x},Object(m.createElement)("source",{src:i.src}))))})),e.Indicator=Ld.Indicator((function(e){var t=e.shape,n=Object(d.a)(t.size,2),r=n[0],a=n[1];return Object(m.createElement)("rect",{x:0,y:0,rx:2,ry:2,width:Math.max(1,r),height:Math.max(1,a)})})),e.getBounds=function(t){return _d(t,e.boundsCache)},e.shouldRender=function(e,t){return t.size!==e.size||t.style!==e.style||t.isPlaying!==e.isPlaying},e.getSvgElement=function(t){var n=e.getBounds(t),r=document.createElementNS("http://www.w3.org/2000/svg","image");return r.setAttribute("width","".concat(n.width)),r.setAttribute("height","".concat(n.height)),r.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),r},e.transform=Cd,e.transformSingle=Ed,e}return n}(Ld),Zf=be("div",{pointerEvents:"all",position:"relative",fontFamily:"sans-serif",fontSize:"2em",height:"100%",width:"100%",borderRadius:"3px",perspective:"800px",overflow:"hidden",p:{userSelect:"none"},img:{userSelect:"none"},variants:{isGhost:{false:{opacity:1},true:{transition:"opacity .2s",opacity:Bl}},isFilled:{true:{},false:{}},isDarkMode:{true:{},false:{}}},compoundVariants:[{isFilled:!0,isDarkMode:!0,css:{boxShadow:"2px 3px 12px -2px rgba(0,0,0,.3), 1px 1px 4px rgba(0,0,0,.3), 1px 1px 2px rgba(0,0,0,.3)"}},{isFilled:!0,isDarkMode:!1,css:{boxShadow:"2px 3px 12px -2px rgba(0,0,0,.2), 1px 1px 4px rgba(0,0,0,.16),  1px 1px 2px rgba(0,0,0,.16)"}}]}),Jf=be("video",{position:"absolute",top:0,left:0,width:"100%",height:"100%",maxWidth:"100%",minWidth:"100%",pointerEvents:"none",objectFit:"cover",userSelect:"none",borderRadius:2}),Qf=new Kd,ep=new Qd,tp=new of,np=new Xf,rp=new Sf,ap=new Df,ip=new jf,op=new Cf,sp=new Yf,cp=new qf,up=(Rc={},Object(l.a)(Rc,il.Rectangle,Qf),Object(l.a)(Rc,il.Triangle,ep),Object(l.a)(Rc,il.Ellipse,tp),Object(l.a)(Rc,il.Draw,np),Object(l.a)(Rc,il.Arrow,rp),Object(l.a)(Rc,il.Text,ap),Object(l.a)(Rc,il.Group,ip),Object(l.a)(Rc,il.Sticky,op),Object(l.a)(Rc,il.Image,sp),Object(l.a)(Rc,il.Video,cp),Rc),lp=function(){function e(){Object(f.a)(this,e)}return Object(u.a)(e,null,[{key:"getShapeUtil",value:function(e){return function(e){return"string"===typeof e?up[e]:up[e.type]}(e)}},{key:"getSelectedShapes",value:function(t,n){var r=e.getPage(t,n);return e.getSelectedIds(t,n).map((function(e){return r.shapes[e]}))}},{key:"screenToWorld",value:function(t,n){var r=e.getPageState(t,t.appState.currentPageId).camera;return ye.a.sub(ye.a.div(n,r.zoom),r.point)}},{key:"getCameraZoom",value:function(e){return y.f.clamp(e,.1,5)}},{key:"getPage",value:function(e,t){return e.document.pages[t]}},{key:"getPageState",value:function(e,t){return e.document.pageStates[t]}},{key:"getSelectedIds",value:function(t,n){return e.getPageState(t,n).selectedIds}},{key:"getShapes",value:function(t,n){return Object.values(e.getPage(t,n).shapes)}},{key:"getCamera",value:function(t,n){return e.getPageState(t,n).camera}},{key:"getShape",value:function(t,n,r){return e.getPage(t,r).shapes[n]}},{key:"getCenter",value:function(t){return e.getShapeUtil(t).getCenter(t)}},{key:"getBounds",value:function(t){return e.getShapeUtil(t).getBounds(t)}},{key:"getRotatedBounds",value:function(t){return e.getShapeUtil(t).getRotatedBounds(t)}},{key:"getSelectedBounds",value:function(t){return y.f.getCommonBounds(e.getSelectedShapes(t,t.appState.currentPageId).map((function(t){return e.getShapeUtil(t).getBounds(t)})))}},{key:"getParentId",value:function(t,n,r){return e.getShape(t,n,r).parentId}},{key:"getDocumentBranch",value:function(t,n,r){var a=e.getShape(t,n,r);return void 0===a.children?[n]:[n].concat(Object(v.a)(a.children.flatMap((function(n){return e.getDocumentBranch(t,n,r)}))))}},{key:"getSelectedBranchSnapshot",value:function(t,n,r){var a=e.getPage(t,n),i=e.getSelectedIds(t,n).flatMap((function(r){return e.getDocumentBranch(t,r,n).map((function(e){return a.shapes[e]}))})).filter((function(e){return!e.isLocked})).map(y.f.deepClone);return void 0!==r?i.map((function(e){return ou({id:e.id},r(e))})):i}},{key:"getSelectedShapeSnapshot",value:function(t,n,r){var a=e.getSelectedShapes(t,n).filter((function(e){return!e.isLocked})).map(y.f.deepClone);return void 0!==r?a.map((function(e){return ou({id:e.id},r(e))})):a}},{key:"getAllEffectedShapeIds",value:function(t,n,r){var a=e.getPage(t,r),i=new Set(n);return n.forEach((function(e){var t=a.shapes[e];!function e(t){void 0!==t.children&&t.children.filter((function(e){return!i.has(e)})).forEach((function(t){i.add(t),e(a.shapes[t])}))}(t),function e(t){var n=t.parentId;n!==a.id&&(i.has(n)||(i.add(n),e(a.shapes[n])))}(t),i.forEach((function(e){Object.values(a.bindings).filter((function(t){return t.fromId===e||t.toId===e})).forEach((function(t){return i.add(t.fromId===e?t.toId:t.fromId)}))}))})),Array.from(i.values())}},{key:"updateBindings",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4?arguments[4]:void 0,o=ou({},e.getPage(t,i));return Object.values(o.bindings).filter((function(e){return e.fromId===n||e.toId===n})).reduce((function(t,n){return r[n.fromId]||(r[n.fromId]=y.f.deepClone(e.getShape(t,n.fromId,i))),r[n.toId]||(r[n.toId]=y.f.deepClone(e.getShape(t,n.toId,i))),e.onBindingChange(e.getShape(t,n.fromId,i),n,e.getShape(t,n.toId,i)),a[n.fromId]=y.f.deepClone(e.getShape(t,n.fromId,i)),a[n.toId]=y.f.deepClone(e.getShape(t,n.toId,i)),t}),t)}},{key:"getLinkedShapeIds",value:function(t,n,r){for(var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=e.getSelectedIds(t,n),o=e.getPage(t,n),s=new Set(i),c=new Set,u=Object(v.a)(i),l=new Set(Object.values(o.shapes).filter((function(e){var t;return e.type===il.Arrow&&(e.handles.start.bindingId||(null==(t=e.handles)?void 0:t.end.bindingId))}))),d=function(){var e=u.pop();return e&&l.size?c.has(e)?"continue":(c.add(e),void l.forEach((function(t){var n,i,c=t.handles,d=c.start.bindingId,f=c.end.bindingId,p=d?o.bindings[d]:null,h=f?o.bindings[f]:null;p&&p.toId===e?("center"===r||((null==(n=t.decorations)?void 0:n.start)&&h?"left"===r:"right"===r))&&(a&&s.add(t.id),s.add(e),h&&(s.add(h.toId),u.push(h.toId))):h&&h.toId===e&&("center"===r||((null==(i=t.decorations)?void 0:i.end)&&p?"left"===r:"right"===r))&&(a&&s.add(t.id),s.add(e),p&&(s.add(p.toId),u.push(p.toId))),p&&!s.has(p.toId)||h&&!s.has(h.toId)||l.delete(t)}))):"break"};u.length;){var f=d();if("break"===f)break}return Array.from(s.values())}},{key:"getChildIndexAbove",value:function(e,t,n){var r,a=e.document.pages[n],i=a.shapes[t];if(i.parentId===a.id)r=Object.values(a.shapes).filter((function(e){return e.parentId===a.id})).sort((function(e,t){return e.childIndex-t.childIndex}));else{var o=a.shapes[i.parentId];if(!o.children)throw Error("No children in parent!");r=o.children.map((function(e){return a.shapes[e]})).sort((function(e,t){return e.childIndex-t.childIndex}))}var s=r.indexOf(i),c=r[s+1];return c?c.childIndex:i.childIndex+1}},{key:"getBeforeShape",value:function(e,t){return Object.fromEntries(Object.keys(t).map((function(t){return[t,e[t]]})))}},{key:"mutateShapes",value:function(t,n,r,a){var i={},o={};n.forEach((function(n,s){var c=e.getShape(t,n,a);if(!c.isLocked){var u=r(c,s);u&&(i[n]=e.getBeforeShape(c,u),o[n]=u)}}));var s=y.f.deepMerge(t,{document:{pages:Object(l.a)({},t.appState.currentPageId,{shapes:o})}}),c=n.reduce((function(t,n){return e.updateBindings(t,n,i,o,a)}),s);return{before:i,after:o,data:c}}},{key:"createShapes",value:function(t,n,r){return{before:{document:{pages:Object(l.a)({},r,{shapes:ou({},Object.fromEntries(n.flatMap((function(n){var a=[[n.id,void 0]];if(n.parentId!==r){var i=e.getShape(t,n.parentId,r);if(!i.children)throw Error("No children in parent!");a.push([i.id,{children:i.children}])}return a}))))})}},after:{document:{pages:Object(l.a)({},r,{shapes:{shapes:ou({},Object.fromEntries(n.flatMap((function(n){var a=[[n.id,n]];if(n.parentId!==r){var i=e.getShape(t,n.parentId,r);if(!i.children)throw Error("No children in parent!");a.push([i.id,{children:[].concat(Object(v.a)(i.children),[n.id])}])}return a}))))}})}}}}},{key:"deleteShapes",value:function(t,n,r){r=r||t.appState.currentPageId;var a=e.getPage(t,r),i="string"===typeof n[0]?n:n.map((function(e){return e.id}));return{before:{document:{pages:Object(l.a)({},r,{shapes:ou({},Object.fromEntries(i.flatMap((function(e){var t=a.shapes[e],n=[[t.id,t]];if(t.parentId!==r){var i=a.shapes[t.parentId];if(!i.children)throw Error("No children in parent!");n.push([i.id,{children:i.children}])}return n})))),bindings:ou({},Object.fromEntries(Object.values(a.bindings).filter((function(e){return i.includes(e.fromId)||i.includes(e.toId)})).map((function(e){return[e.id,e]}))))})}},after:{document:{pages:Object(l.a)({},r,{shapes:ou({},Object.fromEntries(i.flatMap((function(e){var t=a.shapes[e],n=[[t.id,void 0]];if(t.parentId!==a.id){var r=a.shapes[t.parentId];if(!r.children)throw Error("No children in parent!");n.push([r.id,{children:r.children.filter((function(e){return e!==t.id}))}])}return n}))))})}}}}},{key:"onSessionComplete",value:function(t){var n,r,a=null==(r=(n=e.getShapeUtil(t)).onSessionComplete)?void 0:r.call(n,t);return a?ou(ou({},t),a):t}},{key:"onChildrenChange",value:function(t,n,r){var a,i;if(n.children){var o=null==(i=(a=e.getShapeUtil(n)).onChildrenChange)?void 0:i.call(a,n,n.children.map((function(n){return e.getShape(t,n,r)})));return o?ou(ou({},n),o):n}}},{key:"onBindingChange",value:function(t,n,r){var a,i,o=null==(i=(a=e.getShapeUtil(t)).onBindingChange)?void 0:i.call(a,t,n,r,e.getShapeUtil(r).getBounds(r),e.getShapeUtil(r).getExpandedBounds(r),e.getShapeUtil(r).getCenter(r));return o?ou(ou({},t),o):t}},{key:"transform",value:function(t,n,r){var a=e.getShapeUtil(t).transform(t,n,r);return a?ou(ou({},t),a):t}},{key:"transformSingle",value:function(t,n,r){var a=e.getShapeUtil(t).transformSingle(t,n,r);return a?ou(ou({},t),a):t}},{key:"getRotatedShapeMutation",value:function(e,t,n,r){var a,i,o=ye.a.sub(t,e.point),s=ye.a.rotWith(t,n,r),c=ye.a.toFixed(ye.a.sub(s,o));return void 0!==e.handles?null==(i=(a=this.getShapeUtil(e)).onHandleChange)?void 0:i.call(a,su(ou({},e),{point:c}),Object.fromEntries(Object.entries(e.handles).map((function(e){var t=Object(d.a)(e,2),n=t[0],a=t[1],i=ye.a.toFixed(ye.a.rotWith(a.point,o,r));return[n,su(ou({},a),{point:i})]}))),{shiftKey:!1}):{point:c,rotation:y.f.clampRadians((e.rotation||0)+r)}}},{key:"updateParents",value:function(t,n,r){var a=e.getPage(t,n);if(0!==r.length){var i,o=e.getPage(t,n).shapes,s=Array.from(new Set(r.map((function(e){return o[e].parentId})).values())).filter((function(e){return e!==a.id})),c=Object(g.a)(s);try{for(c.s();!(i=c.n()).done;){var u=i.value,l=o[u];if(!l.children)throw Error("A shape is parented to a shape without a children array.");e.onChildrenChange(t,l,n)}}catch(rm){c.e(rm)}finally{c.f()}e.updateParents(t,n,s)}}},{key:"getBinding",value:function(t,n,r){return e.getPage(t,r).bindings[n]}},{key:"getBindings",value:function(t,n){var r=e.getPage(t,n);return Object.values(r.bindings)}},{key:"getBindableShapeIds",value:function(t){return e.getShapes(t,t.appState.currentPageId).filter((function(t){return e.getShapeUtil(t).canBind})).sort((function(e,t){return t.childIndex-e.childIndex})).map((function(e){return e.id}))}},{key:"getBindingsWithShapeIds",value:function(t,n,r){return Array.from(new Set(e.getBindings(t,r).filter((function(e){return n.includes(e.toId)||n.includes(e.fromId)}))).values())}},{key:"getRelatedBindings",value:function(t,n,r){for(var a=new Set(n),i=e.getPage(t,r),o=Object.values(i.bindings),s=new Set(o.filter((function(e){return a.has(e.toId)||a.has(e.fromId)}))),c=s.size,u=-1;0!==u;)s.forEach((function(e){var t,n=e.fromId,r=Object(g.a)(o);try{for(r.s();!(t=r.n()).done;){var a=t.value;a.fromId===n&&s.add(a),a.toId===n&&s.add(a)}}catch(rm){r.e(rm)}finally{r.f()}})),u=s.size-c,c=s.size;return Array.from(s.values())}},{key:"normalizeText",value:function(t){return t.replace(e.fixNewLines,"\n").split("\n").map((function(e){return e||" "})).join("\n")}},{key:"assertShapeHasProperty",value:function(e,t){if(void 0===e[t])throw new Error}},{key:"warn",value:function(e){console.warn(e)}},{key:"error",value:function(e){console.error(e)}}]),e}(),dp=lp;function fp(e,t,n){var r=e.currentPageId,a=t.map((function(t){return e.getShape(t)})),i=a.map((function(e){return{id:e.id,point:Object(v.a)(e.point),bounds:dp.getBounds(e)}})),o=y.f.getCommonBounds(i.map((function(e){return e.bounds}))),s=o.minX+o.width/2,c=o.minY+o.height/2,u=Object.fromEntries(i.map((function(e){var t,r=e.id,a=e.point,i=e.bounds;return[r,{prev:a,next:(t={},Object(l.a)(t,Zu.CenterVertical,[a[0],c-i.height/2]),Object(l.a)(t,Zu.CenterHorizontal,[s-i.width/2,a[1]]),Object(l.a)(t,Zu.Top,[a[0],o.minY]),Object(l.a)(t,Zu.Bottom,[a[0],o.maxY-i.height]),Object(l.a)(t,Zu.Left,[o.minX,a[1]]),Object(l.a)(t,Zu.Right,[o.maxX-i.width,a[1]]),t)[n]}]}))),d=dp.mutateShapes(e.state,t,(function(e){return u[e.id]?{point:u[e.id].next}:e}),r),f=d.before,p=d.after;return a.forEach((function(t){if(t.type===il.Group){var n=ye.a.sub(p[t.id].point,f[t.id].point);t.children.forEach((function(t){var r=e.getShape(t);f[r.id]={point:r.point},p[r.id]={point:ye.a.add(r.point,n)}})),delete f[t.id],delete p[t.id]}})),{id:"align",before:{document:{pages:Object(l.a)({},r,{shapes:f}),pageStates:Object(l.a)({},r,{selectedIds:t})}},after:{document:{pages:Object(l.a)({},r,{shapes:p}),pageStates:Object(l.a)({},r,{selectedIds:t})}}}}function pp(e,t){return{id:"change_page",before:{appState:{currentPageId:e.currentPageId}},after:{appState:{currentPageId:t}}}}function hp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y.f.uniqueId(),r=e.currentPageId,a=Object.values(e.state.document.pages).sort((function(e,t){return(t.childIndex||0)-(e.childIndex||0)}))[0],i=(null==a?void 0:a.childIndex)?(null==a?void 0:a.childIndex)+1:1,o="New Page",s={id:n,name:o,childIndex:i,shapes:{},bindings:{}},c={id:n,selectedIds:[],camera:{point:t,zoom:1},editingId:void 0,bindingId:void 0,hoveredId:void 0,pointedId:void 0};return{id:"create_page",before:{appState:{currentPageId:r},document:{pages:Object(l.a)({},n,void 0),pageStates:Object(l.a)({},n,void 0)}},after:{appState:{currentPageId:s.id},document:{pages:Object(l.a)({},n,s),pageStates:Object(l.a)({},n,c)}}}}function vp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=e.currentPageId,a={},i={};t.forEach((function(e){a[e.id]=void 0,i[e.id]=e}));var o={},s={};return n.forEach((function(e){o[e.id]=void 0,s[e.id]=e})),{id:"create",before:{document:{pages:Object(l.a)({},r,{shapes:a,bindings:o}),pageStates:Object(l.a)({},r,{selectedIds:Object(v.a)(e.selectedIds)})}},after:{document:{pages:Object(l.a)({},r,{shapes:i,bindings:s}),pageStates:Object(l.a)({},r,{selectedIds:t.map((function(e){return e.id}))})}}}}function gp(e,t){var n,r=e.currentPageId,a=e.document,i=a.pages,o=a.pageStates,s=Object.values(i).sort((function(e,t){return(e.childIndex||0)-(t.childIndex||0)})),c=s.findIndex((function(e){return e.id===t}));return n=t===r?c===s.length-1?s[s.length-2].id:s[c+1].id:r,{id:"delete_page",before:{appState:{currentPageId:t},document:{pages:Object(l.a)({},t,ou({},i[t])),pageStates:Object(l.a)({},t,ou({},o[t]))}},after:{appState:{currentPageId:n},document:{pages:Object(l.a)({},t,void 0),pageStates:Object(l.a)({},t,void 0)}}}}function mp(e,t,n){var r={shapes:{},bindings:{}},a={shapes:{},bindings:{}},i=[],o=new Set,s=new Set;t.filter((function(t){return!dp.getShape(e,t,n).isLocked})).forEach((function(t){o.add(t);var c=dp.getShape(e,t,n);r.shapes[t]=c,a.shapes[t]=void 0,void 0!==c.children&&c.children.forEach((function(t){o.add(t);var i=dp.getShape(e,t,n);r.shapes[t]=i,a.shapes[t]=void 0})),c.parentId!==n&&i.push(dp.getShape(e,c.parentId,n)),c.assetId&&s.add(c.assetId)})),i.forEach((function(i){var s;t.includes(i.id)||(o.add(i.id),r.shapes[i.id]={children:i.children},a.shapes[i.id]={children:i.children.filter((function(e){return!t.includes(e)}))},0===(null==(s=a.shapes[i.id])?void 0:s.children.length)&&(a.shapes[i.id]=void 0,r.shapes[i.id]=dp.getShape(e,i.id,n)))}));var c=dp.getPage(e,n);return Object.values(c.bindings).filter((function(e){return o.has(e.fromId)||o.has(e.toId)})).forEach((function(e){for(var t=function(){var t=i[n];if(void 0===a.shapes[t]){r.bindings[e.id]=e,a.bindings[e.id]=void 0;var s=c.shapes[t];s&&s.handles&&Object.values(s.handles).filter((function(t){return t.bindingId===e.id})).forEach((function(n){var i,s,c,u,d,f;r.shapes[t]=su(ou({},r.shapes[t]),{handles:su(ou({},null==(i=r.shapes[t])?void 0:i.handles),Object(l.a)({},n.id,su(ou({},null==(c=null==(s=r.shapes[t])?void 0:s.handles)?void 0:c[n.id]),{bindingId:e.id})))}),o.has(t)||(a.shapes[t]=su(ou({},a.shapes[t]),{handles:su(ou({},null==(u=a.shapes[t])?void 0:u.handles),Object(l.a)({},n.id,su(ou({},null==(f=null==(d=a.shapes[t])?void 0:d.handles)?void 0:f[n.id]),{bindingId:void 0})))}))}))}},n=0,i=[e.toId,e.fromId];n<i.length;n++)t()})),Object.values(e.document.pages).flatMap((function(e){return Object.values(e.shapes)})).forEach((function(e){"assetId"in e&&e.assetId&&!o.has(e.id)&&s.delete(e.assetId)})),{before:r,after:a,assetsToRemove:Array.from(s)}}dp.copyStringToClipboard=function(e){try{navigator.clipboard.writeText(e)}catch(a){var t=document.createElement("textarea");t.setAttribute("position","fixed"),t.setAttribute("top","0"),t.setAttribute("readonly","true"),t.setAttribute("contenteditable","true"),t.style.position="fixed",t.value=e,document.body.appendChild(t),t.focus(),t.select();try{var n=document.createRange();n.selectNodeContents(t);var r=window.getSelection();r&&(r.removeAllRanges(),r.addRange(n),t.setSelectionRange(0,t.value.length))}catch(rm){}finally{document.body.removeChild(t)}}},dp.flattenShape=function(e,t){var n;return[t].concat(Object(v.a)((null!=(n=t.children)?n:[]).map((function(t){return lp.getShape(e,t,e.appState.currentPageId)})).sort((function(e,t){return e.childIndex-t.childIndex})).flatMap((function(t){return lp.flattenShape(e,t)}))))},dp.flattenPage=function(e,t){return Object.values(e.document.pages[t].shapes).sort((function(e,t){return e.childIndex-t.childIndex})).reduce((function(t,n){return[].concat(Object(v.a)(t),Object(v.a)(lp.flattenShape(e,n)))}),[])},dp.getTopChildIndex=function(e,t){var n=lp.getShapes(e,t);return 0===n.length?1:n.filter((function(e){return e.parentId===t})).sort((function(e,t){return t.childIndex-e.childIndex}))[0].childIndex+1},dp.fixNewLines=/\r?\n|\r/g;var bp=function(e,t){var n=ou({},e);return t.forEach((function(e){return n[e]=void 0})),n};function yp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.currentPageId,r=e.pageState,a=e.selectedIds,i=e.document.assets,o=mp(e.state,t,n),s=o.before,c=o.after,u=o.assetsToRemove,d=bp(i,u);return{id:"delete",before:{document:{assets:i,pages:Object(l.a)({},n,s),pageStates:Object(l.a)({},n,{selectedIds:Object(v.a)(e.selectedIds)})}},after:{document:{assets:d,pages:Object(l.a)({},n,c),pageStates:Object(l.a)({},n,{selectedIds:a.filter((function(e){return!t.includes(e)})),hoveredId:r.hoveredId&&t.includes(r.hoveredId)?void 0:r.hoveredId})}}}}function wp(e,t,n){var r=e.currentPageId,a=t.map((function(t){return e.getShape(t)})),i=Object.fromEntries(function(e,t){var n=e.map((function(e){var t=dp.getShapeUtil(e);return{id:e.id,point:Object(v.a)(e.point),bounds:t.getBounds(e),center:t.getCenter(e)}})),r=n.length,a=y.f.getCommonBounds(n.map((function(e){return e.bounds}))),i=[];switch(t){case tl.Horizontal:var o=n.reduce((function(e,t){return e+t.bounds.width}),0);if(o>a.width){var s=n.sort((function(e,t){return e.bounds.minX-t.bounds.minX}))[0],c=n.sort((function(e,t){return t.bounds.maxX-e.bounds.maxX}))[0],u=n.filter((function(e){return e!==s&&e!==c})).sort((function(e,t){return e.center[0]-t.center[0]})),l=(c.center[0]-s.center[0])/(r-1),d=s.center[0]+l;u.forEach((function(e,t){var n=e.id,r=e.point,a=e.bounds;i.push({id:n,prev:r,next:[d+l*t-a.width/2,a.minY]})}))}else{var f=n.sort((function(e,t){return e.center[0]-t.center[0]})),p=a.minX,h=(a.width-o)/(r-1);f.forEach((function(e){var t=e.id,n=e.point,r=e.bounds;i.push({id:t,prev:n,next:[p,r.minY]}),p+=r.width+h}))}break;case tl.Vertical:var g=n.reduce((function(e,t){return e+t.bounds.height}),0);if(g>a.height){var m=n.sort((function(e,t){return e.bounds.minY-t.bounds.minY}))[0],b=n.sort((function(e,t){return t.bounds.maxY-e.bounds.maxY}))[0],w=n.filter((function(e){return e!==m&&e!==b})).sort((function(e,t){return e.center[1]-t.center[1]})),O=(b.center[1]-m.center[1])/(r-1),k=m.center[1]+O;w.forEach((function(e,t){var n=e.id,r=e.point,a=e.bounds;i.push({id:n,prev:r,next:[a.minX,k+O*t-a.height/2]})}))}else{var S=n.sort((function(e,t){return e.center[1]-t.center[1]})),x=a.minY,j=(a.height-g)/(r-1);S.forEach((function(e){var t=e.id,n=e.point,r=e.bounds;i.push({id:t,prev:n,next:[r.minX,x]}),x+=r.height+j}))}}return i}(a,n).map((function(e){return[e.id,e]}))),o=dp.mutateShapes(e.state,t.filter((function(e){return void 0!==i[e]})),(function(e){return{point:i[e.id].next}}),r),s=o.before,c=o.after;return a.forEach((function(t){if(t.type===il.Group){var n=ye.b.sub(c[t.id].point,s[t.id].point);t.children.forEach((function(t){var r=e.getShape(t);s[r.id]={point:r.point},c[r.id]={point:ye.b.add(r.point,n)}})),delete s[t.id],delete c[t.id]}})),{id:"distribute",before:{document:{pages:Object(l.a)({},r,{shapes:s}),pageStates:Object(l.a)({},r,{selectedIds:t})}},after:{document:{pages:Object(l.a)({},r,{shapes:c}),pageStates:Object(l.a)({},r,{selectedIds:t})}}}}function Op(e,t){var n=y.f.uniqueId(),r=e.currentPageId,a=e.page,i=e.pageState.camera,o=su(ou({},a),{id:n,name:a.name+" Copy",shapes:Object.fromEntries(Object.entries(a.shapes).map((function(e){var r=Object(d.a)(e,2),a=r[0],i=r[1];return[a,su(ou({},i),{parentId:i.parentId===t?n:i.parentId})]})))});return{id:"duplicate_page",before:{appState:{currentPageId:r},document:{pages:Object(l.a)({},n,void 0),pageStates:Object(l.a)({},n,void 0)}},after:{appState:{currentPageId:n},document:{pages:Object(l.a)({},n,o),pageStates:Object(l.a)({},n,su(ou({},a),{id:n,selectedIds:[],camera:ou({},i),editingId:void 0,bindingId:void 0,hoveredId:void 0,pointedId:void 0}))}}}}function kp(e,t,n){var r=e.selectedIds,a=e.currentPageId,i=e.page,o=(e.shapes,{shapes:{},bindings:{}}),s={shapes:{},bindings:{}},c={},u=t.map((function(t){return e.getShape(t)})).filter((function(e){return!t.includes(e.parentId)}));u.forEach((function(t){var n=y.f.uniqueId();if(o.shapes[n]=void 0,s.shapes[n]=su(ou({},y.f.deepClone(t)),{id:n,childIndex:dp.getChildIndexAbove(e.state,t.id,a)}),t.children&&(s.shapes[n].children=[]),t.parentId!==a){var r=e.getShape(t.parentId);o.shapes[r.id]=su(ou({},o.shapes[r.id]),{children:r.children}),s.shapes[r.id]=su(ou({},s.shapes[r.id]),{children:[].concat(Object(v.a)((s.shapes[r.id]||r).children),[n])})}c[t.id]=n})),u.forEach((function(t){t.children&&t.children.forEach((function(n){var r,i,u=e.getShape(n),l=y.f.uniqueId(),d=c[t.id];o.shapes[l]=void 0,s.shapes[l]=su(ou({},y.f.deepClone(u)),{id:l,parentId:d,childIndex:dp.getChildIndexAbove(e.state,u.id,a)}),c[n]=l,null==(i=null==(r=s.shapes[c[t.id]])?void 0:r.children)||i.push(l)}))}));var d=new Set(Object.keys(c));Object.values(i.bindings).filter((function(e){return d.has(e.fromId)||d.has(e.toId)})).forEach((function(e){if(d.has(e.fromId))if(d.has(e.toId)){var t=y.f.uniqueId(),n=su(ou({},y.f.deepClone(e)),{id:t,fromId:c[e.fromId],toId:c[e.toId]});o.bindings[t]=void 0,s.bindings[t]=n;var r=s.shapes[n.fromId];Object.values(r.handles).forEach((function(n){n.bindingId===e.id&&(n.bindingId=t)}))}else{var a=s.shapes[c[e.fromId]];Object.values(a.handles).forEach((function(t){t.bindingId===e.id&&(t.bindingId=void 0)}))}}));var f=Object.values(s.shapes);if(n){var p=y.f.getCommonBounds(f.map((function(e){return dp.getBounds(e)}))),h=y.f.getBoundsCenter(p);f.forEach((function(e){e.point&&(e.point=ye.a.sub(n,ye.a.sub(h,e.point)))}))}else{var g=[16,16];f.forEach((function(e){e.point&&(e.point=ye.a.add(e.point,g))}))}return f.forEach((function(e){e.isLocked&&(e.isLocked=!1)})),{id:"duplicate",before:{document:{pages:Object(l.a)({},a,o),pageStates:Object(l.a)({},a,{selectedIds:r})}},after:{document:{pages:Object(l.a)({},a,s),pageStates:Object(l.a)({},a,{selectedIds:Array.from(d.values()).map((function(e){return c[e]}))})}}}}function Sp(e,t,n){var r=e.selectedIds,a=e.currentPageId,i=e.shapes.map((function(e){return dp.getBounds(e)})),o=y.f.getCommonBounds(i),s=dp.mutateShapes(e.state,t,(function(e){var t=dp.getBounds(e);switch(n){case rl.Horizontal:var r=y.f.getRelativeTransformedBoundingBox(o,o,t,!0,!1);return dp.getShapeUtil(e).transform(e,r,{type:y.d.TopLeft,scaleX:-1,scaleY:1,initialShape:e,transformOrigin:[.5,.5]});case rl.Vertical:var a=y.f.getRelativeTransformedBoundingBox(o,o,t,!1,!0);return dp.getShapeUtil(e).transform(e,a,{type:y.d.TopLeft,scaleX:1,scaleY:-1,initialShape:e,transformOrigin:[.5,.5]})}}),a),c=s.before,u=s.after;return{id:"flip",before:{document:{pages:Object(l.a)({},a,{shapes:c}),pageStates:Object(l.a)({},a,{selectedIds:r})}},after:{document:{pages:Object(l.a)({},a,{shapes:u}),pageStates:Object(l.a)({},a,{selectedIds:t})}}}}function xp(e,t,n,r){var a,i;if(!(t.length<2)){var o,s={},c={},u={},d={},f=Object(v.a)(t),p=[],h=[],m=[],b=Object(g.a)(t);try{for(b.s();!(o=b.n()).done;){var w=o.value,O=e.getShape(w);if(!O.isLocked)if(void 0===O.children)p.push(O);else{var k=O.children.filter((function(t){return!e.getShape(t).isLocked}));m.push(O),f.push.apply(f,Object(v.a)(k)),p.push.apply(p,Object(v.a)(k.map((function(t){return e.getShape(t)})).filter(Boolean)))}}}catch(rm){b.e(rm)}finally{b.f()}if(p.every((function(e){return e.parentId===p[0].parentId})))if(p[0].parentId!==r)if((null==(a=e.getShape(p[0].parentId).children)?void 0:a.length)===f.length)return;var S=dp.flattenPage(e.state,r),x=Object.fromEntries(p.map((function(e){return[e.id,S.indexOf(e)]}))),j=p.sort((function(e,t){return x[e.id]-x[t.id]})),_=r,C=(j.filter((function(e){return e.parentId===r}))[0]||j[0]).childIndex,E=y.f.getCommonBounds(p.map((function(e){return dp.getBounds(e)})));for(s[n]=void 0,c[n]=dp.getShapeUtil(il.Group).create({id:n,childIndex:C,parentId:_,point:[E.minX,E.minY],size:[E.width,E.height],children:j.map((function(e){return e.id}))}),j.forEach((function(t,a){if(t.parentId!==r){var i=e.getShape(t.parentId);m.push(i)}s[t.id]=su(ou({},s[t.id]),{parentId:t.parentId,childIndex:t.childIndex}),c[t.id]=su(ou({},c[t.id]),{parentId:n,childIndex:a+1})}));m.length>0;){var I=m.pop();if(!I)break;var P=((null==(i=s[I.id])?void 0:i.children)||I.children).filter((function(e){return e&&!(f.includes(e)||h.includes(e))}));0===P.length?(s[I.id]=I,c[I.id]=void 0,I.parentId!==r&&(h.push(I.id),m.push(e.getShape(I.parentId)))):(s[I.id]=su(ou({},s[I.id]),{children:I.children}),c[I.id]=su(ou({},c[I.id]),{children:P}))}return e.bindings.forEach((function(t){for(var n=function(){var n=a[r];if(void 0===c[n]){u[t.id]=t,d[t.id]=void 0;var i=e.getShape(n);i.handles&&Object.values(i.handles).filter((function(e){return e.bindingId===t.id})).forEach((function(e){var r,a;s[n]=su(ou({},s[n]),{handles:su(ou({},null==(r=s[n])?void 0:r.handles),Object(l.a)({},e.id,{bindingId:t.id}))}),h.includes(n)||(c[n]=su(ou({},c[n]),{handles:su(ou({},null==(a=c[n])?void 0:a.handles),Object(l.a)({},e.id,{bindingId:void 0}))}))}))}},r=0,a=[t.toId,t.fromId];r<a.length;r++)n()})),{id:"group",before:{document:{pages:Object(l.a)({},r,{shapes:s,bindings:u}),pageStates:Object(l.a)({},r,{selectedIds:t})}},after:{document:{pages:Object(l.a)({},r,{shapes:c,bindings:u}),pageStates:Object(l.a)({},r,{selectedIds:[n]})}}}}}function jp(e,t,n,r,a){var i,o,s,c,u=e.page,d={before:{shapes:{},bindings:{}},after:{shapes:{},bindings:{}}},f={before:{shapes:{},bindings:{}},after:{shapes:{},bindings:{}}},p=new Set,h=new Set;t.map((function(t){return e.getShape(t,r)})).filter((function(e){return!e.isLocked})).forEach((function(t){p.add(t.id),h.add(t),void 0!==t.children&&t.children.forEach((function(t){p.add(t),h.add(e.getShape(t,r))}))}));var v=dp.getTopChildIndex(e.state,a),g=Array.from(h.values());g.forEach((function(t,n){if(d.before.shapes[t.id]=t,d.after.shapes[t.id]=void 0,f.before.shapes[t.id]=void 0,f.after.shapes[t.id]=t,!p.has(t.parentId)&&(f.after.shapes[t.id]=su(ou({},t),{parentId:a,childIndex:v+n}),t.parentId!==r)){var i=e.getShape(t.parentId,r);d.before.shapes[i.id]={children:i.children},d.after.shapes[i.id]={children:i.children.filter((function(e){return e!==t.id}))}}})),Object.values(u.bindings).filter((function(e){return p.has(e.fromId)||p.has(e.toId)})).forEach((function(t){d.before.bindings[t.id]=t,d.after.bindings[t.id]=void 0;var n=e.getShape(t.fromId,r);if(p.has(t.fromId)&&p.has(t.toId))f.before.bindings[t.id]=void 0,f.after.bindings[t.id]=t;else if(p.has(t.fromId)){var a=e.getShape(t.fromId,r),i=Object.values(n.handles).find((function(e){return e.bindingId===t.id})).id,o=f.after.shapes[a.id];o.handles=su(ou({},o.handles),Object(l.a)({},i,su(ou({},o.handles[i]),{bindingId:void 0})))}else{var s=e.getShape(t.fromId,r),c=Object.values(n.handles).find((function(e){return e.bindingId===t.id}));d.before.shapes[s.id]={handles:Object(l.a)({},c.id,{bindingId:t.id})},d.after.shapes[s.id]={handles:Object(l.a)({},c.id,{bindingId:void 0})}}}));var m=e.state.document.pageStates[a],b=y.f.getCommonBounds(g.map((function(e){return dp.getBounds(e)}))),w=dp.getCameraZoom(n.width<n.height?(n.width-128)/b.width:(n.height-128)/b.height),O=(n.width-b.width*w)/2/w,k=(n.height-b.height*w)/2/w,S=ye.a.toFixed(ye.a.add([-b.minX,-b.minY],[O,k]));return{id:"move_to_page",before:{appState:{currentPageId:r},document:{pages:(i={},Object(l.a)(i,r,d.before),Object(l.a)(i,a,f.before),i),pageStates:(o={},Object(l.a)(o,r,{selectedIds:t}),Object(l.a)(o,a,{selectedIds:m.selectedIds,camera:m.camera}),o)}},after:{appState:{currentPageId:a},document:{pages:(s={},Object(l.a)(s,r,d.after),Object(l.a)(s,a,f.after),s),pageStates:(c={},Object(l.a)(c,r,{selectedIds:[]}),Object(l.a)(c,a,{selectedIds:t,camera:{zoom:w,point:S}}),c)}}}}function _p(e,t,n){var r,a,i,o=e.currentPageId,s=e.page,c=new Set(t.map((function(t){return e.getShape(t).parentId}))),u={before:{},after:{}};return Array.from(c.values()).forEach((function(c){var l=[];if(c===s.id)l=Object.values(s.shapes).sort((function(e,t){return e.childIndex-t.childIndex}));else{var d=e.getShape(c);if(!d.children)throw Error("No children in parent!");l=d.children.map((function(t){return e.getShape(t)})).sort((function(e,t){return e.childIndex-t.childIndex}))}var f=l.map((function(e){return e.id})),p=t.filter((function(e){return f.includes(e)})).map((function(e){return f.indexOf(e)})).sort((function(e,t){return e-t}));if(p.length!==f.length)switch(n){case $u.ToBack:for(var h=0;h<f.length;h++)if(!p.includes(h)){r=h;break}a=l[r].childIndex,i=a/(p.length+1),u=dp.mutateShapes(e.state,p.map((function(e){return l[e].id})).reverse(),(function(e,t){return{childIndex:a-(t+1)*i}}),o);break;case $u.ToFront:for(var v=f.length-1;v>=0;v--)if(!p.includes(v)){r=v;break}a=l[r].childIndex,i=1,u=dp.mutateShapes(e.state,p.map((function(e){return l[e].id})),(function(e,t){return{childIndex:a+(t+1)}}),o);break;case $u.Backward:for(var g={},m=f.length-1;m>=0;m--)if(p.includes(m))for(var b=m;b>=0;b--)if(!p.includes(b)){var y=l[b].childIndex,w=void 0,O=void 0;0===b?(w=y/2,O=y/2/(m-b+1)):(w=l[b-1].childIndex,w+=O=(y-w)/(m-b+1));for(var k=0;k<m-b;k++)g[l[b+k+1].id]=w+O*k;break}Object.values(g).length>0&&(u=dp.mutateShapes(e.state,p.map((function(e){return l[e].id})),(function(e){return{childIndex:g[e.id]}}),o));break;case $u.Forward:for(var S={},x=0;x<f.length;x++)if(p.includes(x))for(var j=x;j<f.length;j++)if(!p.includes(j)){a=l[j].childIndex;for(var _=j===f.length-1?1:(l[j+1].childIndex-a)/(j-x+1),C=0;C<j-x;C++)S[l[x+C].id]=a+_*(C+1);break}Object.values(S).length>0&&(u=dp.mutateShapes(e.state,p.map((function(e){return l[e].id})),(function(e){return{childIndex:S[e.id]}}),o))}})),{id:"move",before:{document:{pages:Object(l.a)({},o,{shapes:u.before}),pageStates:Object(l.a)({},o,{selectedIds:t})}},after:{document:{pages:Object(l.a)({},o,{shapes:u.after}),pageStates:Object(l.a)({},o,{selectedIds:t})}}}}function Cp(e,t,n){var r=e.page;return{id:"rename_page",before:{document:{pages:Object(l.a)({},t,{name:r.name})}},after:{document:{pages:Object(l.a)({},t,{name:n})}}}}function Ep(e,t,n){var r=e.currentPageId,a=dp.mutateShapes(e.state,t,(function(t){var n,r;return null==(r=(n=e.getShapeUtil(t)).onDoubleClickBoundsHandle)?void 0:r.call(n,t)}),n),i=a.before,o=a.after;return{id:"reset_bounds",before:{document:{pages:Object(l.a)({},r,{shapes:i}),pageStates:Object(l.a)({},r,{selectedIds:t})}},after:{document:{pages:Object(l.a)({},r,{shapes:o}),pageStates:Object(l.a)({},r,{selectedIds:t})}}}}var Ip=2*Math.PI;function Pp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-Ip/4,r=e.currentPageId,a={},i={},o=t.flatMap((function(t){var n=e.getShape(t);return n.children?n.children.map((function(t){return e.getShape(t)})):n})).filter((function(e){return!e.isLocked})),s=y.f.getBoundsCenter(y.f.getCommonBounds(o.map((function(e){return dp.getBounds(e)}))));return o.forEach((function(e){var t=dp.getRotatedShapeMutation(e,dp.getCenter(e),s,n);t&&(a[e.id]=dp.getBeforeShape(e,t),i[e.id]=t)})),{id:"rotate",before:{document:{pages:Object(l.a)({},r,{shapes:a}),pageStates:Object(l.a)({},r,{selectedIds:t})}},after:{document:{pages:Object(l.a)({},r,{shapes:i}),pageStates:Object(l.a)({},r,{selectedIds:t})}}}}function Mp(e,t,n){var r=e.currentPageId,a=e.selectedIds,i=t.map((function(t){return e.getShape(t)})),o=i.map((function(e){return dp.getBounds(e)})),s=y.f.getCommonBounds(o),c=t.flatMap((function(t){var n=e.getShape(t);return n.children?n.children:n.id})).filter((function(t){return!e.getShape(t).isLocked})),u=dp.mutateShapes(e.state,c,(function(e){var t=dp.getBounds(e);switch(n){case Qu.Horizontal:var r=su(ou({},t),{minX:s.minX,maxX:s.maxX,width:s.width});return dp.getShapeUtil(e).transformSingle(e,r,{type:y.d.TopLeft,scaleX:r.width/t.width,scaleY:1,initialShape:e,transformOrigin:[.5,.5]});case Qu.Vertical:var a=su(ou({},t),{minY:s.minY,maxY:s.maxY,height:s.height});return dp.getShapeUtil(e).transformSingle(e,a,{type:y.d.TopLeft,scaleX:1,scaleY:a.height/t.height,initialShape:e,transformOrigin:[.5,.5]})}}),r),d=u.before,f=u.after;return i.forEach((function(e){e.type===il.Group&&(delete d[e.id],delete f[e.id])})),{id:"stretch",before:{document:{pages:Object(l.a)({},r,{shapes:d}),pageStates:Object(l.a)({},r,{selectedIds:a})}},after:{document:{pages:Object(l.a)({},r,{shapes:f}),pageStates:Object(l.a)({},r,{selectedIds:t})}}}}function Ap(e,t,n){var r=e.currentPageId,a=e.selectedIds,i=t.flatMap((function(t){return dp.getDocumentBranch(e.state,t,r)})).filter((function(t){return!e.getShape(t).isLocked})),o={},s={};return i.map((function(t){return e.getShape(t)})).filter((function(e){return!e.isLocked})).forEach((function(t){o[t.id]={style:ou({},Object.fromEntries(Object.keys(n).map((function(e){return[e,t.style[e]]}))))},s[t.id]={style:n},t.type===il.Text&&(o[t.id].point=t.point,s[t.id].point=ye.a.toFixed(ye.a.add(t.point,ye.a.sub(e.getShapeUtil(t).getCenter(t),e.getShapeUtil(t).getCenter(su(ou({},t),{style:ou(ou({},t.style),n)}))))))})),{id:"style",before:{document:{pages:Object(l.a)({},r,{shapes:o}),pageStates:Object(l.a)({},r,{selectedIds:a})},appState:{currentStyle:ou({},e.appState.currentStyle)}},after:{document:{pages:Object(l.a)({},r,{shapes:s}),pageStates:Object(l.a)({},r,{selectedIds:t})},appState:{currentStyle:n}}}}function Tp(e,t,n){var r=e.currentPageId,a=e.selectedIds,i=Object.fromEntries(t.map((function(t){var r;return[t,{decorations:Object(l.a)({},n,null==(r=e.getShape(t).decorations)?void 0:r[n])}]}))),o=Object.fromEntries(t.filter((function(t){return!e.getShape(t).isLocked})).map((function(t){var r;return[t,{decorations:Object(l.a)({},n,(null==(r=e.getShape(t).decorations)?void 0:r[n])?void 0:sl.Arrow)}]})));return{id:"toggle_decorations",before:{document:{pages:Object(l.a)({},r,{shapes:i}),pageStates:Object(l.a)({},r,{selectedIds:a})}},after:{document:{pages:Object(l.a)({},r,{shapes:o}),pageStates:Object(l.a)({},r,{selectedIds:t})}}}}function Dp(e,t,n){var r=e.currentPageId,a=t.map((function(t){return e.getShape(t)})).filter((function(e){return"isLocked"===n||!e.isLocked})),i=a.every((function(e){return e[n]})),o={},s={};return a.forEach((function(e){o[e.id]=Object(l.a)({},n,e[n]),s[e.id]=Object(l.a)({},n,!i)})),{id:"toggle",before:{document:{pages:Object(l.a)({},r,{shapes:o}),pageStates:Object(l.a)({},r,{selectedIds:t})}},after:{document:{pages:Object(l.a)({},r,{shapes:s}),pageStates:Object(l.a)({},r,{selectedIds:t})}}}}function Rp(e,t,n){var r=e.currentPageId,a=e.selectedIds;e.rotationInfo.selectedIds=Object(v.a)(a);var i={shapes:{},bindings:{}},o={shapes:{},bindings:{}},s=t.flatMap((function(t){var n=e.getShape(t);return n.children?n.children:n.id})).filter((function(t){return!e.getShape(t).isLocked})),c=dp.mutateShapes(e.state,s,(function(e){return{point:ye.a.toFixed(ye.a.add(e.point,n))}}),r);return i.shapes=c.before,o.shapes=c.after,dp.getBindings(e.state,r).filter((function(e){return t.includes(e.fromId)&&!t.includes(e.toId)})).forEach((function(t){i.bindings[t.id]=t,o.bindings[t.id]=void 0;for(var n=function(){var n=a[r],s=e.getShape(n);if(!s.handles)return"continue";Object.values(s.handles).filter((function(e){return e.bindingId===t.id})).forEach((function(e){var r,a;i.shapes[n]=su(ou({},i.shapes[n]),{handles:su(ou({},null==(r=i.shapes[n])?void 0:r.handles),Object(l.a)({},e.id,{bindingId:t.id}))}),o.shapes[n]=su(ou({},o.shapes[n]),{handles:su(ou({},null==(a=o.shapes[n])?void 0:a.handles),Object(l.a)({},e.id,{bindingId:void 0}))})}))},r=0,a=[t.toId,t.fromId];r<a.length;r++)n()})),{id:"translate",before:{document:{pages:Object(l.a)({},r,i),pageStates:Object(l.a)({},r,{selectedIds:t})}},after:{document:{pages:Object(l.a)({},r,o),pageStates:Object(l.a)({},r,{selectedIds:t})}}}}function Bp(e,t,n,r){var a=e.bindings,i={},o={},s={},c={},u=t,d=t.filter((function(e){return!n.find((function(t){return t.id===e}))}));return n.filter((function(e){return!e.isLocked})).forEach((function(t){var n=[],u=[];i[t.id]=t,o[t.id]=void 0,t.children.forEach((function(t){d.push(t);var a=e.getShape(t,r);n.push(a)}));var f=t.childIndex,p=(dp.getChildIndexAbove(e.state,t.id,r)-f)/n.length;n.sort((function(e,t){return e.childIndex-t.childIndex})).forEach((function(e,t){i[e.id]={parentId:e.parentId,childIndex:e.childIndex},o[e.id]={parentId:r,childIndex:f+p*t}})),a.filter((function(e){return e.toId===t.id||e.fromId===t.id})).forEach((function(t){for(var n=function(){var n=d[a];if(void 0===o[n]){s[t.id]=t,c[t.id]=void 0;var f=e.getShape(n,r);f.handles&&Object.values(f.handles).filter((function(e){return e.bindingId===t.id})).forEach((function(e){var r,a;i[n]=su(ou({},i[n]),{handles:su(ou({},null==(r=i[n])?void 0:r.handles),Object(l.a)({},e.id,{bindingId:t.id}))}),u.includes(n)||(o[n]=su(ou({},o[n]),{handles:su(ou({},null==(a=o[n])?void 0:a.handles),Object(l.a)({},e.id,{bindingId:void 0}))}))}))}},a=0,d=[t.toId,t.fromId];a<d.length;a++)n()}))})),{id:"ungroup",before:{document:{pages:Object(l.a)({},r,{shapes:i,bindings:s}),pageStates:Object(l.a)({},r,{selectedIds:u})}},after:{document:{pages:Object(l.a)({},r,{shapes:o,bindings:s}),pageStates:Object(l.a)({},r,{selectedIds:d})}}}}function Lp(e,t,n){var r=t.map((function(e){return e.id})),a=dp.mutateShapes(e.state,r.filter((function(t){return!e.getShape(t,n).isLocked})),(function(e,n){return t[n]}),n);return{id:"update",before:{document:{pages:Object(l.a)({},n,{shapes:a.before})}},after:{document:{pages:Object(l.a)({},n,{shapes:a.after})}}}}function Fp(e,t,n){var r=e.currentPageId,a=e.selectedIds,i=t.map((function(t){return e.getShape(t)})).filter((function(e){return!!n.isLocked||!e.isLocked})),o={},s={},c=Object.keys(n);return i.forEach((function(e){o[e.id]=Object.fromEntries(c.map((function(t){return[t,e[t]]}))),s[e.id]=n})),{id:"set_props",before:{document:{pages:Object(l.a)({},r,{shapes:o}),pageStates:Object(l.a)({},r,{selectedIds:a})}},after:{document:{pages:Object(l.a)({},r,{shapes:s}),pageStates:Object(l.a)({},r,{selectedIds:a})}}}}var Hp,zp,Np=function e(t){Object(f.a)(this,e),this.app=t},Up=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e,r,a){var i,s,c,u,d=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(f.a)(this,n),(i=t.call(this,e)).type=Wu.Arrow,i.performanceMode=void 0,i.status=Yu.TranslatingHandle,i.newStartBindingId=y.f.uniqueId(),i.draggedBindingId=y.f.uniqueId(),i.didBind=!1,i.start=function(){},i.update=function(){var e,t,n,r=Object(o.a)(i).initialShape,a=i.app,s=a.currentPoint,c=a.shiftKey,u=a.altKey,d=a.metaKey,f=a.currentGrid,p=a.settings.showGrid,h=i.app.getShape(r.id);if(!h.isLocked){var v=h.handles,m=i.handleId;if(v[m].canBind){var b=ye.a.sub(s,v[m].point);if(c){var w=v["start"===m?"end":"start"].point,O=v[m].point,k=ye.a.toFixed(ye.a.sub(ye.a.add(O,b),h.point)),S=ye.a.angle(w,k),x=ye.a.rotWith(k,w,y.f.snapAngleToSegments(S,24)-S);b=ye.a.add(b,ye.a.sub(x,k))}var j=ye.a.sub(ye.a.add(v[m].point,b),h.point),_=su(ou({},v[m]),{point:p?ye.a.snap(j,f):ye.a.toFixed(j),bindingId:void 0}),C=up[il.Arrow],E=null==(e=C.onHandleChange)?void 0:e.call(C,h,Object(l.a)({},m,_));if(E){var I,P={shape:y.f.deepMerge(h,E),bindings:{}};if(i.initialBinding&&(P.bindings[i.initialBinding.id]=void 0),i.startBindingShapeId){var M,A=i.app.page.shapes[i.startBindingShapeId],T=dp.getShapeUtil(A);if(!d){var D=T.getCenter(A),R=P.shape.handles.start,B=ye.a.add(R.point,P.shape.point),L=D,F=ye.a.uni(ye.a.sub(B,L)),H=T.hitTestPoint(A,s);M=i.findBindingPoint(h,A,"start",i.newStartBindingId,D,L,F,H)}if(M){i.didBind=!0,P.bindings[i.newStartBindingId]=M,P.shape.handles=su(ou({},P.shape.handles),{start:su(ou({},P.shape.handles.start),{bindingId:M.id})});var z=i.app.page.shapes[i.startBindingShapeId],N=dp.getShapeUtil(z),U=null==(n=(t=dp.getShapeUtil(P.shape.type)).onBindingChange)?void 0:n.call(t,P.shape,M,z,N.getBounds(z),N.getExpandedBounds(z),N.getCenter(z));U&&Object.assign(P.shape,U)}else i.didBind=i.didBind||!1,i.app.page.bindings[i.newStartBindingId]&&(P.bindings[i.newStartBindingId]=void 0),h.handles.start.bindingId===i.newStartBindingId&&(P.shape.handles=su(ou({},P.shape.handles),{start:su(ou({},P.shape.handles.start),{bindingId:void 0})}))}if(!d){var K,V=P.shape.handles[i.handleId],W=P.shape.handles["start"===i.handleId?"end":"start"],X=ye.a.add(W.point,P.shape.point),Y=ye.a.add(V.point,P.shape.point),G=ye.a.uni(ye.a.sub(Y,X)),$=i.bindableShapeIds.map((function(e){return i.app.page.shapes[e]})),q=Object(g.a)($);try{for(q.s();!(K=q.n()).done;){var Z=K.value;if(I=i.findBindingPoint(h,Z,i.handleId,i.draggedBindingId,Y,X,G,u))break}}catch(rm){q.e(rm)}finally{q.f()}}if(I){i.didBind=!0,P.bindings[i.draggedBindingId]=I,P.shape.handles=su(ou({},P.shape.handles),Object(l.a)({},i.handleId,su(ou({},P.shape.handles[i.handleId]),{bindingId:i.draggedBindingId})));var J=i.app.page.shapes[I.toId],Q=dp.getShapeUtil(J),ee=up[il.Arrow].onBindingChange(P.shape,I,J,Q.getBounds(J),Q.getExpandedBounds(J),Q.getCenter(J));ee&&Object.assign(P.shape,ee)}else{i.didBind=i.didBind||!1;var te=h.handles[i.handleId].bindingId;te&&(P.bindings=su(ou({},P.bindings),Object(l.a)({},te,void 0)),P.shape.handles=su(ou({},P.shape.handles),Object(l.a)({},i.handleId,su(ou({},P.shape.handles[i.handleId]),{bindingId:void 0}))))}return{document:{pages:Object(l.a)({},i.app.currentPageId,{shapes:Object(l.a)({},h.id,P.shape),bindings:P.bindings}),pageStates:Object(l.a)({},i.app.currentPageId,{bindingId:P.shape.handles[m].bindingId})}}}}}},i.cancel=function(){var e=Object(o.a)(i),t=e.initialShape,n=e.initialBinding,r=e.newStartBindingId,a=e.draggedBindingId,s=dp.onSessionComplete(i.app.page.shapes[t.id]),c=i.isCreate||ye.a.dist(s.handles.start.point,s.handles.end.point)<4,u={};return u[a]=void 0,n&&(u[n.id]=c?void 0:n),r&&(u[r]=void 0),{document:{pages:Object(l.a)({},i.app.currentPageId,{shapes:Object(l.a)({},t.id,c?void 0:t),bindings:u}),pageStates:Object(l.a)({},i.app.currentPageId,{selectedIds:c?[]:[t.id],bindingId:void 0,hoveredId:void 0,editingId:void 0})}}},i.complete=function(){var e=Object(o.a)(i),t=e.initialShape,n=e.initialBinding,r=e.newStartBindingId,a=e.startBindingShapeId,s=e.handleId,c=dp.onSessionComplete(i.app.page.shapes[t.id]),u=c.handles[s].bindingId,d=ye.a.dist(c.handles.start.point,c.handles.end.point);if(!u&&!n&&d<4)return i.cancel();var f={},p={};return n&&(f[n.id]=i.isCreate?void 0:n,p[n.id]=void 0),u&&(f[u]=void 0,p[u]=i.app.page.bindings[u]),a&&(f[r]=void 0,p[r]=i.app.page.bindings[r]),{id:"arrow",before:{document:{pages:Object(l.a)({},i.app.currentPageId,{shapes:Object(l.a)({},t.id,i.isCreate?void 0:t),bindings:f}),pageStates:Object(l.a)({},i.app.currentPageId,{selectedIds:i.isCreate?[]:[t.id],bindingId:void 0,hoveredId:void 0,editingId:void 0})}},after:{document:{pages:Object(l.a)({},i.app.currentPageId,{shapes:Object(l.a)({},t.id,c),bindings:p}),pageStates:Object(l.a)({},i.app.currentPageId,{selectedIds:[t.id],bindingId:void 0,hoveredId:void 0,editingId:void 0})}}}},i.findBindingPoint=function(e,t,n,r,a,i,o,s){var c=dp.getShapeUtil(t.type).getBindingPoint(t,e,a,i,o,s);if(c)return{id:r,type:"arrow",fromId:e.id,toId:t.id,handleId:n,point:ye.a.toFixed(c.point),distance:c.distance}},i.isCreate=d;var p=e.state.appState.currentPageId,h=e.state.document.pages[p];i.handleId=a,i.initialShape=h.shapes[r],i.bindableShapeIds=dp.getBindableShapeIds(e.state).filter((function(e){return!(e===i.initialShape.id||e===i.initialShape.parentId)}));var v=null==(s=i.initialShape.handles["start"===a?"end":"start"])?void 0:s.bindingId;if(v){var m=null==(c=h.bindings[v])?void 0:c.toId;m&&(i.bindableShapeIds=i.bindableShapeIds.filter((function(e){return e!==m})))}var b=i.app.originPoint;if(i.isCreate)i.startBindingShapeId=null==(u=i.bindableShapeIds.map((function(e){return h.shapes[e]})).find((function(e){return y.f.pointInBounds(b,dp.getShapeUtil(e).getBounds(e))})))?void 0:u.id,i.startBindingShapeId&&i.bindableShapeIds.splice(i.bindableShapeIds.indexOf(i.startBindingShapeId),1);else{var w=i.initialShape.handles[i.handleId].bindingId;w?i.initialBinding=h.bindings[w]:i.initialShape.handles[i.handleId].bindingId=void 0}return i}return n}(Np),Kp=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;Object(f.a)(this,n),(r=t.call(this,e)).type=Wu.Brush,r.performanceMode=void 0,r.status=Yu.Brushing,r.start=function(){},r.update=function(){var e=Object(o.a)(r),t=e.initialSelectedIds,n=e.shapesToTest,a=e.app,i=a.originPoint,s=a.currentPoint,c=y.f.getBoundsFromPoints([i,s]),u=new Set,d=new Set(t);n.forEach((function(e){var t=e.id,n=e.selectId,a=r.app.metaKey,i=r.app.getShape(t);if(!u.has(n)){var o=r.app.getShapeUtil(i);(a?y.f.boundsContain(c,o.getBounds(i)):o.hitTestBounds(i,c))?(u.add(n),d.has(n)||d.add(n)):d.has(n)&&d.delete(n)}}));var f=r.app.selectedIds,p=d.size!==f.length||f.some((function(e){return!d.has(e)}))?Array.from(d.values()):f;return{document:{pageStates:Object(l.a)({},r.app.currentPageId,{brush:c,selectedIds:p})}}},r.cancel=function(){return{document:{pageStates:Object(l.a)({},r.app.currentPageId,{brush:null,selectedIds:Array.from(r.initialSelectedIds.values())})}}},r.complete=function(){return{document:{pageStates:Object(l.a)({},r.app.currentPageId,{brush:null,selectedIds:Object(v.a)(r.app.selectedIds)})}}};var a=e.currentPageId;return r.initialSelectedIds=new Set(r.app.selectedIds),r.shapesToTest=r.app.shapes.filter((function(e){return!(e.isLocked||e.isHidden||e.parentId!==a||r.initialSelectedIds.has(e.id)||r.initialSelectedIds.has(e.parentId))})).map((function(e){return{id:e.id,bounds:r.app.getShapeUtil(e).getBounds(e),selectId:e.id}})),r.update(),r}return n}(Np),Vp=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e,r){var a,i;Object(f.a)(this,n),(a=t.call(this,e)).type=Wu.Draw,a.performanceMode=void 0,a.status=Yu.Creating,a.shiftedPoints=[],a.start=function(){var e,t=a.app.originPoint,n=[0,0,null!=(e=t[2])?e:.5];a.points.push(n);var r=[Math.min(a.topLeft[0],t[0]),Math.min(a.topLeft[1],t[1])],i=ye.a.sub(r,t);return a.topLeft=r,a.shiftedPoints=a.points.map((function(e){return ye.a.toFixed(ye.a.sub(e,i)).concat(e[2])})),{document:{pages:Object(l.a)({},a.app.currentPageId,{shapes:Object(l.a)({},a.shapeId,{point:a.topLeft,points:a.shiftedPoints})}),pageStates:Object(l.a)({},a.app.currentPageId,{selectedIds:[a.shapeId]})}}},a.update=function(){var e=Object(o.a)(a).shapeId,t=a.app,n=t.currentPoint,r=t.originPoint,i=t.shiftKey;if(!a.lockedDirection&&a.points.length>1){var s=y.f.getBoundsFromPoints(a.points);(s.width>8||s.height>8)&&(a.lockedDirection=s.width>s.height?"horizontal":"vertical")}if(i){if(!a.isLocked&&a.points.length>2){if(!a.lockedDirection){var c=y.f.getBoundsFromPoints(a.points);a.lockedDirection=c.width>c.height?"horizontal":"vertical"}a.isLocked=!0;var u=Object(v.a)(a.lastAdjustedPoint);"vertical"===a.lockedDirection?u[0]=0:u[1]=0,a.points.push(u.concat(n[2]))}}else a.isLocked&&(a.isLocked=!1);a.isLocked&&("vertical"===a.lockedDirection?n[0]=r[0]:n[1]=r[1]);var d=a.addPoint(n);if(d)return{document:{pages:Object(l.a)({},a.app.currentPageId,{shapes:Object(l.a)({},e,d)}),pageStates:Object(l.a)({},a.app.currentPageId,{selectedIds:[e]})}}},a.cancel=function(){var e=Object(o.a)(a).shapeId,t=a.app.currentPageId;return{document:{pages:Object(l.a)({},t,{shapes:Object(l.a)({},e,a.isExtending?a.initialShape:void 0)}),pageStates:Object(l.a)({},t,{selectedIds:[]})}}},a.complete=function(){var e=Object(o.a)(a).shapeId,t=a.app.currentPageId,n=a.app.getShape(e);return{id:"create_draw",before:{document:{pages:Object(l.a)({},t,{shapes:Object(l.a)({},e,a.isExtending?a.initialShape:void 0)}),pageStates:Object(l.a)({},t,{selectedIds:[]})}},after:{document:{pages:Object(l.a)({},t,{shapes:Object(l.a)({},e,su(ou({},n),{point:ye.a.toFixed(n.point),points:n.points.map((function(e){return ye.a.toFixed(e)})),isComplete:!0}))}),pageStates:Object(l.a)({},a.app.currentPageId,{selectedIds:[]})}}}},a.addPoint=function(e){var t=a.app.originPoint,n=ye.a.toFixed(ye.a.sub(e,t)).concat(e[2]);if(!ye.a.isEqual(a.lastAdjustedPoint,n)){a.points.push(n),a.lastAdjustedPoint=n;var r,i=Object(v.a)(a.topLeft),o=[Math.min(a.topLeft[0],e[0]),Math.min(a.topLeft[1],e[1])],s=ye.a.sub(o,t);return i[0]!==o[0]||i[1]!==o[1]?(a.topLeft=o,r=a.points.map((function(e){return ye.a.toFixed(ye.a.sub(e,s)).concat(e[2])}))):r=[].concat(Object(v.a)(a.shiftedPoints),[ye.a.sub(n,s).concat(n[2])]),a.shiftedPoints=r,{point:a.topLeft,points:r}}};var s=a.app.originPoint;a.shapeId=r,a.initialShape=a.app.getShape(r),a.topLeft=Object(v.a)(a.initialShape.point);var c=[0,0,null!=(i=s[2])?i:.5],u=ye.a.sub(s,a.topLeft),d=a.initialShape.points.map((function(e){return ye.a.sub(e,u).concat(e[2])}));a.isExtending=d.length>0;var p=[];if(a.isExtending){var h=d[d.length-1];p.push(h,h);for(var g=Math.ceil(ye.a.dist(h,c)/16),m=0;m<g;m++){var b=m/(g-1);p.push(ye.a.lrp(h,c,b).concat(h[2]))}}else p.push(c);return a.points=[].concat(Object(v.a)(d),p),a.shiftedPoints=a.points.map((function(e){return ye.a.add(e,u).concat(e[2])})),a.lastAdjustedPoint=a.points[a.points.length-1],a}return n}(Np),Wp=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e,r,a){var i,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"move_handle";Object(f.a)(this,n),(i=t.call(this,e)).type=Wu.Handle,i.performanceMode=void 0,i.status=Yu.TranslatingHandle,i.shiftKey=!1,i.start=function(){},i.update=function(){var e,t,n=Object(o.a)(i),r=n.initialShape,a=n.app,s=a.currentPageId,c=a.currentPoint,u=a.shiftKey,d=a.altKey,f=a.metaKey,p=i.app.getShape(r.id);if(!p.isLocked){var h=p.handles,v=i.handleId,g=ye.a.sub(c,h[v].point),m=su(ou({},h[v]),{point:ye.a.sub(ye.a.add(h[v].point,g),p.point)}),b=null==(t=(e=dp.getShapeUtil(p)).onHandleChange)?void 0:t.call(e,p,Object(l.a)({},v,m),{delta:g,shiftKey:u,altKey:d,metaKey:f});if(b)return{document:{pages:Object(l.a)({},s,{shapes:Object(l.a)({},p.id,b)})}}}},i.cancel=function(){var e=Object(o.a)(i),t=e.initialShape,n=e.app.currentPageId;return{document:{pages:Object(l.a)({},n,{shapes:Object(l.a)({},t.id,t)})}}},i.complete=function(){var e=Object(o.a)(i),t=e.initialShape,n=e.app.currentPageId;return{id:i.commandId,before:{document:{pages:Object(l.a)({},n,{shapes:Object(l.a)({},t.id,t)})}},after:{document:{pages:Object(l.a)({},n,{shapes:Object(l.a)({},t.id,dp.onSessionComplete(i.app.getShape(i.initialShape.id)))})}}}};var c=e.originPoint;return i.topLeft=Object(v.a)(c),i.handleId=a,i.initialShape=i.app.getShape(r),i.commandId=s,i}return n}(Np),Xp=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;Object(f.a)(this,n),(r=t.call(this,e)).type=Wu.Rotate,r.status=Yu.Transforming,r.performanceMode=void 0,r.delta=[0,0],r.changes={},r.start=function(){},r.update=function(){var e=Object(o.a)(r),t=e.commonBoundsCenter,n=e.initialShapes,a=e.app,i=a.currentPageId,s=a.currentPoint,c=a.shiftKey,u={},d=ye.a.angle(t,s)-r.initialAngle;return c&&(d=y.f.snapAngleToSegments(d,24)),n.forEach((function(e){var n=e.center,r=e.shape,a=r.rotation,i=void 0===a?0:a,o=0;c&&(o=y.f.snapAngleToSegments(i,24)-i);var s=dp.getRotatedShapeMutation(r,n,t,c?d+o:d);s&&(u[r.id]=s)})),r.changes=u,{document:{pages:Object(l.a)({},i,{shapes:u})}}},r.cancel=function(){var e=Object(o.a)(r),t=e.initialShapes,n=e.app.currentPageId,a={};return t.forEach((function(e){var t=e.shape;return a[t.id]=t})),{document:{pages:Object(l.a)({},n,{shapes:a})}}},r.complete=function(){var e=Object(o.a)(r),t=e.initialShapes,n=e.app.currentPageId,a={},i=r.changes;return t.forEach((function(e){var t=e.shape,n=t.id,r=t.point,i=t.rotation,o=t.handles;a[n]={point:r,rotation:i,handles:o}})),{id:"rotate",before:{document:{pages:Object(l.a)({},n,{shapes:a})}},after:{document:{pages:Object(l.a)({},n,{shapes:i})}}}};var a=Object(o.a)(r).app,i=a.currentPageId,s=a.pageState,c=a.originPoint,u=dp.getSelectedBranchSnapshot(e.state,i).filter((function(e){return!e.isLocked}));if(0===u.length)throw Error("No selected shapes!");if(e.rotationInfo.selectedIds===s.selectedIds){if(void 0===e.rotationInfo.center)throw Error("We should have a center for rotation!");r.commonBoundsCenter=e.rotationInfo.center}else r.commonBoundsCenter=y.f.getBoundsCenter(y.f.getCommonBounds(u.map(dp.getBounds))),e.rotationInfo.selectedIds=s.selectedIds,e.rotationInfo.center=r.commonBoundsCenter;return r.initialShapes=u.filter((function(e){return void 0===e.children})).map((function(e){return{shape:e,center:r.app.getShapeUtil(e).getCenter(e)}})),r.initialAngle=ye.a.angle(r.commonBoundsCenter,c),r}return n}(Np),Yp=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.d.BottomRight,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(f.a)(this,n),(r=t.call(this,e)).transformType=a,r.isCreate=i,r.type=Wu.Transform,r.performanceMode=void 0,r.status=Yu.Transforming,r.scaleX=1,r.scaleY=1,r.snapInfo={state:"empty"},r.prevPoint=[0,0],r.speed=1,r.start=function(){r.snapInfo={state:"ready",bounds:r.app.shapes.filter((function(e){return!r.initialShapeIds.includes(e.id)})).map((function(e){return y.f.getBoundsWithCenter(dp.getRotatedBounds(e))}))}},r.update=function(){var e=Object(o.a)(r),t=e.transformType,n=e.shapeBounds,a=e.initialCommonBounds,i=e.isAllAspectRatioLocked,s=e.app,c=s.currentPageId,u=s.pageState.camera,d=s.viewport,f=s.currentPoint,p=s.previousPoint,h=s.originPoint,v=s.shiftKey,g=s.altKey,m=s.metaKey,b=s.currentGrid,w=s.settings,O=w.isSnapping,k=w.showGrid,S={},x=g?ye.a.mul(ye.a.sub(f,h),2):ye.a.sub(f,h),j=y.f.getTransformedBoundingBox(a,t,x,0,v||i);g&&(j=ou(ou({},j),y.f.centerBounds(j,y.f.getBoundsCenter(a)))),k&&(j=ou(ou({},j),y.f.snapBoundsToGrid(j,b)));var _=ye.a.dist(f,p)-r.speed;r.speed=r.speed+_*(_>1?.5:.15);var C=[];if((O&&!m||!O&&m)&&r.speed*u.zoom<Rl&&"ready"===r.snapInfo.state){var E=y.f.getSnapPoints(y.f.getBoundsWithCenter(j),r.snapInfo.bounds.filter((function(e){return y.f.boundsContain(d,e)||y.f.boundsCollide(d,e)})),5/u.zoom);E&&(C=E.snapLines,j=y.f.getTransformedBoundingBox(a,t,ye.a.sub(x,E.offset),0,v||i))}return r.scaleX=j.scaleX,r.scaleY=j.scaleY,n.forEach((function(e){var t=e.initialShape,n=e.initialShapeBounds,i=e.transformOrigin,o=y.f.getRelativeTransformedBoundingBox(j,a,n,r.scaleX<0,r.scaleY<0);k&&(o=y.f.snapBoundsToGrid(o,b));var s=dp.transform(r.app.getShape(t.id),o,{type:r.transformType,initialShape:t,scaleX:r.scaleX,scaleY:r.scaleY,transformOrigin:i});S[t.id]=s})),{appState:{snapLines:C},document:{pages:Object(l.a)({},c,{shapes:S})}}},r.cancel=function(){var e=Object(o.a)(r),t=e.shapeBounds,n=e.app.currentPageId,a={};return r.isCreate?t.forEach((function(e){return a[e.initialShape.id]=void 0})):t.forEach((function(e){return a[e.initialShape.id]=e.initialShape})),{appState:{snapLines:[]},document:{pages:Object(l.a)({},n,{shapes:a}),pageStates:Object(l.a)({},n,{selectedIds:r.isCreate?[]:t.map((function(e){return e.initialShape.id}))})}}},r.complete=function(){var e=Object(o.a)(r),t=e.isCreate,n=e.shapeBounds,a=e.hasUnlockedShapes,i=e.app.currentPageId;if(a){var s,c,u={},d={};return t?(s=[],c=[],n.forEach((function(e){var t=e.initialShape;u[t.id]=void 0,d[t.id]=r.app.getShape(t.id)}))):(s=r.initialSelectedIds,c=r.initialSelectedIds,n.forEach((function(e){var t=e.initialShape;u[t.id]=t,d[t.id]=r.app.getShape(t.id)}))),{id:"transform",before:{appState:{snapLines:[]},document:{pages:Object(l.a)({},i,{shapes:u}),pageStates:Object(l.a)({},i,{selectedIds:s,hoveredId:void 0,editingId:void 0})}},after:{appState:{snapLines:[]},document:{pages:Object(l.a)({},i,{shapes:d}),pageStates:Object(l.a)({},i,{selectedIds:c,hoveredId:void 0,editingId:void 0})}}}}},r.initialSelectedIds=Object(v.a)(r.app.selectedIds),r.app.rotationInfo.selectedIds=Object(v.a)(r.initialSelectedIds),r.initialShapes=dp.getSelectedBranchSnapshot(r.app.state,r.app.currentPageId).filter((function(e){return!e.isLocked})),r.initialShapeIds=r.initialShapes.map((function(e){return e.id})),r.hasUnlockedShapes=r.initialShapes.length>0,r.isAllAspectRatioLocked=r.initialShapes.every((function(e){return e.isAspectRatioLocked||dp.getShapeUtil(e).isAspectRatioLocked}));var s=Object.fromEntries(r.initialShapes.map((function(e){return[e.id,dp.getBounds(e)]}))),c=Object.values(s);r.initialCommonBounds=y.f.getCommonBounds(c);var u=y.f.getBoundsFromPoints(c.map(y.f.getBoundsCenter));return r.shapeBounds=r.initialShapes.map((function(e){var t=s[e.id],n=y.f.getBoundsCenter(t);return{initialShape:e,initialShapeBounds:t,transformOrigin:[(n[0]-u.minX)/u.width,(n[1]-u.minY)/u.height]}})),r}return n}(Np),Gp=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e,r,a){var i,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(f.a)(this,n),(i=t.call(this,e)).type=Wu.TransformSingle,i.status=Yu.Transforming,i.performanceMode=void 0,i.scaleX=1,i.scaleY=1,i.snapInfo={state:"empty"},i.prevPoint=[0,0],i.speed=1,i.start=function(){i.snapInfo={state:"ready",bounds:i.app.shapes.filter((function(e){return e.id!==i.initialShape.id})).map((function(e){return y.f.getBoundsWithCenter(dp.getRotatedBounds(e))}))}},i.update=function(){var e=Object(o.a)(i),t=e.transformType,n=e.initialShape,r=e.initialShapeBounds,a=e.app,s=a.settings,c=s.isSnapping,u=s.showGrid,d=a.currentPageId,f=a.pageState.camera,p=a.viewport,h=a.currentPoint,v=a.previousPoint,g=a.originPoint,m=a.currentGrid,b=a.shiftKey,w=a.altKey,O=a.metaKey;if(!n.isLocked){var k={},S=w?ye.a.mul(ye.a.sub(h,g),2):ye.a.sub(h,g),x=i.app.getShape(n.id),j=dp.getShapeUtil(x),_=y.f.getTransformedBoundingBox(r,t,S,x.rotation,b||x.isAspectRatioLocked||j.isAspectRatioLocked);w&&(_=ou(ou({},_),y.f.centerBounds(_,y.f.getBoundsCenter(r)))),u&&(_=ou(ou({},_),y.f.snapBoundsToGrid(_,m)));var C=ye.a.dist(h,v)-i.speed;i.speed=i.speed+C*(C>1?.5:.15);var E=[];if((c&&!O||!c&&O)&&!n.rotation&&i.speed*f.zoom<Rl&&"ready"===i.snapInfo.state){var I=y.f.getSnapPoints(y.f.getBoundsWithCenter(_),i.snapInfo.bounds.filter((function(e){return y.f.boundsContain(p,e)||y.f.boundsCollide(p,e)})),5/f.zoom);I&&(E=I.snapLines,_=y.f.getTransformedBoundingBox(r,t,ye.a.sub(S,I.offset),x.rotation,b||x.isAspectRatioLocked||j.isAspectRatioLocked))}var P=dp.getShapeUtil(x).transformSingle(x,_,{initialShape:n,type:i.transformType,scaleX:_.scaleX,scaleY:_.scaleY,transformOrigin:[.5,.5]});return P&&(k[x.id]=P),u&&P&&P.point&&(P.point=ye.a.snap(P.point,m)),{appState:{snapLines:E},document:{pages:Object(l.a)({},d,{shapes:k})}}}},i.cancel=function(){var e=Object(o.a)(i),t=e.initialShape,n=e.app.currentPageId,r={};return i.isCreate?r[t.id]=void 0:r[t.id]=t,{appState:{snapLines:[]},document:{pages:Object(l.a)({},n,{shapes:r}),pageStates:Object(l.a)({},n,{selectedIds:i.isCreate?[]:[t.id]})}}},i.complete=function(){var e=Object(o.a)(i),t=e.initialShape,n=e.app.currentPageId;if(!t.isLocked){var r={},a={};return r[t.id]=i.isCreate?void 0:t,a[t.id]=dp.onSessionComplete(i.app.getShape(t.id)),{id:"transform_single",before:{appState:{snapLines:[]},document:{pages:Object(l.a)({},n,{shapes:r}),pageStates:Object(l.a)({},n,{selectedIds:i.isCreate?[]:[t.id],editingId:void 0,hoveredId:void 0})}},after:{appState:{snapLines:[]},document:{pages:Object(l.a)({},n,{shapes:a}),pageStates:Object(l.a)({},n,{selectedIds:[t.id],editingId:void 0,hoveredId:void 0})}}}}},i.isCreate=s,i.transformType=a;var c=i.app.getShape(r);return i.initialShape=c,i.initialShapeBounds=dp.getBounds(c),i.initialCommonBounds=dp.getRotatedBounds(c),i.app.rotationInfo.selectedIds=[c.id],i}return n}(Np),$p=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(f.a)(this,n),(r=t.call(this,e)).performanceMode=void 0,r.type=Wu.Translate,r.status=Yu.Translating,r.delta=[0,0],r.prev=[0,0],r.prevPoint=[0,0],r.speed=1,r.cloneInfo={state:"empty"},r.snapInfo={state:"empty"},r.snapLines=[],r.isCloning=!1,r.start=function(){var e=Object(o.a)(r),t=e.bindingsToDelete,n=e.initialIds,a=e.app,i=a.currentPageId,s=a.page,c=[],u=[];if(Object.values(s.shapes).forEach((function(e){var t=y.f.getBoundsWithCenter(dp.getRotatedBounds(e));c.push(t),n.has(e.id)||u.push(t)})),r.snapInfo={state:"ready",bounds:c,others:u},0!==t.length){var d={};return t.forEach((function(e){return d[e.id]=void 0})),{document:{pages:Object(l.a)({},i,{bindings:d})}}}},r.update=function(){var e=Object(o.a)(r),t=e.initialParentChildren,n=e.initialShapes,a=e.initialCommonBounds,i=e.bindingsToDelete,s=e.app,c=s.pageState.camera,u=s.settings,d=u.isSnapping,f=u.showGrid,p=s.currentPageId,h=s.viewport,m=s.selectedIds,b=s.currentPoint,w=s.previousPoint,O=s.originPoint,k=s.altKey,S=s.shiftKey,x=s.metaKey,j=s.currentGrid,_={},C={},E={},I=ye.a.sub(b,O),P=!1;r.isCreate||(k&&!r.isCloning?(r.isCloning=!0,P=!0):!k&&r.isCloning&&(r.isCloning=!1,P=!0)),S&&(Math.abs(I[0])<Math.abs(I[1])?I[0]=0:I[1]=0);var M=ye.a.dist(b,w)-r.speed;if(r.speed=r.speed+M*(M>1?.5:.15),r.snapLines=[],(d&&!x||!d&&x)&&r.speed*c.zoom<Rl&&"ready"===r.snapInfo.state){var A=y.f.getSnapPoints(y.f.getBoundsWithCenter(f?y.f.snapBoundsToGrid(y.f.translateBounds(a,I),j):y.f.translateBounds(a,I)),(r.isCloning?r.snapInfo.bounds:r.snapInfo.others).filter((function(e){return y.f.boundsContain(h,e)||y.f.boundsCollide(h,e)})),5/c.zoom);A&&(r.snapLines=A.snapLines,I=ye.a.sub(I,A.offset))}if(r.prev=I,r.isCloning)if(P){if("empty"===r.cloneInfo.state&&r.createCloneInfo(),"empty"===r.cloneInfo.state)throw Error;var T=r.cloneInfo,D=T.clones,R=T.clonedBindings;r.isCloning=!0,i.forEach((function(e){return _[e.id]=e})),n.forEach((function(e){return C[e.id]={point:e.point}})),D.forEach((function(e){var n;if(C[e.id]=ou({},e),e.parentId!==p&&!m.includes(e.parentId)){var r=(null==(n=C[e.parentId])?void 0:n.children)||t[e.parentId];r.includes(e.id)||(C[e.parentId]=su(ou({},C[e.parentId]),{children:[].concat(Object(v.a)(r),[e.id])}))}}));var B,L=Object(g.a)(R);try{for(L.s();!(B=L.n()).done;){var F=B.value;_[F.id]=F}}catch(rm){L.e(rm)}finally{L.f()}E.selectedIds=D.map((function(e){return e.id})),D.forEach((function(e){C[e.id]=su(ou({},e),{point:f?ye.a.snap(ye.a.toFixed(ye.a.add(e.point,I)),j):ye.a.toFixed(ye.a.add(e.point,I))})}))}else{if("empty"===r.cloneInfo.state)throw Error;r.cloneInfo.clones.forEach((function(e){C[e.id]={point:f?ye.a.snap(ye.a.toFixed(ye.a.add(e.point,I)),j):ye.a.toFixed(ye.a.add(e.point,I))}}))}else if(P){if("empty"===r.cloneInfo.state)throw Error;var H=r.cloneInfo,z=H.clones,N=H.clonedBindings;r.isCloning=!1,i.forEach((function(e){return _[e.id]=void 0})),z.forEach((function(e){e.parentId!==p&&(C[e.parentId]=su(ou({},C[e.parentId]),{children:t[e.parentId]}))})),z.forEach((function(e){return C[e.id]=void 0})),n.forEach((function(e){C[e.id]={point:f?ye.a.snap(ye.a.toFixed(ye.a.add(e.point,I)),j):ye.a.toFixed(ye.a.add(e.point,I))}}));var U,K=Object(g.a)(N);try{for(K.s();!(U=K.n()).done;){var V=U.value;_[V.id]=void 0}}catch(rm){K.e(rm)}finally{K.f()}E.selectedIds=n.map((function(e){return e.id}))}else n.forEach((function(e){C[e.id]={point:f?ye.a.snap(ye.a.toFixed(ye.a.add(e.point,I)),j):ye.a.toFixed(ye.a.add(e.point,I))}}));return{appState:{snapLines:r.snapLines},document:{pages:Object(l.a)({},p,{shapes:C,bindings:_}),pageStates:Object(l.a)({},p,E)}}},r.cancel=function(){var e=Object(o.a)(r),t=e.initialShapes,n=e.initialSelectedIds,a=e.bindingsToDelete,i=e.app.currentPageId,s={},c={},u={editingId:void 0,hoveredId:void 0};if(a.forEach((function(e){return s[e.id]=e})),r.isCreate?(t.forEach((function(e){var t=e.id;return c[t]=void 0})),u.selectedIds=[]):(t.forEach((function(e){var t=e.id,n=e.point;return c[t]=su(ou({},c[t]),{point:n})})),u.selectedIds=n),"ready"===r.cloneInfo.state){var d=r.cloneInfo,f=d.clones,p=d.clonedBindings;f.forEach((function(e){return c[e.id]=void 0})),p.forEach((function(e){return s[e.id]=void 0}))}return{appState:{snapLines:[]},document:{pages:Object(l.a)({},i,{shapes:c,bindings:s}),pageStates:Object(l.a)({},i,u)}}},r.complete=function(){var e=Object(o.a)(r),t=e.initialShapes,n=e.initialParentChildren,a=e.bindingsToDelete,i=e.app.currentPageId,s={},c={},u={},d={};if(r.isCloning){if("empty"===r.cloneInfo.state&&r.createCloneInfo(),"ready"!==r.cloneInfo.state)throw Error;var f=r.cloneInfo,p=f.clones,h=f.clonedBindings;p.forEach((function(e){c[e.id]=void 0,d[e.id]=r.app.getShape(e.id),e.parentId!==i&&(c[e.parentId]=su(ou({},c[e.parentId]),{children:n[e.parentId]}),d[e.parentId]=su(ou({},d[e.parentId]),{children:r.app.getShape(e.parentId).children}))})),h.forEach((function(e){s[e.id]=void 0,u[e.id]=r.app.getBinding(e.id)}))}else t.forEach((function(e){c[e.id]=r.isCreate?void 0:su(ou({},c[e.id]),{point:e.point}),d[e.id]=ou(ou({},d[e.id]),r.isCreate?r.app.getShape(e.id):{point:r.app.getShape(e.id).point})}));return a.forEach((function(e){s[e.id]=e;for(var t=function(){var t=a[n],i=r.app.getShape(t);if(!i.handles)return"continue";Object.values(i.handles).filter((function(t){return t.bindingId===e.id})).forEach((function(n){c[t]=su(ou({},c[t]),{handles:{}}),d[t]=su(ou({},d[t]),{handles:{}}),c[t].handles[n.id]={bindingId:e.id},d[t].handles[n.id]={bindingId:void 0}}))},n=0,a=[e.toId,e.fromId];n<a.length;n++)t()})),{id:"translate",before:{appState:{snapLines:[]},document:{pages:Object(l.a)({},i,{shapes:c,bindings:s}),pageStates:Object(l.a)({},i,{selectedIds:r.isCreate?[]:Object(v.a)(r.initialSelectedIds)})}},after:{appState:{snapLines:[]},document:{pages:Object(l.a)({},i,{shapes:d,bindings:u}),pageStates:Object(l.a)({},i,{selectedIds:Object(v.a)(r.app.selectedIds)})}}}},r.createCloneInfo=function(){var e=Object(o.a)(r),t=e.initialShapes,n=e.initialParentChildren,a=e.app,i=a.selectedIds,s=a.currentPageId,c=a.page,u={},l={},d=[],f=[];t.forEach((function(e){var t=y.f.uniqueId();n[t]=n[e.id],u[e.id]=t;var a=su(ou({},y.f.deepClone(e)),{id:t,parentId:e.parentId,childIndex:dp.getChildIndexAbove(r.app.state,e.id,s)});if(a.type===il.Video){var i=document.getElementById(e.id+"_video");i&&(a.currentTime=(i.currentTime+16)%i.duration)}f.push(a)})),f.forEach((function(e){void 0!==e.children&&(e.children=e.children.map((function(e){return u[e]})))})),f.forEach((function(e){i.includes(e.parentId)&&(e.parentId=u[e.parentId])}));var p=new Set(Object.keys(u));Object.values(c.bindings).filter((function(e){return p.has(e.fromId)||p.has(e.toId)})).forEach((function(e){if(p.has(e.fromId)&&p.has(e.toId)){var t=y.f.uniqueId(),n=su(ou({},y.f.deepClone(e)),{id:t,fromId:u[e.fromId]||e.fromId,toId:u[e.toId]||e.toId});l[e.id]=t,d.push(n)}})),f.forEach((function(e){if(e.handles&&e.handles)for(var t in e.handles){var n=e.handles[t];n.bindingId=n.bindingId?l[n.bindingId]:void 0}})),f.forEach((function(e){if(c.shapes[e.id])throw Error("uh oh, we didn't clone correctly")})),r.cloneInfo={state:"ready",clones:f,cloneMap:u,clonedBindings:d}},r.isCreate=a,r.link=i;var s=r.app,c=s.currentPageId,u=s.selectedIds,d=s.page;r.initialSelectedIds=Object(v.a)(u);var p=(i?dp.getLinkedShapeIds(r.app.state,c,i,!1):u).map((function(e){return r.app.getShape(e)})).filter((function(e){return!e.isLocked})),h=new Set(p.map((function(e){return e.id})));return r.hasUnlockedShapes=p.length>0,r.initialShapes=Array.from(new Set(p.filter((function(e){return!h.has(e.parentId)})).flatMap((function(e){return e.children?[e].concat(Object(v.a)(e.children.map((function(e){return r.app.getShape(e)})))):[e]}))).values()),r.initialIds=new Set(r.initialShapes.map((function(e){return e.id}))),r.bindingsToDelete=[],Object.values(d.bindings).filter((function(e){return r.initialIds.has(e.fromId)||r.initialIds.has(e.toId)})).forEach((function(e){r.initialIds.has(e.fromId)&&(r.initialIds.has(e.toId)||r.bindingsToDelete.push(e))})),r.initialParentChildren={},r.initialShapes.map((function(e){return e.parentId})).filter((function(e){return e!==d.id})).forEach((function(e){r.initialParentChildren[e]=r.app.getShape(e).children})),r.initialCommonBounds=y.f.getCommonBounds(r.initialShapes.map(dp.getRotatedBounds)),r.app.rotationInfo.selectedIds=Object(v.a)(r.app.selectedIds),r}return n}(Np),qp=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(f.a)(this,n),(r=t.call(this,e)).type=Wu.Draw,r.performanceMode=void 0,r.status=Yu.Creating,r.erasedShapes=new Set,r.erasedBindings=new Set,r.start=function(){},r.update=function(){var e=r.app,t=e.page,n=e.shiftKey,a=e.originPoint,i=e.currentPoint;if(n){if(!r.isLocked&&ye.a.dist(a,i)>4){if(!r.lockedDirection){var o=ye.a.sub(i,a);r.lockedDirection=o[0]>o[1]?"horizontal":"vertical"}r.isLocked=!0}}else r.isLocked&&(r.isLocked=!1);r.isLocked&&("vertical"===r.lockedDirection?i[0]=a[0]:i[1]=a[1]);var s=ye.a.toFixed(ye.a.add(a,ye.a.sub(i,a))),c=new Set([]);r.erasableShapes.forEach((function(e){if(!r.erasedShapes.has(e)&&r.app.getShapeUtil(e).hitTestLineSegment(e,r.prevPoint,s)&&(r.erasedShapes.add(e),c.add(e.id),void 0!==e.children)){var t,n=Object(g.a)(e.children);try{for(n.s();!(t=n.n()).done;){var a=t.value;r.erasedShapes.add(r.app.getShape(a)),c.add(a)}}catch(rm){n.e(rm)}finally{n.f()}}})),Object.values(t.bindings).forEach((function(e){for(var t=0,n=[e.toId,e.fromId];t<n.length;t++){var a=n[t];c.has(a)&&r.erasedBindings.add(e)}})),r.erasedShapes.forEach((function(e){r.app.getShape(e.id)||(r.erasedShapes.delete(e),r.erasableShapes.delete(e),c.delete(e.id))}));var u=Array.from(r.erasedShapes.values());return r.prevPoint=s,{document:{pages:Object(l.a)({},t.id,{shapes:Object.fromEntries(u.map((function(e){return[e.id,{isGhost:!0}]})))})}}},r.cancel=function(){var e=r.app.page;r.erasedShapes.forEach((function(e){r.app.getShape(e.id)||(r.erasedShapes.delete(e),r.erasableShapes.delete(e))}));var t=Array.from(r.erasedShapes.values());return{document:{pages:Object(l.a)({},e.id,{shapes:Object.fromEntries(t.map((function(e){return[e.id,{isGhost:!1}]})))}),pageStates:Object(l.a)({},e.id,{selectedIds:r.initialSelectedShapes.map((function(e){return e.id}))})}}},r.complete=function(){var e=r.app.page;r.erasedShapes.forEach((function(e){r.app.getShape(e.id)||(r.erasedShapes.delete(e),r.erasableShapes.delete(e))})),r.erasedBindings.forEach((function(e){r.app.getBinding(e.id)||r.erasedBindings.delete(e)}));var t=Array.from(r.erasedShapes.values()),n=Array.from(r.erasedBindings.values()),a=t.map((function(e){return e.id})),i=n.map((function(e){return e.id})),o={shapes:Object.fromEntries(t.map((function(e){return[e.id,e]}))),bindings:Object.fromEntries(n.map((function(e){return[e.id,e]})))},s={shapes:Object.fromEntries(t.map((function(e){return[e.id,void 0]}))),bindings:Object.fromEntries(n.map((function(e){return[e.id,void 0]})))};return r.app.shapes.forEach((function(e){e.handles&&!s.shapes[e.id]&&Object.values(e.handles).forEach((function(t){var n,r;t.bindingId&&i.includes(t.bindingId)&&(o.shapes[e.id]=su(ou({},o.shapes[e.id]),{handles:su(ou({},null==(n=o.shapes[e.id])?void 0:n.handles),Object(l.a)({},t.id,t))}),a.includes(e.id)||(s.shapes[e.id]=su(ou({},s.shapes[e.id]),{handles:su(ou({},null==(r=s.shapes[e.id])?void 0:r.handles),Object(l.a)({},t.id,su(ou({},t),{bindingId:void 0})))})))}))})),{id:"erase",before:{document:{pages:Object(l.a)({},e.id,o),pageStates:Object(l.a)({},e.id,{selectedIds:r.initialSelectedShapes.filter((function(e){return!!r.app.getShape(e.id)})).map((function(e){return e.id}))})}},after:{document:{pages:Object(l.a)({},e.id,s),pageStates:Object(l.a)({},e.id,{selectedIds:r.initialSelectedShapes.filter((function(e){return!!r.app.getShape(e.id)})).filter((function(e){return!a.includes(e.id)})).map((function(e){return e.id}))})}}}},r.prevPoint=Object(v.a)(e.originPoint),r.initialSelectedShapes=r.app.selectedIds.map((function(e){return r.app.getShape(e)})),r.erasableShapes=new Set(r.app.shapes.filter((function(e){return!e.isLocked}))),r}return n}(Np),Zp=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e,r){var a,i;return Object(f.a)(this,n),(a=t.call(this,e)).type=Wu.Grid,a.performanceMode=void 0,a.status=Yu.Translating,a.grid={},a.columns=1,a.rows=1,a.isCopying=!1,a.start=function(){},a.update=function(){var e=a.app,t=e.currentPageId,n=e.altKey,r=e.shiftKey,i=e.currentPoint,o={},s=y.f.getBoundsCenter(a.bounds),c=ye.a.sub(i,s);r&&(Math.abs(c[0])<Math.abs(c[1])?c[0]=0:c[1]=0);var u=a.bounds.width+32,f=a.bounds.height+32,p=Math.ceil(c[0]/u),h=Math.ceil(c[1]/f),g=Math.min(p,0),m=Math.min(h,0),b=Math.max(p,1),w=Math.max(h,1),O=new Set,k=n;k!==a.isCopying&&(Object.values(a.grid).filter((function(e){return e!==a.shape.id})).forEach((function(e){return o[e]=void 0})),a.grid={"0_0":a.shape.id},a.isCopying=k);for(var S=g;S<b;S++)for(var x=m;x<w;x++){var j="".concat(S,"_").concat(x);if(O.add(j),!a.grid[j]&&(0!==S||0!==x)){var _=a.getClone(ye.a.add(a.shape.point,[S*u,x*f]),k);o[_.id]=_,a.grid[j]=_.id}}if(Object.entries(a.grid).forEach((function(e){var t=Object(d.a)(e,2),n=t[0],r=t[1];O.has(n)||(o[r]=void 0,delete a.grid[n])})),0!==Object.values(o).length)return a.initialSiblings&&(o[a.shape.parentId]={children:[].concat(Object(v.a)(a.initialSiblings),Object(v.a)(Object.values(a.grid)))}),{document:{pages:Object(l.a)({},t,{shapes:o}),pageStates:Object(l.a)({},t,{})}}},a.cancel=function(){var e=a.app.currentPageId,t={};return Object.values(a.grid).forEach((function(e){t[e]=void 0})),t[a.shape.id]=su(ou({},t[a.shape.id]),{point:a.shape.point}),a.initialSiblings&&(t[a.shape.parentId]={children:[].concat(Object(v.a)(a.initialSiblings),[a.shape.id])}),{document:{pages:Object(l.a)({},e,{shapes:t}),pageStates:Object(l.a)({},e,{selectedIds:[a.shape.id]})}}},a.complete=function(){var e=a.app.currentPageId,t={},n={},r=[];if(Object.values(a.grid).forEach((function(e){t[e]=void 0,n[e]=a.app.getShape(e),r.push(e)})),t[a.shape.id]=a.shape,a.initialSiblings&&(t[a.shape.parentId]={children:[].concat(Object(v.a)(a.initialSiblings),[a.shape.id])},n[a.shape.parentId]={children:[].concat(Object(v.a)(a.initialSiblings),Object(v.a)(Object.values(a.grid)))}),1!==r.length)return{id:"grid",before:{document:{pages:Object(l.a)({},e,{shapes:t}),pageStates:Object(l.a)({},e,{selectedIds:[],hoveredId:void 0})}},after:{document:{pages:Object(l.a)({},e,{shapes:n}),pageStates:Object(l.a)({},e,{selectedIds:r,hoveredId:void 0})}}}},a.getClone=function(e,t){var n=su(ou({},a.shape),{id:y.f.uniqueId(),point:e});return t||n.type===il.Sticky&&(n.text=""),n},a.shape=a.app.getShape(r),a.grid["0_0"]=a.shape.id,a.bounds=a.app.getShapeBounds(r),a.initialSelectedIds=Object(v.a)(a.app.selectedIds),a.shape.parentId!==a.app.currentPageId&&(a.initialSiblings=null==(i=a.app.getShape(a.shape.parentId).children)?void 0:i.filter((function(e){return e!==a.shape.id}))),a}return n}(Np),Jp=(Bc={},Object(l.a)(Bc,Wu.Arrow,Up),Object(l.a)(Bc,Wu.Brush,Kp),Object(l.a)(Bc,Wu.Draw,Vp),Object(l.a)(Bc,Wu.Erase,qp),Object(l.a)(Bc,Wu.Handle,Wp),Object(l.a)(Bc,Wu.Rotate,Xp),Object(l.a)(Bc,Wu.Transform,Yp),Object(l.a)(Bc,Wu.TransformSingle,Gp),Object(l.a)(Bc,Wu.Translate,$p),Object(l.a)(Bc,Wu.Grid,Zp),Bc),Qp=function(e){return Jp[e]};(zp=Hp||(Hp={})).Idle="idle",zp.Creating="creating",zp.Pinching="pinching";var eh,th=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(f.a)(this,n),(r=t.call(this)).app=e,r.type="select",r.status=Hp.Idle,r.setStatus=function(e){r.status=e,r.app.setStatus(r.status)},r.onEnter=function(){r.setStatus(Hp.Idle)},r.onExit=function(){r.setStatus(Hp.Idle)},r.onCancel=function(){r.status===Hp.Idle?r.app.selectTool("select"):r.setStatus(Hp.Idle),r.app.cancelSession()},r.getNextChildIndex=function(){var e=r.app,t=e.shapes,n=e.appState.currentPageId;return 0===t.length?1:t.filter((function(e){return e.parentId===n})).sort((function(e,t){return t.childIndex-e.childIndex}))[0].childIndex+1},r.onPinchStart=function(){r.app.cancelSession(),r.setStatus(Hp.Pinching)},r.onPinchEnd=function(){y.f.isMobileSafari()&&r.app.undoSelect(),r.setStatus(Hp.Idle)},r.onPinch=function(e,t){var n;"pinching"===r.status&&(isNaN(e.delta[0])||isNaN(e.delta[1])||(r.app.pinchZoom(e.point,e.delta,e.delta[2]),null==(n=r.onPointerMove)||n.call(Object(o.a)(r),e,t)))},r.onKeyDown=function(e){"Escape"!==e?"Meta"!==e&&"Control"!==e&&"Alt"!==e||r.app.updateSession():r.onCancel()},r.onKeyUp=function(e){"Meta"!==e&&"Control"!==e&&"Alt"!==e||r.app.updateSession()},r.onPointerMove=function(){r.status===Hp.Creating&&r.app.updateSession()},r.onPointerUp=function(){r.status===Hp.Creating&&(r.app.completeSession(),r.app.appState.isToolLocked||r.app.selectTool("select"));r.setStatus(Hp.Idle)},r}return n}(El);!function(e){e.Idle="idle",e.Creating="creating",e.Pinching="pinching",e.PointingCanvas="pointingCanvas",e.PointingHandle="pointingHandle",e.PointingBounds="pointingBounds",e.PointingClone="pointingClone",e.TranslatingClone="translatingClone",e.PointingBoundsHandle="pointingBoundsHandle",e.TranslatingHandle="translatingHandle",e.Translating="translating",e.Transforming="transforming",e.Rotating="rotating",e.Brushing="brushing",e.GridCloning="gridCloning",e.ClonePainting="clonePainting"}(eh||(eh={}));var nh,rh=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(f.a)(this,n),(e=t.apply(this,arguments)).type="select",e.onEnter=function(){e.setStatus(eh.Idle)},e.onExit=function(){e.setStatus(eh.Idle)},e.clonePaint=function(t){if(0!==e.app.selectedIds.length){var n=e.app.selectedIds.map((function(t){return e.app.getShape(t)})),r=y.f.expandBounds(y.f.getCommonBounds(n.map(dp.getBounds)),16),a=y.f.getBoundsCenter(r),i=[r.width,r.height],o=[a[0]+i[0]*Math.floor((t[0]+i[0]/2-a[0])/i[0]),a[1]+i[1]*Math.floor((t[1]+i[1]/2-a[1])/i[1])],s=y.f.centerBounds(r,o);e.app.shapes.some((function(e){return dp.getShapeUtil(e).hitTestBounds(e,s)}))||e.app.duplicate(e.app.selectedIds,o)}},e.getShapeClone=function(t,n){var r=e.app.getShape(t),a=dp.getShapeUtil(r);if(a.canClone){var i=a.getBounds(r),o=a.getCenter(r),s={top:[i.minX,i.minY-(i.height+Tl)],right:[i.maxX+Tl,i.minY],bottom:[i.minX,i.maxY+Tl],left:[i.minX-(i.width+Tl),i.minY],topLeft:[i.minX-(i.width+Tl),i.minY-(i.height+Tl)],topRight:[i.maxX+Tl,i.minY-(i.height+Tl)],bottomLeft:[i.minX-(i.width+Tl),i.maxY+Tl],bottomRight:[i.maxX+Tl,i.maxY+Tl]}[n];if(0!==r.rotation){var c=ye.b.add(s,[i.width/2,i.height/2]),u=ye.b.rotWith(c,o,r.rotation||0);s=ye.b.sub(u,[i.width/2,i.height/2])}var l=y.f.uniqueId(),d=su(ou({},r),{id:l,point:s});return d.type===il.Sticky&&(d.text=""),d}},e.onCancel=function(){e.app.pageState.editingId?e.app.setEditingId():e.selectNone(),e.app.cancelSession(),e.setStatus(eh.Idle)},e.onKeyDown=function(t,n,r){switch(t){case"Escape":e.onCancel();break;case"Tab":if(!e.app.pageState.editingId&&e.status===eh.Idle&&1===e.app.selectedIds.length){var a=Object(d.a)(e.app.selectedIds,1)[0],i=e.getShapeClone(a,"right");i&&(e.app.createShapes(i),e.setStatus(eh.Idle),i.type===il.Sticky&&(e.app.select(i.id),e.app.setEditingId(i.id)))}break;case"Meta":case"Control":case"Alt":e.app.updateSession();break;case"Enter":var o=e.app.pageState;1!==o.selectedIds.length||o.editingId||(e.app.setEditingId(o.selectedIds[0]),r.preventDefault())}},e.onKeyUp=function(t,n){e.status!==eh.ClonePainting||n.altKey&&n.shiftKey?"Meta"!==t&&"Control"!==t&&"Alt"!==t||e.app.updateSession():e.setStatus(eh.Idle)},e.onPointerMove=function(t,n){var r=e.app,a=r.originPoint,i=r.currentPoint;switch(e.status){case eh.PointingBoundsHandle:if(!e.pointedBoundsHandle)throw Error("No pointed bounds handle");if(ye.b.dist(a,i)>3){if("rotate"===e.pointedBoundsHandle)e.setStatus(eh.Rotating),e.app.startSession(Wu.Rotate);else if("center"===e.pointedBoundsHandle||"left"===e.pointedBoundsHandle||"right"===e.pointedBoundsHandle)e.setStatus(eh.Translating),e.app.startSession(Wu.Translate,!1,e.pointedBoundsHandle);else{e.setStatus(eh.Transforming);var o=e.app.selectedIds.flatMap((function(t){return dp.getDocumentBranch(e.app.state,t,e.app.currentPageId)}));1===o.length?e.app.startSession(Wu.TransformSingle,o[0],e.pointedBoundsHandle):e.app.startSession(Wu.Transform,e.pointedBoundsHandle)}e.app.updateSession()}break;case eh.PointingCanvas:ye.b.dist(a,i)>3&&(e.app.startSession(Wu.Brush),e.setStatus(eh.Brushing));break;case eh.PointingClone:ye.b.dist(a,i)>3&&(e.setStatus(eh.TranslatingClone),e.app.startSession(Wu.Translate),e.app.updateSession());break;case eh.PointingBounds:ye.b.dist(a,i)>3&&(e.setStatus(eh.Translating),e.app.startSession(Wu.Translate),e.app.updateSession());break;case eh.PointingHandle:if(!e.pointedHandleId)throw Error("No pointed handle");if(ye.b.dist(a,i)>3){e.setStatus(eh.TranslatingHandle);var s=e.app.getShape(e.app.selectedIds[0]);s&&("bend"===e.pointedHandleId?(e.app.startSession(Wu.Handle,s.id,e.pointedHandleId),e.app.updateSession()):(e.app.startSession(Wu.Arrow,s.id,e.pointedHandleId,!1),e.app.updateSession()))}break;case eh.ClonePainting:e.clonePaint(i);break;default:if(e.app.session){e.app.updateSession();break}}},e.onPointerDown=function(t,n){if("canvas"===t.target&&e.status===eh.Idle){var r=e.app.currentPoint;if(t.spaceKey&&1===n.buttons)return;if(e.status===eh.Idle&&t.altKey&&t.shiftKey)return e.setStatus(eh.ClonePainting),void e.clonePaint(r);if(!t.shiftKey){if(e.app.onShapeBlur(),t.altKey&&e.app.selectedIds.length>0)return void e.app.duplicate(e.app.selectedIds,r);e.selectNone()}e.setStatus(eh.PointingCanvas)}},e.onPointerUp=function(t){if(e.status===eh.TranslatingClone||e.status===eh.PointingClone)return e.pointedId&&(e.app.completeSession(),e.app.setEditingId(e.pointedId)),e.setStatus(eh.Idle),void(e.pointedId=void 0);if(e.status===eh.PointingBounds)if("bounds"===t.target)e.selectNone();else if(e.app.isSelected(t.target))t.shiftKey?e.pointedId!==t.target&&e.deselect(t.target):e.pointedId!==t.target&&e.app.selectedIds.length>1&&e.select(t.target);else if(e.pointedId===t.target){if(e.app.getShape(t.target).isLocked)return;t.shiftKey?e.pushSelect(t.target):e.select(t.target)}e.app.completeSession(),e.setStatus(eh.Idle),e.pointedBoundsHandle=void 0,e.pointedHandleId=void 0,e.pointedId=void 0},e.onDoubleClickCanvas=function(){},e.onPointShape=function(t,n){if((!t.spaceKey||1!==n.buttons)&&!e.app.getShape(t.target).isLocked){var r=e.app.pageState,a=r.editingId,i=r.hoveredId;if(a&&t.target!==a&&e.app.onShapeBlur(),(e.status===eh.Idle||e.status===eh.PointingBounds)&&t.metaKey&&t.shiftKey&&i)return e.pointedId=i,void(e.app.isSelected(i)?e.deselect(i):(e.pushSelect(i),e.setStatus(eh.PointingBounds)));if(e.status!==eh.PointingBounds){if(e.status===eh.Idle){if(e.setStatus(eh.PointingBounds),t.metaKey)return t.shiftKey||e.selectNone(),e.app.startSession(Wu.Brush),void e.setStatus(eh.Brushing);var o,s=e.app.getShape(t.target).parentId;s===e.app.currentPageId?(o=t.target,e.selectedGroupId=void 0):s===e.selectedGroupId?o=t.target:(o=s,e.selectedGroupId=void 0),e.app.isSelected(o)||(e.pointedId=o,t.shiftKey?e.pushSelect(o):e.select(o))}}else{var c=e.app.getShape(t.target).parentId;e.pointedId=c===e.app.currentPageId?t.target:c}}},e.onDoubleClickShape=function(t){var n=e.app.getShape(t.target);n.isLocked||(!dp.getShapeUtil(n.type).canEdit||n.parentId!==e.app.currentPageId&&n.parentId!==e.selectedGroupId||e.app.setEditingId(t.target),n.parentId!==e.app.currentPageId&&(e.selectedGroupId=n.parentId)),e.app.select(t.target)},e.onRightPointShape=function(t){e.app.isSelected(t.target)||e.app.select(t.target)},e.onHoverShape=function(t){e.app.setHoveredId(t.target)},e.onUnhoverShape=function(t){var n=e.app.currentPageId;requestAnimationFrame((function(){n===e.app.currentPageId&&e.app.pageState.hoveredId===t.target&&e.app.setHoveredId(void 0)}))},e.onPointBounds=function(t){if(t.metaKey)return t.shiftKey||e.selectNone(),e.app.startSession(Wu.Brush),void e.setStatus(eh.Brushing);e.setStatus(eh.PointingBounds)},e.onRightPointBounds=function(e,t){t.stopPropagation()},e.onReleaseBounds=function(){e.status!==eh.Translating&&e.status!==eh.Brushing||e.app.completeSession(),e.setStatus(eh.Idle)},e.onPointBoundsHandle=function(t){e.pointedBoundsHandle=t.target,e.setStatus(eh.PointingBoundsHandle)},e.onDoubleClickBoundsHandle=function(t){switch(t.target){case"center":case"left":case"right":var n;(n=e.app).select.apply(n,Object(v.a)(dp.getLinkedShapeIds(e.app.state,e.app.currentPageId,t.target,t.shiftKey)));break;default:if(1===e.app.selectedIds.length){e.app.resetBounds(e.app.selectedIds);var r=e.app.getShape(e.app.selectedIds[0]);"label"in r&&e.app.setEditingId(r.id)}}},e.onReleaseBoundsHandle=function(){e.setStatus(eh.Idle)},e.onPointHandle=function(t){e.pointedHandleId=t.target,e.setStatus(eh.PointingHandle)},e.onDoubleClickHandle=function(t){if("bend"!==t.target)e.app.toggleDecoration(t.target);else{var n=e.app.selectedIds;if(1!==n.length)return;var r=e.app.getShape(n[0]);!dp.getShapeUtil(r.type).canEdit||r.parentId!==e.app.currentPageId&&r.parentId!==e.selectedGroupId||e.app.setEditingId(r.id)}},e.onReleaseHandle=function(){e.setStatus(eh.Idle)},e.onShapeClone=function(t){var n=e.app.selectedIds[0],r=e.getShapeClone(n,t.target);"left"===t.target||"right"===t.target||"top"===t.target||"bottom"===t.target?r&&(e.app.createShapes(r),e.pointedId=r.id,e.setStatus(eh.PointingClone)):(e.setStatus(eh.GridCloning),e.app.startSession(Wu.Grid,n))},e}return Object(u.a)(n,[{key:"deselect",value:function(e){var t;(t=this.app).select.apply(t,Object(v.a)(this.app.selectedIds.filter((function(t){return t!==e}))))}},{key:"select",value:function(e){this.app.select(e)}},{key:"pushSelect",value:function(e){var t,n=this.app.getShape(e);(t=this.app).select.apply(t,Object(v.a)(this.app.selectedIds.filter((function(e){return e!==n.parentId}))).concat([e]))}},{key:"selectNone",value:function(){this.app.selectNone()}}]),n}(th);!function(e){e.Idle="idle",e.Pointing="pointing",e.Erasing="erasing"}(nh||(nh={}));var ah,ih=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(f.a)(this,n),(e=t.apply(this,arguments)).type="erase",e.status=nh.Idle,e.onPointerDown=function(){e.status===nh.Idle&&e.setStatus(nh.Pointing)},e.onPointerMove=function(t){switch(e.status){case nh.Pointing:ye.b.dist(t.origin,t.point)>3&&(e.app.startSession(Wu.Erase),e.app.updateSession(),e.setStatus(nh.Erasing));break;case nh.Erasing:e.app.updateSession()}},e.onPointerUp=function(){switch(e.status){case nh.Pointing:var t=e.app.shapes.filter((function(e){return!e.isLocked})).filter((function(t){return e.app.getShapeUtil(t).hitTestPoint(t,e.app.currentPoint)})).flatMap((function(e){return e.children?[e.id].concat(Object(v.a)(e.children)):e.id}));e.app.delete(t);break;case nh.Erasing:e.app.completeSession()}e.setStatus(nh.Idle)},e.onCancel=function(){e.status===nh.Idle?e.previous?e.app.selectTool(e.previous):e.app.selectTool("select"):e.setStatus(nh.Idle),e.app.cancelSession()},e}return n}(th),oh=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(f.a)(this,n),(e=t.apply(this,arguments)).type=il.Text,e.stopEditingShape=function(){e.setStatus(Hp.Idle),e.app.appState.isToolLocked||e.app.selectTool("select")},e.onKeyUp=function(){},e.onKeyDown=function(){},e.onPointerDown=function(){if(e.status!==Hp.Creating){if(e.status===Hp.Idle){var t=e.app,n=t.currentPoint,r=t.currentGrid,a=t.settings.showGrid;return e.app.createTextShapeAtPoint(a?ye.b.snap(n,r):n),void e.setStatus(Hp.Creating)}}else e.stopEditingShape()},e.onPointerUp=function(){},e.onPointShape=function(t){var n=e.app.getShape(t.target);n.type===il.Text&&(e.setStatus(Hp.Idle),e.app.setEditingId(n.id))},e.onShapeBlur=function(){e.stopEditingShape()},e}return n}(th);!function(e){e.Idle="idle",e.Creating="creating",e.Extending="extending",e.Pinching="pinching"}(ah||(ah={}));var sh=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(f.a)(this,n),(e=t.apply(this,arguments)).type=il.Draw,e.onEnter=function(){e.lastShapeId=void 0},e.onCancel=function(){switch(e.status){case ah.Idle:e.app.selectTool("select");break;default:e.setStatus(ah.Idle)}e.app.cancelSession()},e.onPointerDown=function(t){if(e.status===ah.Idle){var n=e.app,r=n.currentPoint,a=n.appState,i=a.currentPageId,o=a.currentStyle,s=e.lastShapeId&&e.app.getShape(e.lastShapeId);if(t.shiftKey&&s)e.app.startSession(Wu.Draw,s.id),e.setStatus(ah.Extending);else{var c=e.getNextChildIndex(),u=y.f.uniqueId(),l=np.create({id:u,parentId:i,childIndex:c,point:r,style:ou({},o)});e.lastShapeId=u,e.app.patchCreate([l]),e.app.startSession(Wu.Draw,u),e.setStatus(ah.Creating)}}},e.onPointerMove=function(){switch(e.status){case ah.Extending:case ah.Creating:e.app.updateSession()}},e.onPointerUp=function(){e.app.completeSession(),e.setStatus(ah.Idle)},e}return n}(th),ch=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(f.a)(this,n),(e=t.apply(this,arguments)).type=il.Ellipse,e.onPointerDown=function(){if(e.status===Hp.Idle){var t=e.app,n=t.currentPoint,r=t.currentGrid,a=t.settings.showGrid,i=t.appState,o=i.currentPageId,s=i.currentStyle,c=e.getNextChildIndex(),u=y.f.uniqueId(),l=tp.create({id:u,parentId:o,childIndex:c,point:a?ye.b.snap(n,r):n,style:ou({},s)});e.app.patchCreate([l]),e.app.startSession(Wu.TransformSingle,l.id,y.d.BottomRight,!0),e.setStatus(Hp.Creating)}},e}return n}(th),uh=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(f.a)(this,n),(e=t.apply(this,arguments)).type=il.Rectangle,e.onPointerDown=function(){if(e.status===Hp.Idle){var t=e.app,n=t.currentPoint,r=t.currentGrid,a=t.settings.showGrid,i=t.appState,o=i.currentPageId,s=i.currentStyle,c=e.getNextChildIndex(),u=y.f.uniqueId(),l=Qf.create({id:u,parentId:o,childIndex:c,point:a?ye.b.snap(n,r):n,style:ou({},s)});e.app.patchCreate([l]),e.app.startSession(Wu.TransformSingle,l.id,y.d.BottomRight,!0),e.setStatus(Hp.Creating)}},e}return n}(th),lh=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(f.a)(this,n),(e=t.apply(this,arguments)).type=il.Triangle,e.onPointerDown=function(){if(e.status===Hp.Idle){var t=e.app,n=t.currentPoint,r=t.currentGrid,a=t.settings.showGrid,i=t.appState,o=i.currentPageId,s=i.currentStyle,c=e.getNextChildIndex(),u=y.f.uniqueId(),l=ep.create({id:u,parentId:o,childIndex:c,point:a?ye.b.snap(n,r):n,style:ou({},s)});e.app.patchCreate([l]),e.app.startSession(Wu.TransformSingle,l.id,y.d.BottomRight,!0),e.setStatus(Hp.Creating)}},e}return n}(th),dh=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(f.a)(this,n),(e=t.apply(this,arguments)).type=il.Line,e.onPointerDown=function(){if(e.status===Hp.Idle){var t=e.app,n=t.currentPoint,r=t.currentGrid,a=t.settings.showGrid,i=t.appState,o=i.currentPageId,s=i.currentStyle,c=e.getNextChildIndex(),u=y.f.uniqueId(),l=rp.create({id:u,parentId:o,childIndex:c,point:a?ye.b.snap(n,r):n,decorations:{start:void 0,end:void 0},style:ou({},s)});e.app.patchCreate([l]),e.app.startSession(Wu.Arrow,l.id,"end",!0),e.setStatus(Hp.Creating)}},e}return n}(th),fh=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(f.a)(this,n),(e=t.apply(this,arguments)).type=il.Arrow,e.onPointerDown=function(){if(e.status===Hp.Idle){var t=e.app,n=t.currentPoint,r=t.currentGrid,a=t.settings.showGrid,i=t.appState,o=i.currentPageId,s=i.currentStyle,c=e.getNextChildIndex(),u=y.f.uniqueId(),l=rp.create({id:u,parentId:o,childIndex:c,point:a?ye.b.snap(n,r):n,style:ou({},s)});e.app.patchCreate([l]),e.app.startSession(Wu.Arrow,l.id,"end",!0),e.setStatus(Hp.Creating)}},e}return n}(th),ph=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(f.a)(this,n),(e=t.apply(this,arguments)).type=il.Sticky,e.onPointerDown=function(){if(e.status===Hp.Creating)return e.setStatus(Hp.Idle),void(e.app.appState.isToolLocked||e.app.selectTool("select"));if(e.status===Hp.Idle){var t=e.app,n=t.currentPoint,r=t.currentGrid,a=t.settings.showGrid,i=t.appState,o=i.currentPageId,s=i.currentStyle,c=e.getNextChildIndex(),u=y.f.uniqueId();e.shapeId=u;var l=op.create({id:u,parentId:o,childIndex:c,point:a?ye.b.snap(n,r):n,style:ou({},s)}),d=op.getBounds(l);l.point=ye.b.sub(l.point,[d.width/2,d.height/2]),e.app.createShapes(l),e.app.startSession(Wu.Translate),e.setStatus(Hp.Creating)}},e.onPointerUp=function(){e.status===Hp.Creating&&(e.setStatus(Hp.Idle),e.app.completeSession(),e.app.selectTool("select"),e.app.setEditingId(e.shapeId))},e}return n}(th);function hh(e){if(null===e)return e;if(e instanceof Date)return new Date(e.getTime());if("object"===typeof e){if("function"===typeof e[Symbol.iterator]){var t=[];if(e.length>0){var n,r=Object(g.a)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;t.push(hh(a))}}catch(rm){r.e(rm)}finally{r.f()}}return t}var i=Object.keys(e),o={};if(i.length>0){var s,c=Object(g.a)(i);try{for(c.s();!(s=c.n()).done;){var u=s.value;o[u]=hh(e[u])}}catch(rm){c.e(rm)}finally{c.f()}}return o}return e}var vh=function(){function e(t,n,r,a){var i=this;Object(f.a)(this,e),this.pointer=-1,this._status="loading",this.stack=[],this.isPaused=!1,this.persist=function(e){if("ready"===i._status)return i.onPersist&&i.onPersist(i._state,e),i._idbId?je(i._idbId,i._state).catch((function(e){return console.error(e)})):void 0},this.applyPatch=function(e,t){var n=i._state,r=y.f.deepMerge(i._state,e),a=i.cleanup(r,n,e,t);return i.onStateWillChange&&i.onStateWillChange(a,t),i._state=a,i.store.setState(i._state,!0),i.onStateDidChange&&i.onStateDidChange(i._state,t),i},this.cleanup=function(e,t,n,r){return e},this.patchState=function(e,t){return i.applyPatch(e,t),i.onPatch&&i.onPatch(i._state,t),i},this.replaceState=function(e,t){var n=i.cleanup(e,i._state,e,t);return i.onStateWillChange&&i.onStateWillChange(n,"replace"),i._state=n,i.store.setState(i._state,!0),i.onStateDidChange&&i.onStateDidChange(i._state,"replace"),i},this.setState=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.id;return i.pointer<i.stack.length-1&&(i.stack=i.stack.slice(0,i.pointer+1)),i.stack.push(su(ou({},e),{id:t})),i.pointer=i.stack.length-1,i.applyPatch(e.after,t),i.onCommand&&i.onCommand(i._state,t),i.persist(t),i},this.reset=function(){return i.onStateWillChange&&i.onStateWillChange(i.initialState,"reset"),i._state=i.initialState,i.store.setState(i._state,!0),i.resetHistory(),i.persist("reset"),i.onStateDidChange&&i.onStateDidChange(i._state,"reset"),i.onReset&&i.onReset(i._state),i},this.replaceHistory=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length-1;return i.stack=e,i.pointer=t,i.onReplace&&i.onReplace(i._state),i},this.resetHistory=function(){return i.stack=[],i.pointer=-1,i.onResetHistory&&i.onResetHistory(i._state),i},this.undo=function(){if(!i.isPaused){if(!i.canUndo)return i;var e=i.stack[i.pointer];i.pointer--,i.applyPatch(e.before,"undo"),i.persist("undo")}return i.onUndo&&i.onUndo(i._state),i},this.redo=function(){if(!i.isPaused){if(!i.canRedo)return i;i.pointer++;var e=i.stack[i.pointer];i.applyPatch(e.after,"redo"),i.persist("undo")}return i.onRedo&&i.onRedo(i._state),i},this.setSnapshot=function(){return i._snapshot=ou({},i._state),i},this.forceUpdate=function(){i.store.setState(i._state,!0)},this._idbId=n,this._state=hh(t),this._snapshot=hh(t),this.initialState=hh(t),this.store=$e()((function(){return i._state})),this.useStore=Ze()(this.store),this.ready=new Promise((function(e){var o="none";i._idbId?(o="restored",xe(i._idbId).then((function(s){return du(i,null,h.a.mark((function i(){var c,u;return h.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!s){i.next=14;break}if(c=s,!r){i.next=7;break}return i.next=5,xe(n+"_version");case 5:(u=i.sent)&&u<r&&(c=a?a(s,t,u):t,o="migrated");case 7:return i.next=9,je(n+"_version",r||-1);case 9:this._state=hh(c),this._snapshot=hh(c),this.store.setState(this._state,!0),i.next=16;break;case 14:return i.next=16,je(n+"_version",r||-1);case 16:this._status="ready",e(o);case 18:case"end":return i.stop()}}),i,this)})))})).catch((function(e){return console.error(e)}))):(i._status="ready",e(o))})).then((function(e){return i.onReady&&i.onReady(e),e}))}return Object(u.a)(e,[{key:"pause",value:function(){this.isPaused=!0}},{key:"resume",value:function(){this.isPaused=!1}},{key:"canUndo",get:function(){return this.pointer>-1}},{key:"canRedo",get:function(){return this.pointer<this.stack.length-1}},{key:"state",get:function(){return this._state}},{key:"status",get:function(){return this._status}},{key:"snapshot",get:function(){return this._snapshot}}]),e}(),gh=y.f.uniqueId(),mh=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r,a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(f.a)(this,n),(a=t.call(this,n.defaultState,e,n.version,(function(e,t,r){return su(ou({},t),{document:Il(su(ou(ou({},t.document),e.document),{version:r}),n.version)})}))).callbacks={},a.tools=(r={select:new rh(Object(o.a)(a)),erase:new ih(Object(o.a)(a))},Object(l.a)(r,il.Text,new oh(Object(o.a)(a))),Object(l.a)(r,il.Draw,new sh(Object(o.a)(a))),Object(l.a)(r,il.Ellipse,new ch(Object(o.a)(a))),Object(l.a)(r,il.Rectangle,new uh(Object(o.a)(a))),Object(l.a)(r,il.Triangle,new lh(Object(o.a)(a))),Object(l.a)(r,il.Line,new dh(Object(o.a)(a))),Object(l.a)(r,il.Arrow,new fh(Object(o.a)(a))),Object(l.a)(r,il.Sticky,new ph(Object(o.a)(a))),r),a.currentTool=a.tools.select,a.readOnly=!1,a.isDirty=!1,a.isCreating=!1,a.originPoint=[0,0],a.currentPoint=[0,0],a.previousPoint=[0,0],a.shiftKey=!1,a.altKey=!1,a.metaKey=!1,a.ctrlKey=!1,a.spaceKey=!1,a.isPointing=!1,a.isForcePanning=!1,a.editingStartTime=-1,a.fileSystemHandle=null,a.viewport=y.f.getBoundsFromPoints([[0,0],[100,100]]),a.rendererBounds=y.f.getBoundsFromPoints([[0,0],[100,100]]),a.selectHistory={stack:[[]],pointer:0},a.rotationInfo={selectedIds:[],center:[0,0]},a.pasteInfo={center:[0,0],offset:[0,0]},a.onReady=function(){var e,t;a.loadDocument(a.document),Wl().then((function(e){a.fileSystemHandle=e}));try{a.patchState({appState:{status:Yu.Idle},document:Il(a.document,n.version)})}catch(r){console.error("The data appears to be corrupted. Resetting!",r),localStorage.setItem(a.document.id+"_corrupted",JSON.stringify(a.document)),a.patchState(su(ou({},n.defaultState),{appState:su(ou({},n.defaultState.appState),{status:Yu.Idle})}))}null==(t=(e=a.callbacks).onMount)||t.call(e,Object(o.a)(a))},a.cleanup=function(e,t){var n=ou({},e);n.document!==t.document&&Object.entries(n.document.pages).forEach((function(e){var r=Object(d.a)(e,2),a=r[0],i=r[1];if(void 0===i)return delete n.document.pages[a],void delete n.document.pageStates[a];var o=t.document.pages[a],s={};if(!o||i.shapes!==o.shapes||i.bindings!==o.bindings){i.shapes=ou({},i.shapes),i.bindings=ou({},i.bindings);var c=new Set;Object.entries(i.shapes).forEach((function(e){var t,r,u=Object(d.a)(e,2),l=u[0],f=u[1];(f?r=f.parentId:(r=null==(t=null==o?void 0:o.shapes[l])?void 0:t.parentId,delete i.shapes[l]),i.id===n.appState.currentPageId&&(null==o?void 0:o.shapes[l])!==f&&(s[l]=f),r&&r!==a)&&(void 0!==i.shapes[r]&&c.add(i.shapes[r]))})),Object.keys(i.bindings).forEach((function(e){i.bindings[e]||delete i.bindings[e]})),n.document.pages[a]=i,dp.getRelatedBindings(n,Object.keys(s),a).forEach((function(e){var t;if(i.bindings[e.id]){var r=i.shapes[e.toId],o=i.shapes[e.fromId];if(r&&o){var s=dp.getShapeUtil(r),c=dp.getShapeUtil(o),u=null==(t=c.onBindingChange)?void 0:t.call(c,o,e,r,s.getBounds(r),s.getExpandedBounds(r),s.getCenter(r));if(u){var l=ou(ou({},o),u);i.shapes[o.id]=l}}else delete n.document.pages[a].bindings[e.id]}})),c.forEach((function(e){if(!e)throw Error("no group!");var t=e.children.filter((function(e){return void 0!==i.shapes[e]})),n=y.f.getCommonBounds(t.map((function(e){return i.shapes[e]})).filter(Boolean).map((function(e){return dp.getRotatedBounds(e)})));i.shapes[e.id]=su(ou({},e),{point:[n.minX,n.minY],size:[n.width,n.height],children:t})}))}var u=ou({},n.document.pageStates[a]);u.brush||delete u.brush,u.hoveredId&&!i.shapes[u.hoveredId]&&delete u.hoveredId,u.bindingId&&!i.bindings[u.bindingId]&&(dp.warn("Could not find the binding of ".concat(a)),delete u.bindingId),u.editingId&&!i.shapes[u.editingId]&&(dp.warn("Could not find the editing shape!"),delete u.editingId),n.document.pageStates[a]=u})),"assets"in n.document||(n.document.assets={}),Object.keys(n.document.assets).forEach((function(e){n.document.assets[e]||delete n.document.assets[e]}));var r=n.appState.currentPageId,i=n.document.pageStates[r];if(n.room&&n.room!==t.room){var o=su(ou({},n.room),{users:ou({},n.room.users)});t.room&&Object.values(t.room.users).filter(Boolean).forEach((function(e){void 0===o.users[e.id]&&delete o.users[e.id]})),n.room=o}return n.room&&(n.room.users[n.room.userId]=su(ou({},n.room.users[n.room.userId]),{point:a.currentPoint,selectedIds:i.selectedIds})),a.readOnly&&(n.document.pages=t.document.pages),n},a.onPatch=function(e,t){var n,r;null==(r=(n=a.callbacks).onPatch)||r.call(n,Object(o.a)(a),t)},a.onCommand=function(e,t){var n,r;a.clearSelectHistory(),a.isDirty=!0,null==(r=(n=a.callbacks).onCommand)||r.call(n,Object(o.a)(a),t)},a.onReplace=function(){a.clearSelectHistory(),a.isDirty=!1},a.onUndo=function(){var e,t;a.rotationInfo.selectedIds=Object(v.a)(a.selectedIds),null==(t=(e=a.callbacks).onUndo)||t.call(e,Object(o.a)(a))},a.onRedo=function(){var e,t;a.rotationInfo.selectedIds=Object(v.a)(a.selectedIds),null==(t=(e=a.callbacks).onRedo)||t.call(e,Object(o.a)(a))},a.onPersist=function(){var e,t;a.callbacks.onChangePage&&a.broadcastPageChanges(),null==(t=(e=a.callbacks).onPersist)||t.call(e,Object(o.a)(a))},a.prevSelectedIds=a.selectedIds,a.onStateDidChange=function(e,t){var n,r,i,s;null==(r=(n=a.callbacks).onChange)||r.call(n,Object(o.a)(a),t),a.room&&a.selectedIds!==a.prevSelectedIds&&(null==(s=(i=a.callbacks).onChangePresence)||s.call(i,Object(o.a)(a),su(ou({},a.room.users[a.room.userId]),{selectedIds:a.selectedIds})),a.prevSelectedIds=a.selectedIds)},a.justSent=!1,a.prevShapes=a.page.shapes,a.prevBindings=a.page.bindings,a.prevAssets=a.document.assets,a.broadcastPageChanges=function(){var e,t,n=new Set,r={},i={},s={};a.shapes.forEach((function(e){n.add(e.id),a.prevShapes[e.id]!==e&&(r[e.id]=e)})),Object.keys(a.prevShapes).filter((function(e){return!n.has(e)})).forEach((function(e){r[e]=void 0})),a.bindings.forEach((function(e){n.add(e.id),a.prevBindings[e.id]!==e&&(i[e.id]=e)})),Object.keys(a.prevBindings).filter((function(e){return!n.has(e)})).forEach((function(e){i[e]=void 0})),a.assets.forEach((function(e){n.add(e.id),a.prevAssets[e.id]!==e&&(s[e.id]=e)})),Object.keys(a.prevAssets).filter((function(e){return!n.has(e)})).forEach((function(e){s[e]=void 0})),(Object.keys(i).length>0||Object.keys(r).length>0||Object.keys(s).length>0)&&(a.justSent=!0,null==(t=(e=a.callbacks).onChangePage)||t.call(e,Object(o.a)(a),r,i,s),a.prevShapes=a.page.shapes,a.prevBindings=a.page.bindings,a.prevAssets=a.document.assets)},a.getReservedContent=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.currentPageId,n=a.document.pages[t].bindings,r={},i={},o=Object.values(n),s=new Map(o.map((function(e){return[e.toId,e]}))),c=new Map(o.map((function(e){return[e.fromId,e]}))),u=[s,c],l=[];a.session&&e.forEach((function(e){return l.push(e)}));for(var d=new Set(l),f=new Set,p=function(){var e=l.pop();if(!e)return"break";if(f.has(e))return"continue";f.add(e);var n=a.getShape(e);r[e]=n,n.parentId!==t&&l.push(n.parentId),n.children&&l.push.apply(l,Object(v.a)(n.children)),u.map((function(e){return e.get(n.id)})).filter(Boolean).forEach((function(e){i[e.id]=e,l.push(e.toId,e.fromId)}))};l.length>0;){var h=p();if("break"===h)break}return{reservedShapes:r,reservedBindings:i,strongReservedShapeIds:d}},a.replacePageContent=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.currentPageId;return a.justSent?(a.justSent=!1,Object(o.a)(a)):(a.useStore.setState((function(i){var o=i.document.pageStates[r],s=o.hoveredId,c=o.editingId,u=o.bindingId,d=o.selectedIds,f=Object(v.a)(d);c&&f.push(c);var p=a.getReservedContent(f,a.currentPageId),h=p.reservedShapes,g=p.reservedBindings,m=p.strongReservedShapeIds;Object.values(h).filter((function(e){return!("text"in e)})).forEach((function(t){var n=e[t.id];n&&(t.type===il.Arrow||m.has(t.id)?("decorations"in n&&"decorations"in t&&(t.decorations=n.decorations),t.style=n.style):h[t.id]=n)})),a.prevShapes=e,a.prevBindings=t,a.prevAssets=n;var b=ou(ou({},e),h),w=ou(ou({},t),g),O=ou({},n),k=su(ou({},i),{document:su(ou({},i.document),{pages:Object(l.a)({},r,su(ou({},i.document.pages[r]),{shapes:b,bindings:w})),assets:O,pageStates:su(ou({},i.document.pageStates),Object(l.a)({},r,su(ou({},i.document.pageStates[r]),{selectedIds:d.filter((function(e){return void 0!==b[e]})),hoveredId:s?void 0===b[s]?void 0:s:void 0,editingId:c,bindingId:u?void 0===w[u]?void 0:u:void 0})))})}),S=dp.getRelatedBindings(k,Object.keys(b),r),x=k.document.pages[r];return S.forEach((function(e){var t;if(x.bindings[e.id]){var n=x.shapes[e.toId],r=x.shapes[e.fromId],a=dp.getShapeUtil(n),i=dp.getShapeUtil(r),o=null==(t=i.onBindingChange)?void 0:t.call(i,r,e,n,a.getBounds(n),a.getExpandedBounds(n),a.getCenter(n));if(o){var s=ou(ou({},r),o);x.shapes[r.id]=s}}})),Object.values(b).forEach((function(e){if(e.type===il.Group){var t=e.children.filter((function(e){return void 0!==x.shapes[e]})),n=y.f.getCommonBounds(t.map((function(e){return x.shapes[e]})).filter(Boolean).map((function(e){return dp.getRotatedBounds(e)})));x.shapes[e.id]=su(ou({},e),{point:[n.minX,n.minY],size:[n.width,n.height],children:t})}})),a.state.document=k.document,k}),!0),Object(o.a)(a))},a.updateBounds=function(e){a.rendererBounds=e;var t=a.pageState.camera,n=t.point,r=t.zoom;a.updateViewport(n,r),!a.readOnly&&a.session&&a.session.update()},a.updateViewport=function(e,t){var n=a.rendererBounds,r=n.width,i=n.height,o=ye.a.sub(ye.a.div([0,0],t),e),s=Object(d.a)(o,2),c=s[0],u=s[1],l=ye.a.sub(ye.a.div([r,i],t),e),f=Object(d.a)(l,2),p=f[0],h=f[1];a.viewport={minX:c,minY:u,maxX:p,maxY:h,height:p-c,width:h-u}},a.setEditingId=function(e){a.readOnly||(a.editingStartTime=performance.now(),a.patchState({document:{pageStates:Object(l.a)({},a.currentPageId,{editingId:e})}},"set_editing_id"))},a.setHoveredId=function(e){a.patchState({document:{pageStates:Object(l.a)({},a.currentPageId,{hoveredId:e})}},"set_hovered_id")},a.setSetting=function(e,t){return a.session||(a.patchState({settings:Object(l.a)({},e,"function"===typeof t?t(a.settings[e]):t)},"settings:".concat(e)),a.persist()),Object(o.a)(a)},a.toggleFocusMode=function(){return a.session||(a.patchState({settings:{isFocusMode:!a.settings.isFocusMode}},"settings:toggled_focus_mode"),a.persist()),Object(o.a)(a)},a.togglePenMode=function(){return a.session||(a.patchState({settings:{isPenMode:!a.settings.isPenMode}},"settings:toggled_pen_mode"),a.persist()),Object(o.a)(a)},a.toggleDarkMode=function(){return a.session||(a.patchState({settings:{isDarkMode:!a.settings.isDarkMode}},"settings:toggled_dark_mode"),a.persist()),Object(o.a)(a)},a.toggleZoomSnap=function(){return a.session||(a.patchState({settings:{isZoomSnap:!a.settings.isZoomSnap}},"settings:toggled_zoom_snap"),a.persist()),Object(o.a)(a)},a.toggleDebugMode=function(){return a.session||(a.patchState({settings:{isDebugMode:!a.settings.isDebugMode}},"settings:toggled_debug"),a.persist()),Object(o.a)(a)},a.setMenuOpen=function(e){return a.patchState({appState:{isMenuOpen:e}},"ui:toggled_menu_opened"),a.persist(),Object(o.a)(a)},a.setIsLoading=function(e){return a.patchState({appState:{isLoading:e}},"ui:toggled_is_loading"),a.persist(),Object(o.a)(a)},a.setDisableAssets=function(e){return a.patchState({appState:{disableAssets:e}},"ui:toggled_disable_images"),Object(o.a)(a)},a.toggleGrid=function(){return a.session||(a.patchState({settings:{showGrid:!a.settings.showGrid}},"settings:toggled_grid"),a.persist()),Object(o.a)(a)},a.selectTool=function(e){if(a.readOnly||a.session)return Object(o.a)(a);a.isPointing=!1;var t=a.tools[e];return t===a.currentTool?(a.patchState({appState:{isToolLocked:!1}}),Object(o.a)(a)):(a.currentTool.onExit(),t.previous=a.currentTool.type,a.currentTool=t,a.currentTool.onEnter(),a.patchState({appState:{activeTool:e,isToolLocked:!1}},"selected_tool:".concat(e)))},a.toggleToolLock=function(){return a.session?Object(o.a)(a):a.patchState({appState:{isToolLocked:!a.appState.isToolLocked}},"toggled_tool_lock")},a.resetDocument=function(){return a.session||(a.session=void 0,a.pasteInfo.offset=[0,0],a.currentTool=a.tools.select,a.resetHistory().clearSelectHistory().loadDocument(Il(n.defaultDocument,n.version)).persist()),Object(o.a)(a)},a.updateUsers=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.patchState({room:{users:Object.fromEntries(e.map((function(e){return[e.id,e]})))}},t?"room:self:update":"room:user:update")},a.removeUser=function(e){a.patchState({room:{users:Object(l.a)({},e,void 0)}})},a.mergeDocument=function(e){if(a.document.id!==e.id)return a.replaceState(su(ou({},a.state),{appState:su(ou({},a.appState),{currentPageId:Object.keys(e.pages)[0]}),document:Il(e,n.version)})),Object(o.a)(a);var t=ou({},a.document.pageStates),r=su(ou({},a.appState),{currentPageId:e.pages[a.currentPageId]?a.currentPageId:Object.keys(e.pages)[0],pages:Object.values(e.pages).map((function(e,t){return{id:e.id,name:e.name,childIndex:e.childIndex||t}}))});a.resetHistory(),Object.keys(a.document.pages).forEach((function(n){e.pages[n]||(n===a.appState.currentPageId&&(a.cancelSession(),a.selectNone()),t[n]=void 0)})),a.session&&a.selectedIds.filter((function(t){return!e.pages[a.currentPageId].shapes[t]})).forEach((function(t){return e.pages[a.currentPageId].shapes[t]=a.page.shapes[t]})),Object.entries(t).forEach((function(t){var n=Object(d.a)(t,2),r=n[0],a=n[1];a.selectedIds=a.selectedIds.filter((function(t){return!!e.pages[r].shapes[t]}))}));var i=a.pageState.editingId;return i&&(e.pages[a.currentPageId].shapes[i]=a.page.shapes[i],t[a.currentPageId].selectedIds=[i]),a.replaceState(su(ou({},a.state),{appState:r,document:su(ou({},Il(e,n.version)),{pageStates:t})}),"merge")},a.updateDocument=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"updated_document",n=a.state,r=su(ou({},n),{document:ou({},n.document)});e.pages[a.currentPageId]||(r.appState=su(ou({},n.appState),{currentPageId:Object.keys(e.pages)[0]}));for(var i=1,o=0,s=Object.values(e.pages);o<s.length;o++){var c=s[o];c!==n.document.pages[c.id]&&(r.document.pages[c.id]=c,c.name||(r.document.pages[c.id].name="Page ".concat(i+1),i++))}for(var u=0,l=Object.values(e.pageStates);u<l.length;u++){var d=l[u];d!==n.document.pageStates[d.id]&&function(){r.document.pageStates[d.id]=d;for(var t=e.pages[d.id],n=0,a=["bindingId","editingId","hoveredId","pointedId"];n<a.length;n++){var i=a[n];t.shapes[i]||(d[i]=void 0)}d.selectedIds=d.selectedIds.filter((function(n){return!!e.pages[t.id].shapes[n]}))}()}return r.document=Il(r.document,r.document.version||0),a.replaceState(r,"".concat(t,":").concat(e.id))},a.loadRoom=function(e){return a.patchState({room:{id:e,userId:gh,users:Object(l.a)({},gh,{id:gh,color:Hl[Math.floor(Math.random()*Hl.length)],point:[100,100],selectedIds:[],activeShapes:[]})}}),Object(o.a)(a)},a.loadDocument=function(e){a.selectNone(),a.resetHistory(),a.clearSelectHistory(),a.session=void 0,a.replaceState(su(ou({},n.defaultState),{settings:ou({},a.state.settings),document:Il(e,n.version),appState:su(ou(ou({},n.defaultState.appState),a.state.appState),{currentPageId:Object.keys(e.pages)[0],disableAssets:a.disableAssets})}),"loaded_document");var t=a.pageState.camera,r=t.point,i=t.zoom;return a.updateViewport(r,i),Object(o.a)(a)},a.newProject=function(){a.isLocal&&(a.fileSystemHandle=null,a.resetDocument())},a.saveProject=function(){return du(Object(o.a)(a),null,h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.readOnly){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,Yl(Il(this.document,n.version),this.fileSystemHandle);case 5:t=e.sent,this.fileSystemHandle=t,this.persist(),this.isDirty=!1,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0.message);case 14:return e.abrupt("return",this);case 15:case"end":return e.stop()}}),e,this,[[2,11]])})))},a.saveProjectAs=function(){return du(Object(o.a)(a),null,h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Yl(this.document,null);case 3:t=e.sent,this.fileSystemHandle=t,this.persist(),this.isDirty=!1,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0.message);case 12:return e.abrupt("return",this);case 13:case"end":return e.stop()}}),e,this,[[0,9]])})))},a.openProject=function(){return du(Object(o.a)(a),null,h.a.mark((function e(){var t,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isLocal){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,Gl();case 5:if(t=e.sent){e.next=8;break}throw Error();case 8:n=t.fileHandle,r=t.document,this.loadDocument(r),this.fileSystemHandle=n,this.zoomToFit(),this.persist(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),console.error(e.t0);case 18:return e.prev=18,this.persist(),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[2,15,18,21]])})))},a.openAsset=function(){return du(Object(o.a)(a),null,h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isLocal){e.next=2;break}return e.abrupt("return");case 2:if(this.disableAssets){e.next=18;break}return e.prev=3,e.next=6,$l();case 6:if(t=e.sent){e.next=9;break}return e.abrupt("return");case 9:this.addMediaFromFile(t),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.error(e.t0);case 15:return e.prev=15,this.persist(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[3,12,15,18]])})))},a.signOut=function(){},a.getAppState=function(){return a.appState},a.getPage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.currentPageId;return dp.getPage(a.state,e||a.currentPageId)},a.getShapes=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.currentPageId;return dp.getShapes(a.state,e||a.currentPageId)},a.getBindings=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.currentPageId;return dp.getBindings(a.state,e||a.currentPageId)},a.getShape=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.currentPageId;return dp.getShape(a.state,e,t)},a.getShapeBounds=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.currentPageId;return dp.getBounds(a.getShape(e,t))},a.getBinding=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.currentPageId;return dp.getBinding(a.state,e,t)},a.getPageState=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.currentPageId;return dp.getPageState(a.state,e||a.currentPageId)},a.getPagePoint=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.currentPageId,n=a.getPageState(t),r=n.camera;return ye.a.sub(ye.a.div(e,r.zoom),r.point)},a.createPage=function(e){if(a.readOnly)return Object(o.a)(a);var t=a.rendererBounds,n=t.width,r=t.height;return a.setState(hp(Object(o.a)(a),[-n/2,-r/2],e))},a.changePage=function(e){return a.setState(pp(Object(o.a)(a),e))},a.renamePage=function(e,t){return a.readOnly?Object(o.a)(a):a.setState(Cp(Object(o.a)(a),e,t))},a.duplicatePage=function(e){return a.readOnly?Object(o.a)(a):a.setState(Op(Object(o.a)(a),e))},a.deletePage=function(e){return a.readOnly||Object.values(a.document.pages).length<=1?Object(o.a)(a):a.setState(gp(Object(o.a)(a),e||a.currentPageId))},a.copy=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.selectedIds,t=e.flatMap((function(e){return dp.getDocumentBranch(a.state,e,a.currentPageId)})),n=t.map((function(e){return y.f.deepClone(a.getShape(e,a.currentPageId))}));if(0===n.length)return Object(o.a)(a);var r=Object.values(a.page.bindings).filter((function(e){return t.includes(e.fromId)&&t.includes(e.toId)})),i=n.map((function(e){if(e.assetId)return a.document.assets[e.assetId]})).filter(Boolean);a.clipboard={shapes:n,bindings:r,assets:i};try{var s=JSON.stringify(ou({type:"tldr/clipboard"},a.clipboard));navigator.clipboard.writeText(s).then((function(){}),(function(){}))}catch(c){}return a.pasteInfo.offset=[0,0],a.pasteInfo.center=[0,0],Object(o.a)(a)},a.cut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.selectedIds;return a.copy(e),a.delete(e),Object(o.a)(a)},a.paste=function(e){if(!a.readOnly){var t=function(t,n,r){var i={},o=r.filter((function(e){return void 0===a.document.assets[e.id]}));o.length&&a.patchState({document:{assets:Object.fromEntries(o.map((function(e){return[e.id,e]})))}}),t.forEach((function(e){return i[e.id]=y.f.uniqueId()})),n.forEach((function(e){return i[e.id]=y.f.uniqueId()}));var s=dp.getTopChildIndex(a.state,a.currentPageId),c=t.sort((function(e,t){return e.childIndex-t.childIndex})).map((function(e){var t=i[e.parentId],n=su(ou({},e),{id:i[e.id],parentId:t||a.currentPageId});return e.children&&(n.children=e.children.map((function(e){return i[e]}))),t||(n.childIndex=s,s++),n.handles&&Object.values(n.handles).forEach((function(e){e.bindingId&&(e.bindingId=i[e.bindingId])})),n})),u=n.map((function(e){return su(ou({},e),{id:i[e.id],toId:i[e.toId],fromId:i[e.fromId]})})),l=y.f.getCommonBounds(c.map(dp.getBounds)),d=ye.a.toFixed(a.getPagePoint(e||a.centerPoint));ye.a.dist(d,a.pasteInfo.center)<2||ye.a.dist(d,ye.a.toFixed(y.f.getBoundsCenter(l)))<2?(d=ye.a.add(d,a.pasteInfo.offset),a.pasteInfo.offset=ye.a.add(a.pasteInfo.offset,[8,8])):(a.pasteInfo.center=d,a.pasteInfo.offset=[0,0]);var f=y.f.centerBounds(l,d),p=ye.a.sub(y.f.getBoundsCenter(f),y.f.getBoundsCenter(l));a.create(c.map((function(e){return dp.getShapeUtil(e.type).create(su(ou({},e),{point:ye.a.toFixed(ye.a.add(e.point,p)),parentId:e.parentId||a.currentPageId}))})),u)};return"clipboard"in navigator&&navigator.clipboard.readText?(navigator.clipboard.readText().then((function(e){var n=JSON.parse(e);if("tldr/clipboard"===n.type)t(n.shapes,n.bindings,n.assets);else{dp.warn("The selected shape was not a tldraw shape, treating as text.");var r=y.f.uniqueId();a.createShapes({id:r,type:il.Text,parentId:a.appState.currentPageId,text:dp.normalizeText(e),point:a.getPagePoint(a.centerPoint,a.currentPageId),style:ou({},a.appState.currentStyle)}),a.select(r)}})).catch((function(){dp.warn("Read permissions denied!"),a.clipboard&&t(a.clipboard.shapes,a.clipboard.bindings,a.clipboard.assets)})),Object(o.a)(a)):(dp.warn("This browser does not support the Clipboard API!"),void(a.clipboard&&t(a.clipboard.shapes,a.clipboard.bindings,a.clipboard.assets)))}},a.copySvg=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.selectedIds,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.currentPageId;if(0===e.length&&(e=Object.keys(a.page.shapes)),0!==e.length){var n=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=document.createElementNS("http://www.w3.org/2000/svg","defs"),i=document.createElementNS("http://www.w3.org/2000/svg","style");i.textContent="@import url('https://fonts.googleapis.com/css2?family=Caveat+Brush&family=Source+Code+Pro&family=Source+Sans+Pro&family=Crimson+Pro&display=block');",r.appendChild(i),n.appendChild(r);var o=e.map((function(e){return a.getShape(e,t)})).sort((function(e,t){return e.childIndex-t.childIndex})),s=y.f.getCommonBounds(o.map(dp.getRotatedBounds)),c=function(e){var t=dp.getShapeUtil(e),n=t.getBounds(e),r=t.getSvgElement(e);if(r)return e.type===il.Image?r.setAttribute("xlink:href",a.document.assets[e.assetId].src):e.type===il.Video&&r.setAttribute("xlink:href",a.serializeVideo(e.id)),r.setAttribute("transform","translate(".concat(Ml+e.point[0]-s.minX,", ").concat(Ml+e.point[1]-s.minY,") rotate(").concat(180*(e.rotation||0)/Math.PI,", ").concat(n.width/2,", ").concat(n.height/2,")")),r};o.forEach((function(e){var r;if(null==(r=e.children)?void 0:r.length){var i=document.createElementNS("http://www.w3.org/2000/svg","g");return e.children.forEach((function(e){var n=a.getShape(e,t),r=c(n);r&&i.appendChild(r)})),void n.appendChild(i)}var o=c(e);o&&n.appendChild(o)})),n.setAttribute("viewBox",[0,0,s.width+32,s.height+32].join(" ")),n.setAttribute("width",String(s.width)),n.setAttribute("height",String(s.height)),n.setAttribute("fill","transparent"),n.querySelectorAll(".tl-fill-hitarea, .tl-stroke-hitarea, .tl-binding-indicator").forEach((function(e){return e.remove()}));var u=(new XMLSerializer).serializeToString(n).replaceAll("&#10;      ","").replaceAll(/((\s|")[0-9]*\.[0-9]{2})([0-9]*)(\b|"|\))/g,"$1");return dp.copyStringToClipboard(u),u}},a.copyJson=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.selectedIds,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.currentPageId;if(0===e.length&&(e=Object.keys(a.page.shapes)),0!==e.length){var n=e.map((function(e){return a.getShape(e,t)})),r=JSON.stringify(n,null,2);return dp.copyStringToClipboard(r),r}},a.setCamera=function(e,t,n){return a.updateViewport(e,t),a.patchState({document:{pageStates:Object(l.a)({},a.currentPageId,{camera:{point:e,zoom:t}})}},n),Object(o.a)(a)},a.resetCamera=function(){return a.setCamera(a.centerPoint,1,"reset_camera")},a.pan=function(e){var t=a.pageState.camera;return a.setCamera(ye.a.toFixed(ye.a.sub(t.point,e)),t.zoom,"panned")},a.pinchZoom=function(e,t,n){var r=a.pageState.camera,i=ye.a.sub(r.point,ye.a.div(t,r.zoom)),o=n,s=ye.a.sub(ye.a.div(e,r.zoom),i),c=ye.a.sub(ye.a.div(e,o),i);return a.setCamera(ye.a.toFixed(ye.a.add(i,ye.a.sub(c,s))),o,"pinch_zoomed")},a.zoomTo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.centerPoint,n=a.pageState.camera,r=n.zoom,i=n.point,o=ye.a.sub(ye.a.div(t,r),i),s=ye.a.sub(ye.a.div(t,e),i);return a.setCamera(ye.a.toFixed(ye.a.add(i,ye.a.sub(s,o))),e,"zoomed_camera")},a.zoomIn=function(){var e=Math.round(100*a.pageState.camera.zoom/25),t=dp.getCameraZoom(.25*(e+1));return a.zoomTo(t)},a.zoomOut=function(){var e=Math.round(100*a.pageState.camera.zoom/25),t=dp.getCameraZoom(.25*(e-1));return a.zoomTo(t)},a.zoomToFit=function(){var e=Object(o.a)(a),t=e.shapes,n=e.pageState.camera;if(0===t.length)return Object(o.a)(a);var r=Object(o.a)(a).rendererBounds,i=y.f.getCommonBounds(t.map(dp.getBounds)),s=dp.getCameraZoom(Math.min((r.width-Dl)/i.width,(r.height-Dl)/i.height));s=n.zoom===s||n.zoom<1?Math.min(1,s):s;var c=(r.width-i.width*s)/2/s,u=(r.height-i.height*s)/2/s;return a.setCamera(ye.a.toFixed(ye.a.sub([c,u],[i.minX,i.minY])),s,"zoomed_to_fit")},a.zoomToSelection=function(){if(0===a.selectedIds.length)return Object(o.a)(a);var e=Object(o.a)(a).rendererBounds,t=dp.getSelectedBounds(a.state),n=dp.getCameraZoom(Math.min((e.width-Dl)/t.width,(e.height-Dl)/t.height));n=a.pageState.camera.zoom===n||a.pageState.camera.zoom<1?Math.min(1,n):n;var r=(e.width-t.width*n)/2/n,i=(e.height-t.height*n)/2/n;return a.setCamera(ye.a.toFixed(ye.a.sub([r,i],[t.minX,t.minY])),n,"zoomed_to_selection")},a.zoomToContent=function(){var e=a.shapes,t=a.pageState;if(0===e.length)return Object(o.a)(a);var n=Object(o.a)(a).rendererBounds,r=t.camera.zoom,i=y.f.getCommonBounds(e.map(dp.getBounds)),s=(n.width-i.width*r)/2/r,c=(n.height-i.height*r)/2/r;return a.setCamera(ye.a.toFixed(ye.a.sub([s,c],[i.minX,i.minY])),a.pageState.camera.zoom,"zoomed_to_content")},a.resetZoom=function(){return a.zoomTo(1)},a.zoomBy=y.f.throttle((function(e,t){var n=a.pageState.camera.zoom,r=dp.getCameraZoom(n-e*n);return a.zoomTo(r,t)}),16),a.clearSelectHistory=function(){return a.selectHistory.pointer=0,a.selectHistory.stack=[a.selectedIds],Object(o.a)(a)},a.addToSelectHistory=function(e){return a.selectHistory.pointer<a.selectHistory.stack.length&&(a.selectHistory.stack=a.selectHistory.stack.slice(0,a.selectHistory.pointer+1)),a.selectHistory.pointer++,a.selectHistory.stack.push(e),Object(o.a)(a)},a.setSelectedIds=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?[].concat(Object(v.a)(a.pageState.selectedIds),Object(v.a)(e)):Object(v.a)(e);return a.patchState({appState:{activeTool:"select"},document:{pageStates:Object(l.a)({},a.currentPageId,{selectedIds:n})}},"selected")},a.undoSelect=function(){return a.selectHistory.pointer>0&&(a.selectHistory.pointer--,a.setSelectedIds(a.selectHistory.stack[a.selectHistory.pointer])),Object(o.a)(a)},a.redoSelect=function(){return a.selectHistory.pointer<a.selectHistory.stack.length-1&&(a.selectHistory.pointer++,a.setSelectedIds(a.selectHistory.stack[a.selectHistory.pointer])),Object(o.a)(a)},a.select=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach((function(e){if(!a.page.shapes[e])throw Error("That shape does not exist on page ".concat(a.currentPageId))})),a.setSelectedIds(t),a.addToSelectHistory(t),Object(o.a)(a)},a.selectAll=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.currentPageId;return a.session||(a.setSelectedIds(Object.values(a.document.pages[e].shapes).filter((function(t){return t.parentId===e})).map((function(e){return e.id}))),a.addToSelectHistory(a.selectedIds),a.selectTool("select")),Object(o.a)(a)},a.selectNone=function(){return a.setSelectedIds([]),a.addToSelectHistory(a.selectedIds),Object(o.a)(a)},a.startSession=function(e){if(a.readOnly&&e!==Wu.Brush)return Object(o.a)(a);a.session&&(dp.warn("Already in a session! (".concat(a.session.constructor.name,")")),a.cancelSession());for(var t=Qp(e),n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];a.session=i(t,[Object(o.a)(a)].concat(r));var c=a.session.start();return c&&a.patchState(c,"session:start_".concat(a.session.constructor.name)),Object(o.a)(a)},a.updateSession=function(){var e=Object(o.a)(a).session;if(!e)return Object(o.a)(a);var t=e.update();return t?a.patchState(t,"session:".concat(null==e?void 0:e.constructor.name)):Object(o.a)(a)},a.cancelSession=function(){var e=Object(o.a)(a).session;if(!e)return Object(o.a)(a);a.session=void 0;var t=e.cancel();return t&&a.patchState(t,"session:cancel:".concat(e.constructor.name)),Object(o.a)(a)},a.completeSession=function(){var e,t,n,r,i,s,c,u=Object(o.a)(a).session;if(!u)return Object(o.a)(a);a.session=void 0;var d=u.complete();if(void 0===d)return a.isCreating=!1,a.patchState({appState:{status:Yu.Idle},document:{pageStates:Object(l.a)({},a.currentPageId,{editingId:void 0,bindingId:void 0,hoveredId:void 0})}},"session:complete:".concat(u.constructor.name));if("after"in d){if(a.isCreating){if(d.before={appState:su(ou({},d.before.appState),{status:Yu.Idle}),document:{pages:Object(l.a)({},a.currentPageId,{shapes:Object.fromEntries(a.selectedIds.map((function(e){return[e,void 0]})))}),pageStates:Object(l.a)({},a.currentPageId,{selectedIds:[],editingId:null,bindingId:null,hoveredId:null})}},a.appState.isToolLocked)((null==(n=null==(t=null==(e=d.after)?void 0:e.document)?void 0:t.pageStates)?void 0:n[a.currentPageId])||{}).selectedIds=[];a.isCreating=!1}d.after.appState=su(ou({},d.after.appState),{status:Yu.Idle}),d.after.document=su(ou({},d.after.document),{pageStates:su(ou({},null==(r=d.after.document)?void 0:r.pageStates),Object(l.a)({},a.currentPageId,su(ou({},((null==(i=d.after.document)?void 0:i.pageStates)||{})[a.currentPageId]),{editingId:null})))}),a.setState(d,"session:complete:".concat(u.constructor.name))}else a.patchState(su(ou({},d),{appState:su(ou({},d.appState),{status:Yu.Idle}),document:su(ou({},d.document),{pageStates:Object(l.a)({},a.currentPageId,su(ou({},null==(c=null==(s=d.document)?void 0:s.pageStates)?void 0:c[a.currentPageId]),{editingId:null}))})}),"session:complete:".concat(u.constructor.name));return Object(o.a)(a)},a.createShapes=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?Object(o.a)(a):a.create(t.map((function(e){return dp.getShapeUtil(e.type).create(ou({parentId:a.currentPageId},e))})))},a.updateShapes=function(){for(var e=a.document.pages[a.currentPageId].shapes,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter((function(t){return e[t.id]}));return 0===i.length?Object(o.a)(a):a.setState(Lp(Object(o.a)(a),i,a.currentPageId),"updated_shapes")},a.create=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return 0===e.length?Object(o.a)(a):a.setState(vp(Object(o.a)(a),e,t))},a.patchCreate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return 0===e.length?Object(o.a)(a):a.patchState(vp(Object(o.a)(a),e,t).after)},a.delete=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.selectedIds;return 0===e.length?Object(o.a)(a):(e.forEach((function(e){var t,n;return a.getShape(e).assetId&&(null==(n=(t=a.callbacks).onAssetDelete)?void 0:n.call(t,e))})),a.setState(yp(Object(o.a)(a),e)))},a.deleteAll=function(){return a.selectAll(),a.delete(),Object(o.a)(a)},a.style=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.selectedIds;return a.setState(Ap(Object(o.a)(a),t,e))},a.align=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.selectedIds;return t.length<2?Object(o.a)(a):a.setState(fp(Object(o.a)(a),t,e))},a.distribute=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.selectedIds;return t.length<3?Object(o.a)(a):a.setState(wp(Object(o.a)(a),t,e))},a.stretch=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.selectedIds;return t.length<2?Object(o.a)(a):a.setState(Mp(Object(o.a)(a),t,e))},a.flipHorizontal=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.selectedIds;return 0===e.length?Object(o.a)(a):a.setState(Sp(Object(o.a)(a),e,rl.Horizontal))},a.flipVertical=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.selectedIds;return 0===e.length?Object(o.a)(a):a.setState(Sp(Object(o.a)(a),e,rl.Vertical))},a.moveToPage=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.currentPageId,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.selectedIds;if(0===n.length)return Object(o.a)(a);var r=Object(o.a)(a),i=r.rendererBounds;return a.setState(jp(Object(o.a)(a),n,i,t,e)),Object(o.a)(a)},a.moveToBack=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.selectedIds;return 0===e.length?Object(o.a)(a):a.setState(_p(Object(o.a)(a),e,$u.ToBack))},a.moveBackward=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.selectedIds;return 0===e.length?Object(o.a)(a):a.setState(_p(Object(o.a)(a),e,$u.Backward))},a.moveForward=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.selectedIds;return 0===e.length?Object(o.a)(a):a.setState(_p(Object(o.a)(a),e,$u.Forward))},a.moveToFront=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.selectedIds;return 0===e.length?Object(o.a)(a):a.setState(_p(Object(o.a)(a),e,$u.ToFront))},a.nudge=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.selectedIds;if(0===n.length)return Object(o.a)(a);var r=t?a.settings.showGrid?4*a.currentGrid:10:a.settings.showGrid?a.currentGrid:1;return a.setState(Rp(Object(o.a)(a),n,ye.a.mul(e,r)))},a.duplicate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.selectedIds,t=arguments.length>1?arguments[1]:void 0;return a.readOnly||0===e.length?Object(o.a)(a):a.setState(kp(Object(o.a)(a),e,t))},a.resetBounds=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.selectedIds,t=Ep(Object(o.a)(a),e,a.currentPageId);return a.setState(Ep(Object(o.a)(a),e,a.currentPageId),t.id)},a.toggleHidden=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.selectedIds;return 0===e.length?Object(o.a)(a):a.setState(Dp(Object(o.a)(a),e,"isHidden"))},a.toggleLocked=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.selectedIds;return 0===e.length?Object(o.a)(a):a.setState(Dp(Object(o.a)(a),e,"isLocked"))},a.toggleAspectRatioLocked=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.selectedIds;return 0===e.length?Object(o.a)(a):a.setState(Dp(Object(o.a)(a),e,"isAspectRatioLocked"))},a.toggleDecoration=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.selectedIds;return 0===t.length||"start"!==e&&"end"!==e?Object(o.a)(a):a.setState(Tp(Object(o.a)(a),t,e))},a.setShapeProps=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.selectedIds;return a.setState(Fp(Object(o.a)(a),t,e))},a.rotate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-.5*Math.PI,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.selectedIds;if(0===t.length)return Object(o.a)(a);var n=Pp(Object(o.a)(a),t,e);return n?a.setState(n):Object(o.a)(a)},a.group=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.selectedIds,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.f.uniqueId(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.currentPageId;if(a.readOnly)return Object(o.a)(a);if(1===e.length&&a.getShape(e[0],n).type===il.Group)return a.ungroup(e,n);if(e.length<2)return Object(o.a)(a);var r=xp(Object(o.a)(a),e,t,n);return r?a.setState(r):Object(o.a)(a)},a.ungroup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.selectedIds,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.currentPageId;if(a.readOnly)return Object(o.a)(a);var n=e.map((function(e){return a.getShape(e,t)})).filter((function(e){return e.type===il.Group}));if(0===n.length)return Object(o.a)(a);var r=Bp(Object(o.a)(a),e,n,t);return r?a.setState(r):Object(o.a)(a)},a.cancel=function(){var e,t;return null==(t=(e=a.currentTool).onCancel)||t.call(e),Object(o.a)(a)},a.addMediaFromFile=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return du(Object(o.a)(a),[e].concat(n),h.a.mark((function e(t){var n,r,a,i,o,s,c,u,d,f,p,v,g,m,b=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=b.length>1&&void 0!==b[1]?b[1]:this.centerPoint,this.setIsLoading(!0),r=y.f.uniqueId(),a=this.getPagePoint(n),i=t.name.match(/\.[0-9a-z]+$/i)){e.next=7;break}throw Error("No extension");case 7:if(o=Nl.includes(i[0].toLowerCase()),s=Ul.includes(i[0].toLowerCase()),o||s){e.next=11;break}throw Error("Wrong extension");case 11:if(c=o?il.Image:il.Video,u=o?wl.Image:wl.Video,e.prev=13,!this.callbacks.onAssetCreate){e.next=23;break}return e.next=17,this.callbacks.onAssetCreate(t,r);case 17:if(f=e.sent){e.next=20;break}throw Error("Asset creation callback returned false");case 20:d=f,e.next=26;break;case 23:return e.next=25,ql(t);case 25:d=e.sent;case 26:if("string"!==typeof d){e.next=40;break}if(!o){e.next=33;break}return e.next=30,Zl(d);case 30:e.t0=e.sent,e.next=36;break;case 33:return e.next=35,Jl(d);case 35:e.t0=e.sent;case 36:p=e.t0,(v=Object.values(this.document.assets).find((function(e){return e.type===u&&e.src===d})))?g=v.id:(g=y.f.uniqueId(),m={id:g,type:u,src:d,size:p},this.patchState({document:{assets:Object(l.a)({},g,m)}})),this.createImageOrVideoShapeAtPoint(r,c,a,p,g);case 40:e.next=47;break;case 42:return e.prev=42,e.t1=e.catch(13),console.warn(e.t1),this.setIsLoading(!1),e.abrupt("return",this);case 47:return this.setIsLoading(!1),e.abrupt("return",this);case 49:case"end":return e.stop()}}),e,this,[[13,42]])})))},a.onKeyDown=function(e,t,n){var r,i;switch(n.key){case"/":if("idle"===a.status&&!a.pageState.editingId){var s=Object(o.a)(a),c=s.shiftKey,u=s.metaKey,l=s.altKey,d=s.ctrlKey,f=s.spaceKey;a.onPointerDown({target:"canvas",pointerId:0,origin:t.point,point:t.point,delta:[0,0],pressure:.5,shiftKey:c,ctrlKey:d,metaKey:u,altKey:l,spaceKey:f},{shiftKey:c,altKey:l,ctrlKey:d,pointerId:0,clientX:t.point[0],clientY:t.point[1]})}break;case"Escape":a.cancel();break;case"Meta":a.metaKey=!0;break;case"Alt":a.altKey=!0;break;case"Control":a.ctrlKey=!0;break;case" ":a.isForcePanning=!0,a.spaceKey=!0}return null==(i=(r=a.currentTool).onKeyDown)||i.call(r,e,t,n),Object(o.a)(a)},a.onKeyUp=function(e,t,n){var r,i;if(t){switch(n.key){case"/":var s=Object(o.a)(a),c=s.currentPoint,u=s.shiftKey,l=s.metaKey,d=s.altKey,f=s.ctrlKey,p=s.spaceKey;a.onPointerUp({target:"canvas",pointerId:0,origin:c,point:c,delta:[0,0],pressure:.5,shiftKey:u,ctrlKey:f,metaKey:l,altKey:d,spaceKey:p},{shiftKey:u,altKey:d,ctrlKey:f,pointerId:0,clientX:c[0],clientY:c[1]});break;case"Meta":a.metaKey=!1;break;case"Alt":a.altKey=!1;break;case"Control":a.ctrlKey=!1;break;case" ":a.isForcePanning=!1,a.spaceKey=!1}null==(i=(r=a.currentTool).onKeyUp)||i.call(r,e,t,n)}},a.onDragOver=function(e){e.preventDefault()},a.onDrop=function(e){return du(Object(o.a)(a),null,h.a.mark((function t(){var n,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),!this.disableAssets){t.next=3;break}return t.abrupt("return",this);case 3:return(null==(n=e.dataTransfer.files)?void 0:n.length)&&(r=e.dataTransfer.files[0],this.addMediaFromFile(r,[e.clientX,e.clientY])),t.abrupt("return",this);case 5:case"end":return t.stop()}}),t,this)})))},a.onPinchStart=function(e,t){var n,r;return null==(r=(n=a.currentTool).onPinchStart)?void 0:r.call(n,e,t)},a.onPinchEnd=function(e,t){var n,r;return null==(r=(n=a.currentTool).onPinchEnd)?void 0:r.call(n,e,t)},a.onPinch=function(e,t){var n,r;return null==(r=(n=a.currentTool).onPinch)?void 0:r.call(n,e,t)},a.onPan=function(e,t){if("pinching"!==a.appState.status){var n=ye.a.div(e.delta,a.pageState.camera.zoom),r=a.pageState.camera.point,i=ye.a.sub(r,n);ye.a.isEqual(i,r)||(a.pan(n),a.isForcePanning||a.onPointerMove(e,t))}},a.onZoom=function(e,t){if(a.state.appState.status===Yu.Idle){var n=t.deltaMode===WheelEvent.DOM_DELTA_PIXEL?e.delta[2]/500:t.deltaMode===WheelEvent.DOM_DELTA_LINE?e.delta[2]/100:e.delta[2]/2;a.zoomBy(n,a.centerPoint),a.onPointerMove(e,t)}},a.updateInputs=function(e){a.currentPoint=[].concat(Object(v.a)(a.getPagePoint(e.point)),[e.pressure]),a.shiftKey=e.shiftKey,a.altKey=e.altKey,a.ctrlKey=e.ctrlKey,a.metaKey=e.metaKey},a.onPointerMove=function(e,t){var n,r,i,s,c;if(a.previousPoint=a.currentPoint,a.updateInputs(e,t),a.isForcePanning&&a.isPointing)null==(n=a.onPan)||n.call(Object(o.a)(a),su(ou({},e),{delta:ye.a.neg(e.delta)}),t);else if(null==(i=(r=a.currentTool).onPointerMove)||i.call(r,e,t),a.state.room){var u=a.state.room,l=u.users,d=u.userId;null==(c=(s=a.callbacks).onChangePresence)||c.call(s,Object(o.a)(a),su(ou({},l[d]),{point:a.getPagePoint(e.point)}))}},a.onPointerDown=function(e,t){var n,r;if(4===t.buttons)a.isForcePanning=!0;else if(a.isPointing)return;a.isPointing=!0,a.originPoint=a.getPagePoint(e.point),a.updateInputs(e,t),a.isForcePanning||null==(r=(n=a.currentTool).onPointerDown)||r.call(n,e,t)},a.onPointerUp=function(e,t){var n,r;a.isPointing=!1,a.shiftKey||(a.isForcePanning=!1),a.updateInputs(e,t),null==(r=(n=a.currentTool).onPointerUp)||r.call(n,e,t)},a.onPointCanvas=function(e,t){var n,r;a.updateInputs(e,t),null==(r=(n=a.currentTool).onPointCanvas)||r.call(n,e,t)},a.onDoubleClickCanvas=function(e,t){var n,r;a.updateInputs(e,t),null==(r=(n=a.currentTool).onDoubleClickCanvas)||r.call(n,e,t)},a.onRightPointCanvas=function(e,t){var n,r;a.updateInputs(e,t),null==(r=(n=a.currentTool).onRightPointCanvas)||r.call(n,e,t)},a.onDragCanvas=function(e,t){var n,r;a.updateInputs(e,t),null==(r=(n=a.currentTool).onDragCanvas)||r.call(n,e,t)},a.onReleaseCanvas=function(e,t){var n,r;a.updateInputs(e,t),null==(r=(n=a.currentTool).onReleaseCanvas)||r.call(n,e,t)},a.onPointShape=function(e,t){var n,r;a.originPoint=a.getPagePoint(e.point),a.updateInputs(e,t),null==(r=(n=a.currentTool).onPointShape)||r.call(n,e,t)},a.onReleaseShape=function(e,t){var n,r;a.updateInputs(e,t),null==(r=(n=a.currentTool).onReleaseShape)||r.call(n,e,t)},a.onDoubleClickShape=function(e,t){var n,r;a.originPoint=a.getPagePoint(e.point),a.updateInputs(e,t),null==(r=(n=a.currentTool).onDoubleClickShape)||r.call(n,e,t)},a.onRightPointShape=function(e,t){var n,r;a.originPoint=a.getPagePoint(e.point),a.updateInputs(e,t),null==(r=(n=a.currentTool).onRightPointShape)||r.call(n,e,t)},a.onDragShape=function(e,t){var n,r;a.updateInputs(e,t),null==(r=(n=a.currentTool).onDragShape)||r.call(n,e,t)},a.onHoverShape=function(e,t){var n,r;a.updateInputs(e,t),null==(r=(n=a.currentTool).onHoverShape)||r.call(n,e,t)},a.onUnhoverShape=function(e,t){var n,r;a.updateInputs(e,t),null==(r=(n=a.currentTool).onUnhoverShape)||r.call(n,e,t)},a.onPointBounds=function(e,t){var n,r;a.originPoint=a.getPagePoint(e.point),a.updateInputs(e,t),null==(r=(n=a.currentTool).onPointBounds)||r.call(n,e,t)},a.onDoubleClickBounds=function(e,t){var n,r;a.originPoint=a.getPagePoint(e.point),a.updateInputs(e,t),null==(r=(n=a.currentTool).onDoubleClickBounds)||r.call(n,e,t)},a.onRightPointBounds=function(e,t){var n,r;a.originPoint=a.getPagePoint(e.point),a.updateInputs(e,t),null==(r=(n=a.currentTool).onRightPointBounds)||r.call(n,e,t)},a.onDragBounds=function(e,t){var n,r;a.updateInputs(e,t),null==(r=(n=a.currentTool).onDragBounds)||r.call(n,e,t)},a.onHoverBounds=function(e,t){var n,r;a.updateInputs(e,t),null==(r=(n=a.currentTool).onHoverBounds)||r.call(n,e,t)},a.onUnhoverBounds=function(e,t){var n,r;a.updateInputs(e,t),null==(r=(n=a.currentTool).onUnhoverBounds)||r.call(n,e,t)},a.onReleaseBounds=function(e,t){var n,r;a.updateInputs(e,t),null==(r=(n=a.currentTool).onReleaseBounds)||r.call(n,e,t)},a.onPointBoundsHandle=function(e,t){var n,r;a.originPoint=a.getPagePoint(e.point),a.updateInputs(e,t),null==(r=(n=a.currentTool).onPointBoundsHandle)||r.call(n,e,t)},a.onDoubleClickBoundsHandle=function(e,t){var n,r;if(a.originPoint=a.getPagePoint(e.point),a.updateInputs(e,t),null==(r=(n=a.currentTool).onDoubleClickBoundsHandle)||r.call(n,e,t),1===a.selectedIds.length){var i=a.getShape(a.selectedIds[0]);if(i.type===il.Image||i.type===il.Video){var o=a.document.assets[i.assetId],s=dp.getShapeUtil(i),c=s.getCenter(i),u=s.getCenter(su(ou({},i),{size:o.size})),l=ye.a.sub(u,c);a.updateShapes({id:i.id,point:ye.a.sub(i.point,l),size:o.size})}}},a.onRightPointBoundsHandle=function(e,t){var n,r;a.originPoint=a.getPagePoint(e.point),a.updateInputs(e,t),null==(r=(n=a.currentTool).onRightPointBoundsHandle)||r.call(n,e,t)},a.onDragBoundsHandle=function(e,t){var n,r;a.updateInputs(e,t),null==(r=(n=a.currentTool).onDragBoundsHandle)||r.call(n,e,t)},a.onHoverBoundsHandle=function(e,t){var n,r;a.updateInputs(e,t),null==(r=(n=a.currentTool).onHoverBoundsHandle)||r.call(n,e,t)},a.onUnhoverBoundsHandle=function(e,t){var n,r;a.updateInputs(e,t),null==(r=(n=a.currentTool).onUnhoverBoundsHandle)||r.call(n,e,t)},a.onReleaseBoundsHandle=function(e,t){var n,r;a.updateInputs(e,t),null==(r=(n=a.currentTool).onReleaseBoundsHandle)||r.call(n,e,t)},a.onPointHandle=function(e,t){var n,r;a.originPoint=a.getPagePoint(e.point),a.updateInputs(e,t),null==(r=(n=a.currentTool).onPointHandle)||r.call(n,e,t)},a.onDoubleClickHandle=function(e,t){var n,r;a.originPoint=a.getPagePoint(e.point),a.updateInputs(e,t),null==(r=(n=a.currentTool).onDoubleClickHandle)||r.call(n,e,t)},a.onRightPointHandle=function(e,t){var n,r;a.originPoint=a.getPagePoint(e.point),a.updateInputs(e,t),null==(r=(n=a.currentTool).onRightPointHandle)||r.call(n,e,t)},a.onDragHandle=function(e,t){var n,r;a.updateInputs(e,t),null==(r=(n=a.currentTool).onDragHandle)||r.call(n,e,t)},a.onHoverHandle=function(e,t){var n,r;a.updateInputs(e,t),null==(r=(n=a.currentTool).onHoverHandle)||r.call(n,e,t)},a.onUnhoverHandle=function(e,t){var n,r;a.updateInputs(e,t),null==(r=(n=a.currentTool).onUnhoverHandle)||r.call(n,e,t)},a.onReleaseHandle=function(e,t){var n,r;a.updateInputs(e,t),null==(r=(n=a.currentTool).onReleaseHandle)||r.call(n,e,t)},a.onShapeChange=function(e){a.updateShapes(e)},a.onShapeBlur=function(){var e,t;if(!(performance.now()-a.editingStartTime<50)){var n=a.pageState.editingId,r=a.getAppState().isToolLocked;if(n){var i=a.getShape(n);a.setEditingId(),i.type===il.Text&&(i.text.trim().length<=0?a.patchState(yp(Object(o.a)(a),[n]).after,"delete_empty_text"):r||a.select(n))}null==(t=(e=a.currentTool).onShapeBlur)||t.call(e)}},a.onShapeClone=function(e,t){var n,r;a.originPoint=a.getPagePoint(e.point),a.updateInputs(e,t),null==(r=(n=a.currentTool).onShapeClone)||r.call(n,e,t)},a.onRenderCountChange=function(e){var t=a.getAppState();t.isEmptyCanvas&&e.length>0?a.patchState({appState:{isEmptyCanvas:!1}},"empty_canvas:false"):!t.isEmptyCanvas&&e.length<=0&&a.patchState({appState:{isEmptyCanvas:!0}},"empty_canvas:true")},a.onError=function(){},a.getShapeUtil=dp.getShapeUtil,a.callbacks=s,a}return Object(u.a)(n,[{key:"setStatus",value:function(e){return this.patchState({appState:{status:e}},"set_status:".concat(e))}},{key:"createTextShapeAtPoint",value:function(e,t){var n=this.shapes,r=this.appState,a=r.currentPageId,i=r.currentStyle,o=0===n.length?1:n.filter((function(e){return e.parentId===a})).sort((function(e,t){return t.childIndex-e.childIndex}))[0].childIndex+1,s=up[il.Text],c=s.create({id:t||y.f.uniqueId(),parentId:a,childIndex:o,point:e,style:ou({},i)}),u=s.getBounds(c);return c.point=ye.a.sub(c.point,[u.width/2,u.height/2]),this.createShapes(c),this.setEditingId(c.id),this}},{key:"createImageOrVideoShapeAtPoint",value:function(e,t,n,r,a){var i=this.shapes,o=this.appState,s=o.currentPageId,c=o.currentStyle,u=0===i.length?1:i.filter((function(e){return e.parentId===s})).sort((function(e,t){return t.childIndex-e.childIndex}))[0].childIndex+1,l=up[t],d=l.create({id:e,parentId:s,childIndex:u,point:n,size:r,style:ou({},c),assetId:a}),f=l.getBounds(d);return d.point=ye.a.sub(d.point,[f.width/2,f.height/2]),this.createShapes(d),this}},{key:"isSelected",value:function(e){return this.selectedIds.includes(e)}},{key:"serializeVideo",value:function(e){var t=document.getElementById(e+"_video");if(t){var n=document.createElement("canvas");return n.width=t.videoWidth,n.height=t.videoHeight,n.getContext("2d").drawImage(t,0,0),n.toDataURL("image/png")}throw new Error("Video with id "+e+" not found")}},{key:"patchAssets",value:function(e){this.document.assets=ou(ou({},this.document.assets),e)}},{key:"exportAllShapesAs",value:function(e){return du(this,null,h.a.mark((function t(){var n,r,a,i,o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(v.a)(this.selectedIds),this.selectAll(),r=y.f.expandBounds(dp.getSelectedBounds(this.state),64),a=r.width,i=r.height,o=Object(v.a)(this.selectedIds),this.setSelectedIds(n),t.next=7,this.exportShapesAs(o,[a,i],e);case 7:case"end":return t.stop()}}),t,this)})))}},{key:"exportSelectedShapesAs",value:function(e){return du(this,null,h.a.mark((function t(){var n,r,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=y.f.expandBounds(dp.getSelectedBounds(this.state),64),r=n.width,a=n.height,t.next=3,this.exportShapesAs(this.selectedIds,[r,a],e);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"exportShapesAs",value:function(e,t,n){return du(this,null,h.a.mark((function r(){var a,i,o,s,c,u,l,d=this;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(this.setIsLoading(!0),s={},(c=e.map((function(e){return ou({},d.getShape(e))}))).forEach((function(e,t){e.assetId&&(s[e.assetId]=ou({},d.document.assets[e.assetId]),e.type===il.Video&&(s[e.assetId].src=d.serializeVideo(e.id),s[e.assetId].type=wl.Image))})),c=c.map((function(e){if(e.type===il.Video){var t=e;return t.type=il.Image,t}return e})),n==kl.SVG?u=this.copySvg(e):n==kl.JSON&&(u=this.copyJson(e)),l={name:null!=(a=this.page.name)?a:"export",shapes:c,assets:s,type:n,size:"png"===n?ye.a.mul(t,2):t,serialized:u},!this.callbacks.onExport){r.next=20;break}return r.prev=8,this.setIsLoading(!0),r.next=12,null==(o=(i=this.callbacks).onExport)?void 0:o.call(i,l);case 12:r.next=17;break;case 14:r.prev=14,r.t0=r.catch(8),console.error(r.t0);case 17:return r.prev=17,this.setIsLoading(!1),r.finish(17);case 20:case"end":return r.stop()}}),r,this,[[8,14,17,20]])})))}},{key:"isMenuOpen",get:function(){return this.appState.isMenuOpen}},{key:"isLoading",get:function(){return this.appState.isLoading}},{key:"disableAssets",get:function(){return this.appState.disableAssets}},{key:"history",get:function(){return this.stack.slice(0,this.pointer+1)},set:function(e){this.replaceHistory(e)}},{key:"document",get:function(){return this.state.document}},{key:"settings",get:function(){return this.state.settings}},{key:"appState",get:function(){return this.state.appState}},{key:"currentPageId",get:function(){return this.state.appState.currentPageId}},{key:"page",get:function(){return this.state.document.pages[this.currentPageId]}},{key:"shapes",get:function(){return Object.values(this.page.shapes)}},{key:"bindings",get:function(){return Object.values(this.page.bindings)}},{key:"assets",get:function(){return Object.values(this.document.assets)}},{key:"pageState",get:function(){return this.state.document.pageStates[this.currentPageId]}},{key:"selectedIds",get:function(){return this.pageState.selectedIds}},{key:"room",get:function(){return this.state.room}},{key:"isLocal",get:function(){return void 0===this.state.room||"local"===this.state.room.id}},{key:"status",get:function(){return this.appState.status}},{key:"currentUser",get:function(){if(this.state.room)return this.state.room.users[this.state.room.userId]}},{key:"centerPoint",get:function(){var e=this.rendererBounds,t=e.width,n=e.height;return ye.a.toFixed([t/2,n/2])}},{key:"currentGrid",get:function(){var e=this.pageState.camera.zoom;return e<.15?128:e<1?32:8}}]),n}(vh),bh=mh;bh.version=15.3,bh.defaultDocument={id:"doc",name:"New Document",version:mh.version,pages:{page:{id:"page",name:"Page 1",childIndex:1,shapes:{},bindings:{}}},pageStates:{page:{id:"page",selectedIds:[],camera:{point:[0,0],zoom:1}}},assets:{}},bh.defaultState={settings:{isPenMode:!1,isDarkMode:!1,isZoomSnap:!1,isFocusMode:!1,isSnapping:!1,isDebugMode:!0,isReadonlyMode:!1,nudgeDistanceLarge:16,nudgeDistanceSmall:1,showRotateHandles:!0,showBindingHandles:!0,showCloneHandles:!1,showGrid:!1},appState:{status:Yu.Idle,activeTool:"select",hoveredId:void 0,currentPageId:"page",currentStyle:md,isToolLocked:!1,isMenuOpen:!1,isEmptyCanvas:!1,snapLines:[],isLoading:!1,disableAssets:!1},document:mh.defaultDocument};Lc={select:rh,erase:ih},Object(l.a)(Lc,il.Text,oh),Object(l.a)(Lc,il.Draw,sh),Object(l.a)(Lc,il.Ellipse,ch),Object(l.a)(Lc,il.Rectangle,uh),Object(l.a)(Lc,il.Triangle,lh),Object(l.a)(Lc,il.Line,dh),Object(l.a)(Lc,il.Arrow,fh),Object(l.a)(Lc,il.Sticky,ph);var yh=Object(m.createContext)({});function wh(){return Object(m.useContext)(yh)}var Oh=new Map,kh="Tldraw-fonts",Sh="\n@import url('https://fonts.googleapis.com/css2?family=Caveat+Brush&family=Source+Code+Pro&family=Source+Sans+Pro&family=Crimson+Pro&display=block');\n";function xh(){var e=this,t=wh();return{onNewProject:Object(m.useCallback)((function(n){return du(e,null,h.a.mark((function e(){var r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n&&t.callbacks.onOpenProject&&n.preventDefault(),null==(a=(r=t.callbacks).onNewProject)||a.call(r,t);case 2:case"end":return e.stop()}}),e)})))}),[t]),onSaveProject:Object(m.useCallback)((function(e){var n,r;e&&t.callbacks.onOpenProject&&e.preventDefault(),null==(r=(n=t.callbacks).onSaveProject)||r.call(n,t)}),[t]),onSaveProjectAs:Object(m.useCallback)((function(e){var n,r;e&&t.callbacks.onOpenProject&&e.preventDefault(),null==(r=(n=t.callbacks).onSaveProjectAs)||r.call(n,t)}),[t]),onOpenProject:Object(m.useCallback)((function(n){return du(e,null,h.a.mark((function e(){var r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n&&t.callbacks.onOpenProject&&n.preventDefault(),null==(a=(r=t.callbacks).onOpenProject)||a.call(r,t);case 2:case"end":return e.stop()}}),e)})))}),[t]),onOpenMedia:Object(m.useCallback)((function(n){return du(e,null,h.a.mark((function e(){var r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n&&t.callbacks.onOpenMedia&&n.preventDefault(),null==(a=(r=t.callbacks).onOpenMedia)||a.call(r,t);case 2:case"end":return e.stop()}}),e)})))}),[t])}}var jh={"@initial":"mobile","@micro":"micro","@sm":"small","@md":"medium","@lg":"large"},_h=function(e){return e.appState.status},Ch=function(e){return e.appState.activeTool};function Eh(){var e=wh(),t=e.useStore(_h),n=e.useStore(Ch);return Object(m.createElement)(Ih,{bp:jh},Object(m.createElement)(Ph,null,n," | ",t))}var Ih=_l("div",{height:40,userSelect:"none",borderTop:"1px solid $panelContrast",gridArea:"status",display:"flex",color:"$text",justifyContent:"space-between",alignItems:"center",backgroundColor:"$panel",gap:8,fontFamily:"$ui",fontSize:"$0",padding:"0 16px",variants:{bp:{small:{fontSize:"$1"}}}}),Ph=_l("div",{whiteSpace:"nowrap",overflow:"hidden"});function Mh(e){var t=e.variant,n=e.children;return Object(m.createElement)(Ah,{variant:t},n.split("").map((function(e,t){return Object(m.createElement)("span",{key:t},e.replace("#",y.f.isDarwin()?"\u2318":"Ctrl"))})))}var Ah=_l("kbd",{marginLeft:"$3",textShadow:"$2",textAlign:"center",fontSize:"$0",fontFamily:"$ui",color:"$text",background:"none",fontWeight:400,gap:"$1",display:"flex",alignItems:"center","& > span":{padding:"$0",borderRadius:"$0",display:"flex",alignItems:"center",justifyContent:"center"},variants:{variant:{tooltip:{"& > span":{color:"$tooltipContrast",background:"$overlayContrast",boxShadow:"$key",width:"20px",height:"20px"}},menu:{}}}}),Th=_l("div",{height:"100%",borderRadius:"4px",marginRight:"1px",width:"fit-content",display:"grid",alignItems:"center",justifyContent:"center",outline:"none",border:"none",pointerEvents:"all",cursor:"pointer",color:"currentColor","& svg":{height:16,width:16,strokeWidth:1},"& > *":{gridRow:1,gridColumn:1}}),Dh=Object(m.forwardRef)((function(e,t){var n=e,r=n.onClick,a=n.isActive,i=void 0!==a&&a,o=n.isWarning,s=void 0!==o&&o,c=n.hasIndicator,u=void 0!==c&&c,l=n.hasArrow,d=void 0!==l&&l,f=n.disabled,p=void 0!==f&&f,h=n.isSponsor,v=void 0!==h&&h,g=n.variant,b=n.kbd,y=n.children,w=cu(n,["onClick","isActive","isWarning","hasIndicator","hasArrow","disabled","isSponsor","variant","kbd","children"]);return Object(m.createElement)(Bh,ou({ref:t,bp:jh,isWarning:s,isActive:i,isSponsor:v,disabled:p,onClick:r,variant:g},w),Object(m.createElement)(Rh,null,y,b?Object(m.createElement)(Mh,{variant:"menu"},b):void 0,u&&Object(m.createElement)(qi,{dir:"ltr"},Object(m.createElement)(Th,null,Object(m.createElement)(po,null))),d&&Object(m.createElement)(Th,null,Object(m.createElement)(ho,null))))})),Rh=_l("div",{height:"100%",width:"100%",backgroundColor:"$panel",borderRadius:"$2",display:"flex",gap:"$1",flexDirection:"row",alignItems:"center",padding:"0 $3",justifyContent:"space-between",border:"1px solid transparent","& svg":{position:"relative",stroke:"$overlay",strokeWidth:1,zIndex:1}}),Bh=_l("button",(Fc={position:"relative",width:"100%",background:"none",border:"none",cursor:"pointer",height:"32px",outline:"none",color:"$text",fontFamily:"$ui",fontWeight:400,fontSize:"$1",borderRadius:4,userSelect:"none",margin:0,padding:"0 0","&[data-disabled]":{opacity:.3},"&:disabled":{opacity:.3}},Object(l.a)(Fc,"&:focus:not(:disabled) ".concat(Rh),{backgroundColor:"$hover"}),Object(l.a)(Fc,"& a",{textDecoration:"none",color:"$text"}),Object(l.a)(Fc,"variants",{bp:{mobile:{},small:{}},variant:{styleMenu:{margin:"$1 0 $1 0"},wide:{gridColumn:"1 / span 4"}},size:{icon:{padding:"4px ",width:"auto"}},isSponsor:{true:{color:"#eb30a2"},false:{}},isWarning:{true:{color:"$warn"}},isActive:{true:{backgroundColor:"$hover"},false:{}}}),Object(l.a)(Fc,"compoundVariants",[{isActive:!1,isSponsor:!0,bp:"small",css:Object(l.a)({},"&:hover:not(:disabled) ".concat(Rh),{backgroundColor:"$sponsorContrast",border:"1px solid $panel",'& *[data-shy="true"]':{opacity:1}})},{isActive:!1,isSponsor:!1,bp:"small",css:Object(l.a)({},"&:hover:not(:disabled) ".concat(Rh),{backgroundColor:"$hover",border:"1px solid $panel",'& *[data-shy="true"]':{opacity:1}})}]),Fc)),Lh=_l("div",{position:"relative",overflow:"hidden",userSelect:"none",display:"flex",flexDirection:"column",zIndex:180,minWidth:180,pointerEvents:"all",backgroundColor:"$panel",boxShadow:"$panel",padding:"$2 $2",borderRadius:"$3",font:"$ui",variants:{size:{small:{minWidth:72}}}}),Fh=function(e){return Object.keys(e.document.pages[e.appState.currentPageId].shapes).length>0&&e.appState.isEmptyCanvas},Hh=Object(m.memo)((function(){var e=wh();return e.useStore(Fh)?Object(m.createElement)(zh,null,Object(m.createElement)(Dh,{onClick:e.zoomToContent},"Back to content")):null})),zh=_l(Lh,{pointerEvents:"all",width:"fit-content",minWidth:0,gridRow:1,flexGrow:2,display:"block"});function Nh(e){var t=e.children,n=e.label,r=e.kbd,a=e.side,i=void 0===a?"top":a;return Object(m.createElement)(cs,null,Object(m.createElement)(us,{dir:"ltr",asChild:!0},Object(m.createElement)("span",null,t)),Object(m.createElement)(Uh,{dir:"ltr",side:i,sideOffset:8},n,r?Object(m.createElement)(Mh,{variant:"tooltip"},r):null,Object(m.createElement)(Kh,null)))}var Uh=_l(ls,{borderRadius:3,padding:"$3 $3 $3 $3",fontSize:"$1",backgroundColor:"$tooltip",color:"$tooltipContrast",boxShadow:"$3",display:"flex",alignItems:"center",fontFamily:"$ui",userSelect:"none"}),Kh=_l(ds,{fill:"$tooltip",margin:"0 8px"}),Vh=Object(m.forwardRef)((function(e,t){var n=e,r=n.onSelect,a=n.onClick,i=n.onDoubleClick,o=n.variant,s=n.children,c=n.isToolLocked,u=void 0!==c&&c,l=n.disabled,d=void 0!==l&&l,f=n.isActive,p=void 0!==f&&f,h=n.isSponsor,v=void 0!==h&&h,g=n.onKeyDown,b=cu(n,["onSelect","onClick","onDoubleClick","variant","children","isToolLocked","disabled","isActive","isSponsor","onKeyDown"]);return Object(m.createElement)(Yh,ou({ref:t,isActive:p,isSponsor:v,variant:o,onClick:a,disabled:d,onPointerDown:r,onDoubleClick:i,onKeyDown:g,bp:jh},b),Object(m.createElement)(Xh,null,s),u&&Object(m.createElement)(Gh,null))}));function Wh(e){var t=e,n=t.label,r=t.kbd,a=t.isLocked,i=cu(t,["label","kbd","isLocked"]),o=wh(),s=Object(m.useCallback)((function(){o.toggleToolLock()}),[]),c=Object(m.useCallback)((function(e){" "===e.key&&o.isForcePanning&&e.preventDefault()}),[]);return Object(m.createElement)(Nh,{label:n[0].toUpperCase()+n.slice(1),kbd:r},Object(m.createElement)(Vh,su(ou({},i),{variant:"primary",isToolLocked:a&&i.isActive,onDoubleClick:s,onKeyDown:c})))}var Xh=_l("div",{position:"relative",height:"100%",width:"100%",backgroundColor:"$panel",borderRadius:"$2",margin:"0",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"$ui",color:"inherit",userSelect:"none",boxSizing:"border-box",border:"1px solid transparent"}),Yh=_l("button",(Nc={position:"relative",color:"$text",fontSize:"$0",background:"none",margin:"0",padding:"$2",display:"flex",alignItems:"center",justifyContent:"center",outline:"none",cursor:"pointer",pointerEvents:"all",border:"none",height:"40px",width:"40px"},Object(l.a)(Nc,"&:disabled ".concat(Xh),{opacity:.618}),Object(l.a)(Nc,"variants",{variant:{primary:{marginTop:"0"},icon:Object(l.a)({},"& ".concat(Xh),{display:"grid","& > *":{gridRow:1,gridColumn:1}}),text:Object(l.a)({width:"auto"},"& ".concat(Xh),{fontSize:"$1",padding:"0 $3",gap:"$3"}),circle:(Hc={padding:"$2"},Object(l.a)(Hc,"& ".concat(Xh),{border:"1px solid $panelContrast",borderRadius:"100%",boxShadow:"$panel"}),Object(l.a)(Hc,"& ".concat(Xh," > svg"),{width:14,height:14}),Hc)},isSponsor:{true:Object(l.a)({},"".concat(Xh),{backgroundColor:"$sponsorContrast"})},isActive:{true:{},false:{}},bp:{mobile:{},small:{}}}),Object(l.a)(Nc,"compoundVariants",[{variant:"primary",bp:"mobile",css:Object(l.a)({height:"40px",width:"40px"},"& ".concat(Xh," > svg"),{width:16,height:16})},{variant:"primary",bp:"small",css:Object(l.a)({height:"44px",width:"44px"},"& ".concat(Xh," > svg"),{width:20,height:20})},{isActive:!0,isSponsor:!1,css:Object(l.a)({},"".concat(Xh),{backgroundColor:"$selected",color:"$selectedContrast"})},{isActive:!1,isSponsor:!1,bp:"small",css:(zc={},Object(l.a)(zc,"&:hover:not(:disabled) ".concat(Xh),{backgroundColor:"$hover",border:"1px solid $panel"}),Object(l.a)(zc,"&:focus:not(:disabled) ".concat(Xh),{backgroundColor:"$hover"}),zc)}]),Nc)),Gh=_l("div",{position:"absolute",width:10,height:10,backgroundColor:"$selected",borderRadius:"100%",bottom:-2,border:"2px solid $panel",zIndex:100}),$h=_l("div",{backgroundColor:"$panel",display:"flex",flexDirection:"row",boxShadow:"$panel",padding:"$2",border:"1px solid $panelContrast",gap:0,variants:{side:{center:{borderRadius:"$4"},left:{padding:0,borderTop:0,borderLeft:0,borderTopRightRadius:"$1",borderBottomRightRadius:"$3",borderBottomLeftRadius:"$1"},right:{padding:0,borderTop:0,borderRight:0,borderTopLeftRadius:"$1",borderBottomLeftRadius:"$3",borderBottomRightRadius:"$1"}}}});function qh(e){var t=e,n=t.size,r=void 0===n?16:n,a=cu(t,["size"]);return Object(m.createElement)("svg",ou({width:24,height:24},a),Object(m.createElement)("circle",{cx:12,cy:12,r:r/2}))}function Zh(){return Object(m.createElement)("svg",{width:"24",height:"24",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg"},Object(m.createElement)("circle",{cx:12,cy:12,r:8,fill:"none",strokeWidth:2.5,strokeLinecap:"round",strokeDasharray:5.026548}))}var Jh="".concat(1.256637," ").concat(5.026548);function Qh(){return Object(m.createElement)("svg",{width:"24",height:"24",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg"},Object(m.createElement)("circle",{cx:12,cy:12,r:8,fill:"none",strokeWidth:2.5,strokeLinecap:"round",strokeDasharray:Jh}))}function ev(){return Object(m.createElement)("svg",{width:"24",height:"24",viewBox:"1 1.5 21 22",fill:"currentColor",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg"},Object(m.createElement)("path",{d:"M10.0162 19.2768C10.0162 19.2768 9.90679 19.2517 9.6879 19.2017C9.46275 19.1454 9.12816 19.0422 8.68413 18.8921C8.23384 18.7358 7.81482 18.545 7.42707 18.3199C7.03307 18.101 6.62343 17.7883 6.19816 17.3818C5.77289 16.9753 5.33511 16.3718 4.88482 15.5713C4.43453 14.7645 4.1531 13.8545 4.04053 12.8414C3.92795 11.822 4.04991 10.8464 4.40639 9.91451C4.76286 8.98266 5.39452 8.10084 6.30135 7.26906C7.21444 6.44353 8.29325 5.83377 9.5378 5.43976C10.7823 5.05202 11.833 4.92068 12.6898 5.04576C13.5466 5.16459 14.3878 5.43664 15.2133 5.86191C16.0388 6.28718 16.7768 6.8688 17.4272 7.60678C18.0714 8.34475 18.5404 9.21406 18.8344 10.2147C19.1283 11.2153 19.1721 12.2598 18.9657 13.348C18.7593 14.4299 18.2872 15.4337 17.5492 16.3593C16.8112 17.2849 15.9263 18.0072 14.8944 18.5263C13.8624 19.0391 12.9056 19.3174 12.0238 19.3612C11.142 19.405 10.2101 19.2705 9.22823 18.9578C8.24635 18.6451 7.35828 18.151 6.56402 17.4756C5.77601 16.8002 6.08871 16.8658 7.50212 17.6726C8.90927 18.4731 10.1444 18.8484 11.2076 18.7983C12.2645 18.7545 13.2965 18.4825 14.3034 17.9822C15.3102 17.4819 16.1264 16.8221 16.7518 16.0028C17.3772 15.1835 17.7681 14.3111 17.9244 13.3855C18.0808 12.4599 18.0401 11.5781 17.8025 10.74C17.5586 9.902 17.1739 9.15464 16.6486 8.49797C16.1233 7.8413 15.2289 7.27844 13.9656 6.80939C12.7086 6.34034 11.4203 6.20901 10.1007 6.41539C8.78732 6.61552 7.69599 7.06893 6.82669 7.77564C5.96363 8.48859 5.34761 9.26409 4.97863 10.1021C4.60964 10.9402 4.45329 11.8376 4.50958 12.7945C4.56586 13.7513 4.79101 14.6238 5.18501 15.4118C5.57276 16.1998 5.96363 16.8002 6.35764 17.2129C6.75164 17.6257 7.13313 17.9509 7.50212 18.1886C7.87736 18.4325 8.28074 18.642 8.71227 18.8171C9.15005 18.9922 9.47839 19.111 9.69728 19.1736C9.91617 19.2361 10.0256 19.2705 10.0256 19.2768H10.0162Z",strokeWidth:"2"}))}function tv(){return Object(m.createElement)("svg",{width:"24",height:"24",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg"},Object(m.createElement)("circle",{cx:12,cy:12,r:8,fill:"none",strokeWidth:2,strokeLinecap:"round"}))}function nv(e){return Object(m.createElement)("svg",ou({width:32,height:32,viewBox:"0 0 15 15",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),Object(m.createElement)("path",{d:"M4.32978 8.5081C4.32978 10.1923 5.70009 11.5625 7.38418 11.5625H8.46539C8.64456 11.5625 8.78975 11.4173 8.78975 11.2382V11.13C8.78975 10.9508 8.64457 10.8057 8.46539 10.8057H7.38418C6.11736 10.8057 5.08662 9.77492 5.08662 8.5081C5.08662 7.24128 6.11736 6.21054 7.38418 6.21054H9.37894L8.00515 7.58433C7.8576 7.73183 7.8576 7.97195 8.00515 8.11944C8.14833 8.26251 8.39751 8.2623 8.54036 8.11944L10.56 6.09971C10.6315 6.02824 10.6709 5.93321 10.6709 5.8321C10.6709 5.73106 10.6315 5.63598 10.56 5.56454L8.54025 3.54472C8.3974 3.40176 8.14801 3.40176 8.00513 3.54472C7.85758 3.69218 7.85758 3.93234 8.00513 4.07979L9.37892 5.45368H7.38418C5.70009 5.45368 4.32978 6.82393 4.32978 8.5081Z"}))}function rv(e){return Object(m.createElement)("svg",ou({width:18,height:18,viewBox:"0 0 15 15",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),Object(m.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 4.656a.5.5 0 01.5-.5h9.7a.5.5 0 010 1H2.5a.5.5 0 01-.5-.5z"}),Object(m.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.272 3a.578.578 0 00-.578.578v.578h3.311v-.578A.578.578 0 008.428 3H6.272zm3.733 1.156v-.578A1.578 1.578 0 008.428 2H6.272a1.578 1.578 0 00-1.578 1.578v.578H3.578a.5.5 0 00-.5.5V12.2a1.578 1.578 0 001.577 1.578h5.39a1.578 1.578 0 001.577-1.578V4.656a.5.5 0 00-.5-.5h-1.117zm-5.927 1V12.2a.578.578 0 00.577.578h5.39a.578.578 0 00.577-.578V5.156H4.078z"}),Object(m.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.272 6.85a.5.5 0 01.5.5v3.233a.5.5 0 11-1 0V7.35a.5.5 0 01.5-.5zM8.428 6.85a.5.5 0 01.5.5v3.233a.5.5 0 11-1 0V7.35a.5.5 0 01.5-.5z"}))}function av(e){return Object(m.createElement)("svg",ou({width:32,height:32,viewBox:"0 0 15 15",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),Object(m.createElement)("path",{d:"M10.6707 8.5081C10.6707 10.1923 9.3004 11.5625 7.61631 11.5625H6.5351C6.35593 11.5625 6.21074 11.4173 6.21074 11.2382V11.13C6.21074 10.9508 6.35591 10.8057 6.5351 10.8057H7.61631C8.88313 10.8057 9.91387 9.77492 9.91387 8.5081C9.91387 7.24128 8.88313 6.21054 7.61631 6.21054H5.62155L6.99534 7.58433C7.14289 7.73183 7.14289 7.97195 6.99534 8.11944C6.85216 8.26251 6.60298 8.2623 6.46013 8.11944L4.44045 6.09971C4.36898 6.02824 4.32959 5.93321 4.32959 5.8321C4.32959 5.73106 4.36898 5.63598 4.44045 5.56454L6.46024 3.54472C6.60309 3.40176 6.85248 3.40176 6.99535 3.54472C7.14291 3.69218 7.14291 3.93234 6.99535 4.07979L5.62156 5.45368H7.61631C9.3004 5.45368 10.6707 6.82393 10.6707 8.5081Z"}))}function iv(e){return Object(m.createElement)("svg",ou({width:24,height:24,viewBox:"-2 -2 28 28",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),Object(m.createElement)("path",{d:"M12.4239 4.62C13.3572 4.62 14.1572 4.73333 14.8239 4.96C15.4906 5.17333 15.9772 5.43333 16.2839 5.74C16.3639 5.82 16.4039 5.94 16.4039 6.1V8.86H14.0639C13.9172 8.86 13.8439 8.78666 13.8439 8.64V7.26C13.4306 7.12666 12.9572 7.06 12.4239 7.06C11.6506 7.06 11.0639 7.18 10.6639 7.42C10.2639 7.66 10.0639 8.04666 10.0639 8.58V9C10.0639 9.38666 10.1639 9.69333 10.3639 9.92C10.5772 10.1333 11.0306 10.3467 11.7239 10.56L13.6439 11.14C14.4706 11.38 15.1172 11.66 15.5839 11.98C16.0506 12.3 16.3772 12.68 16.5639 13.12C16.7639 13.5467 16.8639 14.0733 16.8639 14.7V15.62C16.8639 16.7933 16.4039 17.7133 15.4839 18.38C14.5639 19.0467 13.2839 19.38 11.6439 19.38C10.6706 19.38 9.79723 19.2867 9.0239 19.1C8.2639 18.9133 7.71056 18.6533 7.3639 18.32C7.3239 18.28 7.29056 18.24 7.2639 18.2C7.25056 18.1467 7.2439 18.06 7.2439 17.94V15.74H7.6239C8.2239 16.1533 8.85056 16.4533 9.5039 16.64C10.1572 16.8267 10.9306 16.92 11.8239 16.92C12.6506 16.92 13.2506 16.7867 13.6239 16.52C14.0106 16.2533 14.2039 15.9333 14.2039 15.56V14.88C14.2039 14.6667 14.1639 14.48 14.0839 14.32C14.0172 14.16 13.8706 14.0133 13.6439 13.88C13.4172 13.7467 13.0572 13.6067 12.5639 13.46L10.6639 12.88C9.7839 12.6133 9.11056 12.3 8.6439 11.94C8.17723 11.58 7.85056 11.18 7.6639 10.74C7.49056 10.3 7.4039 9.83333 7.4039 9.34V8.38C7.4039 7.64666 7.61056 7 8.0239 6.44C8.43723 5.88 9.01723 5.44 9.7639 5.12C10.5239 4.78666 11.4106 4.62 12.4239 4.62Z"}))}function ov(e){return Object(m.createElement)("svg",ou({width:24,height:24,viewBox:"-2 -2 28 28",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),Object(m.createElement)("path",{d:"M8.16191 19H5.68191C5.53525 19 5.46191 18.9267 5.46191 18.78V5H8.76191C8.88191 5 8.97525 5.03333 9.04191 5.1C9.10858 5.15333 9.17525 5.27333 9.24191 5.46C9.72191 6.59333 10.1686 7.7 10.5819 8.78C11.0086 9.84667 11.4352 10.98 11.8619 12.18H12.1619C12.6019 10.9667 13.0352 9.79333 13.4619 8.66C13.8886 7.52667 14.3552 6.30667 14.8619 5H18.3219C18.4686 5 18.5419 5.07333 18.5419 5.22V19H16.0619C15.9152 19 15.8419 18.9267 15.8419 18.78V16.26C15.8419 15.5267 15.8486 14.8133 15.8619 14.12C15.8886 13.4267 15.9286 12.6867 15.9819 11.9C16.0486 11.1 16.1419 10.1933 16.2619 9.18H15.9019C15.4352 10.3533 14.9486 11.5667 14.4419 12.82C13.9486 14.06 13.4819 15.2333 13.0419 16.34H11.1019C11.0619 16.34 11.0152 16.3333 10.9619 16.32C10.9219 16.2933 10.8886 16.2467 10.8619 16.18C10.4619 15.18 10.0086 14.06 9.50191 12.82C9.00858 11.58 8.53525 10.3667 8.08191 9.18H7.70191C7.83525 10.18 7.93525 11.0733 8.00191 11.86C8.06858 12.6467 8.10858 13.3933 8.12191 14.1C8.14858 14.8067 8.16191 15.5267 8.16191 16.26V19Z"}))}function sv(e){return Object(m.createElement)("svg",ou({width:24,height:24,viewBox:"-2 -2 28 28",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e),Object(m.createElement)("path",{d:"M7.68191 19C7.53525 19 7.46191 18.9267 7.46191 18.78V5H10.1219C10.2686 5 10.3419 5.07333 10.3419 5.22V16.56H13.4419V15.02H15.7619C15.9086 15.02 15.9819 15.0933 15.9819 15.24V19H7.68191Z"}))}function cv(){return Object(m.createElement)("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object(m.createElement)("path",{d:"M1.72838 9.33987L8.84935 2.34732C9.23874 1.96494 9.86279 1.96539 10.2516 2.34831L13.5636 5.60975C13.9655 6.00555 13.9607 6.65526 13.553 7.04507L8.13212 12.2278C7.94604 12.4057 7.69851 12.505 7.44107 12.505L6.06722 12.505L3.83772 12.505C3.5673 12.505 3.30842 12.3954 3.12009 12.2014L1.7114 10.7498C1.32837 10.3551 1.33596 9.72521 1.72838 9.33987Z",stroke:"currentColor"}),Object(m.createElement)("line",{x1:"6.01807",y1:"12.5",x2:"10.7959",y2:"12.5",stroke:"currentColor",strokeLinecap:"round"}),Object(m.createElement)("line",{x1:"5.50834",y1:"5.74606",x2:"10.1984",y2:"10.4361",stroke:"currentColor"}))}function uv(){return Object(m.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"},Object(m.createElement)("path",{d:"M13.545 2.907a13.227 13.227 0 0 0-3.257-1.011.05.05 0 0 0-.052.025c-.141.25-.297.577-.406.833a12.19 12.19 0 0 0-3.658 0 8.258 8.258 0 0 0-.412-.833.051.051 0 0 0-.052-.025c-1.125.194-2.22.534-3.257 1.011a.041.041 0 0 0-.021.018C.356 6.024-.213 9.047.066 12.032c.001.014.01.028.021.037a13.276 13.276 0 0 0 3.995 2.02.05.05 0 0 0 .056-.019c.308-.42.582-.863.818-1.329a.05.05 0 0 0-.01-.059.051.051 0 0 0-.018-.011 8.875 8.875 0 0 1-1.248-.595.05.05 0 0 1-.02-.066.051.051 0 0 1 .015-.019c.084-.063.168-.129.248-.195a.05.05 0 0 1 .051-.007c2.619 1.196 5.454 1.196 8.041 0a.052.052 0 0 1 .053.007c.08.066.164.132.248.195a.051.051 0 0 1-.004.085 8.254 8.254 0 0 1-1.249.594.05.05 0 0 0-.03.03.052.052 0 0 0 .003.041c.24.465.515.909.817 1.329a.05.05 0 0 0 .056.019 13.235 13.235 0 0 0 4.001-2.02.049.049 0 0 0 .021-.037c.334-3.451-.559-6.449-2.366-9.106a.034.034 0 0 0-.02-.019Zm-8.198 7.307c-.789 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.45.73 1.438 1.613 0 .888-.637 1.612-1.438 1.612Zm5.316 0c-.788 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.451.73 1.438 1.613 0 .888-.631 1.612-1.438 1.612Z"}))}function lv(){return Object(m.createElement)("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},Object(m.createElement)("path",{d:"M3.64645 11.3536C3.45118 11.1583 3.45118 10.8417 3.64645 10.6465L11.1464 3.14645C11.3417 2.95118 11.6583 2.95118 11.8536 3.14645C12.0488 3.34171 12.0488 3.65829 11.8536 3.85355L4.35355 11.3536C4.15829 11.5488 3.84171 11.5488 3.64645 11.3536Z"}))}var dv,fv=[il.Rectangle,il.Ellipse,il.Triangle,il.Line],pv=(Uc={},Object(l.a)(Uc,il.Rectangle,Object(m.createElement)(Ro,null)),Object(l.a)(Uc,il.Ellipse,Object(m.createElement)(vo,null)),Object(l.a)(Uc,il.Triangle,Object(m.createElement)(Vo,null)),Object(l.a)(Uc,il.Line,Object(m.createElement)(lv,null)),Uc),hv=function(e){return e.appState.status};!function(e){e.SpacePanning="spacePanning"}(dv||(dv={}));var vv=Object(m.memo)((function(e){var t=e.activeTool,n=e.isToolLocked,r=wh(),a=(r.useStore(hv),Object(m.useState)(il.Rectangle)),i=Object(d.a)(a,2),o=i[0],s=i[1];Object(m.useEffect)((function(){fv.includes(t)&&o!==t&&s(t)}),[t]);var c=Object(m.useCallback)((function(){r.selectTool(o)}),[t,r]),u=Object(m.useCallback)((function(){r.toggleToolLock()}),[r]),l=Object(m.useCallback)((function(e){" "===e.key&&r.shiftKey&&e.preventDefault()}),[]),f=fv.includes(t);return Object(m.createElement)(Ui,{dir:"ltr",onOpenChange:c},Object(m.createElement)(Ki,{dir:"ltr",asChild:!0},Object(m.createElement)(Vh,{disabled:f&&r.shiftKey,variant:"primary",onDoubleClick:u,isToolLocked:f&&n,isActive:f,onKeyDown:l},pv[o])),Object(m.createElement)(Vi,{asChild:!0,dir:"ltr",side:"top",sideOffset:12},Object(m.createElement)($h,{side:"center"},fv.map((function(e,t){return Object(m.createElement)(Nh,{key:e,label:e[0].toUpperCase()+e.slice(1),kbd:(4+t).toString()},Object(m.createElement)(Wi,{asChild:!0},Object(m.createElement)(Vh,{variant:"primary",onClick:function(){r.selectTool(e),s(e)}},pv[e])))})))))})),gv=function(e){return e.appState.activeTool},mv=function(e){return e.appState.isToolLocked},bv=Object(m.memo)((function(){var e=wh(),t=e.useStore(gv),n=e.useStore(mv),r=Object(m.useCallback)((function(){e.selectTool("select")}),[e]),a=Object(m.useCallback)((function(){e.selectTool("erase")}),[e]),i=Object(m.useCallback)((function(){e.selectTool(il.Draw)}),[e]),o=Object(m.useCallback)((function(){e.selectTool(il.Arrow)}),[e]),s=Object(m.useCallback)((function(){e.selectTool(il.Text)}),[e]),c=Object(m.useCallback)((function(){e.selectTool(il.Sticky)}),[e]);return Object(m.createElement)($h,{side:"center"},Object(m.createElement)(Wh,{kbd:"1",label:"select",onClick:r,isActive:"select"===t},Object(m.createElement)(mo,null)),Object(m.createElement)(Wh,{kbd:"2",label:il.Draw,onClick:i,isActive:t===il.Draw},Object(m.createElement)(Co,null)),Object(m.createElement)(Wh,{kbd:"3",label:"eraser",onClick:a,isActive:"erase"===t},Object(m.createElement)(cv,null)),Object(m.createElement)(vv,{activeTool:t,isToolLocked:n}),Object(m.createElement)(Wh,{kbd:"8",label:il.Arrow,onClick:o,isLocked:n,isActive:t===il.Arrow},Object(m.createElement)(co,null)),Object(m.createElement)(Wh,{kbd:"9",label:il.Text,onClick:s,isLocked:n,isActive:t===il.Text},Object(m.createElement)(Fo,null)),Object(m.createElement)(Wh,{kbd:"0",label:il.Sticky,onClick:c,isActive:t===il.Sticky},Object(m.createElement)(Eo,null)))}));_l(Ji,{fill:"$panel",bp:jh});function yv(e){var t=e,n=t.onSelect,r=cu(t,["onSelect"]);return Object(m.createElement)(Wi,{dir:"ltr",asChild:!0,onSelect:n},Object(m.createElement)(Dh,ou({},r)))}var wv=function(e){return e.preventDefault()};function Ov(e){var t=e.checked,n=e.disabled,r=void 0!==n&&n,a=e.variant,i=e.onCheckedChange,o=e.kbd,s=e.children;return Object(m.createElement)(Yi,{dir:"ltr",onSelect:wv,onCheckedChange:i,checked:t,disabled:r,asChild:!0},Object(m.createElement)(Dh,{kbd:o,variant:a,hasIndicator:!0},s))}function kv(e){var t=e.sideOffset,n=void 0===t?8:t,r=e.children,a=e.align,i=e.variant;return Object(m.createElement)(Vi,{dir:"ltr",align:a,sideOffset:n,onEscapeKeyDown:Pd,asChild:!0},Object(m.createElement)(Sv,{variant:i},r))}var Sv=_l(Lh,{width:"fit-content",height:"fit-content",minWidth:0,variants:{variant:{horizontal:{flexDirection:"row"},menu:{minWidth:128}}}}),xv=_l(Zi,{backgroundColor:"$hover",height:1,marginTop:"$2",marginRight:"-$2",marginBottom:"$2",marginLeft:"-$2"}),jv=_l($i,{height:"32px",width:"32px",backgroundColor:"$panel",borderRadius:"4px",padding:"0",margin:"0",display:"flex",alignItems:"center",justifyContent:"center",outline:"none",border:"none",pointerEvents:"all",cursor:"pointer",variants:{isActive:{true:{backgroundColor:"$selected",color:"$panel"},false:{}},bp:{mobile:{},small:{}}},compoundVariants:[{isActive:!1,bp:"small",css:{"&:focus":{backgroundColor:"$hover"},"&:hover:not(:disabled)":{backgroundColor:"$hover"}}}]});function _v(e){var t=e.children,n=e.size,r=e.disabled,a=void 0!==r&&r,i=e.label;return Object(m.createElement)(Ui,{dir:"ltr"},Object(m.createElement)(Xi,{dir:"ltr",asChild:!0},Object(m.createElement)(Dh,{disabled:a,hasArrow:!0},i)),Object(m.createElement)(Vi,{dir:"ltr",asChild:!0,sideOffset:2,alignOffset:-2},Object(m.createElement)(Lh,{size:n},t,Object(m.createElement)(Ji,{offset:13}))))}function Cv(e){var t=e,n=t.children,r=cu(t,["children"]);return Object(m.createElement)(Ki,{asChild:!0},Object(m.createElement)(Vh,ou({},r),n))}var Ev=_l("hr",{height:1,marginTop:"$1",marginRight:"-$2",marginBottom:"$1",marginLeft:"-$2",border:"none",borderBottom:"1px solid $hover"}),Iv=function(e){return e.document.pageStates[e.appState.currentPageId].selectedIds.length},Pv=function(e){var t=e.document.pages[e.appState.currentPageId];return e.document.pageStates[e.appState.currentPageId].selectedIds.every((function(e){return t.shapes[e].isLocked}))},Mv=function(e){var t=e.document.pages[e.appState.currentPageId];return e.document.pageStates[e.appState.currentPageId].selectedIds.every((function(e){return t.shapes[e].isAspectRatioLocked}))},Av=function(e){var t=e.document.pages[e.appState.currentPageId],n=e.document.pageStates[e.appState.currentPageId].selectedIds.map((function(e){return t.shapes[e]}));return n.every((function(t){return void 0!==t.children||t.parentId===n[0].parentId&&n[0].parentId!==e.appState.currentPageId}))},Tv=function(e){return e.document.pageStates[e.appState.currentPageId].selectedIds.length>0},Dv=function(e){return e.document.pageStates[e.appState.currentPageId].selectedIds.length>1};function Rv(){var e=wh(),t=e.useStore(Pv),n=e.useStore(Mv),r=e.useStore(Av),a=e.useStore(Tv),i=e.useStore(Dv),o=e.useStore(Iv),s=o>1,c=o>2,u=Object(m.useCallback)((function(){e.rotate()}),[e]),l=Object(m.useCallback)((function(){e.duplicate()}),[e]),d=Object(m.useCallback)((function(){e.toggleLocked()}),[e]),f=Object(m.useCallback)((function(){e.toggleAspectRatioLocked()}),[e]),p=Object(m.useCallback)((function(){e.group()}),[e]),h=Object(m.useCallback)((function(){e.moveToBack()}),[e]),v=Object(m.useCallback)((function(){e.moveBackward()}),[e]),g=Object(m.useCallback)((function(){e.moveForward()}),[e]),b=Object(m.useCallback)((function(){e.moveToFront()}),[e]),y=Object(m.useCallback)((function(){e.setShapeProps({rotation:0})}),[e]),w=Object(m.useCallback)((function(){e.align(Zu.Top)}),[e]),O=Object(m.useCallback)((function(){e.align(Zu.CenterVertical)}),[e]),k=Object(m.useCallback)((function(){e.align(Zu.Bottom)}),[e]),S=Object(m.useCallback)((function(){e.stretch(Qu.Vertical)}),[e]),x=Object(m.useCallback)((function(){e.distribute(tl.Vertical)}),[e]),j=Object(m.useCallback)((function(){e.align(Zu.Left)}),[e]),_=Object(m.useCallback)((function(){e.align(Zu.CenterHorizontal)}),[e]),C=Object(m.useCallback)((function(){e.align(Zu.Right)}),[e]),E=Object(m.useCallback)((function(){e.stretch(Qu.Horizontal)}),[e]),I=Object(m.useCallback)((function(){e.distribute(tl.Horizontal)}),[e]),P=Object(m.useCallback)((function(t){e.setMenuOpen(t)}),[e]);return Object(m.createElement)(Ui,{dir:"ltr",onOpenChange:P},Object(m.createElement)(Ki,{dir:"ltr",asChild:!0},Object(m.createElement)(Vh,{variant:"circle"},Object(m.createElement)(yo,null))),Object(m.createElement)(kv,{sideOffset:16},Object(m.createElement)(m.Fragment,null,Object(m.createElement)(Bv,null,Object(m.createElement)(Vh,{variant:"icon",disabled:!a,onClick:l},Object(m.createElement)(Nh,{label:"Duplicate",kbd:"#D"},Object(m.createElement)(go,null))),Object(m.createElement)(Vh,{disabled:!a,onClick:u},Object(m.createElement)(Nh,{label:"Rotate"},Object(m.createElement)(Ao,null))),Object(m.createElement)(Vh,{disabled:!a,onClick:d},Object(m.createElement)(Nh,{label:"Toggle Locked",kbd:"#L"},t?Object(m.createElement)(xo,null):Object(m.createElement)(jo,null))),Object(m.createElement)(Vh,{disabled:!a,onClick:f},Object(m.createElement)(Nh,{label:"Toggle Aspect Ratio Lock"},n?Object(m.createElement)(lo,null):Object(m.createElement)(fo,null))),Object(m.createElement)(Vh,{disabled:!a||!r&&!i,onClick:p},Object(m.createElement)(Nh,{label:"Group",kbd:"#G"},Object(m.createElement)(ko,null)))),Object(m.createElement)(Bv,null,Object(m.createElement)(Vh,{disabled:!a,onClick:h},Object(m.createElement)(Nh,{label:"Move to Back",kbd:"#\u21e7["},Object(m.createElement)(Io,null))),Object(m.createElement)(Vh,{disabled:!a,onClick:v},Object(m.createElement)(Nh,{label:"Move Backward",kbd:"#["},Object(m.createElement)(so,null))),Object(m.createElement)(Vh,{disabled:!a,onClick:g},Object(m.createElement)(Nh,{label:"Move Forward",kbd:"#]"},Object(m.createElement)(uo,null))),Object(m.createElement)(Vh,{disabled:!a,onClick:b},Object(m.createElement)(Nh,{label:"Move to Front",kbd:"#\u21e7]"},Object(m.createElement)(Po,null))),Object(m.createElement)(Vh,{disabled:!a,onClick:y},Object(m.createElement)(Nh,{label:"Reset Angle"},Object(m.createElement)(oo,null)))),Object(m.createElement)(Ev,null),Object(m.createElement)(Bv,null,Object(m.createElement)(Vh,{disabled:!s,onClick:j},Object(m.createElement)(ro,null)),Object(m.createElement)(Vh,{disabled:!s,onClick:_},Object(m.createElement)(to,null)),Object(m.createElement)(Vh,{disabled:!s,onClick:C},Object(m.createElement)(ao,null)),Object(m.createElement)(Vh,{disabled:!s,onClick:E},Object(m.createElement)(Bo,null)),Object(m.createElement)(Vh,{disabled:!c,onClick:I},Object(m.createElement)(To,null))),Object(m.createElement)(Bv,null,Object(m.createElement)(Vh,{disabled:!s,onClick:w},Object(m.createElement)(io,null)),Object(m.createElement)(Vh,{disabled:!s,onClick:O},Object(m.createElement)(no,null)),Object(m.createElement)(Vh,{disabled:!s,onClick:k},Object(m.createElement)(eo,null)),Object(m.createElement)(Vh,{disabled:!s,onClick:S},Object(m.createElement)(Lo,null)),Object(m.createElement)(Vh,{disabled:!c,onClick:x},Object(m.createElement)(Do,null))))))}var Bv=_l("div",{position:"relative",display:"flex",width:"100%",background:"none",border:"none",cursor:"pointer",outline:"none",alignItems:"center",justifyContent:"flex-start",padding:0});function Lv(){var e=wh(),t=Object(m.useCallback)((function(){e.delete()}),[e]),n=e.useStore((function(e){return"idle"===e.appState.status&&e.document.pageStates[e.appState.currentPageId].selectedIds.length>0}));return Object(m.createElement)(Nh,{label:"Delete",kbd:"\u232b"},Object(m.createElement)(Vh,{variant:"circle",disabled:!n,onSelect:t},Object(m.createElement)(rv,null)))}var Fv=function(e){return e.settings.isDebugMode},Hv=Object(m.memo)((function(e){var t=e.onBlur,n=wh().useStore(Fv);return Object(m.createElement)(zv,{onBlur:t},Object(m.createElement)(Nv,null,Object(m.createElement)(Hh,null),Object(m.createElement)(Kv,null,Object(m.createElement)(Rv,null),Object(m.createElement)(bv,null),Object(m.createElement)(Lv,null))),n&&Object(m.createElement)(Uv,null,Object(m.createElement)(Eh,null)))})),zv=_l("div",{position:"absolute",bottom:0,left:0,right:0,width:"100%",minWidth:0,maxWidth:"100%",display:"grid",gridTemplateColumns:"auto auto auto",gridTemplateRows:"auto auto",justifyContent:"space-between",padding:"0",gap:"$4",zIndex:200,pointerEvents:"none","& > div > *":{pointerEvents:"all"}}),Nv=_l("div",{gridRow:1,gridColumn:2,display:"flex",width:"fit-content",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"$4"}),Uv=_l("div",{gridRow:2,gridColumn:"1 / span 3"}),Kv=_l("div",{position:"relative",display:"flex",alignItems:"center",gap:"$2"}),Vv=function(e){return e.settings};function Wv(){var e=wh(),t=e.useStore(Vv),n=Object(m.useCallback)((function(){e.setSetting("isDebugMode",(function(e){return!e}))}),[e]),r=Object(m.useCallback)((function(){e.setSetting("isDarkMode",(function(e){return!e}))}),[e]),a=Object(m.useCallback)((function(){e.setSetting("isFocusMode",(function(e){return!e}))}),[e]),i=Object(m.useCallback)((function(){e.setSetting("showRotateHandles",(function(e){return!e}))}),[e]),o=Object(m.useCallback)((function(){e.setSetting("showGrid",(function(e){return!e}))}),[e]),s=Object(m.useCallback)((function(){e.setSetting("showBindingHandles",(function(e){return!e}))}),[e]),c=Object(m.useCallback)((function(){e.setSetting("isSnapping",(function(e){return!e}))}),[e]),u=Object(m.useCallback)((function(){e.setSetting("showCloneHandles",(function(e){return!e}))}),[e]);return Object(m.createElement)(_v,{label:"Preferences"},Object(m.createElement)(Ov,{checked:t.isDarkMode,onCheckedChange:r,kbd:"#\u21e7D"},"Dark Mode"),Object(m.createElement)(Ov,{checked:t.isFocusMode,onCheckedChange:a,kbd:"#."},"Focus Mode"),Object(m.createElement)(Ov,{checked:t.isDebugMode,onCheckedChange:n},"Debug Mode"),Object(m.createElement)(xv,null),Object(m.createElement)(Ov,{checked:t.showRotateHandles,onCheckedChange:i},"Rotate Handles"),Object(m.createElement)(Ov,{checked:t.showBindingHandles,onCheckedChange:s},"Binding Handles"),Object(m.createElement)(Ov,{checked:t.showCloneHandles,onCheckedChange:u},"Clone Handles"),Object(m.createElement)(Ov,{checked:t.showGrid,onCheckedChange:o,kbd:"#\u21e7G"},"Grid"),Object(m.createElement)(Ov,{checked:t.isSnapping,onCheckedChange:c},"Always Show Snaps"))}function Xv(){return Object(m.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Object(m.createElement)("path",{fill:"none",stroke:"currentColor",strokeWidth:2,d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"}))}var Yv=function(e){return e.document.pageStates[e.appState.currentPageId].selectedIds.length},Gv=function(e){return e.appState.disableAssets},$v=Object(m.memo)((function(e){var t=this,n=e.showSponsorLink,r=e.readOnly,a=wh(),i=a.useStore(Yv),o=a.useStore(Gv),s=Object(m.useState)(0),c=Object(d.a)(s,2),u=(c[0],c[1]);Object(m.useEffect)((function(){return u(1)}),[]);var l=xh(),f=l.onNewProject,p=l.onOpenProject,v=l.onSaveProject,g=l.onSaveProjectAs,b=Object(m.useCallback)((function(){return du(t,null,h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.exportAllShapesAs(kl.PNG);case 2:case"end":return e.stop()}}),e)})))}),[a]),y=Object(m.useCallback)((function(){return du(t,null,h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.exportAllShapesAs(kl.JPG);case 2:case"end":return e.stop()}}),e)})))}),[a]),w=Object(m.useCallback)((function(){return du(t,null,h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.exportAllShapesAs(kl.WEBP);case 2:case"end":return e.stop()}}),e)})))}),[a]),O=(Object(m.useCallback)((function(){return du(t,null,h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.exportAllShapesAs(kl.PDF);case 2:case"end":return e.stop()}}),e)})))}),[a]),Object(m.useCallback)((function(){return du(t,null,h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.exportAllShapesAs(kl.SVG);case 2:case"end":return e.stop()}}),e)})))}),[a])),k=Object(m.useCallback)((function(){return du(t,null,h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.exportAllShapesAs(kl.JSON);case 2:case"end":return e.stop()}}),e)})))}),[a]),S=Object(m.useCallback)((function(){var e,t;null==(t=(e=a.callbacks).onSignIn)||t.call(e,a)}),[a]),x=Object(m.useCallback)((function(){var e,t;null==(t=(e=a.callbacks).onSignOut)||t.call(e,a)}),[a]),j=Object(m.useCallback)((function(){a.cut()}),[a]),_=Object(m.useCallback)((function(){a.copy()}),[a]),C=Object(m.useCallback)((function(){a.paste()}),[a]),E=Object(m.useCallback)((function(){a.copySvg()}),[a]),I=Object(m.useCallback)((function(){a.copyJson()}),[a]),P=Object(m.useCallback)((function(){a.selectAll()}),[a]),M=Object(m.useCallback)((function(){a.selectNone()}),[a]),A=Object(m.useCallback)((function(){a.openAsset()}),[a]),T=a.callbacks.onNewProject||a.callbacks.onOpenProject||a.callbacks.onSaveProject||a.callbacks.onSaveProjectAs||a.callbacks.onExport,D=a.callbacks.onSignIn||a.callbacks.onSignOut||n,R=i>0;return Object(m.createElement)(Ui,{dir:"ltr"},Object(m.createElement)(Cv,{isSponsor:n},Object(m.createElement)(So,null)),Object(m.createElement)(kv,{variant:"menu"},T&&Object(m.createElement)(_v,{label:"File..."},a.callbacks.onNewProject&&Object(m.createElement)(yv,{onClick:f,kbd:"#N"},"New Project"),a.callbacks.onOpenProject&&Object(m.createElement)(yv,{onClick:p,kbd:"#O"},"Open..."),a.callbacks.onSaveProject&&Object(m.createElement)(yv,{onClick:v,kbd:"#S"},"Save"),a.callbacks.onSaveProjectAs&&Object(m.createElement)(yv,{onClick:g,kbd:"#\u21e7S"},"Save As..."),a.callbacks.onExport&&Object(m.createElement)(m.Fragment,null,Object(m.createElement)(Ev,null),Object(m.createElement)(_v,{label:"Export",size:"small"},Object(m.createElement)(yv,{onClick:b},"PNG"),Object(m.createElement)(yv,{onClick:y},"JPG"),Object(m.createElement)(yv,{onClick:w},"WEBP"),Object(m.createElement)(yv,{onClick:O},"SVG"),Object(m.createElement)(yv,{onClick:k},"JSON"))),!o&&Object(m.createElement)(m.Fragment,null,Object(m.createElement)(Ev,null),Object(m.createElement)(yv,{onClick:A,kbd:"#U"},"Upload Media"))),!r&&Object(m.createElement)(m.Fragment,null,Object(m.createElement)(_v,{label:"Edit..."},Object(m.createElement)(yv,{onSelect:wv,onClick:a.undo,kbd:"#Z"},"Undo"),Object(m.createElement)(yv,{onSelect:wv,onClick:a.redo,kbd:"#\u21e7Z"},"Redo"),Object(m.createElement)(xv,{dir:"ltr"}),Object(m.createElement)(yv,{onSelect:wv,disabled:!R,onClick:j,kbd:"#X"},"Cut"),Object(m.createElement)(yv,{onSelect:wv,disabled:!R,onClick:_,kbd:"#C"},"Copy"),Object(m.createElement)(yv,{onSelect:wv,onClick:C,kbd:"#V"},"Paste"),Object(m.createElement)(xv,{dir:"ltr"}),Object(m.createElement)(yv,{onSelect:wv,disabled:!R,onClick:E,kbd:"#\u21e7C"},"Copy as SVG"),Object(m.createElement)(yv,{onSelect:wv,disabled:!R,onClick:I},"Copy as JSON"),Object(m.createElement)(xv,{dir:"ltr"}),Object(m.createElement)(yv,{onSelect:wv,onClick:P,kbd:"#A"},"Select All"),Object(m.createElement)(yv,{onSelect:wv,onClick:M},"Select None"))),Object(m.createElement)("a",{href:"https://tldraw.com/r"},Object(m.createElement)(yv,null,"Create a Multiplayer Room")),Object(m.createElement)(xv,{dir:"ltr"}),Object(m.createElement)(Wv,null),Object(m.createElement)(xv,{dir:"ltr"}),Object(m.createElement)("a",{href:"https://github.com/Tldraw/Tldraw",target:"_blank",rel:"nofollow"},Object(m.createElement)(yv,null,"GitHub",Object(m.createElement)(Th,null,Object(m.createElement)(Oo,null)))),Object(m.createElement)("a",{href:"https://twitter.com/Tldraw",target:"_blank",rel:"nofollow"},Object(m.createElement)(yv,null,"Twitter",Object(m.createElement)(Th,null,Object(m.createElement)(Ko,null)))),Object(m.createElement)("a",{href:"https://discord.gg/SBBEVCA4PG",target:"_blank",rel:"nofollow"},Object(m.createElement)(yv,null,"Discord",Object(m.createElement)(Th,null,Object(m.createElement)(uv,null)))),n&&Object(m.createElement)("a",{href:"https://github.com/sponsors/steveruizok",target:"_blank",rel:"nofollow"},Object(m.createElement)(yv,{isSponsor:!0},"Become a Sponsor"," ",Object(m.createElement)(Th,null,Object(m.createElement)(Xv,null)))),D&&Object(m.createElement)(m.Fragment,null,Object(m.createElement)(xv,{dir:"ltr"})," ",a.callbacks.onSignIn&&Object(m.createElement)(yv,{onSelect:S},"Sign In"),a.callbacks.onSignOut&&Object(m.createElement)(yv,{onSelect:x},"Sign Out",Object(m.createElement)(Th,null,Object(m.createElement)(wo,null))))))})),qv=_l("button",{position:"relative",height:"32px",width:"32px",backgroundColor:"$panel",borderRadius:"4px",padding:"0",margin:"0",outline:"none",border:"none",pointerEvents:"all",fontSize:"$0",color:"$text",cursor:"pointer",display:"grid",alignItems:"center",justifyContent:"center","& > *":{gridRow:1,gridColumn:1},"&:disabled":{opacity:"0.5"},"& > span":{width:"100%",height:"100%",display:"flex",alignItems:"center"},variants:{bp:{mobile:{backgroundColor:"transparent"},small:{"&:hover:not(:disabled)":{backgroundColor:"$hover"}}},size:{small:{height:32,width:32,"& svg:nth-of-type(1)":{height:"16px",width:"16px"}},medium:{height:44,width:44,"& svg:nth-of-type(1)":{height:"18px",width:"18px"}},large:{height:44,width:44,"& svg:nth-of-type(1)":{height:"20px",width:"20px"}}},isActive:{true:{color:"$selected"}}}}),Zv=function(e){return Object.keys(e.document.pages).length>1};function Jv(e){var t=e.page,n=e.onOpen,r=e.onClose,a=wh(),i=Object(m.useState)(!1),o=Object(d.a)(i,2),s=o[0],c=o[1],u=a.useStore(Zv),l=Object(m.useRef)(null),f=Object(m.useCallback)((function(){a.duplicatePage(t.id),null==r||r()}),[a]),p=Object(m.useCallback)((function(){window.confirm("Are you sure you want to delete this page?")&&(a.deletePage(t.id),null==r||r())}),[a]),h=Object(m.useCallback)((function(e){c(e),e&&(null==n||n())}),[a]),v=Object(m.useCallback)((function(){return c(!1)}),[]);function g(e){e.stopPropagation()}return Object(m.useEffect)((function(){s&&requestAnimationFrame((function(){var e=l.current;e&&(e.focus(),e.select())}))}),[s]),Object(m.createElement)(qs,{open:s,onOpenChange:h},Object(m.createElement)(Zs,{asChild:!0,"data-shy":"true"},Object(m.createElement)(qv,{bp:jh},Object(m.createElement)(Th,null,Object(m.createElement)(_o,null)))),Object(m.createElement)(Js,null,Object(m.createElement)(eg,{onPointerDown:v}),Object(m.createElement)(Qv,{dir:"ltr",onKeyDown:g,onKeyUp:g},Object(m.createElement)(tg,{onSelect:function(){var e=window.prompt("New name:",t.name);a.renamePage(t.id,e||t.name||"Page")}},"Rename"),Object(m.createElement)(tg,{onSelect:f},"Duplicate"),Object(m.createElement)(tg,{disabled:!u,onSelect:p},"Delete"),Object(m.createElement)(Ev,null),Object(m.createElement)(nc,{asChild:!0},Object(m.createElement)(Dh,null,"Cancel")))))}var Qv=_l(ec,{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",minWidth:240,maxWidth:"fit-content",maxHeight:"85vh",marginTop:"-5vh",pointerEvents:"all",backgroundColor:"$panel",padding:"$0",borderRadius:"$2",font:"$ui","&:focus":{outline:"none"}}),eg=_l(Qs,{backgroundColor:"rgba(0, 0, 0, .15)",position:"fixed",pointerEvents:"all",inset:0});function tg(e){var t=e,n=t.onSelect,r=cu(t,["onSelect"]);return Object(m.createElement)(tc,{asChild:!0,onClick:n,onSelect:n},Object(m.createElement)(Dh,ou({},r)))}var ng=function(e){return Object.values(e.document.pages).sort((function(e,t){return(e.childIndex||0)-(t.childIndex||0)}))},rg=function(e){return e.document.pages[e.appState.currentPageId].name},ag=function(e){return e.document.pages[e.appState.currentPageId].id};function ig(){var e=wh(),t=Object(m.useRef)(!1),n=Object(m.useState)(!1),r=Object(d.a)(n,2),a=r[0],i=r[1];Object(m.useEffect)((function(){t.current!==a&&(t.current=a)}),[a]);var o=Object(m.useCallback)((function(){i(!1)}),[i]),s=Object(m.useCallback)((function(e){t.current!==e&&i(e)}),[i]),c=e.useStore(rg);return Object(m.createElement)(Ui,{dir:"ltr",open:a,onOpenChange:s},Object(m.createElement)(Ki,{dir:"ltr",asChild:!0},Object(m.createElement)(Vh,{variant:"text"},c||"Page")),Object(m.createElement)(kv,{variant:"menu",align:"start"},a&&Object(m.createElement)(og,{onClose:o})))}function og(e){var t=e.onClose,n=wh(),r=n.useStore(ng),a=n.useStore(ag),i=Object(m.useCallback)((function(){n.createPage()}),[n]),o=Object(m.useCallback)((function(e){t(),n.changePage(e)}),[n]);return Object(m.createElement)(m.Fragment,null,Object(m.createElement)(Gi,{dir:"ltr",value:a,onValueChange:o},r.map((function(e){return Object(m.createElement)(sg,{key:e.id},Object(m.createElement)($i,{title:e.name||"Page",value:e.id,key:e.id,asChild:!0},Object(m.createElement)(cg,null,Object(m.createElement)("span",null,e.name||"Page"),Object(m.createElement)(qi,null,Object(m.createElement)(Th,null,Object(m.createElement)(po,null))))),Object(m.createElement)(Jv,{page:e,onClose:t}))}))),Object(m.createElement)(xv,null),Object(m.createElement)(Wi,{onSelect:i,asChild:!0},Object(m.createElement)(Dh,null,Object(m.createElement)("span",null,"Create Page"),Object(m.createElement)(Th,null,Object(m.createElement)(Mo,null)))))}var sg=_l("div",{display:"grid",gridTemplateColumns:"1fr auto",gridAutoFlow:"column",'& > *[data-shy="true"]':{opacity:0},'&:hover > *[data-shy="true"]':{opacity:1}}),cg=_l(Dh,{minWidth:128}),ug=function(e){return e.document.pageStates[e.appState.currentPageId].camera.zoom},lg=Object(m.memo)((function(){var e=wh(),t=e.useStore(ug);return Object(m.createElement)(Ui,{dir:"ltr"},Object(m.createElement)(Ki,{dir:"ltr",asChild:!0},Object(m.createElement)(dg,{onDoubleClick:e.resetZoom,variant:"text"},Math.round(100*t),"%")),Object(m.createElement)(kv,{align:"end"},Object(m.createElement)(yv,{onSelect:wv,onClick:e.zoomIn,kbd:"#+"},"Zoom In"),Object(m.createElement)(yv,{onSelect:wv,onClick:e.zoomOut,kbd:"#\u2212"},"Zoom Out"),Object(m.createElement)(yv,{onSelect:wv,onClick:e.resetZoom,kbd:"\u21e70"},"To 100%"),Object(m.createElement)(yv,{onSelect:wv,onClick:e.zoomToFit,kbd:"\u21e71"},"To Fit"),Object(m.createElement)(yv,{onSelect:wv,onClick:e.zoomToSelection,kbd:"\u21e72"},"To Selection")))})),dg=_l(Vh,{minWidth:56}),fg=function(e){return e.appState.currentStyle},pg=function(e){return e.document.pageStates[e.appState.currentPageId].selectedIds},hg=Object.keys(bd),vg=(Kc={},Object(l.a)(Kc,fl.Draw,Object(m.createElement)(ev,null)),Object(l.a)(Kc,fl.Solid,Object(m.createElement)(tv,null)),Object(l.a)(Kc,fl.Dashed,Object(m.createElement)(Zh,null)),Object(l.a)(Kc,fl.Dotted,Object(m.createElement)(Qh,null)),Kc),gg=(Vc={},Object(l.a)(Vc,ll.Small,Object(m.createElement)(iv,null)),Object(l.a)(Vc,ll.Medium,Object(m.createElement)(ov,null)),Object(l.a)(Vc,ll.Large,Object(m.createElement)(sv,null)),Vc),mg=(Wc={},Object(l.a)(Wc,gl.Start,Object(m.createElement)(No,null)),Object(l.a)(Wc,gl.Middle,Object(m.createElement)(Ho,null)),Object(l.a)(Wc,gl.End,Object(m.createElement)(Uo,null)),Object(l.a)(Wc,gl.Justify,Object(m.createElement)(zo,null)),Wc),bg=function(e){return e.settings.isDarkMode?"dark":"light"},yg=function(e){var t=e.appState,n=t.activeTool,r=t.currentPageId;switch(n){case"select":var a,i=e.document.pages[r],o=!1,s=!1,c=Object(g.a)(e.document.pageStates[r].selectedIds);try{for(c.s();!(a=c.n()).done;){var u=a.value;"text"in i.shapes[u]&&(o=!0),"label"in i.shapes[u]&&(s=!0)}}catch(rm){c.e(rm)}finally{c.f()}return o?"text":s?"label":"";case il.Text:return"text";case il.Rectangle:case il.Ellipse:case il.Triangle:case il.Arrow:case il.Line:return"label"}return!1},wg=Object(m.memo)((function(){var e=wh(),t=e.useStore(bg),n=e.useStore(yg),r=e.useStore(fg),a=e.useStore(pg),i=Object(m.useState)(r),o=Object(d.a)(i,2),s=o[0],c=o[1],u=Object(m.useRef)(r);Object(m.useEffect)((function(){var t=e.appState.currentStyle,n=e.page,r=e.selectedIds,a={};if(r.length<=0)a=t;else{var i=new Set([]);e.selectedIds.map((function(e){return n.shapes[e]})).forEach((function(e){hg.forEach((function(t){if(!i.has(t))if(void 0===a[t])a[t]=e.style[t];else{if(a[t]===e.style[t])return;a[t]=e.style[t],i.add(t)}}))}))}JSON.stringify(a)!==JSON.stringify(u.current)&&(u.current=a,c(a))}),[r,a]);var l=Object(m.useCallback)((function(t){e.style({isFilled:t})}),[]),f=Object(m.useCallback)((function(t){e.style({dash:t})}),[]),p=Object(m.useCallback)((function(t){e.style({size:t})}),[]),h=Object(m.useCallback)((function(t){e.style({font:t})}),[]),v=Object(m.useCallback)((function(t){e.style({textAlign:t})}),[]),g=Object(m.useCallback)((function(t){e.setMenuOpen(t)}),[e]);return Object(m.createElement)(Ui,{dir:"ltr",onOpenChange:g},Object(m.createElement)(Ki,{asChild:!0},Object(m.createElement)(Vh,{variant:"text"},"Styles",Object(m.createElement)(xg,{style:{color:rd[t][s.color]}},s.isFilled&&Object(m.createElement)(qh,{size:16,stroke:"none",fill:ad[t][s.color]}),vg[s.dash]))),Object(m.createElement)(kv,null,Object(m.createElement)(kg,{variant:"tall"},Object(m.createElement)("span",null,"Color"),Object(m.createElement)(Og,null,Object.keys(rd.light).map((function(t){return Object(m.createElement)(Wi,{key:t,onSelect:wv,asChild:!0},Object(m.createElement)(Vh,{variant:"icon",isActive:s.color===t,onClick:function(){return e.style({color:t})}},Object(m.createElement)(qh,{size:18,strokeWidth:2.5,fill:s.isFilled?ad.light[t]:"transparent",stroke:rd.light[t]})))})))),Object(m.createElement)(Ov,{variant:"styleMenu",checked:!!s.isFilled,onCheckedChange:l},"Fill"),Object(m.createElement)(kg,null,"Dash",Object(m.createElement)(Sg,{dir:"ltr",value:s.dash,onValueChange:f},Object.values(fl).map((function(e){return Object(m.createElement)(jv,{key:e,isActive:e===s.dash,value:e,onSelect:wv,bp:jh},vg[e])})))),Object(m.createElement)(kg,null,"Size",Object(m.createElement)(Sg,{dir:"ltr",value:s.size,onValueChange:p},Object.values(ll).map((function(e){return Object(m.createElement)(jv,{key:e,isActive:e===s.size,value:e,onSelect:wv,bp:jh},gg[e])})))),("text"===n||"label"===n)&&Object(m.createElement)(m.Fragment,null,Object(m.createElement)(Ev,null),Object(m.createElement)(kg,null,"Font",Object(m.createElement)(Sg,{dir:"ltr",value:s.font,onValueChange:h},Object.values(bl).map((function(e){return Object(m.createElement)(jv,{key:e,isActive:e===s.font,value:e,onSelect:wv,bp:jh},Object(m.createElement)(jg,{fontStyle:e},"Aa"))})))),"text"===n&&Object(m.createElement)(kg,null,"Align",Object(m.createElement)(Sg,{dir:"ltr",value:s.textAlign,onValueChange:v},Object.values(gl).map((function(e){return Object(m.createElement)(jv,{key:e,isActive:e===s.textAlign,value:e,onSelect:wv,bp:jh},mg[e])})))))))})),Og=_l("div",{display:"grid",gridTemplateColumns:"repeat(4, auto)",gap:0}),kg=_l("div",{position:"relative",width:"100%",background:"none",border:"none",cursor:"pointer",minHeight:"32px",outline:"none",color:"$text",fontFamily:"$ui",fontWeight:400,fontSize:"$1",padding:"$2 0 $2 $3",borderRadius:4,userSelect:"none",margin:0,display:"flex",gap:"$3",flexDirection:"row",alignItems:"center",justifyContent:"space-between",variants:{variant:{tall:{alignItems:"flex-start",padding:"0 0 0 $3","& > span":{paddingTop:"$4"}}}}}),Sg=_l(Ni,{display:"flex",flexDirection:"row",gap:"$1"}),xg=_l("div",{display:"grid","& > *":{gridColumn:1,gridRow:1}}),jg=_l("div",{width:32,height:32,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"$3",variants:{fontStyle:(Xc={},Object(l.a)(Xc,bl.Script,{fontFamily:"Caveat Brush"}),Object(l.a)(Xc,bl.Sans,{fontFamily:"Recursive"}),Object(l.a)(Xc,bl.Serif,{fontFamily:"Georgia"}),Object(l.a)(Xc,bl.Mono,{fontFamily:"Recursive Mono"}),Xc)}});function _g(e){var t=e.readOnly,n=e.showPages,r=e.showMenu,a=e.showStyles,i=e.showZoom,o=e.showSponsorLink,s=wh();return Object(m.createElement)(Cg,null,(r||n)&&Object(m.createElement)($h,{side:"left"},r&&Object(m.createElement)($v,{showSponsorLink:o,readOnly:t}),n&&Object(m.createElement)(ig,null)),Object(m.createElement)(Eg,null),(a||i)&&Object(m.createElement)($h,{side:"right"},a&&!t&&Object(m.createElement)(wg,null),Object(m.createElement)(Ig,{bp:jh},Object(m.createElement)(Vh,null,Object(m.createElement)(av,{onClick:s.undo})),Object(m.createElement)(Vh,null,Object(m.createElement)(nv,{onClick:s.redo}))),i&&Object(m.createElement)(lg,null)))}var Cg=_l("div",{width:"100%",position:"absolute",top:0,left:0,right:0,display:"flex",flexDirection:"row",pointerEvents:"none","& > *":{pointerEvents:"all"}}),Eg=_l("div",{flexGrow:2,pointerEvents:"none"}),Ig=_l("div",{display:"flex",flexDirection:"row",variants:{bp:{small:{display:"inherit"},large:{display:"none"}}}}),Pg=function(e){return e.document.pageStates[e.appState.currentPageId].selectedIds.length},Mg=function(e){return e.settings.isDebugMode},Ag=function(e){return e.document.pageStates[e.appState.currentPageId].selectedIds.some((function(t){return void 0!==e.document.pages[e.appState.currentPageId].shapes[t].children}))},Tg=function(e){return e.stopPropagation()},Dg=function(e){var t=e.onBlur,n=e.children;return Object(m.createElement)(qc,{dir:"ltr"},Object(m.createElement)(Zc,{dir:"ltr"},n),Object(m.createElement)(Rg,{onBlur:t}))},Rg=Object(m.memo)((function(e){var t=this,n=e.onBlur,r=wh(),a=r.useStore(Pg),i=r.useStore(Mg),o=r.useStore(Ag),s=Object(m.useRef)(null),c=Object(m.useCallback)((function(){r.flipHorizontal()}),[r]),u=Object(m.useCallback)((function(){r.flipVertical()}),[r]),l=Object(m.useCallback)((function(){r.duplicate()}),[r]),d=Object(m.useCallback)((function(){r.toggleLocked()}),[r]),f=Object(m.useCallback)((function(){r.group()}),[r]),p=Object(m.useCallback)((function(){r.moveToBack()}),[r]),v=Object(m.useCallback)((function(){r.moveBackward()}),[r]),g=Object(m.useCallback)((function(){r.moveForward()}),[r]),b=Object(m.useCallback)((function(){r.moveToFront()}),[r]),y=Object(m.useCallback)((function(){r.delete()}),[r]),w=Object(m.useCallback)((function(){r.copyJson()}),[r]),O=Object(m.useCallback)((function(){r.cut()}),[r]),k=Object(m.useCallback)((function(){r.copy()}),[r]),S=Object(m.useCallback)((function(){r.paste()}),[r]),x=Object(m.useCallback)((function(){r.copySvg()}),[r]),j=Object(m.useCallback)((function(){r.undo()}),[r]),_=Object(m.useCallback)((function(){r.redo()}),[r]),C=Object(m.useCallback)((function(){return du(t,null,h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.exportSelectedShapesAs(kl.PNG);case 2:case"end":return e.stop()}}),e)})))}),[r]),E=Object(m.useCallback)((function(){return du(t,null,h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.exportSelectedShapesAs(kl.JPG);case 2:case"end":return e.stop()}}),e)})))}),[r]),I=Object(m.useCallback)((function(){return du(t,null,h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.exportSelectedShapesAs(kl.WEBP);case 2:case"end":return e.stop()}}),e)})))}),[r]),P=Object(m.useCallback)((function(){return du(t,null,h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.exportSelectedShapesAs(kl.SVG);case 2:case"end":return e.stop()}}),e)})))}),[r]),M=Object(m.useCallback)((function(){return du(t,null,h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.exportSelectedShapesAs(kl.JSON);case 2:case"end":return e.stop()}}),e)})))}),[r]),A=a>0,T=a>1,D=a>2;return Object(m.createElement)(Jc,{dir:"ltr",ref:s,onEscapeKeyDown:Tg,asChild:!0,tabIndex:-1,onBlur:n},Object(m.createElement)(Lh,null,A?Object(m.createElement)(m.Fragment,null,Object(m.createElement)(Vg,{onClick:l,kbd:"#D"},"Duplicate"),Object(m.createElement)(Vg,{onClick:c,kbd:"\u21e7H"},"Flip Horizontal"),Object(m.createElement)(Vg,{onClick:u,kbd:"\u21e7V"},"Flip Vertical"),Object(m.createElement)(Vg,{onClick:d,kbd:"#\u21e7L"},"Lock / Unlock"),(T||o)&&Object(m.createElement)(Ev,null),T&&Object(m.createElement)(Vg,{onClick:f,kbd:"#G"},"Group"),o&&Object(m.createElement)(Vg,{onClick:f,kbd:"#G"},"Ungroup"),Object(m.createElement)(Ev,null),Object(m.createElement)(Ng,{label:"Move"},Object(m.createElement)(Vg,{onClick:b,kbd:"\u21e7]"},"To Front"),Object(m.createElement)(Vg,{onClick:g,kbd:"]"},"Forward"),Object(m.createElement)(Vg,{onClick:v,kbd:"["},"Backward"),Object(m.createElement)(Vg,{onClick:p,kbd:"\u21e7["},"To Back")),Object(m.createElement)(zg,null),T&&Object(m.createElement)(Bg,{hasTwoOrMore:T,hasThreeOrMore:D}),r.callbacks.onExport?Object(m.createElement)(m.Fragment,null,Object(m.createElement)(Ev,null),Object(m.createElement)(Ng,{label:"Export",size:"small"},Object(m.createElement)(Vg,{onClick:C},"PNG"),Object(m.createElement)(Vg,{onClick:E},"JPG"),Object(m.createElement)(Vg,{onClick:I},"WEBP"),Object(m.createElement)(Vg,{onClick:P},"SVG"),Object(m.createElement)(Vg,{onClick:M},"JSON"),Object(m.createElement)(Ev,null),Object(m.createElement)(Vg,{onClick:x,kbd:"#\u21e7C"},"Copy as SVG"),i&&Object(m.createElement)(Vg,{onClick:w},"Copy as JSON"))):Object(m.createElement)(m.Fragment,null,Object(m.createElement)(Ev,null),Object(m.createElement)(Vg,{onClick:x,kbd:"#\u21e7C"},"Copy as SVG"),i&&Object(m.createElement)(Vg,{onClick:w},"Copy as JSON")),Object(m.createElement)(Ev,null),Object(m.createElement)(Vg,{onClick:O,kbd:"#X"},"Cut"),Object(m.createElement)(Vg,{onClick:k,kbd:"#C"},"Copy"),Object(m.createElement)(Vg,{onClick:S,kbd:"#V"},"Paste"),Object(m.createElement)(Ev,null),Object(m.createElement)(Vg,{onClick:y,kbd:"\u232b"},"Delete")):Object(m.createElement)(m.Fragment,null,Object(m.createElement)(Vg,{onClick:S,kbd:"#V"},"Paste"),Object(m.createElement)(Vg,{onClick:j,kbd:"#Z"},"Undo"),Object(m.createElement)(Vg,{onClick:_,kbd:"#\u21e7Z"},"Redo"))))}));function Bg(e){var t=e.hasThreeOrMore,n=wh(),r=Object(m.useCallback)((function(){n.align(Zu.Top)}),[n]),a=Object(m.useCallback)((function(){n.align(Zu.CenterVertical)}),[n]),i=Object(m.useCallback)((function(){n.align(Zu.Bottom)}),[n]),o=Object(m.useCallback)((function(){n.stretch(Qu.Vertical)}),[n]),s=Object(m.useCallback)((function(){n.distribute(tl.Vertical)}),[n]),c=Object(m.useCallback)((function(){n.align(Zu.Left)}),[n]),u=Object(m.useCallback)((function(){n.align(Zu.CenterHorizontal)}),[n]),l=Object(m.useCallback)((function(){n.align(Zu.Right)}),[n]),d=Object(m.useCallback)((function(){n.stretch(Qu.Horizontal)}),[n]),f=Object(m.useCallback)((function(){n.distribute(tl.Horizontal)}),[n]);return Object(m.createElement)(qc,{dir:"ltr"},Object(m.createElement)(Wg,{isSubmenu:!0},"Align / Distribute"),Object(m.createElement)(Jc,{asChild:!0,sideOffset:2,alignOffset:-2},Object(m.createElement)(Lg,{numberOfSelected:t?"threeOrMore":"twoOrMore"},Object(m.createElement)(Kg,{onClick:c},Object(m.createElement)(ro,null)),Object(m.createElement)(Kg,{onClick:u},Object(m.createElement)(to,null)),Object(m.createElement)(Kg,{onClick:l},Object(m.createElement)(ao,null)),Object(m.createElement)(Kg,{onClick:d},Object(m.createElement)(Bo,null)),t&&Object(m.createElement)(Kg,{onClick:f},Object(m.createElement)(To,null)),Object(m.createElement)(Kg,{onClick:r},Object(m.createElement)(io,null)),Object(m.createElement)(Kg,{onClick:a},Object(m.createElement)(no,null)),Object(m.createElement)(Kg,{onClick:i},Object(m.createElement)(eo,null)),Object(m.createElement)(Kg,{onClick:o},Object(m.createElement)(Lo,null)),t&&Object(m.createElement)(Kg,{onClick:s},Object(m.createElement)(Do,null)),Object(m.createElement)(Ug,{offset:13}))))}var Lg=_l(Lh,{display:"grid",variants:{numberOfSelected:{threeOrMore:{gridTemplateColumns:"repeat(5, auto)"},twoOrMore:{gridTemplateColumns:"repeat(4, auto)"}}}}),Fg=function(e){return e.appState.currentPageId},Hg=function(e){return e.document.pages};function zg(){var e=wh(),t=e.useStore(Fg),n=e.useStore(Hg),r=Object.values(n).sort((function(e,t){return(e.childIndex||0)-(t.childIndex||0)})).filter((function(e){return e.id!==t}));return 0===r.length?null:Object(m.createElement)(qc,{dir:"ltr"},Object(m.createElement)(Wg,{isSubmenu:!0},"Move To Page"),Object(m.createElement)(Jc,{dir:"ltr",sideOffset:2,alignOffset:-2,asChild:!0},Object(m.createElement)(Lh,null,r.map((function(n,r){var a=n.id,i=n.name;return Object(m.createElement)(Vg,{key:a,disabled:a===t,onClick:function(){return e.moveToPage(a)}},i||"Page ".concat(r))})),Object(m.createElement)(Ug,{offset:13}))))}function Ng(e){var t=e.children,n=e.label,r=e.size;return Object(m.createElement)(qc,{dir:"ltr"},Object(m.createElement)(Wg,{isSubmenu:!0},n),Object(m.createElement)(Jc,{dir:"ltr",sideOffset:2,alignOffset:-2,asChild:!0},Object(m.createElement)(Lh,{size:r},t,Object(m.createElement)(Ug,{offset:13}))))}var Ug=_l(wc,{fill:"$panel"});function Kg(e){var t=e,n=t.onSelect,r=cu(t,["onSelect"]);return Object(m.createElement)(bc,{dir:"ltr",onSelect:n,asChild:!0},Object(m.createElement)(Vh,ou({},r)))}var Vg=function(e){var t=cu(e,[]);return Object(m.createElement)(bc,{asChild:!0},Object(m.createElement)(Dh,ou({},t)))},Wg=function(e){var t=e,n=t.isSubmenu,r=cu(t,["isSubmenu"]);return Object(m.createElement)(yc,{asChild:!0},Object(m.createElement)(Dh,ou({hasArrow:n},r)))};function Xg(e){var t=e.onSelect;return Object(m.createElement)(Yg,null,Object(m.createElement)(qv,{onClick:t},Object(m.createElement)(bo,null)))}var Yg=_l("div",{opacity:1,zIndex:100,backgroundColor:"transparent","& svg":{color:"$text"},"&:hover svg":{color:"$text"}}),Gg=function(e){return e.appState.isLoading};function $g(){var e=wh().useStore(Gg);return Object(m.createElement)(qg,{hidden:!e},"Loading...")}var qg=_l("div",{position:"absolute",top:0,left:"50%",transform:"translate(-50%, 0)",borderBottomLeftRadius:"12px",borderBottomRightRadius:"12px",padding:"8px 16px",fontFamily:"var(--fonts-ui)",fontSize:"var(--fontSizes-1)",boxShadow:"var(--shadows-panel)",backgroundColor:"white",zIndex:200,pointerEvents:"none","& > div > *":{pointerEvents:"all"},variants:{transform:{hidden:{transform:"translate(-50%, 100%)"},visible:{transform:"translate(-50%, 0%)"}}}});function Zg(e){var t=e.id,n=e.document,r=e.currentPageId,a=e.autofocus,i=void 0===a||a,o=e.showMenu,s=void 0===o||o,c=e.showPages,u=void 0===c||c,l=e.showTools,f=void 0===l||l,p=e.showZoom,h=void 0===p||p,v=e.showStyles,g=void 0===v||v,b=e.showUI,y=void 0===b||b,w=e.readOnly,O=void 0!==w&&w,k=e.showSponsorLink,S=void 0!==k&&k,x=e.disableAssets,j=void 0!==x&&x,_=e.onMount,C=e.onChange,E=e.onChangePresence,I=e.onNewProject,P=e.onSaveProject,M=e.onSaveProjectAs,A=e.onOpenProject,T=e.onOpenMedia,D=e.onSignOut,R=e.onSignIn,B=e.onUndo,L=e.onRedo,F=e.onPersist,H=e.onPatch,z=e.onCommand,N=e.onChangePage,U=e.onAssetCreate,K=e.onAssetDelete,V=e.onExport,W=Object(m.useState)(t),X=Object(d.a)(W,2),Y=X[0],G=X[1],$=Object(m.useState)((function(){return new bh(t,{onMount:_,onChange:C,onChangePresence:E,onNewProject:I,onSaveProject:P,onSaveProjectAs:M,onOpenProject:A,onOpenMedia:T,onSignOut:D,onSignIn:R,onUndo:B,onRedo:L,onPersist:F,onPatch:H,onCommand:z,onChangePage:N,onAssetDelete:K,onAssetCreate:U})})),q=Object(d.a)($,2),Z=q[0],J=q[1];return Object(m.useEffect)((function(){if(t!==Y){var e=new bh(t,{onMount:_,onChange:C,onChangePresence:E,onNewProject:I,onSaveProject:P,onSaveProjectAs:M,onOpenProject:A,onOpenMedia:T,onSignOut:D,onSignIn:R,onUndo:B,onRedo:L,onPersist:F,onPatch:H,onCommand:z,onChangePage:N,onAssetDelete:K,onAssetCreate:U,onExport:V});G(t),J(e)}}),[Y,t]),Object(m.useEffect)((function(){n&&(n.id===Z.document.id?Z.updateDocument(n):Z.loadDocument(n))}),[n,Z]),Object(m.useEffect)((function(){Z.setDisableAssets(j)}),[Z,j]),Object(m.useEffect)((function(){r&&Z.changePage(r)}),[r,Z]),Object(m.useEffect)((function(){Z.readOnly=O}),[Z,O]),Object(m.useEffect)((function(){Z.callbacks={onMount:_,onChange:C,onChangePresence:E,onNewProject:I,onSaveProject:P,onSaveProjectAs:M,onOpenProject:A,onOpenMedia:T,onSignOut:D,onSignIn:R,onUndo:B,onRedo:L,onPersist:F,onPatch:H,onCommand:z,onChangePage:N,onAssetDelete:K,onAssetCreate:U,onExport:V}}),[_,C,E,I,P,M,A,T,D,R,B,L,F,H,z,N,K,U,V]),Object(m.createElement)(yh.Provider,{value:Z},Object(m.createElement)(Jg,{key:Y||"Tldraw",id:Y,autofocus:i,showPages:u,showMenu:s,showStyles:g,showZoom:h,showTools:f,showUI:y,showSponsorLink:S,readOnly:O}))}var Jg=Object(m.memo)((function(e){var t,n,r=e.id,a=e.autofocus,i=e.showPages,o=e.showMenu,s=e.showZoom,c=e.showStyles,u=e.showTools,l=e.showSponsorLink,d=e.readOnly,f=e.showUI,p=wh(),h=Object(m.useRef)(null),v=p.useStore(),g=v.document,b=v.settings,w=v.appState,O=v.room,k="select"===v.appState.activeTool,S=g.pages[w.currentPageId],x=g.pageStates[S.id],j=g.assets,_=x.selectedIds,C=1===_.length&&S.shapes[_[0]]&&dp.getShapeUtil(S.shapes[_[0]].type).hideBounds,E=1===_.length&&S.shapes[_[0]]&&dp.getShapeUtil(S.shapes[_[0]].type).hideResizeHandles,I=Object(m.useMemo)((function(){return{isDarkMode:b.isDarkMode}}),[b.isDarkMode]),P=Object(m.useMemo)((function(){return b.isDarkMode?{brushFill:"rgba(180, 180, 180, .05)",brushStroke:"rgba(180, 180, 180, .25)",selected:"rgba(38, 150, 255, 1.000)",selectFill:"rgba(38, 150, 255, 0.05)",background:"#212529",foreground:"#49555f"}:{}}),[b.isDarkMode]),M=void 0!==p.session,A=M&&"BrushSession"!==(null==(t=p.session)?void 0:t.constructor.name)||!k||C||!!x.editingId,T=M||!k,D=M&&v.appState.status!==Yu.Brushing||!k,R=M||!k||!b.showCloneHandles||x.camera.zoom<.2;return Object(m.createElement)(em,{ref:h,tabIndex:-0,className:b.isDarkMode?Cl:""},Object(m.createElement)($g,null),Object(m.createElement)(Qg,{focusableRef:h,autofocus:a}),Object(m.createElement)(Dg,null,Object(m.createElement)(y.b,{id:r,containerRef:h,shapeUtils:up,page:S,pageState:x,assets:j,snapLines:w.snapLines,grid:8,users:null==O?void 0:O.users,userId:null==O?void 0:O.userId,theme:P,meta:I,hideBounds:A,hideHandles:T,hideResizeHandles:E,hideIndicators:D,hideBindingHandles:!b.showBindingHandles,hideCloneHandles:R,hideRotateHandles:!b.showRotateHandles,hideGrid:!b.showGrid,performanceMode:null==(n=p.session)?void 0:n.performanceMode,onPinchStart:p.onPinchStart,onPinchEnd:p.onPinchEnd,onPinch:p.onPinch,onPan:p.onPan,onZoom:p.onZoom,onPointerDown:p.onPointerDown,onPointerMove:p.onPointerMove,onPointerUp:p.onPointerUp,onPointCanvas:p.onPointCanvas,onDoubleClickCanvas:p.onDoubleClickCanvas,onRightPointCanvas:p.onRightPointCanvas,onDragCanvas:p.onDragCanvas,onReleaseCanvas:p.onReleaseCanvas,onPointShape:p.onPointShape,onDoubleClickShape:p.onDoubleClickShape,onRightPointShape:p.onRightPointShape,onDragShape:p.onDragShape,onHoverShape:p.onHoverShape,onUnhoverShape:p.onUnhoverShape,onReleaseShape:p.onReleaseShape,onPointBounds:p.onPointBounds,onDoubleClickBounds:p.onDoubleClickBounds,onRightPointBounds:p.onRightPointBounds,onDragBounds:p.onDragBounds,onHoverBounds:p.onHoverBounds,onUnhoverBounds:p.onUnhoverBounds,onReleaseBounds:p.onReleaseBounds,onPointBoundsHandle:p.onPointBoundsHandle,onDoubleClickBoundsHandle:p.onDoubleClickBoundsHandle,onRightPointBoundsHandle:p.onRightPointBoundsHandle,onDragBoundsHandle:p.onDragBoundsHandle,onHoverBoundsHandle:p.onHoverBoundsHandle,onUnhoverBoundsHandle:p.onUnhoverBoundsHandle,onReleaseBoundsHandle:p.onReleaseBoundsHandle,onPointHandle:p.onPointHandle,onDoubleClickHandle:p.onDoubleClickHandle,onRightPointHandle:p.onRightPointHandle,onDragHandle:p.onDragHandle,onHoverHandle:p.onHoverHandle,onUnhoverHandle:p.onUnhoverHandle,onReleaseHandle:p.onReleaseHandle,onError:p.onError,onRenderCountChange:p.onRenderCountChange,onShapeChange:p.onShapeChange,onShapeBlur:p.onShapeBlur,onShapeClone:p.onShapeClone,onBoundsChange:p.updateBounds,onKeyDown:p.onKeyDown,onKeyUp:p.onKeyUp,onDragOver:p.onDragOver,onDrop:p.onDrop})),f&&Object(m.createElement)(tm,null,b.isFocusMode?Object(m.createElement)(Xg,{onSelect:p.toggleFocusMode}):Object(m.createElement)(m.Fragment,null,Object(m.createElement)(_g,{readOnly:d,showPages:i,showMenu:o,showStyles:c,showZoom:s,showSponsorLink:l}),Object(m.createElement)(nm,null),u&&!d&&Object(m.createElement)(Hv,null))))})),Qg=Object(m.memo)((function(e){var t=e.focusableRef,n=e.autofocus;return function(e){var t=wh(),n=Object(m.useCallback)((function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=e.current;return!(!n||!t.isMenuOpen)||r&&(document.activeElement===r||r.contains(document.activeElement))}),[e]);St("v,1",(function(){n(!0)&&t.selectTool("select")}),[t,e.current]),St("d,p,2",(function(){n(!0)&&t.selectTool(il.Draw)}),void 0,[t]),St("e,3",(function(){n(!0)&&t.selectTool("erase")}),void 0,[t]),St("r,4",(function(){n(!0)&&t.selectTool(il.Rectangle)}),void 0,[t]),St("o,5",(function(){n(!0)&&t.selectTool(il.Ellipse)}),void 0,[t]),St("g,6",(function(){n()&&t.selectTool(il.Triangle)}),void 0,[t]),St("l,7",(function(){n(!0)&&t.selectTool(il.Line)}),void 0,[t]),St("a,8",(function(){n(!0)&&t.selectTool(il.Arrow)}),void 0,[t]),St("t,9",(function(){n(!0)&&t.selectTool(il.Text)}),void 0,[t]),St("s,0",(function(){n(!0)&&t.selectTool(il.Sticky)}),void 0,[t]),St("ctrl+shift+d,\u2318+shift+d",(function(e){n(!0)&&(t.toggleDarkMode(),e.preventDefault())}),void 0,[t]),St("ctrl+.,\u2318+.",(function(){n(!0)&&t.toggleFocusMode()}),void 0,[t]),St("ctrl+shift+g,\u2318+shift+g",(function(){n(!0)&&t.toggleGrid()}),void 0,[t]);var r=xh(),a=r.onNewProject,i=r.onOpenProject,o=r.onSaveProject,s=r.onSaveProjectAs,c=r.onOpenMedia;St("ctrl+n,\u2318+n",(function(e){n()&&a(e)}),void 0,[t]),St("ctrl+s,\u2318+s",(function(e){n()&&o(e)}),void 0,[t]),St("ctrl+shift+s,\u2318+shift+s",(function(e){n()&&s(e)}),void 0,[t]),St("ctrl+o,\u2318+o",(function(e){n()&&i(e)}),void 0,[t]),St("ctrl+u,\u2318+u",(function(e){n()&&c(e)}),void 0,[t]),St("\u2318+z,ctrl+z",(function(){n(!0)&&(t.session?t.cancelSession():t.undo())}),void 0,[t]),St("ctrl+shift-z,\u2318+shift+z",(function(){n(!0)&&(t.session?t.cancelSession():t.redo())}),void 0,[t]),St("\u2318+u,ctrl+u",(function(){n()&&t.undoSelect()}),void 0,[t]),St("ctrl+shift-u,\u2318+shift+u",(function(){n()&&t.redoSelect()}),void 0,[t]),St("ctrl+=,\u2318+=,ctrl+num_subtract,\u2318+num_subtract",(function(e){n(!0)&&(t.zoomIn(),e.preventDefault())}),void 0,[t]),St("ctrl+-,\u2318+-,ctrl+num_add,\u2318+num_add",(function(e){n(!0)&&(t.zoomOut(),e.preventDefault())}),void 0,[t]),St("shift+0,ctrl+numpad_0,\u2318+numpad_0",(function(){n(!0)&&t.resetZoom()}),void 0,[t]),St("shift+1",(function(){n(!0)&&t.zoomToFit()}),void 0,[t]),St("shift+2",(function(){n(!0)&&t.zoomToSelection()}),void 0,[t]),St("ctrl+d,\u2318+d",(function(e){n()&&(t.duplicate(),e.preventDefault())}),void 0,[t]),St("shift+h",(function(){n(!0)&&t.flipHorizontal()}),void 0,[t]),St("shift+v",(function(){n(!0)&&t.flipVertical()}),void 0,[t]),St("escape",(function(){n(!0)&&t.cancel()}),void 0,[t]),St("backspace,del",(function(){n()&&t.delete()}),void 0,[t]),St("\u2318+a,ctrl+a",(function(){n(!0)&&t.selectAll()}),void 0,[t]),St("up",(function(){n()&&t.nudge([0,-1],!1)}),void 0,[t]),St("right",(function(){n()&&t.nudge([1,0],!1)}),void 0,[t]),St("down",(function(){n()&&t.nudge([0,1],!1)}),void 0,[t]),St("left",(function(){n()&&t.nudge([-1,0],!1)}),void 0,[t]),St("shift+up",(function(){n()&&t.nudge([0,-1],!0)}),void 0,[t]),St("shift+right",(function(){n()&&t.nudge([1,0],!0)}),void 0,[t]),St("shift+down",(function(){n()&&t.nudge([0,1],!0)}),void 0,[t]),St("shift+left",(function(){n()&&t.nudge([-1,0],!0)}),void 0,[t]),St("\u2318+shift+l,ctrl+shift+l",(function(){n()&&t.toggleLocked()}),void 0,[t]),St("\u2318+c,ctrl+c",(function(){n()&&t.copy()}),void 0,[t]),St("\u2318+x,ctrl+x",(function(){n()&&t.cut()}),void 0,[t]),St("\u2318+v,ctrl+v",(function(){n()&&t.paste()}),void 0,[t]),St("\u2318+g,ctrl+g",(function(e){n()&&(t.group(),e.preventDefault())}),void 0,[t]),St("\u2318+shift+g,ctrl+shift+g",(function(e){n()&&(t.ungroup(),e.preventDefault())}),void 0,[t]),St("[",(function(){n(!0)&&t.moveBackward()}),void 0,[t]),St("]",(function(){n(!0)&&t.moveForward()}),void 0,[t]),St("shift+[",(function(){n(!0)&&t.moveToBack()}),void 0,[t]),St("shift+]",(function(){n(!0)&&t.moveToFront()}),void 0,[t]),St("ctrl+shift+backspace,\u2318+shift+backspace",(function(e){n()&&(t.settings.isDebugMode&&t.resetDocument(),e.preventDefault())}),void 0,[t]),St("alt+command+l,alt+ctrl+l",(function(e){n(!0)&&(t.style({textAlign:gl.Start}),e.preventDefault())}),void 0,[t]),St("alt+command+t,alt+ctrl+t",(function(e){n(!0)&&(t.style({textAlign:gl.Middle}),e.preventDefault())}),void 0,[t]),St("alt+command+r,alt+ctrl+r",(function(e){n(!0)&&(t.style({textAlign:gl.End}),e.preventDefault())}),void 0,[t])}(t),Object(m.useLayoutEffect)((function(){if(!Oh.get(kh)){var e=document.createElement("style");return e.innerHTML=Sh,e.setAttribute("id",kh),document.head.appendChild(e),Oh.set(kh,e),function(){e&&document.head.contains(e)&&(document.head.removeChild(e),Oh.delete(kh))}}}),[kh,Sh]),Object(m.useEffect)((function(){var e;n&&(null==(e=t.current)||e.focus())}),[n]),null})),em=_l("div",{position:"absolute",height:"100%",width:"100%",minHeight:0,minWidth:0,maxHeight:"100%",maxWidth:"100%",overflow:"hidden",boxSizing:"border-box",outline:"none","& .tl-container":{position:"absolute",top:0,left:0,height:"100%",width:"100%",zIndex:1},"& input, textarea, button, select, label, button":{webkitTouchCallout:"none",webkitUserSelect:"none","-webkit-tap-highlight-color":"transparent","tap-highlight-color":"transparent"}}),tm=_l("div",{position:"absolute",top:0,left:0,height:"100%",width:"100%",padding:"8px 8px 0 8px",display:"flex",alignItems:"flex-start",justifyContent:"flex-start",pointerEvents:"none",zIndex:2,"& > *":{pointerEvents:"all"}}),nm=_l("div",{flexGrow:2})},,,function(e,t,n){"use strict";n(27);var r=n(0),a=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var i=Symbol.for;a=i("react.element"),t.Fragment=i("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,c={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,i={},u=null,l=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,r)&&!c.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:u,ref:l,props:i,_owner:o.current}}t.jsx=u,t.jsxs=u},function(e,t,n){"use strict";var r=n(27),a=60103,i=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,s=60110,c=60112;t.Suspense=60113;var u=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var d=Symbol.for;a=d("react.element"),i=d("react.portal"),t.Fragment=d("react.fragment"),t.StrictMode=d("react.strict_mode"),t.Profiler=d("react.profiler"),o=d("react.provider"),s=d("react.context"),c=d("react.forward_ref"),t.Suspense=d("react.suspense"),u=d("react.memo"),l=d("react.lazy")}var f="function"===typeof Symbol&&Symbol.iterator;function p(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||h}function m(){}function b(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||h}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(p(85));this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=g.prototype;var y=b.prototype=new m;y.constructor=b,r(y,g.prototype),y.isPureReactComponent=!0;var w={current:null},O=Object.prototype.hasOwnProperty,k={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var r,i={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)O.call(t,r)&&!k.hasOwnProperty(r)&&(i[r]=t[r]);var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){for(var u=Array(c),l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===i[r]&&(i[r]=c[r]);return{$$typeof:a,type:e,key:o,ref:s,props:i,_owner:w.current}}function x(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var j=/\/+/g;function _(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,n,r,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c=!1;if(null===e)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case a:case i:c=!0}}if(c)return o=o(c=e),e=""===r?"."+_(c,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(j,"$&/")+"/"),C(o,t,n,"",(function(e){return e}))):null!=o&&(x(o)&&(o=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||c&&c.key===o.key?"":(""+o.key).replace(j,"$&/")+"/")+e)),t.push(o)),1;if(c=0,r=""===r?".":r+":",Array.isArray(e))for(var u=0;u<e.length;u++){var l=r+_(s=e[u],u);c+=C(s,t,n,l,o)}else if("function"===typeof(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e)))for(e=l.call(e),u=0;!(s=e.next()).done;)c+=C(s=s.value,t,n,l=r+_(s,u++),o);else if("object"===s)throw t=""+e,Error(p(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return c}function E(e,t,n){if(null==e)return e;var r=[],a=0;return C(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function I(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var P={current:null};function M(){var e=P.current;if(null===e)throw Error(p(321));return e}var A={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:E,forEach:function(e,t,n){E(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return E(e,(function(){t++})),t},toArray:function(e){return E(e,(function(e){return e}))||[]},only:function(e){if(!x(e))throw Error(p(143));return e}},t.Component=g,t.PureComponent=b,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(p(267,e));var i=r({},e.props),o=e.key,s=e.ref,c=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,c=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)O.call(t,l)&&!k.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){u=Array(l);for(var d=0;d<l;d++)u[d]=arguments[d+2];i.children=u}return{$$typeof:a,type:e.type,key:o,ref:s,props:i,_owner:c}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=x,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return M().useCallback(e,t)},t.useContext=function(e,t){return M().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return M().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return M().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return M().useLayoutEffect(e,t)},t.useMemo=function(e,t){return M().useMemo(e,t)},t.useReducer=function(e,t,n){return M().useReducer(e,t,n)},t.useRef=function(e){return M().useRef(e)},t.useState=function(e){return M().useState(e)},t.version="17.0.1"},function(e,t,n){"use strict";var r=n(0),a=n(27),i=n(44);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var s=new Set,c={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(c[e]=t,e=0;e<t.length;e++)s.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p=Object.prototype.hasOwnProperty,h={},v={};function g(e,t,n,r,a,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var b=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function w(e,t,n,r){var a=m.hasOwnProperty(t)?m[t]:null;(null!==a?0===a.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!p.call(v,e)||!p.call(h,e)&&(f.test(e)?v[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(b,y);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(b,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(b,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var O=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=60103,S=60106,x=60107,j=60108,_=60114,C=60109,E=60110,I=60112,P=60113,M=60120,A=60115,T=60116,D=60121,R=60128,B=60129,L=60130,F=60131;if("function"===typeof Symbol&&Symbol.for){var H=Symbol.for;k=H("react.element"),S=H("react.portal"),x=H("react.fragment"),j=H("react.strict_mode"),_=H("react.profiler"),C=H("react.provider"),E=H("react.context"),I=H("react.forward_ref"),P=H("react.suspense"),M=H("react.suspense_list"),A=H("react.memo"),T=H("react.lazy"),D=H("react.block"),H("react.scope"),R=H("react.opaque.id"),B=H("react.debug_trace_mode"),L=H("react.offscreen"),F=H("react.legacy_hidden")}var z,N="function"===typeof Symbol&&Symbol.iterator;function U(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}function K(e){if(void 0===z)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);z=t&&t[1]||""}return"\n"+z+e}var V=!1;function W(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),i=r.stack.split("\n"),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(1!==o||1!==s)do{if(o--,0>--s||a[o]!==i[s])return"\n"+a[o].replace(" at new "," at ")}while(1<=o&&0<=s);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?K(e):""}function X(e){switch(e.tag){case 5:return K(e.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 22:return e=W(e.type._render,!1);case 1:return e=W(e.type,!0);default:return""}}function Y(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case S:return"Portal";case _:return"Profiler";case j:return"StrictMode";case P:return"Suspense";case M:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case A:return Y(e.type);case D:return Y(e._render);case T:t=e._payload,e=e._init;try{return Y(e(t))}catch(n){}}return null}function G(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function $(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=$(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Z(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return a({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ae(e,t.type,n):t.hasOwnProperty("defaultValue")&&ae(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ae(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ie(e,t){return e=a({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ce(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function ue(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var de="http://www.w3.org/1999/xhtml",fe="http://www.w3.org/2000/svg";function pe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function he(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?pe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,ge,me=(ge=function(e,t){if(e.namespaceURI!==fe||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ge(e,t)}))}:ge);function be(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ye={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},we=["Webkit","ms","Moz","O"];function Oe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ye.hasOwnProperty(e)&&ye[e]?(""+t).trim():t+"px"}function ke(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=Oe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(ye).forEach((function(e){we.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ye[t]=ye[e]}))}));var Se=a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xe(e,t){if(t){if(Se[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function je(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ce=null,Ee=null,Ie=null;function Pe(e){if(e=ea(e)){if("function"!==typeof Ce)throw Error(o(280));var t=e.stateNode;t&&(t=na(t),Ce(e.stateNode,e.type,t))}}function Me(e){Ee?Ie?Ie.push(e):Ie=[e]:Ee=e}function Ae(){if(Ee){var e=Ee,t=Ie;if(Ie=Ee=null,Pe(e),t)for(e=0;e<t.length;e++)Pe(t[e])}}function Te(e,t){return e(t)}function De(e,t,n,r,a){return e(t,n,r,a)}function Re(){}var Be=Te,Le=!1,Fe=!1;function He(){null===Ee&&null===Ie||(Re(),Ae())}function ze(e,t){var n=e.stateNode;if(null===n)return null;var r=na(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ne=!1;if(d)try{var Ue={};Object.defineProperty(Ue,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",Ue,Ue),window.removeEventListener("test",Ue,Ue)}catch(ge){Ne=!1}function Ke(e,t,n,r,a,i,o,s,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(l){this.onError(l)}}var Ve=!1,We=null,Xe=!1,Ye=null,Ge={onError:function(e){Ve=!0,We=e}};function $e(e,t,n,r,a,i,o,s,c){Ve=!1,We=null,Ke.apply(Ge,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Je(e){if(qe(e)!==e)throw Error(o(188))}function Qe(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return Je(a),e;if(i===r)return Je(a),t;i=i.sibling}throw Error(o(188))}if(n.return!==r.return)n=a,r=i;else{for(var s=!1,c=a.child;c;){if(c===n){s=!0,n=a,r=i;break}if(c===r){s=!0,r=a,n=i;break}c=c.sibling}if(!s){for(c=i.child;c;){if(c===n){s=!0,n=i,r=a;break}if(c===r){s=!0,r=i,n=a;break}c=c.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,at,it=!1,ot=[],st=null,ct=null,ut=null,lt=new Map,dt=new Map,ft=[],pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ht(e,t,n,r,a){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:a,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":ct=null;break;case"mouseover":case"mouseout":ut=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":dt.delete(t.pointerId)}}function gt(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e=ht(t,n,r,a,i),null!==t&&(null!==(t=ea(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function mt(e){var t=Qr(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ze(n)))return e.blockedOn=t,void at(e.lanePriority,(function(){i.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ea(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function yt(e,t,n){bt(e)&&n.delete(t)}function wt(){for(it=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ea(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==st&&bt(st)&&(st=null),null!==ct&&bt(ct)&&(ct=null),null!==ut&&bt(ut)&&(ut=null),lt.forEach(yt),dt.forEach(yt)}function Ot(e,t){e.blockedOn===t&&(e.blockedOn=null,it||(it=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,wt)))}function kt(e){function t(t){return Ot(t,e)}if(0<ot.length){Ot(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&Ot(st,e),null!==ct&&Ot(ct,e),null!==ut&&Ot(ut,e),lt.forEach(t),dt.forEach(t),n=0;n<ft.length;n++)(r=ft[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ft.length&&null===(n=ft[0]).blockedOn;)mt(n),null===n.blockedOn&&ft.shift()}function St(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xt={animationend:St("Animation","AnimationEnd"),animationiteration:St("Animation","AnimationIteration"),animationstart:St("Animation","AnimationStart"),transitionend:St("Transition","TransitionEnd")},jt={},_t={};function Ct(e){if(jt[e])return jt[e];if(!xt[e])return e;var t,n=xt[e];for(t in n)if(n.hasOwnProperty(t)&&t in _t)return jt[e]=n[t];return e}d&&(_t=document.createElement("div").style,"AnimationEvent"in window||(delete xt.animationend.animation,delete xt.animationiteration.animation,delete xt.animationstart.animation),"TransitionEvent"in window||delete xt.transitionend.transition);var Et=Ct("animationend"),It=Ct("animationiteration"),Pt=Ct("animationstart"),Mt=Ct("transitionend"),At=new Map,Tt=new Map,Dt=["abort","abort",Et,"animationEnd",It,"animationIteration",Pt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Mt,"transitionEnd","waiting","waiting"];function Rt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],a=e[n+1];a="on"+(a[0].toUpperCase()+a.slice(1)),Tt.set(r,t),At.set(r,a),u(a,[r])}}(0,i.unstable_now)();var Bt=8;function Lt(e){if(0!==(1&e))return Bt=15,1;if(0!==(2&e))return Bt=14,2;if(0!==(4&e))return Bt=13,4;var t=24&e;return 0!==t?(Bt=12,t):0!==(32&e)?(Bt=11,32):0!==(t=192&e)?(Bt=10,t):0!==(256&e)?(Bt=9,256):0!==(t=3584&e)?(Bt=8,t):0!==(4096&e)?(Bt=7,4096):0!==(t=4186112&e)?(Bt=6,t):0!==(t=62914560&e)?(Bt=5,t):67108864&e?(Bt=4,67108864):0!==(134217728&e)?(Bt=3,134217728):0!==(t=805306368&e)?(Bt=2,t):0!==(1073741824&e)?(Bt=1,1073741824):(Bt=8,e)}function Ft(e,t){var n=e.pendingLanes;if(0===n)return Bt=0;var r=0,a=0,i=e.expiredLanes,o=e.suspendedLanes,s=e.pingedLanes;if(0!==i)r=i,a=Bt=15;else if(0!==(i=134217727&n)){var c=i&~o;0!==c?(r=Lt(c),a=Bt):0!==(s&=i)&&(r=Lt(s),a=Bt)}else 0!==(i=n&~o)?(r=Lt(i),a=Bt):0!==s&&(r=Lt(s),a=Bt);if(0===r)return 0;if(r=n&((0>(r=31-Vt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Lt(t),a<=Bt)return t;Bt=a}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-Vt(t)),r|=e[n],t&=~a;return r}function Ht(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function zt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Nt(24&~t))?zt(10,t):e;case 10:return 0===(e=Nt(192&~t))?zt(8,t):e;case 8:return 0===(e=Nt(3584&~t))&&(0===(e=Nt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Nt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Nt(e){return e&-e}function Ut(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Kt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Vt(t)]=n}var Vt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Wt(e)/Xt|0)|0},Wt=Math.log,Xt=Math.LN2;var Yt=i.unstable_UserBlockingPriority,Gt=i.unstable_runWithPriority,$t=!0;function qt(e,t,n,r){Le||Re();var a=Jt,i=Le;Le=!0;try{De(a,e,t,n,r)}finally{(Le=i)||He()}}function Zt(e,t,n,r){Gt(Yt,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){var a;if($t)if((a=0===(4&t))&&0<ot.length&&-1<pt.indexOf(e))e=ht(null,e,t,n,r),ot.push(e);else{var i=Qt(e,t,n,r);if(null===i)a&&vt(e,r);else{if(a){if(-1<pt.indexOf(e))return e=ht(i,e,t,n,r),void ot.push(e);if(function(e,t,n,r,a){switch(t){case"focusin":return st=gt(st,e,t,n,r,a),!0;case"dragenter":return ct=gt(ct,e,t,n,r,a),!0;case"mouseover":return ut=gt(ut,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return lt.set(i,gt(lt.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,dt.set(i,gt(dt.get(i)||null,e,t,n,r,a)),!0}return!1}(i,e,t,n,r))return;vt(e,r)}Ar(e,t,r,null,n)}}}function Qt(e,t,n,r){var a=_e(r);if(null!==(a=Qr(a))){var i=qe(a);if(null===i)a=null;else{var o=i.tag;if(13===o){if(null!==(a=Ze(i)))return a;a=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;a=null}else i!==a&&(a=null)}}return Ar(e,t,r,a,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,a="value"in en?en.value:en.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[i-t];t++);return nn=a.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function sn(){return!1}function cn(e){function t(t,n,r,a,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?on:sn,this.isPropagationStopped=sn,this}return a(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var un,ln,dn,fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pn=cn(fn),hn=a({},fn,{view:0,detail:0}),vn=cn(hn),gn=a({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==dn&&(dn&&"mousemove"===e.type?(un=e.screenX-dn.screenX,ln=e.screenY-dn.screenY):ln=un=0,dn=e),un)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),mn=cn(gn),bn=cn(a({},gn,{dataTransfer:0})),yn=cn(a({},hn,{relatedTarget:0})),wn=cn(a({},fn,{animationName:0,elapsedTime:0,pseudoElement:0})),On=cn(a({},fn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),kn=cn(a({},fn,{data:0})),Sn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=jn[e])&&!!t[e]}function Cn(){return _n}var En=cn(a({},hn,{key:function(e){if(e.key){var t=Sn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),In=cn(a({},gn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=cn(a({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Mn=cn(a({},fn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=cn(a({},gn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Tn=[9,13,27,32],Dn=d&&"CompositionEvent"in window,Rn=null;d&&"documentMode"in document&&(Rn=document.documentMode);var Bn=d&&"TextEvent"in window&&!Rn,Ln=d&&(!Dn||Rn&&8<Rn&&11>=Rn),Fn=String.fromCharCode(32),Hn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Tn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Un=!1;var Kn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Kn[e.type]:"textarea"===t}function Wn(e,t,n,r){Me(r),0<(t=Dr(t,"onChange")).length&&(n=new pn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Xn=null,Yn=null;function Gn(e){_r(e,0)}function $n(e){if(Z(ta(e)))return e}function qn(e,t){if("change"===e)return t}var Zn=!1;if(d){var Jn;if(d){var Qn="oninput"in document;if(!Qn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Qn="function"===typeof er.oninput}Jn=Qn}else Jn=!1;Zn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Xn&&(Xn.detachEvent("onpropertychange",nr),Yn=Xn=null)}function nr(e){if("value"===e.propertyName&&$n(Yn)){var t=[];if(Wn(t,Yn,e,_e(e)),e=Gn,Le)e(t);else{Le=!0;try{Te(e,t)}finally{Le=!1,He()}}}}function rr(e,t,n){"focusin"===e?(tr(),Yn=n,(Xn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Yn)}function ir(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},cr=Object.prototype.hasOwnProperty;function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!cr.call(t,n[r])||!sr(e[n[r]],t[n[r]]))return!1;return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var vr=d&&"documentMode"in document&&11>=document.documentMode,gr=null,mr=null,br=null,yr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==gr||gr!==J(r)||("selectionStart"in(r=gr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&ur(br,r)||(br=r,0<(r=Dr(mr,"onSelect")).length&&(t=new pn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}Rt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Rt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Rt(Dt,2);for(var Or="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),kr=0;kr<Or.length;kr++)Tt.set(Or[kr],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sr));function jr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,i,s,c,u){if($e.apply(this,arguments),Ve){if(!Ve)throw Error(o(198));var l=We;Ve=!1,We=null,Xe||(Xe=!0,Ye=l)}}(r,t,void 0,e),e.currentTarget=null}function _r(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],c=s.instance,u=s.currentTarget;if(s=s.listener,c!==i&&a.isPropagationStopped())break e;jr(a,s,u),i=c}else for(o=0;o<r.length;o++){if(c=(s=r[o]).instance,u=s.currentTarget,s=s.listener,c!==i&&a.isPropagationStopped())break e;jr(a,s,u),i=c}}}if(Xe)throw e=Ye,Xe=!1,Ye=null,e}function Cr(e,t){var n=ra(t),r=e+"__bubble";n.has(r)||(Mr(t,e,2,!1),n.add(r))}var Er="_reactListening"+Math.random().toString(36).slice(2);function Ir(e){e[Er]||(e[Er]=!0,s.forEach((function(t){xr.has(t)||Pr(t,!1,e,null),Pr(t,!0,e,null)})))}function Pr(e,t,n,r){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,i=n;if("selectionchange"===e&&9!==n.nodeType&&(i=n.ownerDocument),null!==r&&!t&&xr.has(e)){if("scroll"!==e)return;a|=2,i=r}var o=ra(i),s=e+"__"+(t?"capture":"bubble");o.has(s)||(t&&(a|=4),Mr(i,e,a,t),o.add(s))}function Mr(e,t,n,r){var a=Tt.get(t);switch(void 0===a?2:a){case 0:a=qt;break;case 1:a=Zt;break;default:a=Jt}n=a.bind(null,t,n,e),a=void 0,!Ne||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Ar(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&((c=o.stateNode.containerInfo)===a||8===c.nodeType&&c.parentNode===a))return;o=o.return}for(;null!==s;){if(null===(o=Qr(s)))return;if(5===(c=o.tag)||6===c){r=i=o;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Fe)return e(t,n);Fe=!0;try{Be(e,t,n)}finally{Fe=!1,He()}}((function(){var r=i,a=_e(n),o=[];e:{var s=At.get(e);if(void 0!==s){var c=pn,u=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":c=En;break;case"focusin":u="focus",c=yn;break;case"focusout":u="blur",c=yn;break;case"beforeblur":case"afterblur":c=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=bn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Pn;break;case Et:case It:case Pt:c=wn;break;case Mt:c=Mn;break;case"scroll":c=vn;break;case"wheel":c=An;break;case"copy":case"cut":case"paste":c=On;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=In}var l=0!==(4&t),d=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var p,h=r;null!==h;){var v=(p=h).stateNode;if(5===p.tag&&null!==v&&(p=v,null!==f&&(null!=(v=ze(h,f))&&l.push(Tr(h,v,p)))),d)break;h=h.return}0<l.length&&(s=new c(s,u,null,n,a),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(u=n.relatedTarget||n.fromElement)||!Qr(u)&&!u[Zr])&&(c||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Qr(u):null)&&(u!==(d=qe(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(c=null,u=r),c!==u)){if(l=mn,v="onMouseLeave",f="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(l=In,v="onPointerLeave",f="onPointerEnter",h="pointer"),d=null==c?s:ta(c),p=null==u?s:ta(u),(s=new l(v,h+"leave",c,n,a)).target=d,s.relatedTarget=p,v=null,Qr(a)===r&&((l=new l(f,h+"enter",u,n,a)).target=p,l.relatedTarget=d,v=l),d=v,c&&u)e:{for(f=u,h=0,p=l=c;p;p=Rr(p))h++;for(p=0,v=f;v;v=Rr(v))p++;for(;0<h-p;)l=Rr(l),h--;for(;0<p-h;)f=Rr(f),p--;for(;h--;){if(l===f||null!==f&&l===f.alternate)break e;l=Rr(l),f=Rr(f)}l=null}else l=null;null!==c&&Br(o,s,c,l,!1),null!==u&&null!==d&&Br(o,d,u,l,!0)}if("select"===(c=(s=r?ta(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var g=qn;else if(Vn(s))if(Zn)g=or;else{g=ar;var m=rr}else(c=s.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ir);switch(g&&(g=g(e,r))?Wn(o,g,n,a):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&ae(s,"number",s.value)),m=r?ta(r):window,e){case"focusin":(Vn(m)||"true"===m.contentEditable)&&(gr=m,mr=r,br=null);break;case"focusout":br=mr=gr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,wr(o,n,a);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":wr(o,n,a)}var b;if(Dn)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Un?zn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Ln&&"ko"!==n.locale&&(Un||"onCompositionStart"!==y?"onCompositionEnd"===y&&Un&&(b=rn()):(tn="value"in(en=a)?en.value:en.textContent,Un=!0)),0<(m=Dr(r,y)).length&&(y=new kn(y,e,null,n,a),o.push({event:y,listeners:m}),b?y.data=b:null!==(b=Nn(n))&&(y.data=b))),(b=Bn?function(e,t){switch(e){case"compositionend":return Nn(t);case"keypress":return 32!==t.which?null:(Hn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Hn?null:e;default:return null}}(e,n):function(e,t){if(Un)return"compositionend"===e||!Dn&&zn(e,t)?(e=rn(),nn=tn=en=null,Un=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&(0<(r=Dr(r,"onBeforeInput")).length&&(a=new kn("onBeforeInput","beforeinput",null,n,a),o.push({event:a,listeners:r}),a.data=b))}_r(o,t)}))}function Tr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Dr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=ze(e,n))&&r.unshift(Tr(e,i,a)),null!=(i=ze(e,t))&&r.push(Tr(e,i,a))),e=e.return}return r}function Rr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Br(e,t,n,r,a){for(var i=t._reactName,o=[];null!==n&&n!==r;){var s=n,c=s.alternate,u=s.stateNode;if(null!==c&&c===r)break;5===s.tag&&null!==u&&(s=u,a?null!=(c=ze(n,i))&&o.unshift(Tr(n,c,s)):a||null!=(c=ze(n,i))&&o.push(Tr(n,c,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Lr(){}var Fr=null,Hr=null;function zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Nr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Ur="function"===typeof setTimeout?setTimeout:void 0,Kr="function"===typeof clearTimeout?clearTimeout:void 0;function Vr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Wr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Xr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Yr=0;var Gr=Math.random().toString(36).slice(2),$r="__reactFiber$"+Gr,qr="__reactProps$"+Gr,Zr="__reactContainer$"+Gr,Jr="__reactEvents$"+Gr;function Qr(e){var t=e[$r];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Zr]||n[$r]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Xr(e);null!==e;){if(n=e[$r])return n;e=Xr(e)}return t}n=(e=n).parentNode}return null}function ea(e){return!(e=e[$r]||e[Zr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ta(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function na(e){return e[qr]||null}function ra(e){var t=e[Jr];return void 0===t&&(t=e[Jr]=new Set),t}var aa=[],ia=-1;function oa(e){return{current:e}}function sa(e){0>ia||(e.current=aa[ia],aa[ia]=null,ia--)}function ca(e,t){ia++,aa[ia]=e.current,e.current=t}var ua={},la=oa(ua),da=oa(!1),fa=ua;function pa(e,t){var n=e.type.contextTypes;if(!n)return ua;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ha(e){return null!==(e=e.childContextTypes)&&void 0!==e}function va(){sa(da),sa(la)}function ga(e,t,n){if(la.current!==ua)throw Error(o(168));ca(la,t),ca(da,n)}function ma(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(o(108,Y(t)||"Unknown",i));return a({},n,r)}function ba(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ua,fa=la.current,ca(la,e),ca(da,da.current),!0}function ya(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=ma(e,t,fa),r.__reactInternalMemoizedMergedChildContext=e,sa(da),sa(la),ca(la,e)):sa(da),ca(da,n)}var wa=null,Oa=null,ka=i.unstable_runWithPriority,Sa=i.unstable_scheduleCallback,xa=i.unstable_cancelCallback,ja=i.unstable_shouldYield,_a=i.unstable_requestPaint,Ca=i.unstable_now,Ea=i.unstable_getCurrentPriorityLevel,Ia=i.unstable_ImmediatePriority,Pa=i.unstable_UserBlockingPriority,Ma=i.unstable_NormalPriority,Aa=i.unstable_LowPriority,Ta=i.unstable_IdlePriority,Da={},Ra=void 0!==_a?_a:function(){},Ba=null,La=null,Fa=!1,Ha=Ca(),za=1e4>Ha?Ca:function(){return Ca()-Ha};function Na(){switch(Ea()){case Ia:return 99;case Pa:return 98;case Ma:return 97;case Aa:return 96;case Ta:return 95;default:throw Error(o(332))}}function Ua(e){switch(e){case 99:return Ia;case 98:return Pa;case 97:return Ma;case 96:return Aa;case 95:return Ta;default:throw Error(o(332))}}function Ka(e,t){return e=Ua(e),ka(e,t)}function Va(e,t,n){return e=Ua(e),Sa(e,t,n)}function Wa(){if(null!==La){var e=La;La=null,xa(e)}Xa()}function Xa(){if(!Fa&&null!==Ba){Fa=!0;var e=0;try{var t=Ba;Ka(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ba=null}catch(n){throw null!==Ba&&(Ba=Ba.slice(e+1)),Sa(Ia,Wa),n}finally{Fa=!1}}}var Ya=O.ReactCurrentBatchConfig;function Ga(e,t){if(e&&e.defaultProps){for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var $a=oa(null),qa=null,Za=null,Ja=null;function Qa(){Ja=Za=qa=null}function ei(e){var t=$a.current;sa($a),e.type._context._currentValue=t}function ti(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function ni(e,t){qa=e,Ja=Za=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Do=!0),e.firstContext=null)}function ri(e,t){if(Ja!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(Ja=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Za){if(null===qa)throw Error(o(308));Za=t,qa.dependencies={lanes:0,firstContext:t,responders:null}}else Za=Za.next=t;return e._currentValue}var ai=!1;function ii(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function oi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function si(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ci(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ui(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?a=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function li(e,t,n,r){var i=e.updateQueue;ai=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,c=i.shared.pending;if(null!==c){i.shared.pending=null;var u=c,l=u.next;u.next=null,null===s?o=l:s.next=l,s=u;var d=e.alternate;if(null!==d){var f=(d=d.updateQueue).lastBaseUpdate;f!==s&&(null===f?d.firstBaseUpdate=l:f.next=l,d.lastBaseUpdate=u)}}if(null!==o){for(f=i.baseState,s=0,d=l=u=null;;){c=o.lane;var p=o.eventTime;if((r&c)===c){null!==d&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var h=e,v=o;switch(c=t,p=n,v.tag){case 1:if("function"===typeof(h=v.payload)){f=h.call(p,f,c);break e}f=h;break e;case 3:h.flags=-4097&h.flags|64;case 0:if(null===(c="function"===typeof(h=v.payload)?h.call(p,f,c):h)||void 0===c)break e;f=a({},f,c);break e;case 2:ai=!0}}null!==o.callback&&(e.flags|=32,null===(c=i.effects)?i.effects=[o]:c.push(o))}else p={eventTime:p,lane:c,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(l=d=p,u=f):d=d.next=p,s|=c;if(null===(o=o.next)){if(null===(c=i.shared.pending))break;o=c.next,c.next=null,i.lastBaseUpdate=c,i.shared.pending=null}}null===d&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=d,Fs|=s,e.lanes=s,e.memoizedState=f}}function di(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(o(191,a));a.call(r)}}}var fi=(new r.Component).refs;function pi(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:a({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var hi={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=uc(),a=lc(e),i=si(r,a);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),ci(e,i),dc(e,a,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=uc(),a=lc(e),i=si(r,a);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),ci(e,i),dc(e,a,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=uc(),r=lc(e),a=si(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),ci(e,a),dc(e,r,n)}};function vi(e,t,n,r,a,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(a,i))}function gi(e,t,n){var r=!1,a=ua,i=t.contextType;return"object"===typeof i&&null!==i?i=ri(i):(a=ha(t)?fa:la.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?pa(e,a):ua),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=hi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function mi(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&hi.enqueueReplaceState(t,t.state,null)}function bi(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=fi,ii(e);var i=t.contextType;"object"===typeof i&&null!==i?a.context=ri(i):(i=ha(t)?fa:la.current,a.context=pa(e,i)),li(e,n,a,r),a.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(pi(e,t,i,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&hi.enqueueReplaceState(a,a.state,null),li(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4)}var yi=Array.isArray;function wi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:((t=function(e){var t=r.refs;t===fi&&(t=r.refs={}),null===e?delete t[a]:t[a]=e})._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Oi(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function ki(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Kc(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Yc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=a(t,n.props)).ref=wi(e,t,n),r.return=e,r):((r=Vc(n.type,n.key,n.props,null,e.mode,r)).ref=wi(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Gc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Wc(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Yc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case k:return(n=Vc(t.type,t.key,t.props,null,e.mode,n)).ref=wi(e,null,t),n.return=e,n;case S:return(t=Gc(t,e.mode,n)).return=e,t}if(yi(t)||U(t))return(t=Wc(t,e.mode,n,null)).return=e,t;Oi(e,t)}return null}function p(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==a?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case k:return n.key===a?n.type===x?d(e,t,n.props.children,r,a):u(e,t,n,r):null;case S:return n.key===a?l(e,t,n,r):null}if(yi(n)||U(n))return null!==a?null:d(e,t,n,r,null);Oi(e,n)}return null}function h(e,t,n,r,a){if("string"===typeof r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case k:return e=e.get(null===r.key?n:r.key)||null,r.type===x?d(t,e,r.props.children,a,r.key):u(t,e,r,a);case S:return l(t,e=e.get(null===r.key?n:r.key)||null,r,a)}if(yi(r)||U(r))return d(t,e=e.get(n)||null,r,a,null);Oi(t,r)}return null}function v(a,o,s,c){for(var u=null,l=null,d=o,v=o=0,g=null;null!==d&&v<s.length;v++){d.index>v?(g=d,d=null):g=d.sibling;var m=p(a,d,s[v],c);if(null===m){null===d&&(d=g);break}e&&d&&null===m.alternate&&t(a,d),o=i(m,o,v),null===l?u=m:l.sibling=m,l=m,d=g}if(v===s.length)return n(a,d),u;if(null===d){for(;v<s.length;v++)null!==(d=f(a,s[v],c))&&(o=i(d,o,v),null===l?u=d:l.sibling=d,l=d);return u}for(d=r(a,d);v<s.length;v++)null!==(g=h(d,a,v,s[v],c))&&(e&&null!==g.alternate&&d.delete(null===g.key?v:g.key),o=i(g,o,v),null===l?u=g:l.sibling=g,l=g);return e&&d.forEach((function(e){return t(a,e)})),u}function g(a,s,c,u){var l=U(c);if("function"!==typeof l)throw Error(o(150));if(null==(c=l.call(c)))throw Error(o(151));for(var d=l=null,v=s,g=s=0,m=null,b=c.next();null!==v&&!b.done;g++,b=c.next()){v.index>g?(m=v,v=null):m=v.sibling;var y=p(a,v,b.value,u);if(null===y){null===v&&(v=m);break}e&&v&&null===y.alternate&&t(a,v),s=i(y,s,g),null===d?l=y:d.sibling=y,d=y,v=m}if(b.done)return n(a,v),l;if(null===v){for(;!b.done;g++,b=c.next())null!==(b=f(a,b.value,u))&&(s=i(b,s,g),null===d?l=b:d.sibling=b,d=b);return l}for(v=r(a,v);!b.done;g++,b=c.next())null!==(b=h(v,a,g,b.value,u))&&(e&&null!==b.alternate&&v.delete(null===b.key?g:b.key),s=i(b,s,g),null===d?l=b:d.sibling=b,d=b);return e&&v.forEach((function(e){return t(a,e)})),l}return function(e,r,i,c){var u="object"===typeof i&&null!==i&&i.type===x&&null===i.key;u&&(i=i.props.children);var l="object"===typeof i&&null!==i;if(l)switch(i.$$typeof){case k:e:{for(l=i.key,u=r;null!==u;){if(u.key===l){switch(u.tag){case 7:if(i.type===x){n(e,u.sibling),(r=a(u,i.props.children)).return=e,e=r;break e}break;default:if(u.elementType===i.type){n(e,u.sibling),(r=a(u,i.props)).ref=wi(e,u,i),r.return=e,e=r;break e}}n(e,u);break}t(e,u),u=u.sibling}i.type===x?((r=Wc(i.props.children,e.mode,c,i.key)).return=e,e=r):((c=Vc(i.type,i.key,i.props,null,e.mode,c)).ref=wi(e,r,i),c.return=e,e=c)}return s(e);case S:e:{for(u=i.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===i.containerInfo&&r.stateNode.implementation===i.implementation){n(e,r.sibling),(r=a(r,i.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Gc(i,e.mode,c)).return=e,e=r}return s(e)}if("string"===typeof i||"number"===typeof i)return i=""+i,null!==r&&6===r.tag?(n(e,r.sibling),(r=a(r,i)).return=e,e=r):(n(e,r),(r=Yc(i,e.mode,c)).return=e,e=r),s(e);if(yi(i))return v(e,r,i,c);if(U(i))return g(e,r,i,c);if(l&&Oi(e,i),"undefined"===typeof i&&!u)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,Y(e.type)||"Component"))}return n(e,r)}}var Si=ki(!0),xi=ki(!1),ji={},_i=oa(ji),Ci=oa(ji),Ei=oa(ji);function Ii(e){if(e===ji)throw Error(o(174));return e}function Pi(e,t){switch(ca(Ei,t),ca(Ci,e),ca(_i,ji),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:he(null,"");break;default:t=he(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}sa(_i),ca(_i,t)}function Mi(){sa(_i),sa(Ci),sa(Ei)}function Ai(e){Ii(Ei.current);var t=Ii(_i.current),n=he(t,e.type);t!==n&&(ca(Ci,e),ca(_i,n))}function Ti(e){Ci.current===e&&(sa(_i),sa(Ci))}var Di=oa(0);function Ri(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Bi=null,Li=null,Fi=!1;function Hi(e,t){var n=Nc(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function zi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Ni(e){if(Fi){var t=Li;if(t){var n=t;if(!zi(e,t)){if(!(t=Wr(n.nextSibling))||!zi(e,t))return e.flags=-1025&e.flags|2,Fi=!1,void(Bi=e);Hi(Bi,n)}Bi=e,Li=Wr(t.firstChild)}else e.flags=-1025&e.flags|2,Fi=!1,Bi=e}}function Ui(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Bi=e}function Ki(e){if(e!==Bi)return!1;if(!Fi)return Ui(e),Fi=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Nr(t,e.memoizedProps))for(t=Li;t;)Hi(e,t),t=Wr(t.nextSibling);if(Ui(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Li=Wr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Li=null}}else Li=Bi?Wr(e.stateNode.nextSibling):null;return!0}function Vi(){Li=Bi=null,Fi=!1}var Wi=[];function Xi(){for(var e=0;e<Wi.length;e++)Wi[e]._workInProgressVersionPrimary=null;Wi.length=0}var Yi=O.ReactCurrentDispatcher,Gi=O.ReactCurrentBatchConfig,$i=0,qi=null,Zi=null,Ji=null,Qi=!1,eo=!1;function to(){throw Error(o(321))}function no(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ro(e,t,n,r,a,i){if($i=i,qi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Yi.current=null===e||null===e.memoizedState?Po:Mo,e=n(r,a),eo){i=0;do{if(eo=!1,!(25>i))throw Error(o(301));i+=1,Ji=Zi=null,t.updateQueue=null,Yi.current=Ao,e=n(r,a)}while(eo)}if(Yi.current=Io,t=null!==Zi&&null!==Zi.next,$i=0,Ji=Zi=qi=null,Qi=!1,t)throw Error(o(300));return e}function ao(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ji?qi.memoizedState=Ji=e:Ji=Ji.next=e,Ji}function io(){if(null===Zi){var e=qi.alternate;e=null!==e?e.memoizedState:null}else e=Zi.next;var t=null===Ji?qi.memoizedState:Ji.next;if(null!==t)Ji=t,Zi=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Zi=e).memoizedState,baseState:Zi.baseState,baseQueue:Zi.baseQueue,queue:Zi.queue,next:null},null===Ji?qi.memoizedState=Ji=e:Ji=Ji.next=e}return Ji}function oo(e,t){return"function"===typeof t?t(e):t}function so(e){var t=io(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Zi,a=r.baseQueue,i=n.pending;if(null!==i){if(null!==a){var s=a.next;a.next=i.next,i.next=s}r.baseQueue=a=i,n.pending=null}if(null!==a){a=a.next,r=r.baseState;var c=s=i=null,u=a;do{var l=u.lane;if(($i&l)===l)null!==c&&(c=c.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),r=u.eagerReducer===e?u.eagerState:e(r,u.action);else{var d={lane:l,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===c?(s=c=d,i=r):c=c.next=d,qi.lanes|=l,Fs|=l}u=u.next}while(null!==u&&u!==a);null===c?i=r:c.next=s,sr(r,t.memoizedState)||(Do=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=c,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function co(e){var t=io(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{i=e(i,s.action),s=s.next}while(s!==a);sr(i,t.memoizedState)||(Do=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function uo(e,t,n){var r=t._getVersion;r=r(t._source);var a=t._workInProgressVersionPrimary;if(null!==a?e=a===r:(e=e.mutableReadLanes,(e=($i&e)===e)&&(t._workInProgressVersionPrimary=r,Wi.push(t))),e)return n(t._source);throw Wi.push(t),Error(o(350))}function lo(e,t,n,r){var a=Ps;if(null===a)throw Error(o(349));var i=t._getVersion,s=i(t._source),c=Yi.current,u=c.useState((function(){return uo(a,t,n)})),l=u[1],d=u[0];u=Ji;var f=e.memoizedState,p=f.refs,h=p.getSnapshot,v=f.source;f=f.subscribe;var g=qi;return e.memoizedState={refs:p,source:t,subscribe:r},c.useEffect((function(){p.getSnapshot=n,p.setSnapshot=l;var e=i(t._source);if(!sr(s,e)){e=n(t._source),sr(d,e)||(l(e),e=lc(g),a.mutableReadLanes|=e&a.pendingLanes),e=a.mutableReadLanes,a.entangledLanes|=e;for(var r=a.entanglements,o=e;0<o;){var c=31-Vt(o),u=1<<c;r[c]|=e,o&=~u}}}),[n,t,r]),c.useEffect((function(){return r(t._source,(function(){var e=p.getSnapshot,n=p.setSnapshot;try{n(e(t._source));var r=lc(g);a.mutableReadLanes|=r&a.pendingLanes}catch(i){n((function(){throw i}))}}))}),[t,r]),sr(h,n)&&sr(v,t)&&sr(f,r)||((e={pending:null,dispatch:null,lastRenderedReducer:oo,lastRenderedState:d}).dispatch=l=Eo.bind(null,qi,e),u.queue=e,u.baseQueue=null,d=uo(a,t,n),u.memoizedState=u.baseState=d),d}function fo(e,t,n){return lo(io(),e,t,n)}function po(e){var t=ao();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:oo,lastRenderedState:e}).dispatch=Eo.bind(null,qi,e),[t.memoizedState,e]}function ho(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=qi.updateQueue)?(t={lastEffect:null},qi.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function vo(e){return e={current:e},ao().memoizedState=e}function go(){return io().memoizedState}function mo(e,t,n,r){var a=ao();qi.flags|=e,a.memoizedState=ho(1|t,n,void 0,void 0===r?null:r)}function bo(e,t,n,r){var a=io();r=void 0===r?null:r;var i=void 0;if(null!==Zi){var o=Zi.memoizedState;if(i=o.destroy,null!==r&&no(r,o.deps))return void ho(t,n,i,r)}qi.flags|=e,a.memoizedState=ho(1|t,n,i,r)}function yo(e,t){return mo(516,4,e,t)}function wo(e,t){return bo(516,4,e,t)}function Oo(e,t){return bo(4,2,e,t)}function ko(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function So(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,ko.bind(null,t,e),n)}function xo(){}function jo(e,t){var n=io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&no(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function _o(e,t){var n=io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&no(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Co(e,t){var n=Na();Ka(98>n?98:n,(function(){e(!0)})),Ka(97<n?97:n,(function(){var n=Gi.transition;Gi.transition=1;try{e(!1),t()}finally{Gi.transition=n}}))}function Eo(e,t,n){var r=uc(),a=lc(e),i={lane:a,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),t.pending=i,o=e.alternate,e===qi||null!==o&&o===qi)eo=Qi=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,c=o(s,n);if(i.eagerReducer=o,i.eagerState=c,sr(c,s))return}catch(u){}dc(e,a,r)}}var Io={readContext:ri,useCallback:to,useContext:to,useEffect:to,useImperativeHandle:to,useLayoutEffect:to,useMemo:to,useReducer:to,useRef:to,useState:to,useDebugValue:to,useDeferredValue:to,useTransition:to,useMutableSource:to,useOpaqueIdentifier:to,unstable_isNewReconciler:!1},Po={readContext:ri,useCallback:function(e,t){return ao().memoizedState=[e,void 0===t?null:t],e},useContext:ri,useEffect:yo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,mo(4,2,ko.bind(null,t,e),n)},useLayoutEffect:function(e,t){return mo(4,2,e,t)},useMemo:function(e,t){var n=ao();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ao();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Eo.bind(null,qi,e),[r.memoizedState,e]},useRef:vo,useState:po,useDebugValue:xo,useDeferredValue:function(e){var t=po(e),n=t[0],r=t[1];return yo((function(){var t=Gi.transition;Gi.transition=1;try{r(e)}finally{Gi.transition=t}}),[e]),n},useTransition:function(){var e=po(!1),t=e[0];return vo(e=Co.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=ao();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},lo(r,e,t,n)},useOpaqueIdentifier:function(){if(Fi){var e=!1,t=function(e){return{$$typeof:R,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Yr++).toString(36))),Error(o(355))})),n=po(t)[1];return 0===(2&qi.mode)&&(qi.flags|=516,ho(5,(function(){n("r:"+(Yr++).toString(36))}),void 0,null)),t}return po(t="r:"+(Yr++).toString(36)),t},unstable_isNewReconciler:!1},Mo={readContext:ri,useCallback:jo,useContext:ri,useEffect:wo,useImperativeHandle:So,useLayoutEffect:Oo,useMemo:_o,useReducer:so,useRef:go,useState:function(){return so(oo)},useDebugValue:xo,useDeferredValue:function(e){var t=so(oo),n=t[0],r=t[1];return wo((function(){var t=Gi.transition;Gi.transition=1;try{r(e)}finally{Gi.transition=t}}),[e]),n},useTransition:function(){var e=so(oo)[0];return[go().current,e]},useMutableSource:fo,useOpaqueIdentifier:function(){return so(oo)[0]},unstable_isNewReconciler:!1},Ao={readContext:ri,useCallback:jo,useContext:ri,useEffect:wo,useImperativeHandle:So,useLayoutEffect:Oo,useMemo:_o,useReducer:co,useRef:go,useState:function(){return co(oo)},useDebugValue:xo,useDeferredValue:function(e){var t=co(oo),n=t[0],r=t[1];return wo((function(){var t=Gi.transition;Gi.transition=1;try{r(e)}finally{Gi.transition=t}}),[e]),n},useTransition:function(){var e=co(oo)[0];return[go().current,e]},useMutableSource:fo,useOpaqueIdentifier:function(){return co(oo)[0]},unstable_isNewReconciler:!1},To=O.ReactCurrentOwner,Do=!1;function Ro(e,t,n,r){t.child=null===e?xi(t,null,n,r):Si(t,e.child,n,r)}function Bo(e,t,n,r,a){n=n.render;var i=t.ref;return ni(t,a),r=ro(e,t,n,r,i,a),null===e||Do?(t.flags|=1,Ro(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,ns(e,t,a))}function Lo(e,t,n,r,a,i){if(null===e){var o=n.type;return"function"!==typeof o||Uc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Vc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Fo(e,t,o,r,a,i))}return o=e.child,0===(a&i)&&(a=o.memoizedProps,(n=null!==(n=n.compare)?n:ur)(a,r)&&e.ref===t.ref)?ns(e,t,i):(t.flags|=1,(e=Kc(o,r)).ref=t.ref,e.return=t,t.child=e)}function Fo(e,t,n,r,a,i){if(null!==e&&ur(e.memoizedProps,r)&&e.ref===t.ref){if(Do=!1,0===(i&a))return t.lanes=e.lanes,ns(e,t,i);0!==(16384&e.flags)&&(Do=!0)}return No(e,t,n,r,i)}function Ho(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},yc(t,n);else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},yc(t,e),null;t.memoizedState={baseLanes:0},yc(t,null!==i?i.baseLanes:n)}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,yc(t,r);return Ro(e,t,a,n),t.child}function zo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function No(e,t,n,r,a){var i=ha(n)?fa:la.current;return i=pa(t,i),ni(t,a),n=ro(e,t,n,r,i,a),null===e||Do?(t.flags|=1,Ro(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,ns(e,t,a))}function Uo(e,t,n,r,a){if(ha(n)){var i=!0;ba(t)}else i=!1;if(ni(t,a),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),gi(t,n,r),bi(t,n,r,a),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var c=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=ri(u):u=pa(t,u=ha(n)?fa:la.current);var l=n.getDerivedStateFromProps,d="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||c!==u)&&mi(t,o,r,u),ai=!1;var f=t.memoizedState;o.state=f,li(t,r,o,a),c=t.memoizedState,s!==r||f!==c||da.current||ai?("function"===typeof l&&(pi(t,n,l,r),c=t.memoizedState),(s=ai||vi(t,n,s,r,f,c,u))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,oi(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:Ga(t.type,s),o.props=u,d=t.pendingProps,f=o.context,"object"===typeof(c=n.contextType)&&null!==c?c=ri(c):c=pa(t,c=ha(n)?fa:la.current);var p=n.getDerivedStateFromProps;(l="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==d||f!==c)&&mi(t,o,r,c),ai=!1,f=t.memoizedState,o.state=f,li(t,r,o,a);var h=t.memoizedState;s!==d||f!==h||da.current||ai?("function"===typeof p&&(pi(t,n,p,r),h=t.memoizedState),(u=ai||vi(t,n,u,r,f,h,c))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,h,c),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,h,c)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=h),o.props=r,o.state=h,o.context=c,r=u):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),r=!1)}return Ko(e,t,n,r,i,a)}function Ko(e,t,n,r,a,i){zo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return a&&ya(t,n,!1),ns(e,t,i);r=t.stateNode,To.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Si(t,e.child,null,i),t.child=Si(t,null,s,i)):Ro(e,t,s,i),t.memoizedState=r.state,a&&ya(t,n,!0),t.child}function Vo(e){var t=e.stateNode;t.pendingContext?ga(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ga(0,t.context,!1),Pi(e,t.containerInfo)}var Wo,Xo,Yo,Go={dehydrated:null,retryLane:0};function $o(e,t,n){var r,a=t.pendingProps,i=Di.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(i|=1),ca(Di,1&i),null===e?(void 0!==a.fallback&&Ni(t),e=a.children,i=a.fallback,o?(e=qo(t,e,i,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Go,e):"number"===typeof a.unstable_expectedLoadTime?(e=qo(t,e,i,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Go,t.lanes=33554432,e):((n=Xc({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(a=Jo(e,t,a.children,a.fallback,n),o=t.child,i=e.child.memoizedState,o.memoizedState=null===i?{baseLanes:n}:{baseLanes:i.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Go,a):(n=Zo(e,t,a.children,n),t.memoizedState=null,n))}function qo(e,t,n,r){var a=e.mode,i=e.child;return t={mode:"hidden",children:t},0===(2&a)&&null!==i?(i.childLanes=0,i.pendingProps=t):i=Xc(t,a,0,null),n=Wc(n,a,r,null),i.return=e,n.return=e,i.sibling=n,e.child=i,n}function Zo(e,t,n,r){var a=e.child;return e=a.sibling,n=Kc(a,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function Jo(e,t,n,r,a){var i=t.mode,o=e.child;e=o.sibling;var s={mode:"hidden",children:n};return 0===(2&i)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=s,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Kc(o,s),null!==e?r=Kc(e,r):(r=Wc(r,i,a,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Qo(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ti(e.return,t)}function es(e,t,n,r,a,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a,lastEffect:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a,o.lastEffect=i)}function ts(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(Ro(e,t,r.children,n),0!==(2&(r=Di.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Qo(e,n);else if(19===e.tag)Qo(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ca(Di,r),0===(2&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===Ri(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),es(t,!1,a,n,i,t.lastEffect);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===Ri(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}es(t,!0,n,null,i,t.lastEffect);break;case"together":es(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ns(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Kc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Kc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function rs(e,t){if(!Fi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function as(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return ha(t.type)&&va(),null;case 3:return Mi(),sa(da),sa(la),Xi(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ki(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ti(t);var i=Ii(Ei.current);if(n=t.type,null!==e&&null!=t.stateNode)Xo(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Ii(_i.current),Ki(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[$r]=t,r[qr]=s,n){case"dialog":Cr("cancel",r),Cr("close",r);break;case"iframe":case"object":case"embed":Cr("load",r);break;case"video":case"audio":for(e=0;e<Sr.length;e++)Cr(Sr[e],r);break;case"source":Cr("error",r);break;case"img":case"image":case"link":Cr("error",r),Cr("load",r);break;case"details":Cr("toggle",r);break;case"input":ee(r,s),Cr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Cr("invalid",r);break;case"textarea":ce(r,s),Cr("invalid",r)}for(var u in xe(n,s),e=null,s)s.hasOwnProperty(u)&&(i=s[u],"children"===u?"string"===typeof i?r.textContent!==i&&(e=["children",i]):"number"===typeof i&&r.textContent!==""+i&&(e=["children",""+i]):c.hasOwnProperty(u)&&null!=i&&"onScroll"===u&&Cr("scroll",r));switch(n){case"input":q(r),re(r,s,!0);break;case"textarea":q(r),le(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Lr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(u=9===i.nodeType?i:i.ownerDocument,e===de&&(e=pe(n)),e===de?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[$r]=t,e[qr]=r,Wo(e,t),t.stateNode=e,u=je(n,r),n){case"dialog":Cr("cancel",e),Cr("close",e),i=r;break;case"iframe":case"object":case"embed":Cr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Sr.length;i++)Cr(Sr[i],e);i=r;break;case"source":Cr("error",e),i=r;break;case"img":case"image":case"link":Cr("error",e),Cr("load",e),i=r;break;case"details":Cr("toggle",e),i=r;break;case"input":ee(e,r),i=Q(e,r),Cr("invalid",e);break;case"option":i=ie(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=a({},r,{value:void 0}),Cr("invalid",e);break;case"textarea":ce(e,r),i=se(e,r),Cr("invalid",e);break;default:i=r}xe(n,i);var l=i;for(s in l)if(l.hasOwnProperty(s)){var d=l[s];"style"===s?ke(e,d):"dangerouslySetInnerHTML"===s?null!=(d=d?d.__html:void 0)&&me(e,d):"children"===s?"string"===typeof d?("textarea"!==n||""!==d)&&be(e,d):"number"===typeof d&&be(e,""+d):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(c.hasOwnProperty(s)?null!=d&&"onScroll"===s&&Cr("scroll",e):null!=d&&w(e,s,d,u))}switch(n){case"input":q(e),re(e,r,!1);break;case"textarea":q(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?oe(e,!!r.multiple,s,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Lr)}zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Yo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Ii(Ei.current),Ii(_i.current),Ki(t)?(r=t.stateNode,n=t.memoizedProps,r[$r]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[$r]=t,t.stateNode=r)}return null;case 13:return sa(Di),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ki(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Di.current)?0===Rs&&(Rs=3):(0!==Rs&&3!==Rs||(Rs=4),null===Ps||0===(134217727&Fs)&&0===(134217727&Hs)||vc(Ps,As))),(r||n)&&(t.flags|=4),null);case 4:return Mi(),null===e&&Ir(t.stateNode.containerInfo),null;case 10:return ei(t),null;case 17:return ha(t.type)&&va(),null;case 19:if(sa(Di),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(u=r.rendering))if(s)rs(r,!1);else{if(0!==Rs||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(u=Ri(e))){for(t.flags|=64,rs(r,!1),null!==(s=u.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(u=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,e=u.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ca(Di,1&Di.current|2),t.child}e=e.sibling}null!==r.tail&&za()>Ks&&(t.flags|=64,s=!0,rs(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=Ri(u))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),rs(r,!0),null===r.tail&&"hidden"===r.tailMode&&!u.alternate&&!Fi)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*za()-r.renderingStartTime>Ks&&1073741824!==n&&(t.flags|=64,s=!0,rs(r,!1),t.lanes=33554432);r.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=r.last)?n.sibling=u:t.child=u,r.last=u)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=za(),n.sibling=null,t=Di.current,ca(Di,s?1&t|2:1&t),n):null;case 23:case 24:return wc(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function is(e){switch(e.tag){case 1:ha(e.type)&&va();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Mi(),sa(da),sa(la),Xi(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ti(e),null;case 13:return sa(Di),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return sa(Di),null;case 4:return Mi(),null;case 10:return ei(e),null;case 23:case 24:return wc(),null;default:return null}}function os(e,t){try{var n="",r=t;do{n+=X(r),r=r.return}while(r);var a=n}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a}}function ss(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Wo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Xo=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ii(_i.current);var o,s=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),s=[];break;case"option":i=ie(e,i),r=ie(e,r),s=[];break;case"select":i=a({},i,{value:void 0}),r=a({},r,{value:void 0}),s=[];break;case"textarea":i=se(e,i),r=se(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Lr)}for(d in xe(n,r),n=null,i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&null!=i[d])if("style"===d){var u=i[d];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(c.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var l=r[d];if(u=null!=i?i[d]:void 0,r.hasOwnProperty(d)&&l!==u&&(null!=l||null!=u))if("style"===d)if(u){for(o in u)!u.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&u[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(d,n)),n=l;else"dangerouslySetInnerHTML"===d?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(s=s||[]).push(d,l)):"children"===d?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(d,""+l):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(c.hasOwnProperty(d)?(null!=l&&"onScroll"===d&&Cr("scroll",e),s||u===l||(s=[])):"object"===typeof l&&null!==l&&l.$$typeof===R?l.toString():(s=s||[]).push(d,l))}n&&(s=s||[]).push("style",n);var d=s;(t.updateQueue=d)&&(t.flags|=4)}},Yo=function(e,t,n,r){n!==r&&(t.flags|=4)};var cs="function"===typeof WeakMap?WeakMap:Map;function us(e,t,n){(n=si(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ys||(Ys=!0,Gs=r),ss(0,t)},n}function ls(e,t,n){(n=si(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return ss(0,t),r(a)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===$s?$s=new Set([this]):$s.add(this),ss(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ds="function"===typeof WeakSet?WeakSet:Set;function fs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Lc(e,n)}else t.current=null}function ps(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Ga(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Vr(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(o(163))}function hs(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var a=e;r=a.next,0!==(4&(a=a.tag))&&0!==(1&a)&&(Dc(n,e),Tc(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Ga(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&di(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}di(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&kt(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(o(163))}function vs(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var a=n.memoizedProps.style;a=void 0!==a&&null!==a&&a.hasOwnProperty("display")?a.display:null,r.style.display=Oe("display",a)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function gs(e,t){if(Oa&&"function"===typeof Oa.onCommitFiberUnmount)try{Oa.onCommitFiberUnmount(wa,t)}catch(i){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,a=r.destroy;if(r=r.tag,void 0!==a)if(0!==(4&r))Dc(t,n);else{r=t;try{a()}catch(i){Lc(r,i)}}n=n.next}while(n!==e)}break;case 1:if(fs(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(i){Lc(t,i)}break;case 5:fs(t);break;case 4:ks(e,t)}}function ms(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function bs(e){return 5===e.tag||3===e.tag||4===e.tag}function ys(e){e:{for(var t=e.return;null!==t;){if(bs(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(be(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||bs(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?ws(e,n,t):Os(e,n,t)}function ws(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Lr));else if(4!==r&&null!==(e=e.child))for(ws(e,t,n),e=e.sibling;null!==e;)ws(e,t,n),e=e.sibling}function Os(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Os(e,t,n),e=e.sibling;null!==e;)Os(e,t,n),e=e.sibling}function ks(e,t){for(var n,r,a=t,i=!1;;){if(!i){i=a.return;e:for(;;){if(null===i)throw Error(o(160));switch(n=i.stateNode,i.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}i=i.return}i=!0}if(5===a.tag||6===a.tag){e:for(var s=e,c=a,u=c;;)if(gs(s,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===c)break e;for(;null===u.sibling;){if(null===u.return||u.return===c)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}r?(s=n,c=a.stateNode,8===s.nodeType?s.parentNode.removeChild(c):s.removeChild(c)):n.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){n=a.stateNode.containerInfo,r=!0,a.child.return=a,a=a.child;continue}}else if(gs(e,a),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(i=!1)}a.sibling.return=a.return,a=a.sibling}}function Ss(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var a=null!==e?e.memoizedProps:r;e=t.type;var i=t.updateQueue;if(t.updateQueue=null,null!==i){for(n[qr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),je(e,a),t=je(e,r),a=0;a<i.length;a+=2){var s=i[a],c=i[a+1];"style"===s?ke(n,c):"dangerouslySetInnerHTML"===s?me(n,c):"children"===s?be(n,c):w(n,s,c,t)}switch(e){case"input":ne(n,r);break;case"textarea":ue(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(i=r.value)?oe(n,!!r.multiple,i,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,kt(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(Us=za(),vs(t.child,!0)),void xs(t);case 19:return void xs(t);case 17:return;case 23:case 24:return void vs(t,null!==t.memoizedState)}throw Error(o(163))}function xs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ds),t.forEach((function(t){var r=Hc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function js(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var _s=Math.ceil,Cs=O.ReactCurrentDispatcher,Es=O.ReactCurrentOwner,Is=0,Ps=null,Ms=null,As=0,Ts=0,Ds=oa(0),Rs=0,Bs=null,Ls=0,Fs=0,Hs=0,zs=0,Ns=null,Us=0,Ks=1/0;function Vs(){Ks=za()+500}var Ws,Xs=null,Ys=!1,Gs=null,$s=null,qs=!1,Zs=null,Js=90,Qs=[],ec=[],tc=null,nc=0,rc=null,ac=-1,ic=0,oc=0,sc=null,cc=!1;function uc(){return 0!==(48&Is)?za():-1!==ac?ac:ac=za()}function lc(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Na()?1:2;if(0===ic&&(ic=Ls),0!==Ya.transition){0!==oc&&(oc=null!==Ns?Ns.pendingLanes:0),e=ic;var t=4186112&~oc;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Na(),0!==(4&Is)&&98===e?e=zt(12,ic):e=zt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ic),e}function dc(e,t,n){if(50<nc)throw nc=0,rc=null,Error(o(185));if(null===(e=fc(e,t)))return null;Kt(e,t,n),e===Ps&&(Hs|=t,4===Rs&&vc(e,As));var r=Na();1===t?0!==(8&Is)&&0===(48&Is)?gc(e):(pc(e,n),0===Is&&(Vs(),Wa())):(0===(4&Is)||98!==r&&99!==r||(null===tc?tc=new Set([e]):tc.add(e)),pc(e,n)),Ns=e}function fc(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function pc(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,a=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var c=31-Vt(s),u=1<<c,l=i[c];if(-1===l){if(0===(u&r)||0!==(u&a)){l=t,Lt(u);var d=Bt;i[c]=10<=d?l+250:6<=d?l+5e3:-1}}else l<=t&&(e.expiredLanes|=u);s&=~u}if(r=Ft(e,e===Ps?As:0),t=Bt,0===r)null!==n&&(n!==Da&&xa(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Da&&xa(n)}15===t?(n=gc.bind(null,e),null===Ba?(Ba=[n],La=Sa(Ia,Xa)):Ba.push(n),n=Da):14===t?n=Va(99,gc.bind(null,e)):n=Va(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),hc.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function hc(e){if(ac=-1,oc=ic=0,0!==(48&Is))throw Error(o(327));var t=e.callbackNode;if(Ac()&&e.callbackNode!==t)return null;var n=Ft(e,e===Ps?As:0);if(0===n)return null;var r=n,a=Is;Is|=16;var i=Sc();for(Ps===e&&As===r||(Vs(),Oc(e,r));;)try{_c();break}catch(c){kc(e,c)}if(Qa(),Cs.current=i,Is=a,null!==Ms?r=0:(Ps=null,As=0,r=Rs),0!==(Ls&Hs))Oc(e,0);else if(0!==r){if(2===r&&(Is|=64,e.hydrate&&(e.hydrate=!1,Vr(e.containerInfo)),0!==(n=Ht(e))&&(r=xc(e,n))),1===r)throw t=Bs,Oc(e,0),vc(e,n),pc(e,za()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:Ic(e);break;case 3:if(vc(e,n),(62914560&n)===n&&10<(r=Us+500-za())){if(0!==Ft(e,0))break;if(((a=e.suspendedLanes)&n)!==n){uc(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Ur(Ic.bind(null,e),r);break}Ic(e);break;case 4:if(vc(e,n),(4186112&n)===n)break;for(r=e.eventTimes,a=-1;0<n;){var s=31-Vt(n);i=1<<s,(s=r[s])>a&&(a=s),n&=~i}if(n=a,10<(n=(120>(n=za()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*_s(n/1960))-n)){e.timeoutHandle=Ur(Ic.bind(null,e),n);break}Ic(e);break;case 5:Ic(e);break;default:throw Error(o(329))}}return pc(e,za()),e.callbackNode===t?hc.bind(null,e):null}function vc(e,t){for(t&=~zs,t&=~Hs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Vt(t),r=1<<n;e[n]=-1,t&=~r}}function gc(e){if(0!==(48&Is))throw Error(o(327));if(Ac(),e===Ps&&0!==(e.expiredLanes&As)){var t=As,n=xc(e,t);0!==(Ls&Hs)&&(n=xc(e,t=Ft(e,t)))}else n=xc(e,t=Ft(e,0));if(0!==e.tag&&2===n&&(Is|=64,e.hydrate&&(e.hydrate=!1,Vr(e.containerInfo)),0!==(t=Ht(e))&&(n=xc(e,t))),1===n)throw n=Bs,Oc(e,0),vc(e,t),pc(e,za()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ic(e),pc(e,za()),null}function mc(e,t){var n=Is;Is|=1;try{return e(t)}finally{0===(Is=n)&&(Vs(),Wa())}}function bc(e,t){var n=Is;Is&=-2,Is|=8;try{return e(t)}finally{0===(Is=n)&&(Vs(),Wa())}}function yc(e,t){ca(Ds,Ts),Ts|=t,Ls|=t}function wc(){Ts=Ds.current,sa(Ds)}function Oc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Kr(n)),null!==Ms)for(n=Ms.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&va();break;case 3:Mi(),sa(da),sa(la),Xi();break;case 5:Ti(r);break;case 4:Mi();break;case 13:case 19:sa(Di);break;case 10:ei(r);break;case 23:case 24:wc()}n=n.return}Ps=e,Ms=Kc(e.current,null),As=Ts=Ls=t,Rs=0,Bs=null,zs=Hs=Fs=0}function kc(e,t){for(;;){var n=Ms;try{if(Qa(),Yi.current=Io,Qi){for(var r=qi.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}Qi=!1}if($i=0,Ji=Zi=qi=null,eo=!1,Es.current=null,null===n||null===n.return){Rs=1,Bs=t,Ms=null;break}e:{var i=e,o=n.return,s=n,c=t;if(t=As,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c;if(0===(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var d=0!==(1&Di.current),f=o;do{var p;if(p=13===f.tag){var h=f.memoizedState;if(null!==h)p=null!==h.dehydrated;else{var v=f.memoizedProps;p=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!d)}}if(p){var g=f.updateQueue;if(null===g){var m=new Set;m.add(u),f.updateQueue=m}else g.add(u);if(0===(2&f.mode)){if(f.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var b=si(-1,1);b.tag=2,ci(s,b)}s.lanes|=1;break e}c=void 0,s=t;var y=i.pingCache;if(null===y?(y=i.pingCache=new cs,c=new Set,y.set(u,c)):void 0===(c=y.get(u))&&(c=new Set,y.set(u,c)),!c.has(s)){c.add(s);var w=Fc.bind(null,i,u,s);u.then(w,w)}f.flags|=4096,f.lanes=t;break e}f=f.return}while(null!==f);c=Error((Y(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Rs&&(Rs=2),c=os(c,s),f=o;do{switch(f.tag){case 3:i=c,f.flags|=4096,t&=-t,f.lanes|=t,ui(f,us(0,i,t));break e;case 1:i=c;var O=f.type,k=f.stateNode;if(0===(64&f.flags)&&("function"===typeof O.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===$s||!$s.has(k)))){f.flags|=4096,t&=-t,f.lanes|=t,ui(f,ls(f,i,t));break e}}f=f.return}while(null!==f)}Ec(n)}catch(S){t=S,Ms===n&&null!==n&&(Ms=n=n.return);continue}break}}function Sc(){var e=Cs.current;return Cs.current=Io,null===e?Io:e}function xc(e,t){var n=Is;Is|=16;var r=Sc();for(Ps===e&&As===t||Oc(e,t);;)try{jc();break}catch(a){kc(e,a)}if(Qa(),Is=n,Cs.current=r,null!==Ms)throw Error(o(261));return Ps=null,As=0,Rs}function jc(){for(;null!==Ms;)Cc(Ms)}function _c(){for(;null!==Ms&&!ja();)Cc(Ms)}function Cc(e){var t=Ws(e.alternate,e,Ts);e.memoizedProps=e.pendingProps,null===t?Ec(e):Ms=t,Es.current=null}function Ec(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=as(n,t,Ts)))return void(Ms=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Ts)||0===(4&n.mode)){for(var r=0,a=n.child;null!==a;)r|=a.lanes|a.childLanes,a=a.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=is(t)))return n.flags&=2047,void(Ms=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ms=t);Ms=t=e}while(null!==t);0===Rs&&(Rs=5)}function Ic(e){var t=Na();return Ka(99,Pc.bind(null,e,t)),null}function Pc(e,t){do{Ac()}while(null!==Zs);if(0!==(48&Is))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,a=r,i=e.pendingLanes&~a;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=a,e.mutableReadLanes&=a,e.entangledLanes&=a,a=e.entanglements;for(var s=e.eventTimes,c=e.expirationTimes;0<i;){var u=31-Vt(i),l=1<<u;a[u]=0,s[u]=-1,c[u]=-1,i&=~l}if(null!==tc&&0===(24&r)&&tc.has(e)&&tc.delete(e),e===Ps&&(Ms=Ps=null,As=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(a=Is,Is|=32,Es.current=null,Fr=$t,hr(s=pr())){if("selectionStart"in s)c={start:s.selectionStart,end:s.selectionEnd};else e:if(c=(c=s.ownerDocument)&&c.defaultView||window,(l=c.getSelection&&c.getSelection())&&0!==l.rangeCount){c=l.anchorNode,i=l.anchorOffset,u=l.focusNode,l=l.focusOffset;try{c.nodeType,u.nodeType}catch(_){c=null;break e}var d=0,f=-1,p=-1,h=0,v=0,g=s,m=null;t:for(;;){for(var b;g!==c||0!==i&&3!==g.nodeType||(f=d+i),g!==u||0!==l&&3!==g.nodeType||(p=d+l),3===g.nodeType&&(d+=g.nodeValue.length),null!==(b=g.firstChild);)m=g,g=b;for(;;){if(g===s)break t;if(m===c&&++h===i&&(f=d),m===u&&++v===l&&(p=d),null!==(b=g.nextSibling))break;m=(g=m).parentNode}g=b}c=-1===f||-1===p?null:{start:f,end:p}}else c=null;c=c||{start:0,end:0}}else c=null;Hr={focusedElem:s,selectionRange:c},$t=!1,sc=null,cc=!1,Xs=r;do{try{Mc()}catch(_){if(null===Xs)throw Error(o(330));Lc(Xs,_),Xs=Xs.nextEffect}}while(null!==Xs);sc=null,Xs=r;do{try{for(s=e;null!==Xs;){var y=Xs.flags;if(16&y&&be(Xs.stateNode,""),128&y){var w=Xs.alternate;if(null!==w){var O=w.ref;null!==O&&("function"===typeof O?O(null):O.current=null)}}switch(1038&y){case 2:ys(Xs),Xs.flags&=-3;break;case 6:ys(Xs),Xs.flags&=-3,Ss(Xs.alternate,Xs);break;case 1024:Xs.flags&=-1025;break;case 1028:Xs.flags&=-1025,Ss(Xs.alternate,Xs);break;case 4:Ss(Xs.alternate,Xs);break;case 8:ks(s,c=Xs);var k=c.alternate;ms(c),null!==k&&ms(k)}Xs=Xs.nextEffect}}catch(_){if(null===Xs)throw Error(o(330));Lc(Xs,_),Xs=Xs.nextEffect}}while(null!==Xs);if(O=Hr,w=pr(),y=O.focusedElem,s=O.selectionRange,w!==y&&y&&y.ownerDocument&&fr(y.ownerDocument.documentElement,y)){null!==s&&hr(y)&&(w=s.start,void 0===(O=s.end)&&(O=w),"selectionStart"in y?(y.selectionStart=w,y.selectionEnd=Math.min(O,y.value.length)):(O=(w=y.ownerDocument||document)&&w.defaultView||window).getSelection&&(O=O.getSelection(),c=y.textContent.length,k=Math.min(s.start,c),s=void 0===s.end?k:Math.min(s.end,c),!O.extend&&k>s&&(c=s,s=k,k=c),c=dr(y,k),i=dr(y,s),c&&i&&(1!==O.rangeCount||O.anchorNode!==c.node||O.anchorOffset!==c.offset||O.focusNode!==i.node||O.focusOffset!==i.offset)&&((w=w.createRange()).setStart(c.node,c.offset),O.removeAllRanges(),k>s?(O.addRange(w),O.extend(i.node,i.offset)):(w.setEnd(i.node,i.offset),O.addRange(w))))),w=[];for(O=y;O=O.parentNode;)1===O.nodeType&&w.push({element:O,left:O.scrollLeft,top:O.scrollTop});for("function"===typeof y.focus&&y.focus(),y=0;y<w.length;y++)(O=w[y]).element.scrollLeft=O.left,O.element.scrollTop=O.top}$t=!!Fr,Hr=Fr=null,e.current=n,Xs=r;do{try{for(y=e;null!==Xs;){var S=Xs.flags;if(36&S&&hs(y,Xs.alternate,Xs),128&S){w=void 0;var x=Xs.ref;if(null!==x){var j=Xs.stateNode;switch(Xs.tag){case 5:w=j;break;default:w=j}"function"===typeof x?x(w):x.current=w}}Xs=Xs.nextEffect}}catch(_){if(null===Xs)throw Error(o(330));Lc(Xs,_),Xs=Xs.nextEffect}}while(null!==Xs);Xs=null,Ra(),Is=a}else e.current=n;if(qs)qs=!1,Zs=e,Js=t;else for(Xs=r;null!==Xs;)t=Xs.nextEffect,Xs.nextEffect=null,8&Xs.flags&&((S=Xs).sibling=null,S.stateNode=null),Xs=t;if(0===(r=e.pendingLanes)&&($s=null),1===r?e===rc?nc++:(nc=0,rc=e):nc=0,n=n.stateNode,Oa&&"function"===typeof Oa.onCommitFiberRoot)try{Oa.onCommitFiberRoot(wa,n,void 0,64===(64&n.current.flags))}catch(_){}if(pc(e,za()),Ys)throw Ys=!1,e=Gs,Gs=null,e;return 0!==(8&Is)||Wa(),null}function Mc(){for(;null!==Xs;){var e=Xs.alternate;cc||null===sc||(0!==(8&Xs.flags)?et(Xs,sc)&&(cc=!0):13===Xs.tag&&js(e,Xs)&&et(Xs,sc)&&(cc=!0));var t=Xs.flags;0!==(256&t)&&ps(e,Xs),0===(512&t)||qs||(qs=!0,Va(97,(function(){return Ac(),null}))),Xs=Xs.nextEffect}}function Ac(){if(90!==Js){var e=97<Js?97:Js;return Js=90,Ka(e,Rc)}return!1}function Tc(e,t){Qs.push(t,e),qs||(qs=!0,Va(97,(function(){return Ac(),null})))}function Dc(e,t){ec.push(t,e),qs||(qs=!0,Va(97,(function(){return Ac(),null})))}function Rc(){if(null===Zs)return!1;var e=Zs;if(Zs=null,0!==(48&Is))throw Error(o(331));var t=Is;Is|=32;var n=ec;ec=[];for(var r=0;r<n.length;r+=2){var a=n[r],i=n[r+1],s=a.destroy;if(a.destroy=void 0,"function"===typeof s)try{s()}catch(u){if(null===i)throw Error(o(330));Lc(i,u)}}for(n=Qs,Qs=[],r=0;r<n.length;r+=2){a=n[r],i=n[r+1];try{var c=a.create;a.destroy=c()}catch(u){if(null===i)throw Error(o(330));Lc(i,u)}}for(c=e.current.firstEffect;null!==c;)e=c.nextEffect,c.nextEffect=null,8&c.flags&&(c.sibling=null,c.stateNode=null),c=e;return Is=t,Wa(),!0}function Bc(e,t,n){ci(e,t=us(0,t=os(n,t),1)),t=uc(),null!==(e=fc(e,1))&&(Kt(e,1,t),pc(e,t))}function Lc(e,t){if(3===e.tag)Bc(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Bc(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===$s||!$s.has(r))){var a=ls(n,e=os(t,e),1);if(ci(n,a),a=uc(),null!==(n=fc(n,1)))Kt(n,1,a),pc(n,a);else if("function"===typeof r.componentDidCatch&&(null===$s||!$s.has(r)))try{r.componentDidCatch(t,e)}catch(i){}break}}n=n.return}}function Fc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=uc(),e.pingedLanes|=e.suspendedLanes&n,Ps===e&&(As&n)===n&&(4===Rs||3===Rs&&(62914560&As)===As&&500>za()-Us?Oc(e,0):zs|=n),pc(e,t)}function Hc(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Na()?1:2:(0===ic&&(ic=Ls),0===(t=Nt(62914560&~ic))&&(t=4194304))),n=uc(),null!==(e=fc(e,t))&&(Kt(e,t,n),pc(e,n))}function zc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Nc(e,t,n,r){return new zc(e,t,n,r)}function Uc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Kc(e,t){var n=e.alternate;return null===n?((n=Nc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Vc(e,t,n,r,a,i){var s=2;if(r=e,"function"===typeof e)Uc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case x:return Wc(n.children,a,i,t);case B:s=8,a|=16;break;case j:s=8,a|=1;break;case _:return(e=Nc(12,n,t,8|a)).elementType=_,e.type=_,e.lanes=i,e;case P:return(e=Nc(13,n,t,a)).type=P,e.elementType=P,e.lanes=i,e;case M:return(e=Nc(19,n,t,a)).elementType=M,e.lanes=i,e;case L:return Xc(n,a,i,t);case F:return(e=Nc(24,n,t,a)).elementType=F,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case E:s=9;break e;case I:s=11;break e;case A:s=14;break e;case T:s=16,r=null;break e;case D:s=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Nc(s,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function Wc(e,t,n,r){return(e=Nc(7,e,r,t)).lanes=n,e}function Xc(e,t,n,r){return(e=Nc(23,e,r,t)).elementType=L,e.lanes=n,e}function Yc(e,t,n){return(e=Nc(6,e,null,t)).lanes=n,e}function Gc(e,t,n){return(t=Nc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $c(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Ut(0),this.expirationTimes=Ut(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ut(0),this.mutableSourceEagerHydrationData=null}function qc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Zc(e,t,n,r){var a=t.current,i=uc(),s=lc(a);e:if(n){t:{if(qe(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var c=n;do{switch(c.tag){case 3:c=c.stateNode.context;break t;case 1:if(ha(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break t}}c=c.return}while(null!==c);throw Error(o(171))}if(1===n.tag){var u=n.type;if(ha(u)){n=ma(n,u,c);break e}}n=c}else n=ua;return null===t.context?t.context=n:t.pendingContext=n,(t=si(i,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ci(a,t),dc(a,s,i),s}function Jc(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eu(e,t){Qc(e,t),(e=e.alternate)&&Qc(e,t)}function tu(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new $c(e,t,null!=n&&!0===n.hydrate),t=Nc(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,ii(t),e[Zr]=n.current,Ir(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var a=(t=r[e])._getVersion;a=a(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,a]:n.mutableSourceEagerHydrationData.push(t,a)}this._internalRoot=n}function nu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ru(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i._internalRoot;if("function"===typeof a){var s=a;a=function(){var e=Jc(o);s.call(e)}}Zc(t,o,e,a)}else{if(i=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new tu(e,0,t?{hydrate:!0}:void 0)}(n,r),o=i._internalRoot,"function"===typeof a){var c=a;a=function(){var e=Jc(o);c.call(e)}}bc((function(){Zc(t,o,e,a)}))}return Jc(o)}function au(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nu(t))throw Error(o(200));return qc(e,t,null,n)}Ws=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||da.current)Do=!0;else{if(0===(n&r)){switch(Do=!1,t.tag){case 3:Vo(t),Vi();break;case 5:Ai(t);break;case 1:ha(t.type)&&ba(t);break;case 4:Pi(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var a=t.type._context;ca($a,a._currentValue),a._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?$o(e,t,n):(ca(Di,1&Di.current),null!==(t=ns(e,t,n))?t.sibling:null);ca(Di,1&Di.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return ts(e,t,n);t.flags|=64}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),ca(Di,Di.current),r)break;return null;case 23:case 24:return t.lanes=0,Ho(e,t,n)}return ns(e,t,n)}Do=0!==(16384&e.flags)}else Do=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=pa(t,la.current),ni(t,n),a=ro(null,t,r,e,a,n),t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,ha(r)){var i=!0;ba(t)}else i=!1;t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,ii(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&pi(t,r,s,e),a.updater=hi,t.stateNode=a,a._reactInternals=t,bi(t,r,e,n),t=Ko(null,t,r,!0,i,n)}else t.tag=0,Ro(null,t,a,n),t=t.child;return t;case 16:a=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=(i=a._init)(a._payload),t.type=a,i=t.tag=function(e){if("function"===typeof e)return Uc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===A)return 14}return 2}(a),e=Ga(a,e),i){case 0:t=No(null,t,a,e,n);break e;case 1:t=Uo(null,t,a,e,n);break e;case 11:t=Bo(null,t,a,e,n);break e;case 14:t=Lo(null,t,a,Ga(a.type,e),r,n);break e}throw Error(o(306,a,""))}return t;case 0:return r=t.type,a=t.pendingProps,No(e,t,r,a=t.elementType===r?a:Ga(r,a),n);case 1:return r=t.type,a=t.pendingProps,Uo(e,t,r,a=t.elementType===r?a:Ga(r,a),n);case 3:if(Vo(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,a=null!==(a=t.memoizedState)?a.element:null,oi(e,t),li(t,r,null,n),(r=t.memoizedState.element)===a)Vi(),t=ns(e,t,n);else{if((i=(a=t.stateNode).hydrate)&&(Li=Wr(t.stateNode.containerInfo.firstChild),Bi=t,i=Fi=!0),i){if(null!=(e=a.mutableSourceEagerHydrationData))for(a=0;a<e.length;a+=2)(i=e[a])._workInProgressVersionPrimary=e[a+1],Wi.push(i);for(n=xi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Ro(e,t,r,n),Vi();t=t.child}return t;case 5:return Ai(t),null===e&&Ni(t),r=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,s=a.children,Nr(r,a)?s=null:null!==i&&Nr(r,i)&&(t.flags|=16),zo(e,t),Ro(e,t,s,n),t.child;case 6:return null===e&&Ni(t),null;case 13:return $o(e,t,n);case 4:return Pi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Si(t,null,r,n):Ro(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,Bo(e,t,r,a=t.elementType===r?a:Ga(r,a),n);case 7:return Ro(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ro(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,a=t.pendingProps,s=t.memoizedProps,i=a.value;var c=t.type._context;if(ca($a,c._currentValue),c._currentValue=i,null!==s)if(c=s.value,0===(i=sr(c,i)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(c,i):1073741823))){if(s.children===a.children&&!da.current){t=ns(e,t,n);break e}}else for(null!==(c=t.child)&&(c.return=t);null!==c;){var u=c.dependencies;if(null!==u){s=c.child;for(var l=u.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&i)){1===c.tag&&((l=si(-1,n&-n)).tag=2,ci(c,l)),c.lanes|=n,null!==(l=c.alternate)&&(l.lanes|=n),ti(c.return,n),u.lanes|=n;break}l=l.next}}else s=10===c.tag&&c.type===t.type?null:c.child;if(null!==s)s.return=c;else for(s=c;null!==s;){if(s===t){s=null;break}if(null!==(c=s.sibling)){c.return=s.return,s=c;break}s=s.return}c=s}Ro(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=(i=t.pendingProps).children,ni(t,n),r=r(a=ri(a,i.unstable_observedBits)),t.flags|=1,Ro(e,t,r,n),t.child;case 14:return i=Ga(a=t.type,t.pendingProps),Lo(e,t,a,i=Ga(a.type,i),r,n);case 15:return Fo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ga(r,a),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,ha(r)?(e=!0,ba(t)):e=!1,ni(t,n),gi(t,r,a),bi(t,r,a,n),Ko(null,t,r,!0,e,n);case 19:return ts(e,t,n);case 23:case 24:return Ho(e,t,n)}throw Error(o(156,t.tag))},tu.prototype.render=function(e){Zc(e,this._internalRoot,null,null)},tu.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Zc(null,e,null,(function(){t[Zr]=null}))},tt=function(e){13===e.tag&&(dc(e,4,uc()),eu(e,4))},nt=function(e){13===e.tag&&(dc(e,67108864,uc()),eu(e,67108864))},rt=function(e){if(13===e.tag){var t=uc(),n=lc(e);dc(e,n,t),eu(e,n)}},at=function(e,t){return t()},Ce=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=na(r);if(!a)throw Error(o(90));Z(r),ne(r,a)}}}break;case"textarea":ue(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Te=mc,De=function(e,t,n,r,a){var i=Is;Is|=4;try{return Ka(98,e.bind(null,t,n,r,a))}finally{0===(Is=i)&&(Vs(),Wa())}},Re=function(){0===(49&Is)&&(function(){if(null!==tc){var e=tc;tc=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,pc(e,za())}))}Wa()}(),Ac())},Be=function(e,t){var n=Is;Is|=2;try{return e(t)}finally{0===(Is=n)&&(Vs(),Wa())}};var iu={Events:[ea,ta,na,Me,Ae,Ac,{current:!1}]},ou={findFiberByHostInstance:Qr,bundleType:0,version:"17.0.1",rendererPackageName:"react-dom"},su={bundleType:ou.bundleType,version:ou.version,rendererPackageName:ou.rendererPackageName,rendererConfig:ou.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Qe(e))?null:e.stateNode},findFiberByHostInstance:ou.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cu.isDisabled&&cu.supportsFiber)try{wa=cu.inject(su),Oa=cu}catch(ge){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iu,t.createPortal=au,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Qe(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Is;if(0!==(48&n))return e(t);Is|=1;try{if(e)return Ka(99,e.bind(null,t))}finally{Is=n,Wa()}},t.hydrate=function(e,t,n){if(!nu(t))throw Error(o(200));return ru(null,e,t,!0,n)},t.render=function(e,t,n){if(!nu(t))throw Error(o(200));return ru(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!nu(e))throw Error(o(40));return!!e._reactRootContainer&&(bc((function(){ru(null,null,e,!1,(function(){e._reactRootContainer=null,e[Zr]=null}))})),!0)},t.unstable_batchedUpdates=mc,t.unstable_createPortal=function(e,t){return au(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!nu(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return ru(e,t,n,!1,r)},t.version="17.0.1"},function(e,t,n){"use strict";e.exports=n(45)},function(e,t,n){"use strict";var r,a,i,o;if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var l=null,d=null,f=function e(){if(null!==l)try{var n=t.unstable_now();l(!0,n),l=null}catch(r){throw setTimeout(e,0),r}};r=function(e){null!==l?setTimeout(r,0,e):(l=e,setTimeout(f,0))},a=function(e,t){d=setTimeout(e,t)},i=function(){clearTimeout(d)},t.unstable_shouldYield=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var p=window.setTimeout,h=window.clearTimeout;if("undefined"!==typeof console){var v=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var g=!1,m=null,b=-1,y=5,w=0;t.unstable_shouldYield=function(){return t.unstable_now()>=w},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<e?Math.floor(1e3/e):5};var O=new MessageChannel,k=O.port2;O.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();w=e+y;try{m(!0,e)?k.postMessage(null):(g=!1,m=null)}catch(n){throw k.postMessage(null),n}}else g=!1},r=function(e){m=e,g||(g=!0,k.postMessage(null))},a=function(e,n){b=p((function(){e(t.unstable_now())}),n)},i=function(){h(b),b=-1}}function S(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,a=e[r];if(!(void 0!==a&&0<_(a,t)))break e;e[r]=t,e[n]=a,n=r}}function x(e){return void 0===(e=e[0])?null:e}function j(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length;r<a;){var i=2*(r+1)-1,o=e[i],s=i+1,c=e[s];if(void 0!==o&&0>_(o,n))void 0!==c&&0>_(c,o)?(e[r]=c,e[s]=n,r=s):(e[r]=o,e[i]=n,r=i);else{if(!(void 0!==c&&0>_(c,n)))break e;e[r]=c,e[s]=n,r=s}}}return t}return null}function _(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var C=[],E=[],I=1,P=null,M=3,A=!1,T=!1,D=!1;function R(e){for(var t=x(E);null!==t;){if(null===t.callback)j(E);else{if(!(t.startTime<=e))break;j(E),t.sortIndex=t.expirationTime,S(C,t)}t=x(E)}}function B(e){if(D=!1,R(e),!T)if(null!==x(C))T=!0,r(L);else{var t=x(E);null!==t&&a(B,t.startTime-e)}}function L(e,n){T=!1,D&&(D=!1,i()),A=!0;var r=M;try{for(R(n),P=x(C);null!==P&&(!(P.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=P.callback;if("function"===typeof o){P.callback=null,M=P.priorityLevel;var s=o(P.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?P.callback=s:P===x(C)&&j(C),R(n)}else j(C);P=x(C)}if(null!==P)var c=!0;else{var u=x(E);null!==u&&a(B,u.startTime-n),c=!1}return c}finally{P=null,M=r,A=!1}}var F=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){T||A||(T=!0,r(L))},t.unstable_getCurrentPriorityLevel=function(){return M},t.unstable_getFirstCallbackNode=function(){return x(C)},t.unstable_next=function(e){switch(M){case 1:case 2:case 3:var t=3;break;default:t=M}var n=M;M=t;try{return e()}finally{M=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=M;M=e;try{return t()}finally{M=n}},t.unstable_scheduleCallback=function(e,n,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var c=-1;break;case 2:c=250;break;case 5:c=1073741823;break;case 4:c=1e4;break;default:c=5e3}return e={id:I++,callback:n,priorityLevel:e,startTime:o,expirationTime:c=o+c,sortIndex:-1},o>s?(e.sortIndex=o,S(E,e),null===x(C)&&e===x(E)&&(D?i():D=!0,a(B,o-s))):(e.sortIndex=c,S(C,e),T||A||(T=!0,r(L))),e},t.unstable_wrapCallback=function(e){var t=M;return function(){var n=M;M=t;try{return e.apply(this,arguments)}finally{M=n}}}},,function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(M){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),o=new E(r||[]);return i._invoke=function(e,t,n){var r=d;return function(a,i){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===a)throw i;return P()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=j(o,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var c=l(e,t,n);if("normal"===c.type){if(r=n.done?h:f,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=h,n.method="throw",n.arg=c.arg)}}}(e,n,o),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(M){return{type:"throw",arg:M}}}e.wrap=u;var d="suspendedStart",f="suspendedYield",p="executing",h="completed",v={};function g(){}function m(){}function b(){}var y={};y[i]=function(){return this};var w=Object.getPrototypeOf,O=w&&w(w(I([])));O&&O!==n&&r.call(O,i)&&(y=O);var k=b.prototype=g.prototype=Object.create(y);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,i,o,s){var c=l(e[a],e,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"===typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(d).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}var a;this._invoke=function(e,r){function i(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(i,i):i()}}function j(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,j(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var a=l(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function I(e){if(e){var n=e[i];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:P}}function P(){return{value:t,done:!0}}return m.prototype=k.constructor=b,b.constructor=m,m.displayName=c(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},S(x.prototype),x.prototype[o]=function(){return this},e.AsyncIterator=x,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new x(u(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(k),c(k,s,"Generator"),k[i]=function(){return this},k.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=r}catch(a){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){var r=n(7);e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){(function(t){e.exports=function(){function e(t,n,r){function a(o,s){if(!n[o]){if(!t[o]){if(i)return i(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[o]={exports:{}};t[o][0].call(u.exports,(function(e){return a(t[o][1][e]||e)}),u,u.exports,e,t,n,r)}return n[o].exports}for(var i=!1,o=0;o<r.length;o++)a(r[o]);return a}return e}()({1:[function(e,n,a){(function(e){var t=t||function(e,t){var n={},r=n.lib={},a=function(){},i=r.Base={extend:function(e){a.prototype=this;var t=new a;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=r.WordArray=i.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var a=0;a<e;a++)t[r+a>>>2]|=(n[a>>>2]>>>24-a%4*8&255)<<24-(r+a)%4*8;else if(65535<n.length)for(a=0;a<e;a+=4)t[r+a>>>2]=n[a>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new o.init(n,t)}}),s=n.enc={},c=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var a=t[r>>>2]>>>24-r%4*8&255;n.push((a>>>4).toString(16)),n.push((15&a).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new o.init(n,t/2)}},u=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new o.init(n,t)}},l=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},d=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,a=n.sigBytes,i=this.blockSize,s=a/(4*i);if(t=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*i,a=e.min(4*t,a),t){for(var c=0;c<t;c+=i)this._doProcessBlock(r,c);c=r.splice(0,t),n.sigBytes-=a}return new o.init(c,a)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=d.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}});var f=n.algo={};return n}(Math);function n(e,t){return!t||"object"!==p(t)&&"function"!==typeof t?i(e):t}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){return f(e)||d(e,t)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function d(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(c){a=!0,i=c}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}}function f(e){if(Array.isArray(e))return e}function p(e){return(p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,a)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){h(i,r,a,o,s,"next",e)}function s(e){h(i,r,a,o,s,"throw",e)}o(void 0)}))}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}!function(){var e=t,n=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp(),e=[];for(var a=0;a<n;a+=3)for(var i=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,o=0;4>o&&a+.75*o<n;o++)e.push(r.charAt(i>>>6*(3-o)&63));if(t=r.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var t=e.length,r=this._map;(a=r.charAt(64))&&-1!=(a=e.indexOf(a))&&(t=a);for(var a=[],i=0,o=0;o<t;o++)if(o%4){var s=r.indexOf(e.charAt(o-1))<<o%4*2,c=r.indexOf(e.charAt(o))>>>6-o%4*2;a[i>>>2]|=(s|c)<<24-i%4*8,i++}return n.create(a,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function n(e,t,n,r,a,i,o){return((e=e+(t&n|~t&r)+a+o)<<i|e>>>32-i)+t}function r(e,t,n,r,a,i,o){return((e=e+(t&r|n&~r)+a+o)<<i|e>>>32-i)+t}function a(e,t,n,r,a,i,o){return((e=e+(t^n^r)+a+o)<<i|e>>>32-i)+t}function i(e,t,n,r,a,i,o){return((e=e+(n^(t|~r))+a+o)<<i|e>>>32-i)+t}for(var o=t,s=(u=o.lib).WordArray,c=u.Hasher,u=o.algo,l=[],d=0;64>d;d++)l[d]=4294967296*e.abs(e.sin(d+1))|0;u=u.MD5=c.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var o=0;16>o;o++){var s=e[c=t+o];e[c]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}o=this._hash.words;var c=e[t+0],u=(s=e[t+1],e[t+2]),d=e[t+3],f=e[t+4],p=e[t+5],h=e[t+6],v=e[t+7],g=e[t+8],m=e[t+9],b=e[t+10],y=e[t+11],w=e[t+12],O=e[t+13],k=e[t+14],S=e[t+15],x=n(x=o[0],C=o[1],_=o[2],j=o[3],c,7,l[0]),j=n(j,x,C,_,s,12,l[1]),_=n(_,j,x,C,u,17,l[2]),C=n(C,_,j,x,d,22,l[3]);x=n(x,C,_,j,f,7,l[4]),j=n(j,x,C,_,p,12,l[5]),_=n(_,j,x,C,h,17,l[6]),C=n(C,_,j,x,v,22,l[7]),x=n(x,C,_,j,g,7,l[8]),j=n(j,x,C,_,m,12,l[9]),_=n(_,j,x,C,b,17,l[10]),C=n(C,_,j,x,y,22,l[11]),x=n(x,C,_,j,w,7,l[12]),j=n(j,x,C,_,O,12,l[13]),_=n(_,j,x,C,k,17,l[14]),x=r(x,C=n(C,_,j,x,S,22,l[15]),_,j,s,5,l[16]),j=r(j,x,C,_,h,9,l[17]),_=r(_,j,x,C,y,14,l[18]),C=r(C,_,j,x,c,20,l[19]),x=r(x,C,_,j,p,5,l[20]),j=r(j,x,C,_,b,9,l[21]),_=r(_,j,x,C,S,14,l[22]),C=r(C,_,j,x,f,20,l[23]),x=r(x,C,_,j,m,5,l[24]),j=r(j,x,C,_,k,9,l[25]),_=r(_,j,x,C,d,14,l[26]),C=r(C,_,j,x,g,20,l[27]),x=r(x,C,_,j,O,5,l[28]),j=r(j,x,C,_,u,9,l[29]),_=r(_,j,x,C,v,14,l[30]),x=a(x,C=r(C,_,j,x,w,20,l[31]),_,j,p,4,l[32]),j=a(j,x,C,_,g,11,l[33]),_=a(_,j,x,C,y,16,l[34]),C=a(C,_,j,x,k,23,l[35]),x=a(x,C,_,j,s,4,l[36]),j=a(j,x,C,_,f,11,l[37]),_=a(_,j,x,C,v,16,l[38]),C=a(C,_,j,x,b,23,l[39]),x=a(x,C,_,j,O,4,l[40]),j=a(j,x,C,_,c,11,l[41]),_=a(_,j,x,C,d,16,l[42]),C=a(C,_,j,x,h,23,l[43]),x=a(x,C,_,j,m,4,l[44]),j=a(j,x,C,_,w,11,l[45]),_=a(_,j,x,C,S,16,l[46]),x=i(x,C=a(C,_,j,x,u,23,l[47]),_,j,c,6,l[48]),j=i(j,x,C,_,v,10,l[49]),_=i(_,j,x,C,k,15,l[50]),C=i(C,_,j,x,p,21,l[51]),x=i(x,C,_,j,w,6,l[52]),j=i(j,x,C,_,d,10,l[53]),_=i(_,j,x,C,b,15,l[54]),C=i(C,_,j,x,s,21,l[55]),x=i(x,C,_,j,g,6,l[56]),j=i(j,x,C,_,S,10,l[57]),_=i(_,j,x,C,h,15,l[58]),C=i(C,_,j,x,O,21,l[59]),x=i(x,C,_,j,f,6,l[60]),j=i(j,x,C,_,y,10,l[61]),_=i(_,j,x,C,u,15,l[62]),C=i(C,_,j,x,m,21,l[63]),o[0]=o[0]+x|0,o[1]=o[1]+C|0,o[2]=o[2]+_|0,o[3]=o[3]+j|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,a=8*t.sigBytes;n[a>>>5]|=128<<24-a%32;var i=e.floor(r/4294967296);for(n[15+(a+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[14+(a+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(n.length+1),this._process(),n=(t=this._hash).words,r=0;4>r;r++)a=n[r],n[r]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8);return t},clone:function(){var e=c.clone.call(this);return e._hash=this._hash.clone(),e}}),o.MD5=c._createHelper(u),o.HmacMD5=c._createHmacHelper(u)}(Math),function(){var e,n=t,r=(e=n.lib).Base,a=e.WordArray,i=(e=n.algo).EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:e.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=(s=this.cfg).hasher.create(),r=a.create(),i=r.words,o=s.keySize,s=s.iterations;i.length<o;){c&&n.update(c);var c=n.update(e).finalize(t);n.reset();for(var u=1;u<s;u++)c=n.finalize(c),n.reset();r.concat(c)}return r.sigBytes=4*o,r}});n.EvpKDF=function(e,t,n){return i.create(n).compute(e,t)}}(),t.lib.Cipher||function(e){var n=(h=t).lib,r=n.Base,a=n.WordArray,i=n.BufferedBlockAlgorithm,o=h.enc.Base64,s=h.algo.EvpKDF,c=n.Cipher=i.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,n,r){return("string"==typeof n?v:p).encrypt(e,t,n,r)},decrypt:function(t,n,r){return("string"==typeof n?v:p).decrypt(e,t,n,r)}}}});n.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var u=h.mode={},l=function(t,n,r){var a=this._iv;a?this._iv=e:a=this._prevBlock;for(var i=0;i<r;i++)t[n+i]^=a[i]},d=(n.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();d.Encryptor=d.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;l.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),d.Decryptor=d.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,a=e.slice(t,t+r);n.decryptBlock(e,t),l.call(this,e,t,r),this._prevBlock=a}}),u=u.CBC=d,d=(h.pad={}).Pkcs7={pad:function(e,t){for(var n,r=(n=(n=4*t)-e.sigBytes%n)<<24|n<<16|n<<8|n,i=[],o=0;o<n;o+=4)i.push(r);n=a.create(i,n),e.concat(n)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},n.BlockCipher=c.extend({cfg:c.cfg.extend({mode:u,padding:d}),reset:function(){c.reset.call(this);var e=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=t.createEncryptor;else n=t.createDecryptor,this._minBufferSize=1;this._mode=n.call(t,this,e&&e.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var f=n.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),p=(u=(h.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?a.create([1398893684,1701076831]).concat(e).concat(t):t).toString(o)},parse:function(e){var t=(e=o.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var n=a.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return f.create({ciphertext:e,salt:n})}},n.SerializableCipher=r.extend({cfg:r.extend({format:u}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var a=e.createEncryptor(n,r);return t=a.finalize(t),a=a.cfg,f.create({ciphertext:t,key:n,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}})),h=(h.kdf={}).OpenSSL={execute:function(e,t,n,r){return r||(r=a.random(8)),e=s.create({keySize:t+n}).compute(e,r),n=a.create(e.words.slice(t),4*n),e.sigBytes=4*t,f.create({key:e,iv:n,salt:r})}},v=n.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:h}),encrypt:function(e,t,n,r){return n=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize),r.iv=n.iv,(e=p.encrypt.call(this,e,t,n.key,r)).mixIn(n),e},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),n=r.kdf.execute(n,e.keySize,e.ivSize,t.salt),r.iv=n.iv,p.decrypt.call(this,e,t,n.key,r)}})}(),function(){for(var e=t,n=e.lib.BlockCipher,r=e.algo,a=[],i=[],o=[],s=[],c=[],u=[],l=[],d=[],f=[],p=[],h=[],v=0;256>v;v++)h[v]=128>v?v<<1:v<<1^283;var g=0,m=0;for(v=0;256>v;v++){var b=(b=m^m<<1^m<<2^m<<3^m<<4)>>>8^255&b^99;a[g]=b,i[b]=g;var y=h[g],w=h[y],O=h[w],k=257*h[b]^16843008*b;o[g]=k<<24|k>>>8,s[g]=k<<16|k>>>16,c[g]=k<<8|k>>>24,u[g]=k,k=16843009*O^65537*w^257*y^16843008*g,l[b]=k<<24|k>>>8,d[b]=k<<16|k>>>16,f[b]=k<<8|k>>>24,p[b]=k,g?(g=y^h[h[h[O^y]]],m^=h[h[m]]):g=m=1}var S=[0,1,2,4,8,16,32,64,128,27,54];r=r.AES=n.extend({_doReset:function(){for(var e=(n=this._key).words,t=n.sigBytes/4,n=4*((this._nRounds=t+6)+1),r=this._keySchedule=[],i=0;i<n;i++)if(i<t)r[i]=e[i];else{var o=r[i-1];i%t?6<t&&4==i%t&&(o=a[o>>>24]<<24|a[o>>>16&255]<<16|a[o>>>8&255]<<8|a[255&o]):(o=a[(o=o<<8|o>>>24)>>>24]<<24|a[o>>>16&255]<<16|a[o>>>8&255]<<8|a[255&o],o^=S[i/t|0]<<24),r[i]=r[i-t]^o}for(e=this._invKeySchedule=[],t=0;t<n;t++)i=n-t,o=t%4?r[i]:r[i-4],e[t]=4>t||4>=i?o:l[a[o>>>24]]^d[a[o>>>16&255]]^f[a[o>>>8&255]]^p[a[255&o]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,s,c,u,a)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,l,d,f,p,i),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,a,i,o,s){for(var c=this._nRounds,u=e[t]^n[0],l=e[t+1]^n[1],d=e[t+2]^n[2],f=e[t+3]^n[3],p=4,h=1;h<c;h++){var v=r[u>>>24]^a[l>>>16&255]^i[d>>>8&255]^o[255&f]^n[p++],g=r[l>>>24]^a[d>>>16&255]^i[f>>>8&255]^o[255&u]^n[p++],m=r[d>>>24]^a[f>>>16&255]^i[u>>>8&255]^o[255&l]^n[p++];f=r[f>>>24]^a[u>>>16&255]^i[l>>>8&255]^o[255&d]^n[p++],u=v,l=g,d=m}v=(s[u>>>24]<<24|s[l>>>16&255]<<16|s[d>>>8&255]<<8|s[255&f])^n[p++],g=(s[l>>>24]<<24|s[d>>>16&255]<<16|s[f>>>8&255]<<8|s[255&u])^n[p++],m=(s[d>>>24]<<24|s[f>>>16&255]<<16|s[u>>>8&255]<<8|s[255&l])^n[p++],f=(s[f>>>24]<<24|s[u>>>16&255]<<16|s[l>>>8&255]<<8|s[255&d])^n[p++],e[t]=v,e[t+1]=g,e[t+2]=m,e[t+3]=f},keySize:8}),e.AES=n._createHelper(r)}(),t=t||function(e,t){var n={},r=n.lib={},a=function(){},i=r.Base={extend:function(e){a.prototype=this;var t=new a;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=r.WordArray=i.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var a=0;a<e;a++)t[r+a>>>2]|=(n[a>>>2]>>>24-a%4*8&255)<<24-(r+a)%4*8;else if(65535<n.length)for(a=0;a<e;a+=4)t[r+a>>>2]=n[a>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new o.init(n,t)}}),s=n.enc={},c=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var a=t[r>>>2]>>>24-r%4*8&255;n.push((a>>>4).toString(16)),n.push((15&a).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new o.init(n,t/2)}},u=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new o.init(n,t)}},l=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},d=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,a=n.sigBytes,i=this.blockSize,s=a/(4*i);if(t=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*i,a=e.min(4*t,a),t){for(var c=0;c<t;c+=i)this._doProcessBlock(r,c);c=r.splice(0,t),n.sigBytes-=a}return new o.init(c,a)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=d.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}});var f=n.algo={};return n}(Math),function(e){for(var n=t,r=(i=n.lib).WordArray,a=i.Hasher,i=n.algo,o=[],s=[],c=function(e){return 4294967296*(e-(0|e))|0},u=2,l=0;64>l;){var d;e:{d=u;for(var f=e.sqrt(d),p=2;p<=f;p++)if(!(d%p)){d=!1;break e}d=!0}d&&(8>l&&(o[l]=c(e.pow(u,.5))),s[l]=c(e.pow(u,1/3)),l++),u++}var h=[];i=i.SHA256=a.extend({_doReset:function(){this._hash=new r.init(o.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],a=n[1],i=n[2],o=n[3],c=n[4],u=n[5],l=n[6],d=n[7],f=0;64>f;f++){if(16>f)h[f]=0|e[t+f];else{var p=h[f-15],v=h[f-2];h[f]=((p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3)+h[f-7]+((v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10)+h[f-16]}p=d+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&u^~c&l)+s[f]+h[f],v=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&a^r&i^a&i),d=l,l=u,u=c,c=o+p|0,o=i,i=a,a=r,r=p+v|0}n[0]=n[0]+r|0,n[1]=n[1]+a|0,n[2]=n[2]+i|0,n[3]=n[3]+o|0,n[4]=n[4]+c|0,n[5]=n[5]+u|0,n[6]=n[6]+l|0,n[7]=n[7]+d|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,a=8*t.sigBytes;return n[a>>>5]|=128<<24-a%32,n[14+(a+64>>>9<<4)]=e.floor(r/4294967296),n[15+(a+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}}),n.SHA256=a._createHelper(i),n.HmacSHA256=a._createHmacHelper(i)}(Math),function(){var e=t,n=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=n.parse(t));var r=e.blockSize,a=4*r;t.sigBytes>a&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),o=this._iKey=t.clone(),s=i.words,c=o.words,u=0;u<r;u++)s[u]^=1549556828,c[u]^=909522486;i.sigBytes=o.sigBytes=a,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),t=t||function(e,t){var n={},r=n.lib={},a=function(){},i=r.Base={extend:function(e){a.prototype=this;var t=new a;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=r.WordArray=i.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var a=0;a<e;a++)t[r+a>>>2]|=(n[a>>>2]>>>24-a%4*8&255)<<24-(r+a)%4*8;else if(65535<n.length)for(a=0;a<e;a+=4)t[r+a>>>2]=n[a>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new o.init(n,t)}}),s=n.enc={},c=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var a=t[r>>>2]>>>24-r%4*8&255;n.push((a>>>4).toString(16)),n.push((15&a).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new o.init(n,t/2)}},u=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new o.init(n,t)}},l=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(r){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},d=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,a=n.sigBytes,i=this.blockSize,s=a/(4*i);if(t=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*i,a=e.min(4*t,a),t){for(var c=0;c<t;c+=i)this._doProcessBlock(r,c);c=r.splice(0,t),n.sigBytes-=a}return new o.init(c,a)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=d.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}});var f=n.algo={};return n}(Math),function(e){var n,r=(n=t).lib,a=r.Base,i=r.WordArray;(n=n.x64={}).Word=a.extend({init:function(e,t){this.high=e,this.low=t}}),n.WordArray=a.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:8*t.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var a=e[r];n.push(a.high),n.push(a.low)}return i.create(n,this.sigBytes)},clone:function(){for(var e=a.clone.call(this),t=e.words=this.words.slice(0),n=t.length,r=0;r<n;r++)t[r]=t[r].clone();return e}})}(),function(){function e(){return a.create.apply(a,arguments)}for(var n=t,r=n.lib.Hasher,a=(o=n.x64).Word,i=o.WordArray,o=n.algo,s=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],c=[],u=0;80>u;u++)c[u]=e();o=o.SHA512=r.extend({_doReset:function(){this._hash=new i.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=(d=this._hash.words)[0],r=d[1],a=d[2],i=d[3],o=d[4],u=d[5],l=d[6],d=d[7],f=n.high,p=n.low,h=r.high,v=r.low,g=a.high,m=a.low,b=i.high,y=i.low,w=o.high,O=o.low,k=u.high,S=u.low,x=l.high,j=l.low,_=d.high,C=d.low,E=f,I=p,P=h,M=v,A=g,T=m,D=b,R=y,B=w,L=O,F=k,H=S,z=x,N=j,U=_,K=C,V=0;80>V;V++){var W=c[V];if(16>V)var X=W.high=0|e[t+2*V],Y=W.low=0|e[t+2*V+1];else{X=((Y=(X=c[V-15]).high)>>>1|(G=X.low)<<31)^(Y>>>8|G<<24)^Y>>>7;var G=(G>>>1|Y<<31)^(G>>>8|Y<<24)^(G>>>7|Y<<25),$=((Y=($=c[V-2]).high)>>>19|(q=$.low)<<13)^(Y<<3|q>>>29)^Y>>>6,q=(q>>>19|Y<<13)^(q<<3|Y>>>29)^(q>>>6|Y<<26),Z=(Y=c[V-7]).high,J=(Q=c[V-16]).high,Q=Q.low;X=(X=(X=X+Z+((Y=G+Y.low)>>>0<G>>>0?1:0))+$+((Y+=q)>>>0<q>>>0?1:0))+J+((Y+=Q)>>>0<Q>>>0?1:0),W.high=X,W.low=Y}Z=B&F^~B&z,Q=L&H^~L&N,W=E&P^E&A^P&A;var ee=I&M^I&T^M&T,te=(G=(E>>>28|I<<4)^(E<<30|I>>>2)^(E<<25|I>>>7),$=(I>>>28|E<<4)^(I<<30|E>>>2)^(I<<25|E>>>7),(q=s[V]).high),ne=q.low;J=U+((B>>>14|L<<18)^(B>>>18|L<<14)^(B<<23|L>>>9))+((q=K+((L>>>14|B<<18)^(L>>>18|B<<14)^(L<<23|B>>>9)))>>>0<K>>>0?1:0),U=z,K=N,z=F,N=H,F=B,H=L,B=D+(J=(J=(J=J+Z+((q+=Q)>>>0<Q>>>0?1:0))+te+((q+=ne)>>>0<ne>>>0?1:0))+X+((q+=Y)>>>0<Y>>>0?1:0))+((L=R+q|0)>>>0<R>>>0?1:0)|0,D=A,R=T,A=P,T=M,P=E,M=I,E=J+(W=G+W+((Y=$+ee)>>>0<$>>>0?1:0))+((I=q+Y|0)>>>0<q>>>0?1:0)|0}p=n.low=p+I,n.high=f+E+(p>>>0<I>>>0?1:0),v=r.low=v+M,r.high=h+P+(v>>>0<M>>>0?1:0),m=a.low=m+T,a.high=g+A+(m>>>0<T>>>0?1:0),y=i.low=y+R,i.high=b+D+(y>>>0<R>>>0?1:0),O=o.low=O+L,o.high=w+B+(O>>>0<L>>>0?1:0),S=u.low=S+H,u.high=k+F+(S>>>0<H>>>0?1:0),j=l.low=j+N,l.high=x+z+(j>>>0<N>>>0?1:0),C=d.low=C+K,d.high=_+U+(C>>>0<K>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(r+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32}),n.SHA512=r._createHelper(o),n.HmacSHA512=r._createHmacHelper(o)}(),function(){var e=t,n=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=n.parse(t));var r=e.blockSize,a=4*r;t.sigBytes>a&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),o=this._iKey=t.clone(),s=i.words,c=o.words,u=0;u<r;u++)s[u]^=1549556828,c[u]^=909522486;i.sigBytes=o.sigBytes=a,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),t=t||function(e,t){var n={},r=n.lib={},a=function(){},i=r.Base={extend:function(e){a.prototype=this;var t=new a;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=r.WordArray=i.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var a=0;a<e;a++)t[r+a>>>2]|=(n[a>>>2]>>>24-a%4*8&255)<<24-(r+a)%4*8;else if(65535<n.length)for(a=0;a<e;a+=4)t[r+a>>>2]=n[a>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new o.init(n,t)}}),s=n.enc={},c=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var a=t[r>>>2]>>>24-r%4*8&255;n.push((a>>>4).toString(16)),n.push((15&a).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new o.init(n,t/2)}},u=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new o.init(n,t)}},l=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(s){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},d=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,a=n.sigBytes,i=this.blockSize,s=a/(4*i);if(t=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*i,a=e.min(4*t,a),t){for(var c=0;c<t;c+=i)this._doProcessBlock(r,c);c=r.splice(0,t),n.sigBytes-=a}return new o.init(c,a)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=d.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}});var f=n.algo={};return n}(Math),function(){var e=t,n=(i=e.lib).WordArray,r=i.Hasher,a=[],i=e.algo.SHA1=r.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],c=n[4],u=0;80>u;u++){if(16>u)a[u]=0|e[t+u];else{var l=a[u-3]^a[u-8]^a[u-14]^a[u-16];a[u]=l<<1|l>>>31}l=(r<<5|r>>>27)+c+a[u],l=20>u?l+(1518500249+(i&o|~i&s)):40>u?l+(1859775393+(i^o^s)):60>u?l+((i&o|i&s|o&s)-1894007588):l+((i^o^s)-899497514),c=s,s=o,o=i<<30|i>>>2,i=r,r=l}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=r._createHelper(i),e.HmacSHA1=r._createHmacHelper(i)}(),function(){var e=t,n=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=n.parse(t));var r=e.blockSize,a=4*r;t.sigBytes>a&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),o=this._iKey=t.clone(),s=i.words,c=o.words,u=0;u<r;u++)s[u]^=1549556828,c[u]^=909522486;i.sigBytes=o.sigBytes=a,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),function(){var e,n=t,r=(e=n.lib).Base,a=e.WordArray,i=(e=n.algo).HMAC,o=e.PBKDF2=r.extend({cfg:r.extend({keySize:4,hasher:e.SHA1,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){var n=this.cfg,r=i.create(n.hasher,e),o=a.create(),s=a.create([1]),c=o.words,u=s.words,l=n.keySize;for(n=n.iterations;c.length<l;){var d=r.update(t).finalize(s);r.reset();for(var f=d.words,p=f.length,h=d,v=1;v<n;v++){h=r.finalize(h),r.reset();for(var g=h.words,m=0;m<p;m++)f[m]^=g[m]}o.concat(d),u[0]++}return o.sigBytes=4*l,o}});n.PBKDF2=function(e,t,n){return o.create(n).compute(e,t)}}(),t=t||function(e,t){var n={},r=n.lib={},a=function(){},i=r.Base={extend:function(e){a.prototype=this;var t=new a;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=r.WordArray=i.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var a=0;a<e;a++)t[r+a>>>2]|=(n[a>>>2]>>>24-a%4*8&255)<<24-(r+a)%4*8;else if(65535<n.length)for(a=0;a<e;a+=4)t[r+a>>>2]=n[a>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new o.init(n,t)}}),s=n.enc={},c=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var a=t[r>>>2]>>>24-r%4*8&255;n.push((a>>>4).toString(16)),n.push((15&a).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new o.init(n,t/2)}},u=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new o.init(n,t)}},l=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},d=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,a=n.sigBytes,i=this.blockSize,s=a/(4*i);if(t=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*i,a=e.min(4*t,a),t){for(var c=0;c<t;c+=i)this._doProcessBlock(r,c);c=r.splice(0,t),n.sigBytes-=a}return new o.init(c,a)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=d.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}});var f=n.algo={};return n}(Math),function(){var e=t,n=(i=e.lib).WordArray,r=i.Hasher,a=[],i=e.algo.SHA1=r.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],c=n[4],u=0;80>u;u++){if(16>u)a[u]=0|e[t+u];else{var l=a[u-3]^a[u-8]^a[u-14]^a[u-16];a[u]=l<<1|l>>>31}l=(r<<5|r>>>27)+c+a[u],l=20>u?l+(1518500249+(i&o|~i&s)):40>u?l+(1859775393+(i^o^s)):60>u?l+((i&o|i&s|o&s)-1894007588):l+((i^o^s)-899497514),c=s,s=o,o=i<<30|i>>>2,i=r,r=l}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=r._createHelper(i),e.HmacSHA1=r._createHmacHelper(i)}(),Object.defineProperty(a,"__esModule",{value:!0}),a.StandardFile=a.SFItemTransformer=a.SFCryptoWeb=a.SFCryptoJS=a.SFAbstractCrypto=a.SFItemHistoryEntry=a.SFItemHistory=a.SFHistorySession=a.SFPrivileges=a.SFPredicate=a.SFItemParams=a.SFItem=a.SFSyncManager=a.SFStorageManager=a.SFSingletonManager=a.SFSessionHistoryManager=a.SFPrivilegesManager=a.SFModelManager=a.SFMigrationManager=a.SFHttpManager=a.SFAuthManager=a.SFAlertManager=void 0;var y=function(){function e(){g(this,e)}return b(e,[{key:"alert",value:function(){var e=v(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){window.alert(t.text),e()})));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"confirm",value:function(){var e=v(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){window.confirm(t.text)?e():n()})));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();a.SFAlertManager=y;var w=function(){function e(t,n,r,a){g(this,e),e.DidSignOutEvent="DidSignOutEvent",e.WillSignInEvent="WillSignInEvent",e.DidSignInEvent="DidSignInEvent",this.httpManager=n,this.storageManager=t,this.alertManager=r||new y,this.$timeout=a||setTimeout.bind(window),this.eventHandlers=[]}return b(e,[{key:"addEventHandler",value:function(e){return this.eventHandlers.push(e),e}},{key:"removeEventHandler",value:function(e){_.pull(this.eventHandlers,e)}},{key:"notifyEvent",value:function(e,t){var n=!0,r=!1,a=void 0;try{for(var i,o=this.eventHandlers[Symbol.iterator]();!(n=(i=o.next()).done);n=!0)(0,i.value)(e,t||{})}catch(s){r=!0,a=s}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}}},{key:"saveKeys",value:function(){var e=v(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._keys=t,e.next=3,this.storageManager.setItem("mk",t.mk);case 3:return e.next=5,this.storageManager.setItem("ak",t.ak);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"signout",value:function(){var t=v(r.mark((function t(n){var a=this;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._keys=null,this._authParams=null,!n){t.next=6;break}return t.abrupt("return",this.storageManager.clearAllData().then((function(){a.notifyEvent(e.DidSignOutEvent)})));case 6:this.notifyEvent(e.DidSignOutEvent);case 7:case"end":return t.stop()}}),t,this)})));function n(e){return t.apply(this,arguments)}return n}()},{key:"keys",value:function(){var e=v(r.mark((function e(){var t;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._keys){e.next=11;break}return e.next=3,this.storageManager.getItem("mk");case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:return e.t0=t,e.next=9,this.storageManager.getItem("ak");case 9:e.t1=e.sent,this._keys={mk:e.t0,ak:e.t1};case 11:return e.abrupt("return",this._keys);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAuthParams",value:function(){var e=v(r.mark((function e(){var t;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._authParams){e.next=5;break}return e.next=3,this.storageManager.getItem("auth_params");case 3:t=e.sent,this._authParams=JSON.parse(t);case 5:if(!this._authParams||this._authParams.version){e.next=9;break}return e.next=8,this.defaultProtocolVersion();case 8:this._authParams.version=e.sent;case 9:return e.abrupt("return",this._authParams);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"defaultProtocolVersion",value:function(){var e=v(r.mark((function e(){var t;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.keys();case 2:if(!(t=e.sent)||!t.ak){e.next=7;break}return e.abrupt("return","002");case 7:return e.abrupt("return","001");case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"protocolVersion",value:function(){var e=v(r.mark((function e(){var t;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAuthParams();case 2:if(!(t=e.sent)||!t.version){e.next=5;break}return e.abrupt("return",t.version);case 5:return e.abrupt("return",this.defaultProtocolVersion());case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAuthParamsForEmail",value:function(){var e=v(r.mark((function e(t,n,a){var i,o=this;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=_.merge({email:n},a)).api=k.getApiVersion(),e.abrupt("return",new Promise((function(e,n){var r=t+"/auth/params";o.httpManager.getAbsolute(r,i,(function(t){e(t)}),(function(t){console.error("Error getting auth params",t),"object"!==p(t)&&(t={error:{message:"A server error occurred while trying to sign in. Please try again."}}),e(t)}))})));case 3:case"end":return e.stop()}}),e)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"lock",value:function(){this.locked=!0}},{key:"unlock",value:function(){this.locked=!1}},{key:"isLocked",value:function(){return 1==this.locked}},{key:"unlockAndResolve",value:function(e,t){this.unlock(),e(t)}},{key:"login",value:function(){var t=v(r.mark((function t(n,a,i,o,s){var c=this;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=v(r.mark((function t(u,l){var d,f,h,g,m,b,y,w,O,S,x,j;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.keys();case 2:if(null==t.sent){t.next=6;break}return u({error:{message:"Cannot log in because already signed in."}}),t.abrupt("return");case 6:if(!c.isLocked()){t.next=9;break}return u({error:{message:"Login already in progress."}}),t.abrupt("return");case 9:return c.lock(),c.notifyEvent(e.WillSignInEvent),t.next=13,c.getAuthParamsForEmail(n,a,s);case 13:if((d=t.sent).identifier=a,!d.error){t.next=18;break}return c.unlockAndResolve(u,d),t.abrupt("return");case 18:if(d&&d.pw_cost){t.next=21;break}return c.unlockAndResolve(u,{error:{message:"Invalid email or password."}}),t.abrupt("return");case 21:if(SFJS.supportedVersions().includes(d.version)){t.next=25;break}return f=SFJS.isVersionNewerThanLibraryVersion(d.version)?"This version of the application does not support your newer account type. Please upgrade to the latest version of Standard Notes to sign in.":"The protocol version associated with your account is outdated and no longer supported by this application. Please visit standardnotes.org/help/security for more information.",c.unlockAndResolve(u,{error:{message:f}}),t.abrupt("return");case 25:if(!SFJS.isProtocolVersionOutdated(d.version)){t.next=32;break}return h="The encryption version for your account, ".concat(d.version,", is outdated and requires upgrade. You may proceed with login, but are advised to perform a security update using the web or desktop application. Please visit standardnotes.org/help/security for more information."),g=!1,t.next=30,c.alertManager.confirm({title:"Update Needed",text:h,confirmButtonText:"Sign In"}).catch((function(){c.unlockAndResolve(u,{error:{}}),g=!0}));case 30:if(!g){t.next=32;break}return t.abrupt("return");case 32:if(SFJS.supportsPasswordDerivationCost(d.pw_cost)){t.next=36;break}return m="Your account was created on a platform with higher security capabilities than this browser supports. If we attempted to generate your login keys here, it would take hours. Please use a browser with more up to date security capabilities, like Google Chrome or Firefox, to log in.",c.unlockAndResolve(u,{error:{message:m}}),t.abrupt("return");case 36:if(b=SFJS.costMinimumForVersion(d.version),!(d.pw_cost<b)){t.next=41;break}return y="Unable to login due to insecure password parameters. Please visit standardnotes.org/help/security for more information.",c.unlockAndResolve(u,{error:{message:y}}),t.abrupt("return");case 41:if(!o){t.next=47;break}if(w=SFJS.version(),d.version===w){t.next=47;break}return O="Strict sign in refused server sign in parameters. The latest security version is ".concat(w,", but your account is reported to have version ").concat(d.version,". If you'd like to proceed with sign in anyway, please disable strict sign in and try again."),c.unlockAndResolve(u,{error:{message:O}}),t.abrupt("return");case 47:return t.next=49,SFJS.crypto.computeEncryptionKeysForUser(i,d);case 49:S=t.sent,x=n+"/auth/sign_in",(j=_.merge({password:S.pw,email:a},s)).api=k.getApiVersion(),c.httpManager.postAbsolute(x,j,function(){var t=v(r.mark((function t(i){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.handleAuthResponse(i,a,n,d,S);case 2:c.notifyEvent(e.DidSignInEvent),c.$timeout((function(){return c.unlockAndResolve(u,i)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(e){console.error("Error logging in",e),"object"!==p(e)&&(e={error:{message:"A server error occurred while trying to sign in. Please try again."}}),c.$timeout((function(){return c.unlockAndResolve(u,e)}))}));case 54:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));function n(e,n,r,a,i){return t.apply(this,arguments)}return n}()},{key:"register",value:function(e,t,n){var a=this;return new Promise(function(){var i=v(r.mark((function i(o,s){var c,u,l,d,f,h,g;return r.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!a.isLocked()){i.next=3;break}return o({error:{message:"Register already in progress."}}),i.abrupt("return");case 3:if(c=8,!(n.length<c)){i.next=8;break}return u="Your password must be at least ".concat(c," characters in length. For your security, please choose a longer password or, ideally, a passphrase, and try again."),o({error:{message:u}}),i.abrupt("return");case 8:return a.lock(),i.next=11,SFJS.crypto.generateInitialKeysAndAuthParamsForUser(t,n);case 11:l=i.sent,d=l.keys,f=l.authParams,h=e+"/auth",(g=_.merge({password:d.pw,email:t},f)).api=k.getApiVersion(),a.httpManager.postAbsolute(h,g,function(){var n=v(r.mark((function n(i){return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.handleAuthResponse(i,t,e,f,d);case 2:a.unlockAndResolve(o,i);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),(function(e){console.error("Registration error",e),"object"!==p(e)&&(e={error:{message:"A server error occurred while trying to register. Please try again."}}),a.unlockAndResolve(o,e)}));case 18:case"end":return i.stop()}}),i)})));return function(e,t){return i.apply(this,arguments)}}())}},{key:"changePassword",value:function(){var e=v(r.mark((function e(t,n,a,i,o){var s=this;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=v(r.mark((function e(c,u){var l,d,f;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.isLocked()){e.next=3;break}return c({error:{message:"Change password already in progress."}}),e.abrupt("return");case 3:s.lock(),l=i.pw,d=t+"/auth/change_pw",(f=_.merge({new_password:l,current_password:a},o)).api=k.getApiVersion(),s.httpManager.postAuthenticatedAbsolute(d,f,function(){var e=v(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.handleAuthResponse(t,n,null,o,i);case 2:s.unlockAndResolve(c,t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){"object"!==p(e)&&(e={error:{message:"Something went wrong while changing your password. Your password was not changed. Please try again."}}),s.unlockAndResolve(c,e)}));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));function t(t,n,r,a,i){return e.apply(this,arguments)}return t}()},{key:"handleAuthResponse",value:function(){var e=v(r.mark((function e(t,n,a,i,o){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=3;break}return e.next=3,this.storageManager.setItem("server",a);case 3:return this._authParams=i,e.next=6,this.storageManager.setItem("auth_params",JSON.stringify(i));case 6:return e.next=8,this.storageManager.setItem("jwt",t.token);case 8:return e.abrupt("return",this.saveKeys(o));case 9:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a,i){return e.apply(this,arguments)}return t}()}]),e}();a.SFAuthManager=w;var O="undefined"!==typeof window?window:"undefined"!==typeof e?e:null,k=function(){function e(t,n){g(this,e),this.$timeout=t||setTimeout.bind(O)}return b(e,null,[{key:"getApiVersion",value:function(){return"20190520"}}]),b(e,[{key:"setJWTRequestHandler",value:function(e){this.jwtRequestHandler=e}},{key:"setAuthHeadersForRequest",value:function(){var e=v(r.mark((function e(t){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.jwtRequestHandler();case 2:(n=e.sent)&&t.setRequestHeader("Authorization","Bearer "+n);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"postAbsolute",value:function(){var e=v(r.mark((function e(t,n,a,i){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.httpRequest("post",t,n,a,i));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"postAuthenticatedAbsolute",value:function(){var e=v(r.mark((function e(t,n,a,i){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.httpRequest("post",t,n,a,i,!0));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"patchAbsolute",value:function(){var e=v(r.mark((function e(t,n,a,i){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.httpRequest("patch",t,n,a,i));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"getAbsolute",value:function(){var e=v(r.mark((function e(t,n,a,i){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.httpRequest("get",t,n,a,i));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"httpRequest",value:function(){var e=v(r.mark((function e(t,n,a,i,o){var s,c=this,u=arguments;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=u.length>5&&void 0!==u[5]&&u[5],e.abrupt("return",new Promise(function(){var e=v(r.mark((function e(u,l){var d;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((d=new XMLHttpRequest).onreadystatechange=function(){if(4==d.readyState){var e=d.responseText;if(e)try{e=JSON.parse(e)}catch(t){}d.status>=200&&d.status<=299?c.$timeout((function(){i(e),u(e)})):(console.error("Request error:",e),c.$timeout((function(){o(e,d.status),l(e)})))}},"get"==t&&Object.keys(a).length>0&&(n=c.urlForUrlAndParams(n,a)),d.open(t,n,!0),d.setRequestHeader("Content-type","application/json"),!s){e.next=8;break}return e.next=8,c.setAuthHeadersForRequest(d);case 8:"post"==t||"patch"==t?d.send(JSON.stringify(a)):d.send();case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));function t(t,n,r,a,i){return e.apply(this,arguments)}return t}()},{key:"urlForUrlAndParams",value:function(e,t){var n=Object.keys(t).map((function(e){return e+"="+encodeURIComponent(t[e])})).join("&");return e.includes("?")?e+"&"+n:e+"?"+n}}]),e}();a.SFHttpManager=k;var S=function(){function e(t,n,a,i){var o=this;g(this,e),this.modelManager=t,this.syncManager=n,this.storageManager=a,this.completionHandlers=[],this.loadMigrations();var s=!1,c=i.addEventHandler((function(e){e==w.DidSignInEvent&&(s=!0)}));this.receivedLocalDataEvent=n.initialDataLoaded(),this.syncManager.addEventHandler(function(){var e=v(r.mark((function e(t,n){var a,u,l,d,f,p,h,v,g;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u="sync:completed"==t,!(a="local-data-loaded"==t)&&!u){e.next=40;break}if(a?o.receivedLocalDataEvent=!0:u&&(o.receivedSyncCompletedEvent=!0),!o.receivedLocalDataEvent||!o.receivedSyncCompletedEvent){e.next=40;break}if(!s){e.next=39;break}return s=!1,i.removeEventHandler(c),e.next=10,o.getCompletedMigrations();case 10:l=e.sent.slice(),d=!0,f=!1,p=void 0,e.prev=14,h=l[Symbol.iterator]();case 16:if(d=(v=h.next()).done){e.next=25;break}return g=v.value,e.next=20,o.migrationForEncodedName(g);case 20:e.sent.runOnlyOnce||_.pull(o._completed,g);case 22:d=!0,e.next=16;break;case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(14),f=!0,p=e.t0;case 31:e.prev=31,e.prev=32,d||null==h.return||h.return();case 34:if(e.prev=34,!f){e.next=37;break}throw p;case 37:return e.finish(34);case 38:return e.finish(31);case 39:o.runPendingMigrations();case 40:case"end":return e.stop()}}),e,null,[[14,27,31,39],[32,,34,38]])})));return function(t,n){return e.apply(this,arguments)}}())}return b(e,[{key:"addCompletionHandler",value:function(e){this.completionHandlers.push(e)}},{key:"removeCompletionHandler",value:function(e){_.pull(this.completionHandlers,e)}},{key:"migrationForEncodedName",value:function(){var e=v(r.mark((function e(t){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.decode(t);case 2:return n=e.sent,e.abrupt("return",this.migrations.find((function(e){return e.name==n})));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"loadMigrations",value:function(){this.migrations=this.registeredMigrations()}},{key:"registeredMigrations",value:function(){}},{key:"runPendingMigrations",value:function(){var e=v(r.mark((function e(){var t,n,a,i,o,s,c,u,l,d,f,p,h,v,g,m,b,y,w,O,k,S,x,j,_,C,E,I;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getPendingMigrations();case 2:for(t=e.sent,n=!0,a=!1,i=void 0,e.prev=6,o=t[Symbol.iterator]();!(n=(s=o.next()).done);n=!0)(c=s.value).items=[];e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),a=!0,i=e.t0;case 14:e.prev=14,e.prev=15,n||null==o.return||o.return();case 17:if(e.prev=17,!a){e.next=20;break}throw i;case 20:return e.finish(17);case 21:return e.finish(14);case 22:u=!0,l=!1,d=void 0,e.prev=25,f=this.modelManager.allNondummyItems[Symbol.iterator]();case 27:if(u=(p=f.next()).done){e.next=51;break}for(h=p.value,v=!0,g=!1,m=void 0,e.prev=32,b=t[Symbol.iterator]();!(v=(y=b.next()).done);v=!0)c=y.value,h.content_type==c.content_type&&c.items.push(h);e.next=40;break;case 36:e.prev=36,e.t1=e.catch(32),g=!0,m=e.t1;case 40:e.prev=40,e.prev=41,v||null==b.return||b.return();case 43:if(e.prev=43,!g){e.next=46;break}throw m;case 46:return e.finish(43);case 47:return e.finish(40);case 48:u=!0,e.next=27;break;case 51:e.next=57;break;case 53:e.prev=53,e.t2=e.catch(25),l=!0,d=e.t2;case 57:e.prev=57,e.prev=58,u||null==f.return||f.return();case 60:if(e.prev=60,!l){e.next=63;break}throw d;case 63:return e.finish(60);case 64:return e.finish(57);case 65:w=!0,O=!1,k=void 0,e.prev=68,S=t[Symbol.iterator]();case 70:if(w=(x=S.next()).done){e.next=81;break}if(!((c=x.value).items&&c.items.length>0||c.customHandler)){e.next=77;break}return e.next=75,this.runMigration(c,c.items);case 75:e.next=78;break;case 77:this.markMigrationCompleted(c);case 78:w=!0,e.next=70;break;case 81:e.next=87;break;case 83:e.prev=83,e.t3=e.catch(68),O=!0,k=e.t3;case 87:e.prev=87,e.prev=88,w||null==S.return||S.return();case 90:if(e.prev=90,!O){e.next=93;break}throw k;case 93:return e.finish(90);case 94:return e.finish(87);case 95:for(j=!0,_=!1,C=void 0,e.prev=98,E=this.completionHandlers[Symbol.iterator]();!(j=(I=E.next()).done);j=!0)(0,I.value)();e.next=106;break;case 102:e.prev=102,e.t4=e.catch(98),_=!0,C=e.t4;case 106:e.prev=106,e.prev=107,j||null==E.return||E.return();case 109:if(e.prev=109,!_){e.next=112;break}throw C;case 112:return e.finish(109);case 113:return e.finish(106);case 114:case"end":return e.stop()}}),e,this,[[6,10,14,22],[15,,17,21],[25,53,57,65],[32,36,40,48],[41,,43,47],[58,,60,64],[68,83,87,95],[88,,90,94],[98,102,106,114],[107,,109,113]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"encode",value:function(){var e=v(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.btoa(t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"decode",value:function(){var e=v(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.atob(t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getCompletedMigrations",value:function(){var e=v(r.mark((function e(){var t;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._completed){e.next=5;break}return e.next=3,this.storageManager.getItem("migrations");case 3:t=e.sent,this._completed=t?JSON.parse(t):[];case 5:return e.abrupt("return",this._completed);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getPendingMigrations",value:function(){var e=v(r.mark((function e(){var t,n,a,i,o,s,c,u;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCompletedMigrations();case 2:t=e.sent,n=[],a=!0,i=!1,o=void 0,e.prev=7,s=this.migrations[Symbol.iterator]();case 9:if(a=(c=s.next()).done){e.next=22;break}return u=c.value,e.t0=t,e.next=14,this.encode(u.name);case 14:if(e.t1=e.sent,e.t2=e.t0.indexOf.call(e.t0,e.t1),e.t3=-1,e.t2!=e.t3){e.next=19;break}n.push(u);case 19:a=!0,e.next=9;break;case 22:e.next=28;break;case 24:e.prev=24,e.t4=e.catch(7),i=!0,o=e.t4;case 28:e.prev=28,e.prev=29,a||null==s.return||s.return();case 31:if(e.prev=31,!i){e.next=34;break}throw o;case 34:return e.finish(31);case 35:return e.finish(28);case 36:return e.abrupt("return",n);case 37:case"end":return e.stop()}}),e,this,[[7,24,28,36],[29,,31,35]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"markMigrationCompleted",value:function(){var e=v(r.mark((function e(t){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCompletedMigrations();case 2:return n=e.sent,e.t0=n,e.next=6,this.encode(t.name);case 6:e.t1=e.sent,e.t0.push.call(e.t0,e.t1),this.storageManager.setItem("migrations",JSON.stringify(n)),t.running=!1;case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"runMigration",value:function(){var e=v(r.mark((function e(t,n){var a=this;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.running){e.next=2;break}return e.abrupt("return");case 2:if(console.log("Running migration:",t.name),t.running=!0,!t.customHandler){e.next=8;break}return e.abrupt("return",t.customHandler().then((function(){a.markMigrationCompleted(t)})));case 8:return e.abrupt("return",t.handler(n).then((function(){a.markMigrationCompleted(t)})));case 9:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),e}();a.SFMigrationManager=S;var x=function(){function e(t){g(this,e),e.MappingSourceRemoteRetrieved="MappingSourceRemoteRetrieved",e.MappingSourceRemoteSaved="MappingSourceRemoteSaved",e.MappingSourceLocalSaved="MappingSourceLocalSaved",e.MappingSourceLocalRetrieved="MappingSourceLocalRetrieved",e.MappingSourceLocalDirtied="MappingSourceLocalDirtied",e.MappingSourceComponentRetrieved="MappingSourceComponentRetrieved",e.MappingSourceDesktopInstalled="MappingSourceDesktopInstalled",e.MappingSourceRemoteActionRetrieved="MappingSourceRemoteActionRetrieved",e.MappingSourceFileImport="MappingSourceFileImport",e.isMappingSourceRetrieved=function(t){return[e.MappingSourceRemoteRetrieved,e.MappingSourceComponentRetrieved,e.MappingSourceRemoteActionRetrieved].includes(t)},this.$timeout=t||setTimeout.bind(window),this.itemSyncObservers=[],this.items=[],this.itemsHash={},this.missedReferences={},this.uuidChangeObservers=[]}return b(e,[{key:"handleSignout",value:function(){this.items.length=0,this.itemsHash={},this.missedReferences={}}},{key:"addModelUuidChangeObserver",value:function(e,t){this.uuidChangeObservers.push({id:e,callback:t})}},{key:"notifyObserversOfUuidChange",value:function(e,t){var n=!0,r=!1,a=void 0;try{for(var i,o=this.uuidChangeObservers[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;try{s.callback(e,t)}catch(c){console.error("Notify observers of uuid change exception:",c)}}}catch(u){r=!0,a=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}}},{key:"alternateUUIDForItem",value:function(){var t=v(r.mark((function t(n){var a,i,o,s,c,u,l;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=this.createItem(n),t.next=3,SFJS.crypto.generateUUID();case 3:for(a.uuid=t.sent,a.informReferencesOfUUIDChange(n.uuid,a.uuid),this.informModelsOfUUIDChangeForItem(a,n.uuid,a.uuid),i=!0,o=!1,s=void 0,t.prev=9,c=n.referencingObjects[Symbol.iterator]();!(i=(u=c.next()).done);i=!0)(l=u.value).setIsNoLongerBeingReferencedBy(n),n.setIsNoLongerBeingReferencedBy(l),l.addItemAsRelationship(a);t.next=17;break;case 13:t.prev=13,t.t0=t.catch(9),o=!0,s=t.t0;case 17:t.prev=17,t.prev=18,i||null==c.return||c.return();case 20:if(t.prev=20,!o){t.next=23;break}throw s;case 23:return t.finish(20);case 24:return t.finish(17);case 25:return this.setItemsDirty(n.referencingObjects,!0),this.resolveReferencesForItem(a),this.loggingEnabled&&console.log(n.uuid,"--\x3e",a.uuid),n.deleted=!0,n.content.references=[],this.setItemDirty(n,!1,!1,e.MappingSourceLocalSaved),t.next=33,this.mapResponseItemsToLocalModels([n],e.MappingSourceLocalSaved);case 33:return this.addItem(a),this.setItemDirty(a,!0,!0,e.MappingSourceLocalSaved),this.notifyObserversOfUuidChange(n,a),t.abrupt("return",a);case 37:case"end":return t.stop()}}),t,this,[[9,13,17,25],[18,,20,24]])})));function n(e){return t.apply(this,arguments)}return n}()},{key:"informModelsOfUUIDChangeForItem",value:function(e,t,n){var r=!0,a=!1,i=void 0;try{for(var o,s=this.items[Symbol.iterator]();!(r=(o=s.next()).done);r=!0)o.value.potentialItemOfInterestHasChangedItsUUID(e,t,n)}catch(c){a=!0,i=c}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}}},{key:"didSyncModelsOffline",value:function(t){this.notifySyncObserversOfModels(t,e.MappingSourceLocalSaved)}},{key:"mapResponseItemsToLocalModels",value:function(){var e=v(r.mark((function e(t,n,a){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.mapResponseItemsToLocalModelsWithOptions({items:t,source:n,sourceKey:a}));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"mapResponseItemsToLocalModelsOmittingFields",value:function(){var e=v(r.mark((function e(t,n,a,i){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.mapResponseItemsToLocalModelsWithOptions({items:t,omitFields:n,source:a,sourceKey:i}));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"mapResponseItemsToLocalModelsWithOptions",value:function(){var e=v(r.mark((function e(t){var n,a,i,o,s,c,l,d,f,p,h,v,g,m,b,y,w,O,k,S,x,j,_,C,E,I,P,M,A,T,D,R,B,L,F,H,z,N,U;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.items,a=t.omitFields,i=t.source,o=t.sourceKey,t.options,s=[],c=[],l=[],d=!0,f=!1,p=void 0,e.prev=5,h=n[Symbol.iterator]();case 7:if(d=(v=h.next()).done){e.next=58;break}if(g=v.value){e.next=11;break}return e.abrupt("continue",55);case 11:if(m=!g.content&&!g.errorDecrypting,g.content_type&&g.uuid&&!m||g.deleted){e.next=16;break}return console.error("Server response item is corrupt:",g),e.abrupt("continue",55);case 16:if(!Array.isArray(a)){e.next=36;break}for(b=!0,y=!1,w=void 0,e.prev=20,O=a[Symbol.iterator]();!(b=(k=O.next()).done);b=!0)S=k.value,delete g[S];e.next=28;break;case 24:e.prev=24,e.t0=e.catch(20),y=!0,w=e.t0;case 28:e.prev=28,e.prev=29,b||null==O.return||O.return();case 31:if(e.prev=31,!y){e.next=34;break}throw w;case 34:return e.finish(31);case 35:return e.finish(28);case 36:if((x=this.findItem(g.uuid))&&(x.updateFromJSON(g),x.dummy=!1),j=g.content_type||x&&x.content_type,!this.acceptableContentTypes||this.acceptableContentTypes.includes(j)){e.next=42;break}return e.abrupt("continue",55);case 42:if(_=!1,1!=g.deleted){e.next=50;break}if(!g.dirty){e.next=48;break}_=!0,e.next=50;break;case 48:return x&&(s.push(x),l.push(x),this.removeItemLocally(x)),e.abrupt("continue",55);case 50:x||(x=this.createItem(g)),this.addItem(x,_),x.errorDecrypting||l.push(x),s.push(x),c.push(g);case 55:d=!0,e.next=7;break;case 58:e.next=64;break;case 60:e.prev=60,e.t1=e.catch(5),f=!0,p=e.t1;case 64:e.prev=64,e.prev=65,d||null==h.return||h.return();case 67:if(e.prev=67,!f){e.next=70;break}throw p;case 70:return e.finish(67);case 71:return e.finish(64);case 72:for(C=!0,E=!1,I=void 0,e.prev=75,P=c.entries()[Symbol.iterator]();!(C=(M=P.next()).done);C=!0)A=u(M.value,2),T=A[0],D=A[1],R=s[T],D.content&&this.resolveReferencesForItem(R),R.didFinishSyncing();e.next=83;break;case 79:e.prev=79,e.t2=e.catch(75),E=!0,I=e.t2;case 83:e.prev=83,e.prev=84,C||null==P.return||P.return();case 86:if(e.prev=86,!E){e.next=89;break}throw I;case 89:return e.finish(86);case 90:return e.finish(83);case 91:for(B=this.popMissedReferenceStructsForObjects(c),L=!0,F=!1,H=void 0,e.prev=95,z=function(){var e=U.value,t=s.find((function(t){return t.uuid==e.reference_uuid}));t&&e.for_item.addItemAsRelationship(t)},N=B[Symbol.iterator]();!(L=(U=N.next()).done);L=!0)z();e.next=104;break;case 100:e.prev=100,e.t3=e.catch(95),F=!0,H=e.t3;case 104:e.prev=104,e.prev=105,L||null==N.return||N.return();case 107:if(e.prev=107,!F){e.next=110;break}throw H;case 110:return e.finish(107);case 111:return e.finish(104);case 112:return e.next=114,this.notifySyncObserversOfModels(l,i,o);case 114:return e.abrupt("return",s);case 115:case"end":return e.stop()}}),e,this,[[5,60,64,72],[20,24,28,36],[29,,31,35],[65,,67,71],[75,79,83,91],[84,,86,90],[95,100,104,112],[105,,107,111]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"missedReferenceBuildKey",value:function(e,t){return"".concat(e,":").concat(t)}},{key:"popMissedReferenceStructsForObjects",value:function(e){if(!e||0==e.length)return[];for(var t=[],n=[],r=e.map((function(e){return e.uuid})),a=r[0].length,i=0,o=Object.keys(this.missedReferences);i<o.length;i++){var s=o[i];r.includes(s.substring(0,a))&&(t.push(this.missedReferences[s]),n.push(s))}for(var c=0,u=n;c<u.length;c++){var l=u[c];delete this.missedReferences[l]}return t}},{key:"resolveReferencesForItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.errorDecrypting){var n=e.contentObject;if(e.updateLocalRelationships(),n.references){var r=n.references.slice().map((function(e){return e.uuid})),a=!0,i=this.findItems(r,a),o=!0,s=!1,c=void 0;try{for(var l,d=i.entries()[Symbol.iterator]();!(o=(l=d.next()).done);o=!0){var f=u(l.value,2),p=f[0],h=f[1];if(h)e.addItemAsRelationship(h),t&&this.setItemDirty(h,!0);else{var v=r[p],g=this.missedReferenceBuildKey(v,e.uuid);if(!this.missedReferences[g]){var m={reference_uuid:v,for_item:e};this.missedReferences[g]=m}}}}catch(b){s=!0,c=b}finally{try{o||null==d.return||d.return()}finally{if(s)throw c}}}}}},{key:"notifySyncObserversOfModels",value:function(){var e=v(r.mark((function e(t,n,a){var i,o,s,c,u,l,d,f=this;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=this.itemSyncObservers.sort((function(e,t){return e.priority<t.priority?-1:1})),o=!0,s=!1,c=void 0,e.prev=4,u=r.mark((function e(){var i,o,s,c,u,l,p,h,v,g;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=d.value,o=i.types.includes("*")?t:t.filter((function(e){return i.types.includes(e.content_type)})),s=[],c=[],u=!0,l=!1,p=void 0,e.prev=6,h=o[Symbol.iterator]();!(u=(v=h.next()).done);u=!0)(g=v.value).deleted?c.push(g):s.push(g);e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),l=!0,p=e.t0;case 14:e.prev=14,e.prev=15,u||null==h.return||h.return();case 17:if(e.prev=17,!l){e.next=20;break}throw p;case 20:return e.finish(17);case 21:return e.finish(14);case 22:if(!(o.length>0)){e.next=25;break}return e.next=25,f._callSyncObserverCallbackWithTimeout(i,o,s,c,n,a);case 25:case"end":return e.stop()}}),e,null,[[6,10,14,22],[15,,17,21]])})),l=i[Symbol.iterator]();case 7:if(o=(d=l.next()).done){e.next=12;break}return e.delegateYield(u(),"t0",9);case 9:o=!0,e.next=7;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(4),s=!0,c=e.t1;case 18:e.prev=18,e.prev=19,o||null==l.return||l.return();case 21:if(e.prev=21,!s){e.next=24;break}throw c;case 24:return e.finish(21);case 25:return e.finish(18);case 26:case"end":return e.stop()}}),e,this,[[4,14,18,26],[19,,21,25]])})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"_callSyncObserverCallbackWithTimeout",value:function(){var e=v(r.mark((function e(t,n,a,i,o,s){var c=this;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){c.$timeout((function(){try{t.callback(n,a,i,o,s)}catch(r){console.error("Sync observer exception",r)}finally{e()}}))})));case 1:case"end":return e.stop()}}),e)})));function t(t,n,r,a,i,o){return e.apply(this,arguments)}return t}()},{key:"setItemDirty",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;this.setItemsDirty([e],t,n,r,a)}},{key:"setItemsDirty",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=!0,s=!1,c=void 0;try{for(var u,l=t[Symbol.iterator]();!(o=(u=l.next()).done);o=!0)u.value.setDirty(n,r)}catch(d){s=!0,c=d}finally{try{o||null==l.return||l.return()}finally{if(s)throw c}}this.notifySyncObserversOfModels(t,a||e.MappingSourceLocalDirtied,i)}},{key:"createItem",value:function(t){var n=e.ContentTypeClassMapping&&e.ContentTypeClassMapping[t.content_type];return n||(n=R),new n(t)}},{key:"createDuplicateItemFromResponseItem",value:function(){var e=v(r.mark((function e(t){var n,a;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!==typeof t.setDirty){e.next=3;break}return console.error("Attempting to create conflicted copy of non-response item."),e.abrupt("return",null);case 3:return n=JSON.parse(JSON.stringify(t)),e.next=6,SFJS.crypto.generateUUID();case 6:return n.uuid=e.sent,a=this.createItem(n),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"duplicateItemAndAddAsConflict",value:function(e){return this.duplicateItemWithCustomContentAndAddAsConflict({content:e.content,duplicateOf:e})}},{key:"duplicateItemWithCustomContentAndAddAsConflict",value:function(e){var t=e.content,n=e.duplicateOf,r=this.duplicateItemWithCustomContent({content:t,duplicateOf:n});return this.addDuplicatedItemAsConflict({duplicate:r,duplicateOf:n}),r}},{key:"addDuplicatedItemAsConflict",value:function(e){var t=e.duplicate,n=e.duplicateOf;this.addDuplicatedItem(t,n),t.content.conflict_of=n.uuid}},{key:"duplicateItemWithCustomContent",value:function(e){var t=e.content,n=e.duplicateOf,r=new n.constructor({content:t});return r.created_at=n.created_at,r.content_type||(r.content_type=n.content_type),r}},{key:"duplicateItemAndAdd",value:function(e){var t=this.duplicateItemWithoutAdding(e);return this.addDuplicatedItem(t,e),t}},{key:"duplicateItemWithoutAdding",value:function(e){var t=new e.constructor({content:e.content});return t.created_at=e.created_at,t.content_type||(t.content_type=e.content_type),t}},{key:"addDuplicatedItem",value:function(e,t){this.addItem(e);var n=!0,r=!1,a=void 0;try{for(var i,o=t.referencingObjects[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;s.addItemAsRelationship(e),this.setItemDirty(s,!0)}}catch(c){r=!0,a=c}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}this.resolveReferencesForItem(e),this.setItemDirty(e,!0)}},{key:"addItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.addItems([e],t)}},{key:"addItems",value:function(e){var t=this;e.forEach((function(e){t.itemsHash[e.uuid]||(t.itemsHash[e.uuid]=e,t.items.push(e))}))}},{key:"addItemSyncObserver",value:function(e,t,n){this.addItemSyncObserverWithPriority({id:e,types:t,callback:n,priority:1})}},{key:"addItemSyncObserverWithPriority",value:function(e){var t=e.id,n=e.priority,r=e.types,a=e.callback;Array.isArray(r)||(r=[r]),this.itemSyncObservers.push({id:t,types:r,priority:n,callback:a})}},{key:"removeItemSyncObserver",value:function(e){_.remove(this.itemSyncObservers,_.find(this.itemSyncObservers,{id:e}))}},{key:"getDirtyItems",value:function(){return this.items.filter((function(e){return 1==e.dirty&&!e.dummy&&(!e.errorDecrypting||e.deleted)}))}},{key:"clearDirtyItems",value:function(e){var t=!0,n=!1,r=void 0;try{for(var a,i=e[Symbol.iterator]();!(t=(a=i.next()).done);t=!0)a.value.setDirty(!1)}catch(o){n=!0,r=o}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}},{key:"removeAndDirtyAllRelationshipsForItem",value:function(e){if(!e.errorDecrypting){var t=!0,n=!1,r=void 0;try{for(var a,i=e.content.references[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value,s=this.findItem(o.uuid);s&&(e.removeItemAsRelationship(s),s.hasRelationshipWithItem(e)&&(s.removeItemAsRelationship(e),this.setItemDirty(s,!0)))}}catch(h){n=!0,r=h}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}var c=!0,u=!1,l=void 0;try{for(var d,f=e.referencingObjects[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var p=d.value;p.removeItemAsRelationship(e),this.setItemDirty(p,!0)}}catch(h){u=!0,l=h}finally{try{c||null==f.return||f.return()}finally{if(u)throw l}}e.referencingObjects=[]}},{key:"setAllItemsDirty",value:function(){var e=this.allItems;this.setItemsDirty(e,!0)}},{key:"setItemToBeDeleted",value:function(e){e.deleted=!0,e.dummy||this.setItemDirty(e,!0),this.removeAndDirtyAllRelationshipsForItem(e)}},{key:"removeItemLocally",value:function(){var e=v(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_.remove(this.items,{uuid:t.uuid}),delete this.itemsHash[t.uuid],t.isBeingRemovedLocally();case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"allItemsMatchingTypes",value:function(e){return this.allItems.filter((function(t){return(_.includes(e,t.content_type)||_.includes(e,"*"))&&!t.dummy}))}},{key:"invalidItems",value:function(){return this.allItems.filter((function(e){return e.errorDecrypting}))}},{key:"validItemsForContentType",value:function(e){return this.allItems.filter((function(t){return t.content_type==e&&!t.errorDecrypting}))}},{key:"findItem",value:function(e){return this.itemsHash[e]}},{key:"findItems",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value,u=this.itemsHash[c];(u||t)&&n.push(u)}}catch(l){a=!0,i=l}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}},{key:"itemsMatchingPredicate",value:function(e){return this.itemsMatchingPredicates([e])}},{key:"itemsMatchingPredicates",value:function(e){return this.filterItemsWithPredicates(this.allItems,e)}},{key:"filterItemsWithPredicates",value:function(e,t){return e.filter((function(e){var n=!0,r=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;if(!e.satisfiesPredicate(s))return!1}}catch(c){r=!0,a=c}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}return!0}))}},{key:"importItems",value:function(){var t=v(r.mark((function t(n){var a,i,o,s,c,u,l,d,f,p,h,v,g,m,b,y,w,O,k,S,x,j,_,C,E,I,P;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=[],i={},o=!0,s=!1,c=void 0,t.prev=5,u=n[Symbol.iterator]();case 7:if(o=(l=u.next()).done){t.next=18;break}if(d=l.value,f=this.findItem(d.uuid)){t.next=13;break}return i[d.uuid]={},t.abrupt("continue",15);case 13:p=this.duplicateItemWithoutAdding(f),i[d.uuid]={frozenValue:p,itemRef:f};case 15:o=!0,t.next=7;break;case 18:t.next=24;break;case 20:t.prev=20,t.t0=t.catch(5),s=!0,c=t.t0;case 24:t.prev=24,t.prev=25,o||null==u.return||u.return();case 27:if(t.prev=27,!s){t.next=30;break}throw c;case 30:return t.finish(27);case 31:return t.finish(24);case 32:h=!0,v=!1,g=void 0,t.prev=35,m=n[Symbol.iterator]();case 37:if(h=(b=m.next()).done){t.next=52;break}if(y=b.value,w=i[y.uuid],O=w.frozenValue,k=w.itemRef,!O||k.errorDecrypting){t.next=47;break}return t.next=43,this.createDuplicateItemFromResponseItem(y);case 43:S=t.sent,y.deleted||O.isItemContentEqualWith(S)||(this.addDuplicatedItemAsConflict({duplicate:S,duplicateOf:k}),a.push(S)),t.next=49;break;case 47:a.push(y),k&&k.errorDecrypting&&(k.errorDecrypting=!1);case 49:h=!0,t.next=37;break;case 52:t.next=58;break;case 54:t.prev=54,t.t1=t.catch(35),v=!0,g=t.t1;case 58:t.prev=58,t.prev=59,h||null==m.return||m.return();case 61:if(t.prev=61,!v){t.next=64;break}throw g;case 64:return t.finish(61);case 65:return t.finish(58);case 66:return t.next=68,this.mapResponseItemsToLocalModels(a,e.MappingSourceFileImport);case 68:for(x=t.sent,j=!0,_=!1,C=void 0,t.prev=72,E=x[Symbol.iterator]();!(j=(I=E.next()).done);j=!0)P=I.value,this.setItemDirty(P,!0,!1),P.deleted=!1;t.next=80;break;case 76:t.prev=76,t.t2=t.catch(72),_=!0,C=t.t2;case 80:t.prev=80,t.prev=81,j||null==E.return||E.return();case 83:if(t.prev=83,!_){t.next=86;break}throw C;case 86:return t.finish(83);case 87:return t.finish(80);case 88:return t.abrupt("return",x);case 89:case"end":return t.stop()}}),t,this,[[5,20,24,32],[25,,27,31],[35,54,58,66],[59,,61,65],[72,76,80,88],[81,,83,87]])})));function n(e){return t.apply(this,arguments)}return n}()},{key:"getAllItemsJSONData",value:function(){var e=v(r.mark((function e(t,n,a){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getJSONDataForItems(this.allItems,t,n,a));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"getJSONDataForItems",value:function(){var e=v(r.mark((function e(t,n,a,i){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.map((function(e){return new B(e,n,a).paramsForExportFile()}))).then((function(e){if(i&&0==e.length)return null;var t={items:e};return n&&(t.auth_params=a),JSON.stringify(t,null,2)})));case 1:case"end":return e.stop()}}),e)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"computeDataIntegrityHash",value:function(){var e=v(r.mark((function e(){var t,n,a,i;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.allNondummyItems.sort((function(e,t){return t.updated_at-e.updated_at})),n=t.map((function(e){return e.updatedAtTimestamp()})),a=n.join(","),e.next=6,SFJS.crypto.sha256(a);case 6:return i=e.sent,e.abrupt("return",i);case 10:return e.prev=10,e.t0=e.catch(0),console.error("Error computing data integrity hash",e.t0),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"allItems",get:function(){return this.items.slice()}},{key:"allNondummyItems",get:function(){return this.items.filter((function(e){return!e.dummy}))}}]),e}();a.SFModelManager=x;var j=function(){function e(t,n,r){g(this,e),this.modelManager=t,this.syncManager=n,this.singletonManager=r,this.loadPrivileges(),e.CredentialAccountPassword="CredentialAccountPassword",e.CredentialLocalPasscode="CredentialLocalPasscode",e.ActionManageExtensions="ActionManageExtensions",e.ActionManageBackups="ActionManageBackups",e.ActionViewProtectedNotes="ActionViewProtectedNotes",e.ActionManagePrivileges="ActionManagePrivileges",e.ActionManagePasscode="ActionManagePasscode",e.ActionDeleteNote="ActionDeleteNote",e.SessionExpiresAtKey="SessionExpiresAtKey",e.SessionLengthKey="SessionLengthKey",e.SessionLengthNone=0,e.SessionLengthFiveMinutes=300,e.SessionLengthOneHour=3600,e.SessionLengthOneWeek=604800,this.availableActions=[e.ActionViewProtectedNotes,e.ActionDeleteNote,e.ActionManagePasscode,e.ActionManageBackups,e.ActionManageExtensions,e.ActionManagePrivileges],this.availableCredentials=[e.CredentialAccountPassword,e.CredentialLocalPasscode],this.sessionLengths=[e.SessionLengthNone,e.SessionLengthFiveMinutes,e.SessionLengthOneHour,e.SessionLengthOneWeek,e.SessionLengthIndefinite]}return b(e,[{key:"setDelegate",value:function(e){this.delegate=e}},{key:"getAvailableActions",value:function(){return this.availableActions}},{key:"getAvailableCredentials",value:function(){return this.availableCredentials}},{key:"netCredentialsForAction",value:function(){var t=v(r.mark((function t(n){var a,i,o,s,c,u,l,d;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getPrivileges();case 2:t.t0=n,a=t.sent.getCredentialsForAction(t.t0),i=[],o=!0,s=!1,c=void 0,t.prev=8,u=a[Symbol.iterator]();case 10:if(o=(l=u.next()).done){t.next=27;break}if((d=l.value)!=e.CredentialAccountPassword){t.next=19;break}return t.next=15,this.delegate.isOffline();case 15:t.sent||i.push(d),t.next=24;break;case 19:if(d!=e.CredentialLocalPasscode){t.next=24;break}return t.next=22,this.delegate.hasLocalPasscode();case 22:t.sent&&i.push(d);case 24:o=!0,t.next=10;break;case 27:t.next=33;break;case 29:t.prev=29,t.t1=t.catch(8),s=!0,c=t.t1;case 33:t.prev=33,t.prev=34,o||null==u.return||u.return();case 36:if(t.prev=36,!s){t.next=39;break}throw c;case 39:return t.finish(36);case 40:return t.finish(33);case 41:return t.abrupt("return",i);case 42:case"end":return t.stop()}}),t,this,[[8,29,33,41],[34,,36,40]])})));function n(e){return t.apply(this,arguments)}return n}()},{key:"loadPrivileges",value:function(){var e=v(r.mark((function e(){var t=this;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loadPromise){e.next=2;break}return e.abrupt("return",this.loadPromise);case 2:return this.loadPromise=new Promise((function(e,n){var a=F.contentType(),i=new L("content_type","=",a);t.singletonManager.registerSingleton([i],(function(n){t.privileges=n,e(n)}),function(){var n=v(r.mark((function n(i){var o;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=new F({content_type:a}),SFJS.crypto.generateUUIDSync){n.next=4;break}return n.next=4,o.initUUID();case 4:t.modelManager.addItem(o),t.modelManager.setItemDirty(o,!0),t.syncManager.sync(),i(o),e(o);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())})),e.abrupt("return",this.loadPromise);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getPrivileges",value:function(){var e=v(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.privileges){e.next=4;break}return e.abrupt("return",this.privileges);case 4:return e.abrupt("return",this.loadPrivileges());case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"displayInfoForCredential",value:function(t){var n={};return n[e.CredentialAccountPassword]={label:"Account Password",prompt:"Please enter your account password."},n[e.CredentialLocalPasscode]={label:"Local Passcode",prompt:"Please enter your local passcode."},n[t]}},{key:"displayInfoForAction",value:function(t){var n={};return n[e.ActionManageExtensions]={label:"Manage Extensions"},n[e.ActionManageBackups]={label:"Download/Import Backups"},n[e.ActionViewProtectedNotes]={label:"View Protected Notes"},n[e.ActionManagePrivileges]={label:"Manage Privileges"},n[e.ActionManagePasscode]={label:"Manage Passcode"},n[e.ActionDeleteNote]={label:"Delete Notes"},n[t]}},{key:"getSessionLengthOptions",value:function(){return[{value:e.SessionLengthNone,label:"Don't Remember"},{value:e.SessionLengthFiveMinutes,label:"5 Minutes"},{value:e.SessionLengthOneHour,label:"1 Hour"},{value:e.SessionLengthOneWeek,label:"1 Week"}]}},{key:"setSessionLength",value:function(){var t=v(r.mark((function t(n){var a;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=function(e){var t=new Date;return t.setSeconds(t.getSeconds()+e),t}(n),t.abrupt("return",Promise.all([this.delegate.saveToStorage(e.SessionExpiresAtKey,JSON.stringify(a)),this.delegate.saveToStorage(e.SessionLengthKey,JSON.stringify(n))]));case 3:case"end":return t.stop()}}),t,this)})));function n(e){return t.apply(this,arguments)}return n}()},{key:"clearSession",value:function(){var t=v(r.mark((function t(){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.setSessionLength(e.SessionLengthNone));case 1:case"end":return t.stop()}}),t,this)})));function n(){return t.apply(this,arguments)}return n}()},{key:"getSelectedSessionLength",value:function(){var t=v(r.mark((function t(){var n;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.delegate.getFromStorage(e.SessionLengthKey);case 2:if(!(n=t.sent)){t.next=7;break}return t.abrupt("return",JSON.parse(n));case 7:return t.abrupt("return",e.SessionLengthNone);case 8:case"end":return t.stop()}}),t,this)})));function n(){return t.apply(this,arguments)}return n}()},{key:"getSessionExpirey",value:function(){var t=v(r.mark((function t(){var n;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.delegate.getFromStorage(e.SessionExpiresAtKey);case 2:if(!(n=t.sent)){t.next=7;break}return t.abrupt("return",new Date(JSON.parse(n)));case 7:return t.abrupt("return",new Date);case 8:case"end":return t.stop()}}),t,this)})));function n(){return t.apply(this,arguments)}return n}()},{key:"actionHasPrivilegesConfigured",value:function(){var e=v(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.netCredentialsForAction(t);case 2:return e.t0=e.sent.length,e.abrupt("return",e.t0>0);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"actionRequiresPrivilege",value:function(){var e=v(r.mark((function e(t){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSessionExpirey();case 2:if(!(e.sent>new Date)){e.next=5;break}return e.abrupt("return",!1);case 5:return e.next=7,this.netCredentialsForAction(t);case 7:return n=e.sent,e.abrupt("return",n.length>0);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"savePrivileges",value:function(){var e=v(r.mark((function e(){var t;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getPrivileges();case 2:t=e.sent,this.modelManager.setItemDirty(t,!0),this.syncManager.sync();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"authenticateAction",value:function(){var e=v(r.mark((function e(t,n){var a,i,o,s,c,u,l,d,f;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.netCredentialsForAction(t);case 2:a=e.sent,i=[],o=[],s=!0,c=!1,u=void 0,e.prev=7,l=a[Symbol.iterator]();case 9:if(s=(d=l.next()).done){e.next=18;break}return f=d.value,e.next=13,this._verifyAuthenticationParameters(f,n[f]);case 13:e.sent?i.push(f):o.push(f);case 15:s=!0,e.next=9;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(7),c=!0,u=e.t0;case 24:e.prev=24,e.prev=25,s||null==l.return||l.return();case 27:if(e.prev=27,!c){e.next=30;break}throw u;case 30:return e.finish(27);case 31:return e.finish(24);case 32:return e.abrupt("return",{success:0==o.length,successfulCredentials:i,failedCredentials:o});case 33:case"end":return e.stop()}}),e,this,[[7,20,24,32],[25,,27,31]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"_verifyAuthenticationParameters",value:function(){var t=v(r.mark((function t(n,a){var i,o,s=this;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=function(){var e=v(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.delegate.verifyAccountPassword(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=v(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.delegate.verifyLocalPasscode(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n!=e.CredentialAccountPassword){t.next=6;break}return t.abrupt("return",i(a));case 6:if(n!=e.CredentialLocalPasscode){t.next=8;break}return t.abrupt("return",o(a));case 8:case"end":return t.stop()}}),t)})));function n(e,n){return t.apply(this,arguments)}return n}()}]),e}();a.SFPrivilegesManager=j;var C="sessionHistory_persist",E="sessionHistory_revisions",I="sessionHistory_autoOptimize",P=function(){function e(t,n,r,a,i){var o=this;g(this,e),this.modelManager=t,this.storageManager=n,this.$timeout=i||setTimeout.bind(window),this.keyRequestHandler=r,this.loadFromDisk().then((function(){o.modelManager.addItemSyncObserver("session-history",a,(function(e,t,n,r,a){if(r!==x.MappingSourceLocalDirtied){var i=!0,s=!1,c=void 0;try{for(var u,l=e[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var d=u.value;try{o.addHistoryEntryForItem(d)}catch(f){console.log("Caught exception while trying to add item history entry",f)}}}catch(p){s=!0,c=p}finally{try{i||null==l.return||l.return()}finally{if(s)throw c}}}}))}))}return b(e,[{key:"encryptionParams",value:function(){var e=v(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.keyRequestHandler());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"addHistoryEntryForItem",value:function(e){var t=this,n={uuid:e.uuid,content_type:e.content_type,updated_at:e.updated_at,content:e.getContentCopy()},r=this.historySession.addEntryForItem(n);this.autoOptimize&&this.historySession.optimizeHistoryForItem(e),r&&this.diskEnabled&&(this.diskTimeout&&(this.$timeout.hasOwnProperty("cancel")?this.$timeout.cancel(this.diskTimeout):clearTimeout(this.diskTimeout)),this.diskTimeout=this.$timeout((function(){t.saveToDisk()}),2e3))}},{key:"historyForItem",value:function(e){return this.historySession.historyForItem(e)}},{key:"clearHistoryForItem",value:function(){var e=v(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.historySession.clearItemHistory(t),e.abrupt("return",this.saveToDisk());case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"clearAllHistory",value:function(){var e=v(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.historySession.clearAllHistory(),e.abrupt("return",this.storageManager.removeItem(E));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"toggleDiskSaving",value:function(){var e=v(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.diskEnabled=!this.diskEnabled,!this.diskEnabled){e.next=6;break}this.storageManager.setItem(C,JSON.stringify(!0)),this.saveToDisk(),e.next=8;break;case 6:return this.storageManager.setItem(C,JSON.stringify(!1)),e.abrupt("return",this.storageManager.removeItem(E));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"saveToDisk",value:function(){var e=v(r.mark((function e(){var t,n=this;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.diskEnabled){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.encryptionParams();case 4:t=e.sent,new B(this.historySession,t.keys,t.auth_params).paramsForSync().then((function(e){n.storageManager.setItem(E,JSON.stringify(e))}));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadFromDisk",value:function(){var e=v(r.mark((function e(){var t,n,a,i,o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storageManager.getItem(C);case 2:return(t=e.sent)&&(this.diskEnabled=JSON.parse(t)),e.next=6,this.storageManager.getItem(E);case 6:if(!(n=e.sent)){e.next=18;break}return n=JSON.parse(n),e.next=11,this.encryptionParams();case 11:return a=e.sent,e.next=14,SFJS.itemTransformer.decryptItem(n,a.keys);case 14:i=new H(n),this.historySession=i,e.next=19;break;case 18:this.historySession=new H;case 19:return e.next=21,this.storageManager.getItem(I);case 21:o=e.sent,this.autoOptimize=!o||JSON.parse(o);case 23:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"toggleAutoOptimize",value:function(){var e=v(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.autoOptimize=!this.autoOptimize,this.autoOptimize?this.storageManager.setItem(I,JSON.stringify(!0)):this.storageManager.setItem(I,JSON.stringify(!1));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}();a.SFSessionHistoryManager=P;var M=function(){function e(t,n){var r=this;g(this,e),this.syncManager=n,this.modelManager=t,this.singletonHandlers=[],t.addItemSyncObserverWithPriority({id:"sf-singleton-manager",types:"*",priority:-1,callback:function(e,n,a,i,o){i!==x.MappingSourceLocalDirtied&&r.resolveSingletons(t.allNondummyItems,null,!0)}}),n.addEventHandler((function(e,n){if("local-data-loaded"==e)r.resolveSingletons(t.allNondummyItems,null,!0),r.initialDataLoaded=!0;else if("sync:completed"==e){if(!r.initialDataLoaded)return;r.resolveSingletons(n.retrievedItems,n.savedItems)}})),t.addModelUuidChangeObserver("singleton-manager",(function(e,t){var n=!0,a=!1,i=void 0;try{for(var o,s=r.singletonHandlers[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var c=o.value;c.singleton&&L.ItemSatisfiesPredicates(t,c.predicates)&&(c.singleton=null,r.resolveSingletons([t]))}}catch(u){a=!0,i=u}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}}))}return b(e,[{key:"registerSingleton",value:function(e,t,n){this.singletonHandlers.push({predicates:e,resolutionCallback:t,createBlock:n})}},{key:"resolveSingletons",value:function(e,t,n){var r=this;e=e||[],t=t||[];var a=!0,i=!1,o=void 0;try{for(var s,c=function(){var a=s.value,i=a.predicates.slice(),o=r.modelManager.filterItemsWithPredicates(e,i),c=function(){a.createBlock&&(a.pendingCreateBlockCallback=!0,a.createBlock((function(e){a.singleton=e,a.pendingCreateBlockCallback=!1,a.resolutionCallback&&a.resolutionCallback(e)})))},u=r.modelManager.filterItemsWithPredicates(t,i).length;if(o.length>0||u>0){var l=r.modelManager.itemsMatchingPredicates(i);if(l.length>=2){var d=l.sort((function(e,t){return e.errorDecrypting?1:t.errorDecrypting||e.created_at<t.created_at?-1:1})),f=d[0],p=d.slice(1,d.length),h=!0,v=!1,g=void 0;try{for(var m,b=p[Symbol.iterator]();!(h=(m=b.next()).done);h=!0){var y=m.value;r.modelManager.setItemToBeDeleted(y)}}catch(O){v=!0,g=O}finally{try{h||null==b.return||b.return()}finally{if(v)throw g}}r.syncManager.sync(),a.singleton=f,a.resolutionCallback&&a.resolutionCallback(f)}else if(1==l.length){var w=l[0];w.errorDecrypting?(r.modelManager.setItemToBeDeleted(w),c()):a.singleton&&a.singleton===w||(a.singleton=w,a.resolutionCallback&&a.resolutionCallback(w))}}else a.singleton||n||a.pendingCreateBlockCallback||c()},u=this.singletonHandlers[Symbol.iterator]();!(a=(s=u.next()).done);a=!0)c()}catch(l){i=!0,o=l}finally{try{a||null==u.return||u.return()}finally{if(i)throw o}}}}]),e}();a.SFSingletonManager=M;var A=function(){function e(){g(this,e)}return b(e,[{key:"setItem",value:function(){var e=v(r.mark((function e(t,n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getItem",value:function(){var e=v(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"removeItem",value:function(){var e=v(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"clear",value:function(){var e=v(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAllModels",value:function(){var e=v(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"saveModel",value:function(){var e=v(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.saveModels([t]));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"saveModels",value:function(){var e=v(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteModel",value:function(){var e=v(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"clearAllModels",value:function(){var e=v(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearAllData",value:function(){var e=v(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([this.clear(),this.clearAllModels()]));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}();a.SFStorageManager=A;var T,D=function(){function e(t,n,r,a,i){g(this,e),e.KeyRequestLoadLocal="KeyRequestLoadLocal",e.KeyRequestSaveLocal="KeyRequestSaveLocal",e.KeyRequestLoadSaveAccount="KeyRequestLoadSaveAccount",this.httpManager=r,this.modelManager=t,this.storageManager=n,this.$interval=i||setInterval.bind(window),this.$timeout=a||setTimeout.bind(window),this.syncStatus={},this.syncStatusObservers=[],this.eventHandlers=[],this.PerSyncItemUploadLimit=150,this.ServerItemDownloadLimit=150,this.MajorDataChangeThreshold=15,this.MaxDiscordanceBeforeOutOfSync=5,this.syncDiscordance=0,this.outOfSync=!1}return b(e,[{key:"handleServerIntegrityHash",value:function(){var e=v(r.mark((function e(t){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&0!=t.length){e.next=2;break}return e.abrupt("return",!0);case 2:return e.next=4,this.modelManager.computeDataIntegrityHash();case 4:if(n=e.sent){e.next=7;break}return e.abrupt("return",!0);case 7:if(n===t){e.next=13;break}return this.syncDiscordance++,this.syncDiscordance>=this.MaxDiscordanceBeforeOutOfSync&&(this.outOfSync||(this.outOfSync=!0,this.notifyEvent("enter-out-of-sync"))),e.abrupt("return",!1);case 13:return this.outOfSync&&(this.outOfSync=!1,this.notifyEvent("exit-out-of-sync")),this.syncDiscordance=0,e.abrupt("return",!0);case 16:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"isOutOfSync",value:function(){return this.outOfSync}},{key:"getServerURL",value:function(){var e=v(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storageManager.getItem("server");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=window._default_sf_server;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getSyncURL",value:function(){var e=v(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getServerURL();case 2:return e.t0=e.sent,e.abrupt("return",e.t0+"/items/sync");case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"registerSyncStatusObserver",value:function(e){var t={key:new Date,callback:e};return this.syncStatusObservers.push(t),t}},{key:"removeSyncStatusObserver",value:function(e){_.pull(this.syncStatusObservers,e)}},{key:"syncStatusDidChange",value:function(){var e=this;this.syncStatusObservers.forEach((function(t){t.callback(e.syncStatus)}))}},{key:"addEventHandler",value:function(e){return this.eventHandlers.push(e),e}},{key:"removeEventHandler",value:function(e){_.pull(this.eventHandlers,e)}},{key:"notifyEvent",value:function(e,t){var n=!0,r=!1,a=void 0;try{for(var i,o=this.eventHandlers[Symbol.iterator]();!(n=(i=o.next()).done);n=!0)(0,i.value)(e,t||{})}catch(s){r=!0,a=s}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}}},{key:"setKeyRequestHandler",value:function(e){this.keyRequestHandler=e}},{key:"getActiveKeyInfo",value:function(){var e=v(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.keyRequestHandler(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"initialDataLoaded",value:function(){return!0===this._initialDataLoaded}},{key:"_sortLocalItems",value:function(e){var t=this;return e.sort((function(e,n){var r=new Date(n.updated_at)-new Date(e.updated_at),a=t.contentTypeLoadPriority,i=0,o=0;return a&&(i=a.indexOf(e.content_type),o=a.indexOf(n.content_type),-1==i&&(i=a.length),-1==o&&(o=a.length)),i==o?r:i<o?-1:1}))}},{key:"loadLocalItems",value:function(){var t=v(r.mark((function t(){var n,a,i,o,s,c=this,u=arguments;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=u.length>0&&void 0!==u[0]?u[0]:{},a=n.incrementalCallback,i=n.batchSize,!(o=n.options)||!o.simulateHighLatency){t.next=5;break}return s=o.simulatedLatency||1e3,t.next=5,this._awaitSleep(s);case 5:if(!this.loadLocalDataPromise){t.next=7;break}return t.abrupt("return",this.loadLocalDataPromise);case 7:return i||(i=100),this.loadLocalDataPromise=this.storageManager.getAllModels().then((function(t){var n=(t=(t=c._sortLocalItems(t)).filter((function(e){var t=c.modelManager.findItem(e.uuid);return!t||new Date(e.dirtiedDate)>t.dirtiedDate}))).length,o=0,s=[],u=function(){var l=v(r.mark((function l(){var d,f;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return d=t.slice(o,o+i),r.next=3,c.handleItemsResponse(d,null,x.MappingSourceLocalRetrieved,e.KeyRequestLoadLocal);case 3:if(f=r.sent,s.push(f),!((o+=d.length)<n)){r.next=10;break}return r.abrupt("return",new Promise((function(e,t){c.$timeout((function(){c.notifyEvent("local-data-incremental-load"),a&&a(o,n),u().then(e)}))})));case 10:c._initialDataLoaded=!0,c.notifyEvent("local-data-loaded");case 12:case"end":return r.stop()}}),l)})));return function(){return l.apply(this,arguments)}}();return u()})),t.abrupt("return",this.loadLocalDataPromise);case 10:case"end":return t.stop()}}),t,this)})));function n(){return t.apply(this,arguments)}return n}()},{key:"writeItemsToLocalStorage",value:function(){var t=v(r.mark((function t(n,a){var i=this;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=n.length){t.next=2;break}return t.abrupt("return");case 2:return t.abrupt("return",new Promise(function(){var t=v(r.mark((function t(o,s){var c,u,l,d,f,p,h,g,m,b;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(c=[],u=[],l=!0,d=!1,f=void 0,t.prev=4,p=n[Symbol.iterator]();!(l=(h=p.next()).done);l=!0)!0!==(g=h.value).deleted||g.dirty?c.push(g):u.push(g);t.next=12;break;case 8:t.prev=8,t.t0=t.catch(4),d=!0,f=t.t0;case 12:t.prev=12,t.prev=13,l||null==p.return||p.return();case 15:if(t.prev=15,!d){t.next=18;break}throw f;case 18:return t.finish(15);case 19:return t.finish(12);case 20:if(!(u.length>0)){t.next=23;break}return t.next=23,Promise.all(u.map(function(){var e=v(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.storageManager.deleteModel(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 23:return t.next=25,i.getActiveKeyInfo(e.KeyRequestSaveLocal);case 25:if(m=t.sent,!(c.length>0)){t.next=33;break}return t.next=29,Promise.all(c.map(function(){var e=v(r.mark((function e(t){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new B(t,m.keys,m.auth_params),e.next=3,n.paramsForLocalStorage();case 3:return n=e.sent,a&&delete n.dirty,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).catch((function(e){return s(e)}));case 29:return b=t.sent,t.next=32,i.storageManager.saveModels(b).catch((function(e){console.error("Error writing items",e),i.syncStatus.localError=e,i.syncStatusDidChange(),s()}));case 32:i.syncStatus.localError&&(i.syncStatus.localError=null,i.syncStatusDidChange());case 33:o();case 34:case"end":return t.stop()}}),t,null,[[4,8,12,20],[13,,15,19]])})));return function(e,n){return t.apply(this,arguments)}}()));case 3:case"end":return t.stop()}}),t)})));function n(e,n){return t.apply(this,arguments)}return n}()},{key:"syncOffline",value:function(){var e=v(r.mark((function e(t){var n,a,i,o,s,c=this;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=!0,a=!1,i=void 0,e.prev=3,o=t[Symbol.iterator]();!(n=(s=o.next()).done);n=!0)s.value.updated_at=new Date;e.next=11;break;case 7:e.prev=7,e.t0=e.catch(3),a=!0,i=e.t0;case 11:e.prev=11,e.prev=12,n||null==o.return||o.return();case 14:if(e.prev=14,!a){e.next=17;break}throw i;case 17:return e.finish(14);case 18:return e.finish(11);case 19:return e.abrupt("return",this.writeItemsToLocalStorage(t,!0).then((function(e){var n=!0,r=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;s.deleted&&c.modelManager.removeItemLocally(s)}}catch(u){r=!0,a=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}return c.modelManager.clearDirtyItems(t),c.modelManager.didSyncModelsOffline(t),c.notifyEvent("sync:completed",{savedItems:t}),{saved_items:t}})));case 20:case"end":return e.stop()}}),e,this,[[3,7,11,19],[12,,14,18]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"markAllItemsDirtyAndSaveOffline",value:function(){var e=v(r.mark((function e(t){var n,a,i,o,s,c,u,l,d,f,p,h,v;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=28;break}n=this.modelManager.allNondummyItems.filter((function(e){return!e.errorDecrypting})).slice(),a=!0,i=!1,o=void 0,e.prev=5,s=n[Symbol.iterator]();case 7:if(a=(c=s.next()).done){e.next=14;break}return u=c.value,e.next=11,this.modelManager.alternateUUIDForItem(u);case 11:a=!0,e.next=7;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(5),i=!0,o=e.t0;case 20:e.prev=20,e.prev=21,a||null==s.return||s.return();case 23:if(e.prev=23,!i){e.next=26;break}throw o;case 26:return e.finish(23);case 27:return e.finish(20);case 28:for(l=this.modelManager.allNondummyItems,d=!0,f=!1,p=void 0,e.prev=32,h=l[Symbol.iterator]();!(d=(v=h.next()).done);d=!0)v.value.setDirty(!0);e.next=40;break;case 36:e.prev=36,e.t1=e.catch(32),f=!0,p=e.t1;case 40:e.prev=40,e.prev=41,d||null==h.return||h.return();case 43:if(e.prev=43,!f){e.next=46;break}throw p;case 46:return e.finish(43);case 47:return e.finish(40);case 48:return e.abrupt("return",this.writeItemsToLocalStorage(l,!1));case 49:case"end":return e.stop()}}),e,this,[[5,16,20,28],[21,,23,27],[32,36,40,48],[41,,43,47]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setSyncToken",value:function(){var e=v(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._syncToken=t,e.next=3,this.storageManager.setItem("syncToken",t);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSyncToken",value:function(){var e=v(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._syncToken){e.next=4;break}return e.next=3,this.storageManager.getItem("syncToken");case 3:this._syncToken=e.sent;case 4:return e.abrupt("return",this._syncToken);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setCursorToken",value:function(){var e=v(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._cursorToken=t,!t){e.next=6;break}return e.next=4,this.storageManager.setItem("cursorToken",t);case 4:e.next=8;break;case 6:return e.next=8,this.storageManager.removeItem("cursorToken");case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getCursorToken",value:function(){var e=v(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._cursorToken){e.next=4;break}return e.next=3,this.storageManager.getItem("cursorToken");case 3:this._cursorToken=e.sent;case 4:return e.abrupt("return",this._cursorToken);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearQueuedCallbacks",value:function(){this._queuedCallbacks=[]}},{key:"callQueuedCallbacks",value:function(e){var t=this.queuedCallbacks;if(t.length){var n=!0,r=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0)(0,i.value)(e)}catch(s){r=!0,a=s}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}this.clearQueuedCallbacks()}}},{key:"beginCheckingIfSyncIsTakingTooLong",value:function(){this.syncStatus.checker&&this.stopCheckingIfSyncIsTakingTooLong(),this.syncStatus.checker=this.$interval(function(){(new Date-this.syncStatus.syncStart)/1e3>5&&(this.notifyEvent("sync:taking-too-long"),this.stopCheckingIfSyncIsTakingTooLong())}.bind(this),500)}},{key:"stopCheckingIfSyncIsTakingTooLong",value:function(){this.$interval.hasOwnProperty("cancel")?this.$interval.cancel(this.syncStatus.checker):clearInterval(this.syncStatus.checker),this.syncStatus.checker=null}},{key:"lockSyncing",value:function(){this.syncLocked=!0}},{key:"unlockSyncing",value:function(){this.syncLocked=!1}},{key:"sync",value:function(){var t=v(r.mark((function t(){var n,a=this,i=arguments;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.length>0&&void 0!==i[0]?i[0]:{},!this.syncLocked){t.next=4;break}return console.log("Sync Locked, Returning;"),t.abrupt("return");case 4:return t.abrupt("return",new Promise(function(){var t=v(r.mark((function t(i,o){var s,c,u,l,d,f,p,h,v,g,m,b,y,w;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n||(n={}),s=a.modelManager.getDirtyItems(),c=s.filter((function(e){return!a.lastDirtyItemsSave||e.dirtiedDate>a.lastDirtyItemsSave})),t.next=5,a.getActiveKeyInfo(e.KeyRequestLoadSaveAccount);case 5:if(u=t.sent,l=a.syncStatus.syncOpInProgress,d=a.initialDataLoaded(),!l&&d){t.next=16;break}return a.performSyncAgainOnCompletion=!0,a.lastDirtyItemsSave=new Date,t.next=13,a.writeItemsToLocalStorage(c,!1);case 13:return l&&(a.queuedCallbacks.push(i),a.loggingEnabled&&console.warn("Attempting to sync while existing sync is in progress.")),d||(a.loggingEnabled&&console.warn("(1) Attempting to perform online sync before local data has loaded"),i()),t.abrupt("return");case 16:if(a.syncStatus.syncOpInProgress=!0,!u.offline){t.next=19;break}return t.abrupt("return",a.syncOffline(s).then((function(e){a.syncStatus.syncOpInProgress=!1,i(e)})).catch((function(e){a.notifyEvent("sync-exception",e)})));case 19:if(a.initialDataLoaded()){t.next=22;break}return console.error("Attempting to perform online sync before local data has loaded"),t.abrupt("return");case 22:return a.loggingEnabled&&console.log("Syncing online user."),f=a.syncStatus.needsMoreSync,a.syncStatus.syncStart=new Date,a.beginCheckingIfSyncIsTakingTooLong(),p=a.PerSyncItemUploadLimit,(h=s.slice(0,p)).length<s.length?a.syncStatus.needsMoreSync=!0:a.syncStatus.needsMoreSync=!1,f||(a.syncStatus.total=s.length,a.syncStatus.current=0),a.syncStatus.current>a.syncStatus.total&&(a.syncStatus.total=a.syncStatus.current),a.syncStatusDidChange(),t.next=34,a.writeItemsToLocalStorage(c,!1);case 34:return a.lastDirtyItemsSave=new Date,n.onPreSyncSave&&n.onPreSyncSave(),a.allRetreivedItems||(a.allRetreivedItems=[]),a.allSavedItems||(a.allSavedItems=[]),(v={}).limit=a.ServerItemDownloadLimit,n.performIntegrityCheck&&(v.compute_integrity=!0),t.prev=41,t.next=44,Promise.all(h.map((function(e){var t=new B(e,u.keys,u.auth_params);return t.additionalFields=n.additionalFields,t.paramsForSync()}))).then((function(e){v.items=e}));case 44:t.next=49;break;case 46:t.prev=46,t.t0=t.catch(41),a.notifyEvent("sync-exception",t.t0);case 49:for(g=!0,m=!1,b=void 0,t.prev=52,y=h[Symbol.iterator]();!(g=(w=y.next()).done);g=!0)w.value.dirtyCount=0;t.next=60;break;case 56:t.prev=56,t.t1=t.catch(52),m=!0,b=t.t1;case 60:t.prev=60,t.prev=61,g||null==y.return||y.return();case 63:if(t.prev=63,!m){t.next=66;break}throw b;case 66:return t.finish(63);case 67:return t.finish(60);case 68:return t.next=70,a.getSyncToken();case 70:return v.sync_token=t.sent,t.next=73,a.getCursorToken();case 73:return v.cursor_token=t.sent,v.api=k.getApiVersion(),a.loggingEnabled&&console.log("Syncing with params",v),t.prev=76,t.t2=a.httpManager,t.next=80,a.getSyncURL();case 80:t.t3=t.sent,t.t4=v,t.t5=function(e){a.handleSyncSuccess(h,e,n).then((function(){i(e)})).catch((function(e){console.log("Caught sync success exception:",e),a.handleSyncError(e,null,s).then((function(t){a.notifyEvent("sync-exception",e),i(t)}))}))},t.t6=function(e,t){a.handleSyncError(e,t,s).then((function(e){i(e)}))},t.t2.postAuthenticatedAbsolute.call(t.t2,t.t3,t.t4,t.t5,t.t6),t.next=90;break;case 87:t.prev=87,t.t7=t.catch(76),console.log("Sync exception caught:",t.t7);case 90:case"end":return t.stop()}}),t,null,[[41,46],[52,56,60,68],[61,,63,67],[76,87]])})));return function(e,n){return t.apply(this,arguments)}}()));case 5:case"end":return t.stop()}}),t,this)})));function n(){return t.apply(this,arguments)}return n}()},{key:"_awaitSleep",value:function(){var e=v(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.warn("Simulating high latency sync request",t),e.abrupt("return",new Promise((function(e,n){setTimeout((function(){e()}),t)})));case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleSyncSuccess",value:function(){var t=v(r.mark((function t(n,a,i){var o,s,c,u,l,d,f,p,h,v,g,m,b,y,w,O,k=this;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i.simulateHighLatency){t.next=4;break}return o=i.simulatedLatency||1e3,t.next=4,this._awaitSleep(o);case 4:for(this.syncStatus.error=null,this.loggingEnabled&&console.log("Sync response",a),s=this.allSavedItems.map((function(e){return e.uuid})),c=a.saved_items.map((function(e){return e.uuid})),a.retrieved_items=a.retrieved_items.filter((function(e){var t=s.includes(e.uuid),n=c.includes(e.uuid);if(t||n)return!1;var r=k.modelManager.findItem(e.uuid);return!r||!r.dirty})),u=[],l=!0,d=!1,f=void 0,t.prev=13,p=n[Symbol.iterator]();!(l=(h=p.next()).done);l=!0)0==(v=h.value).dirtyCount&&u.push(v);t.next=21;break;case 17:t.prev=17,t.t0=t.catch(13),d=!0,f=t.t0;case 21:t.prev=21,t.prev=22,l||null==p.return||p.return();case 24:if(t.prev=24,!d){t.next=27;break}throw f;case 27:return t.finish(24);case 28:return t.finish(21);case 29:return this.modelManager.clearDirtyItems(u),t.next=32,this.handleItemsResponse(a.retrieved_items,null,x.MappingSourceRemoteRetrieved,e.KeyRequestLoadSaveAccount);case 32:return g=t.sent,this.allRetreivedItems=this.allRetreivedItems.concat(g),this.syncStatus.retrievedCount=this.allRetreivedItems.length,m=["content","auth_hash"],t.next=38,this.handleItemsResponse(a.saved_items,m,x.MappingSourceRemoteSaved,e.KeyRequestLoadSaveAccount);case 38:return b=t.sent,this.allSavedItems=this.allSavedItems.concat(b),y=a.unsaved,t.next=43,this.deprecated_handleUnsavedItemsResponse(y);case 43:return t.next=45,this.handleConflictsResponse(a.conflicts);case 45:if(w=t.sent,O=w&&w.length>0,!w){t.next=50;break}return t.next=50,this.writeItemsToLocalStorage(w,!1);case 50:return t.next=52,this.writeItemsToLocalStorage(b,!1);case 52:return t.next=54,this.writeItemsToLocalStorage(g,!1);case 54:if(!a.integrity_hash||a.cursor_token){t.next=59;break}return t.next=57,this.handleServerIntegrityHash(a.integrity_hash);case 57:t.sent||this.syncDiscordance<this.MaxDiscordanceBeforeOutOfSync&&(this.performSyncAgainOnCompletion=!0);case 59:return this.syncStatus.syncOpInProgress=!1,this.syncStatus.current+=n.length,this.syncStatusDidChange(),this.setSyncToken(a.sync_token),this.setCursorToken(a.cursor_token),this.stopCheckingIfSyncIsTakingTooLong(),t.next=67,this.getCursorToken();case 67:if(!t.sent&&!this.syncStatus.needsMoreSync){t.next=72;break}return t.abrupt("return",new Promise((function(e,t){setTimeout(function(){this.sync(i).then(e)}.bind(k),10)})));case 72:if(!O){t.next=77;break}return this.performSyncAgainOnCompletion=!1,t.abrupt("return",new Promise((function(e,t){setTimeout((function(){k.sync(i).then(e)}),10)})));case 77:return this.syncStatus.retrievedCount=0,this.syncStatus.current=0,this.syncStatus.total=0,this.syncStatusDidChange(),(this.allRetreivedItems.length>=this.majorDataChangeThreshold||b.length>=this.majorDataChangeThreshold||y&&y.length>=this.majorDataChangeThreshold||w&&w.length>=this.majorDataChangeThreshold)&&this.notifyEvent("major-data-change"),this.callQueuedCallbacks(a),this.notifyEvent("sync:completed",{retrievedItems:this.allRetreivedItems,savedItems:this.allSavedItems}),this.allRetreivedItems=[],this.allSavedItems=[],this.performSyncAgainOnCompletion&&(this.performSyncAgainOnCompletion=!1,setTimeout((function(){k.sync(i)}),10)),t.abrupt("return",a);case 88:case"end":return t.stop()}}),t,this,[[13,17,21,29],[22,,24,28]])})));function n(e,n,r){return t.apply(this,arguments)}return n}()},{key:"handleSyncError",value:function(){var e=v(r.mark((function e(t,n,a){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Sync error: ",t),401==n&&this.notifyEvent("sync-session-invalid"),t?"string"==typeof t&&(t={error:{message:t}}):t={error:{message:"Could not connect to server."}},this.syncStatus.syncOpInProgress=!1,this.syncStatus.error=t.error,this.syncStatusDidChange(),this.writeItemsToLocalStorage(a,!1),this.modelManager.didSyncModelsOffline(a),this.stopCheckingIfSyncIsTakingTooLong(),this.notifyEvent("sync:error",t.error),this.callQueuedCallbacks({error:"Sync error"}),e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"handleItemsResponse",value:function(){var e=v(r.mark((function e(t,n,a,i){var o,s,c;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getActiveKeyInfo(i);case 2:return o=e.sent.keys,e.next=5,SFJS.itemTransformer.decryptMultipleItems(t,o);case 5:return e.next=7,this.modelManager.mapResponseItemsToLocalModelsOmittingFields(t,n,a);case 7:return s=e.sent,(c=s.filter((function(e){var t=e.errorDecryptingValueChanged;return e.errorDecryptingValueChanged=!1,t}))).length>0&&this.writeItemsToLocalStorage(c,!1),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"refreshErroredItems",value:function(){var t=v(r.mark((function t(){var n;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((n=this.modelManager.allNondummyItems.filter((function(e){return 1==e.errorDecrypting}))).length>0)){t.next=3;break}return t.abrupt("return",this.handleItemsResponse(n,null,x.MappingSourceLocalRetrieved,e.KeyRequestLoadSaveAccount));case 3:case"end":return t.stop()}}),t,this)})));function n(){return t.apply(this,arguments)}return n}()},{key:"handleConflictsResponse",value:function(){var t=v(r.mark((function t(n){var a,i,o,s,c,u,l,d,f,p,h,v,g,m,b,y,w,O,k,S,j,_,C,E,I,P,M,A,T,D,B,L;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&0!=n.length){t.next=2;break}return t.abrupt("return");case 2:this.loggingEnabled&&console.log("Handle Conflicted Items:",n),a={},i=!0,o=!1,s=void 0,t.prev=7,c=n[Symbol.iterator]();case 9:if(i=(u=c.next()).done){t.next=21;break}if(l=u.value,d=l.server_item||l.unsaved_item,f=this.modelManager.findItem(d.uuid)){t.next=16;break}return a[d.uuid]={},t.abrupt("continue",18);case 16:p=f.getContentCopy(),a[d.uuid]={frozenContent:p,itemRef:f};case 18:i=!0,t.next=9;break;case 21:t.next=27;break;case 23:t.prev=23,t.t0=t.catch(7),o=!0,s=t.t0;case 27:t.prev=27,t.prev=28,i||null==c.return||c.return();case 30:if(t.prev=30,!o){t.next=33;break}throw s;case 33:return t.finish(30);case 34:return t.finish(27);case 35:h=[],v=!0,g=!1,m=void 0,t.prev=39,b=n[Symbol.iterator]();case 41:if(v=(y=b.next()).done){t.next=91;break}return w=y.value,O=w.server_item||w.unsaved_item,t.t1=SFJS.itemTransformer,t.t2=[O],t.next=48,this.getActiveKeyInfo(e.KeyRequestLoadSaveAccount);case 48:return t.t3=t.sent.keys,t.next=51,t.t1.decryptMultipleItems.call(t.t1,t.t2,t.t3);case 51:if(k=a[O.uuid],S=k.frozenContent,j=k.itemRef){t.next=54;break}return t.abrupt("continue",88);case 54:if(h.push(j),"uuid_conflict"!==w.type){t.next=62;break}return t.next=58,this.modelManager.alternateUUIDForItem(j);case 58:_=t.sent,h.push(_),t.next=88;break;case 62:if("sync_conflict"!==w.type){t.next=86;break}return t.next=65,this.modelManager.createDuplicateItemFromResponseItem(O);case 65:if(C=t.sent,E=this.modelManager.duplicateItemWithCustomContent({content:S,duplicateOf:j}),I=!E.isItemContentEqualWith(C),P=!j.isItemContentEqualWith(C),M=!1,A=!1,T=!1,D=!1,O.deleted||j.deleted?D=!0:I?(B=20,(new Date-j.client_updated_at)/1e3<B?(T=!0,A=!0):(M=!0,D=!0)):P?R.AreItemContentsEqual({leftContent:j.content,rightContent:C.content,keysToIgnore:j.keysToIgnoreWhenCheckingContentEquality().concat(["references"]),appDataKeysToIgnore:j.appDataKeysToIgnoreWhenCheckingContentEquality()})?T=!0:(M=!0,D=!0):D=!0,!M){t.next=79;break}return t.next=77,this.modelManager.duplicateItemWithCustomContentAndAddAsConflict({content:S,duplicateOf:j});case 77:L=t.sent,h.push(L);case 79:if(A&&(this.modelManager.addDuplicatedItemAsConflict({duplicate:C,duplicateOf:j}),h.push(C)),!D){t.next=83;break}return t.next=83,this.modelManager.mapResponseItemsToLocalModelsOmittingFields([O],null,x.MappingSourceRemoteRetrieved);case 83:T&&(j.updated_at=C.updated_at,j.setDirty(!0)),t.next=88;break;case 86:return console.error("Unsupported conflict type",w.type),t.abrupt("continue",88);case 88:v=!0,t.next=41;break;case 91:t.next=97;break;case 93:t.prev=93,t.t4=t.catch(39),g=!0,m=t.t4;case 97:t.prev=97,t.prev=98,v||null==b.return||b.return();case 100:if(t.prev=100,!g){t.next=103;break}throw m;case 103:return t.finish(100);case 104:return t.finish(97);case 105:return t.abrupt("return",h);case 106:case"end":return t.stop()}}),t,this,[[7,23,27,35],[28,,30,34],[39,93,97,105],[98,,100,104]])})));function n(e){return t.apply(this,arguments)}return n}()},{key:"deprecated_handleUnsavedItemsResponse",value:function(){var t=v(r.mark((function t(n){var a,i,o,s,c,u,l,d,f,p;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&0!=n.length){t.next=2;break}return t.abrupt("return");case 2:this.loggingEnabled&&console.log("Handle Unsaved Items:",n),a=!0,i=!1,o=void 0,t.prev=6,s=n[Symbol.iterator]();case 8:if(a=(c=s.next()).done){t.next=35;break}return u=c.value,l=u.item,t.t0=SFJS.itemTransformer,t.t1=[l],t.next=15,this.getActiveKeyInfo(e.KeyRequestLoadSaveAccount);case 15:return t.t2=t.sent.keys,t.next=18,t.t0.decryptMultipleItems.call(t.t0,t.t1,t.t2);case 18:if(d=this.modelManager.findItem(l.uuid)){t.next=21;break}return t.abrupt("continue",32);case 21:if("uuid_conflict"!==(f=u.error).tag){t.next=27;break}return t.next=25,this.modelManager.alternateUUIDForItem(d);case 25:t.next=32;break;case 27:if("sync_conflict"!==f.tag){t.next=32;break}return t.next=30,this.modelManager.createDuplicateItemFromResponseItem(l);case 30:p=t.sent,l.deleted||d.isItemContentEqualWith(p)||this.modelManager.addDuplicatedItemAsConflict({duplicate:p,duplicateOf:d});case 32:a=!0,t.next=8;break;case 35:t.next=41;break;case 37:t.prev=37,t.t3=t.catch(6),i=!0,o=t.t3;case 41:t.prev=41,t.prev=42,a||null==s.return||s.return();case 44:if(t.prev=44,!i){t.next=47;break}throw o;case 47:return t.finish(44);case 48:return t.finish(41);case 49:case"end":return t.stop()}}),t,this,[[6,37,41,49],[42,,44,48]])})));function n(e){return t.apply(this,arguments)}return n}()},{key:"stateless_downloadAllItems",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(){var a=v(r.mark((function a(i,o){var s;return r.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s={limit:n.limit||500,sync_token:n.syncToken,cursor_token:n.cursorToken,content_type:n.contentType,event:n.event,api:k.getApiVersion()},a.prev=1,a.t0=t.httpManager,a.next=5,t.getSyncURL();case 5:a.t1=a.sent,a.t2=s,a.t3=function(){var a=v(r.mark((function a(o){var s,c;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.retrievedItems||(n.retrievedItems=[]),s=o.retrieved_items,r.next=4,t.getActiveKeyInfo(e.KeyRequestLoadSaveAccount);case 4:return c=r.sent.keys,r.next=7,SFJS.itemTransformer.decryptMultipleItems(s,c);case 7:n.retrievedItems=n.retrievedItems.concat(s.map((function(e){return t.modelManager.createItem(e)}))),n.syncToken=o.sync_token,n.cursorToken=o.cursor_token,n.cursorToken?t.stateless_downloadAllItems(n).then(i):i(n.retrievedItems);case 11:case"end":return r.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),a.t4=function(e,t){o(e)},a.t0.postAuthenticatedAbsolute.call(a.t0,a.t1,a.t2,a.t3,a.t4),a.next=16;break;case 12:a.prev=12,a.t5=a.catch(1),console.log("Download all items exception caught:",a.t5),o(a.t5);case 16:case"end":return a.stop()}}),a,null,[[1,12]])})));return function(e,t){return a.apply(this,arguments)}}())}},{key:"resolveOutOfSync",value:function(){var e=v(r.mark((function e(){var t=this;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.stateless_downloadAllItems({event:"resolve-out-of-sync"}).then(function(){var e=v(r.mark((function e(n){var a,i,o,s,c,u,l,d;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],i=!0,o=!1,s=void 0,e.prev=4,c=n[Symbol.iterator]();case 6:if(i=(u=c.next()).done){e.next=18;break}if(l=u.value,!(d=t.modelManager.findItem(l.uuid))){e.next=14;break}if(l.isItemContentEqualWith(d)){e.next=14;break}return e.next=14,t.modelManager.duplicateItemAndAddAsConflict(d);case 14:a.push(l);case 15:i=!0,e.next=6;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(4),o=!0,s=e.t0;case 24:e.prev=24,e.prev=25,i||null==c.return||c.return();case 27:if(e.prev=27,!o){e.next=30;break}throw s;case 30:return e.finish(27);case 31:return e.finish(24);case 32:return e.next=34,t.modelManager.mapResponseItemsToLocalModelsWithOptions({items:a,source:x.MappingSourceRemoteRetrieved});case 34:return e.next=36,t.writeItemsToLocalStorage(t.modelManager.allNondummyItems);case 36:return e.abrupt("return",t.sync({performIntegrityCheck:!0}));case 37:case"end":return e.stop()}}),e,null,[[4,20,24,32],[25,,27,31]])})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleSignout",value:function(){var e=v(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.outOfSync=!1,this.loadLocalDataPromise=null,this.performSyncAgainOnCompletion=!1,this.syncStatus.syncOpInProgress=!1,this._queuedCallbacks=[],this.syncStatus={},e.abrupt("return",this.clearSyncToken());case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearSyncToken",value:function(){var e=v(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._syncToken=null,this._cursorToken=null,e.abrupt("return",this.storageManager.removeItem("syncToken"));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"__setLocalDataNotLoaded",value:function(){this.loadLocalDataPromise=null,this._initialDataLoaded=!1}},{key:"queuedCallbacks",get:function(){return this._queuedCallbacks||(this._queuedCallbacks=[]),this._queuedCallbacks}}]),e}();a.SFSyncManager=D;var R=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g(this,e),this.content={},this.referencingObjects=[],this.updateFromJSON(t),this.uuid||"undefined"!==typeof SFJS&&SFJS.crypto.generateUUIDSync&&(this.uuid=SFJS.crypto.generateUUIDSync()),"object"!==p(this.content)||this.content.references||(this.content.references=[])}return b(e,[{key:"initUUID",value:function(){var e=v(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.uuid){e.next=4;break}return e.next=3,SFJS.crypto.generateUUID();case 3:this.uuid=e.sent;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateFromJSON",value:function(t){if(t){this.deleted=t.deleted,this.uuid=t.uuid,this.enc_item_key=t.enc_item_key,this.auth_hash=t.auth_hash,this.auth_params=t.auth_params;for(var n=0,r=["errorDecrypting","dirty","dirtyCount","dirtiedDate","dummy"];n<r.length;n++){var a=r[n];void 0!==t[a]&&(this[a]=t[a])}if(this.dirtiedDate&&"string"===typeof this.dirtiedDate&&(this.dirtiedDate=new Date(this.dirtiedDate)),this.content_type||(this.content_type=t.content_type),t.errorDecrypting)this.content=t.content;else try{var i="string"===typeof t.content?JSON.parse(t.content):t.content;e.deepMerge(this.contentObject,i)}catch(o){console.log("Error while updating item from json",o)}t.created_at&&(this.created_at=t.created_at),t.updated_at&&(this.updated_at=t.updated_at),this.created_at?this.created_at=new Date(this.created_at):this.created_at=new Date,this.updated_at?this.updated_at=new Date(this.updated_at):this.updated_at=new Date(0),this._client_updated_at=null,t.content?this.mapContentToLocalProperties(this.contentObject):1==t.deleted&&this.handleDeletedContent()}}},{key:"mapContentToLocalProperties",value:function(e){}},{key:"createContentJSONFromProperties",value:function(){var t=this.structureParams();return e.deepMerge(this.contentObject,t),t}},{key:"structureParams",value:function(){return this.getContentCopy()}},{key:"handleDeletedContent",value:function(){}},{key:"setDirty",value:function(e,t){this.dirty=e,this.dirtyCount||(this.dirtyCount=0),e?this.dirtyCount++:this.dirtyCount=0,this.dirtiedDate=new Date,e&&t?this.client_updated_at=new Date:this.hasRawClientUpdatedAtValue()||(this.client_updated_at=new Date(this.updated_at))}},{key:"updateLocalRelationships",value:function(){}},{key:"addItemAsRelationship",value:function(e){if(e.setIsBeingReferencedBy(this),!this.hasRelationshipWithItem(e)){var t=this.content.references||[];t.push({uuid:e.uuid,content_type:e.content_type}),this.content.references=t}}},{key:"removeItemAsRelationship",value:function(e){e.setIsNoLongerBeingReferencedBy(this),this.removeReferenceWithUuid(e.uuid)}},{key:"setIsBeingReferencedBy",value:function(e){_.find(this.referencingObjects,{uuid:e.uuid})||this.referencingObjects.push(e)}},{key:"setIsNoLongerBeingReferencedBy",value:function(e){_.remove(this.referencingObjects,{uuid:e.uuid}),this.hasRelationshipWithItem(e)&&(this.removeReferenceWithUuid(e.uuid),this.setDirty(!0))}},{key:"removeReferenceWithUuid",value:function(e){var t=this.content.references||[];t=t.filter((function(t){return t.uuid!=e})),this.content.references=t}},{key:"hasRelationshipWithItem",value:function(e){return null!=this.content.references.find((function(t){return t.uuid==e.uuid}))}},{key:"isBeingRemovedLocally",value:function(){}},{key:"didFinishSyncing",value:function(){}},{key:"informReferencesOfUUIDChange",value:function(e,t){}},{key:"potentialItemOfInterestHasChangedItsUUID",value:function(e,t,n){if(!this.errorDecrypting){var r=!0,a=!1,i=void 0;try{for(var o,s=this.content.references[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value;c.uuid==t&&(c.uuid=n,this.setDirty(!0))}}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}}}},{key:"doNotEncrypt",value:function(){return!1}},{key:"setDomainDataItem",value:function(e,t,n){if(n){if(!this.errorDecrypting){this.content.appData||(this.content.appData={});var r=this.content.appData[n];r||(r={}),r[e]=t,this.content.appData[n]=r}}else console.error("SFItem.AppDomain needs to be set.")}},{key:"getDomainDataItem",value:function(e,t){if(t){if(!this.errorDecrypting){this.content.appData||(this.content.appData={});var n=this.content.appData[t];return n?n[e]:null}}else console.error("SFItem.AppDomain needs to be set.")}},{key:"setAppDataItem",value:function(t,n){this.setDomainDataItem(t,n,e.AppDomain)}},{key:"getAppDataItem",value:function(t){return this.getDomainDataItem(t,e.AppDomain)}},{key:"hasRawClientUpdatedAtValue",value:function(){return null!=this.getAppDataItem("client_updated_at")}},{key:"keysToIgnoreWhenCheckingContentEquality",value:function(){return[]}},{key:"appDataKeysToIgnoreWhenCheckingContentEquality",value:function(){return["client_updated_at"]}},{key:"getContentCopy",value:function(){return JSON.parse(JSON.stringify(this.content))}},{key:"isItemContentEqualWith",value:function(t){return e.AreItemContentsEqual({leftContent:this.content,rightContent:t.content,keysToIgnore:this.keysToIgnoreWhenCheckingContentEquality(),appDataKeysToIgnore:this.appDataKeysToIgnoreWhenCheckingContentEquality()})}},{key:"satisfiesPredicate",value:function(e){return L.ItemSatisfiesPredicate(this,e)}},{key:"createdAtString",value:function(){return this.dateToLocalizedString(this.created_at)}},{key:"updatedAtString",value:function(){return this.dateToLocalizedString(this.client_updated_at)}},{key:"updatedAtTimestamp",value:function(){return this.updated_at.getTime()}},{key:"dateToLocalizedString",value:function(e){if("undefined"!==typeof Intl&&Intl.DateTimeFormat){if(!T){var t=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language;T=new Intl.DateTimeFormat(t,{year:"numeric",month:"short",day:"2-digit",weekday:"long",hour:"2-digit",minute:"2-digit"})}return T.format(e)}return e.toDateString()+" "+e.toLocaleTimeString()}},{key:"contentObject",get:function(){if(this.errorDecrypting)return this.content;if(!this.content)return this.content={},this.content;if(null!==this.content&&"object"===p(this.content))return this.content;try{var e=JSON.parse(this.content);return this.content=e,this.content}catch(t){return console.log("Error parsing json",t,this),this.content={},this.content}}},{key:"pinned",get:function(){return this.getAppDataItem("pinned")}},{key:"archived",get:function(){return this.getAppDataItem("archived")}},{key:"locked",get:function(){return this.getAppDataItem("locked")}},{key:"displayName",get:function(){return"Item"}},{key:"client_updated_at",get:function(){if(!this._client_updated_at){var e=this.getAppDataItem("client_updated_at");this._client_updated_at=e?new Date(e):new Date(this.updated_at)}return this._client_updated_at},set:function(e){this._client_updated_at=e,this.setAppDataItem("client_updated_at",e)}}],[{key:"deepMerge",value:function(e,t){function n(e,t){if(_.isArray(e))return t}return _.mergeWith(e,t,n),e}},{key:"AreItemContentsEqual",value:function(t){var n=t.leftContent,r=t.rightContent,a=t.keysToIgnore,i=t.appDataKeysToIgnore,o=function(e,t){if(!e)return e;var n=!0,r=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0)delete e[i.value]}catch(s){r=!0,a=s}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}return e};return(n=JSON.parse(JSON.stringify(n))).appData&&o(n.appData[e.AppDomain],i),n=o(n,a),(r=JSON.parse(JSON.stringify(r))).appData&&o(r.appData[e.AppDomain],i),r=o(r,a),JSON.stringify(n)===JSON.stringify(r)}}]),e}();a.SFItem=R;var B=function(){function e(t,n,r){if(g(this,e),this.item=t,this.keys=n,this.auth_params=r,this.keys&&!this.auth_params)throw"SFItemParams.auth_params must be supplied if supplying keys.";if(this.auth_params&&!this.auth_params.version)throw"SFItemParams.auth_params is missing version"}return b(e,[{key:"paramsForExportFile",value:function(){var e=v(r.mark((function e(t){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.forExportFile=!0,!t){e.next=5;break}return e.abrupt("return",this.__params());case 5:return e.next=7,this.__params();case 7:return n=e.sent,e.abrupt("return",_.omit(n,["deleted"]));case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"paramsForExtension",value:function(){var e=v(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.paramsForExportFile());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"paramsForLocalStorage",value:function(){var e=v(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.additionalFields=["dirty","dirtiedDate","errorDecrypting"],this.forExportFile=!0,e.abrupt("return",this.__params());case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"paramsForSync",value:function(){var e=v(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.__params());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"__params",value:function(){var e=v(r.mark((function e(){var t,n,a;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={uuid:this.item.uuid,content_type:this.item.content_type,deleted:this.item.deleted,created_at:this.item.created_at,updated_at:this.item.updated_at},this.item.errorDecrypting){e.next=23;break}if(n=this.item.doNotEncrypt()&&!this.forExportFile,!this.keys||n){e.next=11;break}return e.next=6,SFJS.itemTransformer.encryptItem(this.item,this.keys,this.auth_params);case 6:a=e.sent,_.merge(t,a),"001"!==this.auth_params.version&&(t.auth_hash=null),e.next=21;break;case 11:if(!this.forExportFile){e.next=15;break}e.t0=this.item.createContentJSONFromProperties(),e.next=19;break;case 15:return e.next=17,SFJS.crypto.base64(JSON.stringify(this.item.createContentJSONFromProperties()));case 17:e.t1=e.sent,e.t0="000"+e.t1;case 19:t.content=e.t0,this.forExportFile||(t.enc_item_key=null,t.auth_hash=null);case 21:e.next=26;break;case 23:t.content=this.item.content,t.enc_item_key=this.item.enc_item_key,t.auth_hash=this.item.auth_hash;case 26:return this.additionalFields&&_.merge(t,_.pick(this.item,this.additionalFields)),e.abrupt("return",t);case 28:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}();a.SFItemParams=B;var L=function(){function e(t,n,r){g(this,e),this.keypath=t,this.operator=n,this.value=r,e.IsRecursiveOperator(this.operator)&&(this.value=this.value.map(e.fromArray))}return b(e,null,[{key:"fromArray",value:function(t){return new e(t[0],t[1],t[2])}},{key:"ObjectSatisfiesPredicate",value:function(t,n){if(Array.isArray(n)&&(n=this.fromArray(n)),e.IsRecursiveOperator(n.operator)){if("and"===n.operator){var r=!0,a=!1,i=void 0;try{for(var o,s=n.value[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value;if(!this.ObjectSatisfiesPredicate(t,c))return!1}}catch(m){a=!0,i=m}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return!0}if("or"===n.operator){var u=!0,l=!1,d=void 0;try{for(var f,p=n.value[Symbol.iterator]();!(u=(f=p.next()).done);u=!0)if(c=f.value,this.ObjectSatisfiesPredicate(t,c))return!0}catch(m){l=!0,d=m}finally{try{u||null==p.return||p.return()}finally{if(l)throw d}}return!1}}var h=n.value;"string"==typeof h&&h.includes(".ago")&&(h=this.DateFromString(h));var v=n.keypath.split(".").reduce((function(e,t){return e&&e[t]}),t),g=[!1,"",null,void 0,NaN];return void 0==v?"!="==n.operator?!g.includes(n.value):g.includes(n.value):"="==n.operator?Array.isArray(v)?JSON.stringify(v)==JSON.stringify(h):v==h:"!="==n.operator?Array.isArray(v)?JSON.stringify(v)!=JSON.stringify(h):v!==h:"<"==n.operator?v<h:">"==n.operator?v>h:"<="==n.operator?v<=h:">="==n.operator?v>=h:"startsWith"==n.operator?v.startsWith(h):"in"==n.operator?-1!=h.indexOf(v):"includes"==n.operator?this.resolveIncludesPredicate(v,h):"matches"==n.operator&&new RegExp(h).test(v)}},{key:"resolveIncludesPredicate",value:function(t,n){if("string"==typeof n)return t.includes(n);var r;r=Array.isArray(n)?e.fromArray(n):n;var a=!0,i=!1,o=void 0;try{for(var s,c=t[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var u=s.value;if(this.ObjectSatisfiesPredicate(u,r))return!0}}catch(l){i=!0,o=l}finally{try{a||null==c.return||c.return()}finally{if(i)throw o}}return!1}},{key:"ItemSatisfiesPredicate",value:function(t,n){return Array.isArray(n)&&(n=e.fromArray(n)),this.ObjectSatisfiesPredicate(t,n)}},{key:"ItemSatisfiesPredicates",value:function(e,t){var n=!0,r=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;if(!this.ItemSatisfiesPredicate(e,s))return!1}}catch(c){r=!0,a=c}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}return!0}},{key:"DateFromString",value:function(e){var t=e.split("."),n=t[1],r=new Date,a=parseInt(t[0]);return"days"==n?r.setDate(r.getDate()-a):"hours"==n&&r.setHours(r.getHours()-a),r}},{key:"IsRecursiveOperator",value:function(e){return["and","or"].includes(e)}}]),e}();a.SFPredicate=L;var F=function(e){function t(e){var r;return g(this,t),(r=n(this,o(t).call(this,e))).content.desktopPrivileges||(r.content.desktopPrivileges={}),r}return s(t,e),b(t,null,[{key:"contentType",value:function(){return"SN|Privileges"}}]),b(t,[{key:"setCredentialsForAction",value:function(e,t){this.content.desktopPrivileges[e]=t}},{key:"getCredentialsForAction",value:function(e){return this.content.desktopPrivileges[e]||[]}},{key:"toggleCredentialForAction",value:function(e,t){this.isCredentialRequiredForAction(e,t)?this.removeCredentialForAction(e,t):this.addCredentialForAction(e,t)}},{key:"removeCredentialForAction",value:function(e,t){_.pull(this.content.desktopPrivileges[e],t)}},{key:"addCredentialForAction",value:function(e,t){var n=this.getCredentialsForAction(e);n.push(t),this.setCredentialsForAction(e,n)}},{key:"isCredentialRequiredForAction",value:function(e,t){return this.getCredentialsForAction(e).includes(t)}}]),t}(R);a.SFPrivileges=F;var H=function(e){function t(e){var r;return g(this,t),(r=n(this,o(t).call(this,e))).content.itemUUIDToItemHistoryMapping||(r.content.itemUUIDToItemHistoryMapping={}),Object.keys(r.content.itemUUIDToItemHistoryMapping).forEach((function(e){var t=r.content.itemUUIDToItemHistoryMapping[e];r.content.itemUUIDToItemHistoryMapping[e]=new z(t)})),r}return s(t,e),b(t,[{key:"addEntryForItem",value:function(e){return this.historyForItem(e).addHistoryEntryForItem(e)}},{key:"historyForItem",value:function(e){var t=this.content.itemUUIDToItemHistoryMapping[e.uuid];return t||(t=this.content.itemUUIDToItemHistoryMapping[e.uuid]=new z),t}},{key:"clearItemHistory",value:function(e){this.historyForItem(e).clear()}},{key:"clearAllHistory",value:function(){this.content.itemUUIDToItemHistoryMapping={}}},{key:"optimizeHistoryForItem",value:function(e){var n=this.historyForItem(e);n.entries.length>t.LargeItemEntryAmountThreshold&&n.optimize()}}]),t}(R);a.SFHistorySession=H,H.LargeItemEntryAmountThreshold=60;var z=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(g(this,e),this.entries||(this.entries=[]),t.entries){var n=!0,r=!1,a=void 0;try{for(var i,o=t.entries[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value,c=this.createEntryForItem(s.item);c.setPreviousEntry(this.getLastEntry()),this.entries.push(c)}}catch(u){r=!0,a=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}}}return b(e,[{key:"createEntryForItem",value:function(t){var n=e.HistoryEntryClassMapping&&e.HistoryEntryClassMapping[t.content_type];return n||(n=N),new n(t)}},{key:"getLastEntry",value:function(){return this.entries[this.entries.length-1]}},{key:"addHistoryEntryForItem",value:function(e){var t=this.createEntryForItem(e),n=this.getLastEntry();if(t.setPreviousEntry(n),!t.isSameAsEntry(n))return this.entries.push(t),t}},{key:"clear",value:function(){this.entries.length=0}},{key:"optimize",value:function(){var t=this,n=[],r=function(t){return t.deltaSize()>e.LargeEntryDeltaThreshold},a=function(e,a,i){if(i?n.push(e):-1!==(a=n.indexOf(e))&&n.splice(a,1),i&&r(e)&&-1==e.operationVector()){var o=t.entries[a-1];o&&n.push(o)}};this.entries.forEach((function(e,n){if(0==n||n==t.entries.length-1)a(e,n,!0);else{var i=r(e);a(e,n,i)}})),this.entries=this.entries.filter((function(e,t){return-1!==n.indexOf(e)}))}}]),e}();a.SFItemHistory=z,z.LargeEntryDeltaThreshold=15;var N=function(){function e(t){g(this,e),this.item=R.deepMerge({},t),this.defaultContentKeyToDiffOn="text",this.textCharDiffLength=0,"string"==typeof this.item.updated_at&&(this.item.updated_at=new Date(this.item.updated_at))}return b(e,[{key:"setPreviousEntry",value:function(e){this.hasPreviousEntry=null!=e,this.item.content[this.defaultContentKeyToDiffOn]&&(this.textCharDiffLength=e?this.item.content[this.defaultContentKeyToDiffOn].length-e.item.content[this.defaultContentKeyToDiffOn].length:this.item.content[this.defaultContentKeyToDiffOn].length)}},{key:"operationVector",value:function(){return void 0!=this.textCharDiffLength?this.hasPreviousEntry&&0!=this.textCharDiffLength?this.textCharDiffLength<0?-1:1:0:1}},{key:"deltaSize",value:function(){return void 0!=this.textCharDiffLength?Math.abs(this.textCharDiffLength):1}},{key:"isSameAsEntry",value:function(e){if(!e)return!1;var t=new R(this.item),n=new R(e.item);return t.isItemContentEqualWith(n)}}]),e}();a.SFItemHistoryEntry=N,O="undefined"!==typeof window?window:"undefined"!==typeof e?e:null;var U=function(){function e(){g(this,e),this.DefaultPBKDF2Length=768}return b(e,[{key:"generateUUIDSync",value:function(){var e=O.crypto||O.msCrypto;if(e){var t=new Uint32Array(4);e.getRandomValues(t);var n=-1;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){n++;var r=t[n>>3]>>n%8*4&15;return("x"==e?r:3&r|8).toString(16)}))}var r=(new Date).getTime();return O.performance&&"function"===typeof O.performance.now&&(r+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=(r+16*Math.random())%16|0;return r=Math.floor(r/16),("x"==e?t:3&t|8).toString(16)}))}},{key:"generateUUID",value:function(){var e=v(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.generateUUIDSync());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"timingSafeEqual",value:function(e,t){var n=String(e),r=String(t),a=n.length,i=0;a!==r.length&&(r=n,i=1);for(var o=0;o<a;o++)i|=n.charCodeAt(o)^r.charCodeAt(o);return 0===i}},{key:"decryptText",value:function(){var e=v(r.mark((function e(){var n,a,i,o,s,c,u,l,d,f,p,h=arguments;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h.length>0&&void 0!==h[0]?h[0]:{},a=n.ciphertextToAuth,i=n.contentCiphertext,o=n.encryptionKey,s=n.iv,c=n.authHash,u=n.authKey,!(h.length>1?h[1]:void 0)||c){e.next=5;break}return console.error("Auth hash is required."),e.abrupt("return");case 5:if(!c){e.next=12;break}return e.next=8,this.hmac256(a,u);case 8:if(l=e.sent,!1!==this.timingSafeEqual(c,l)){e.next=12;break}return console.error("Auth hash does not match, returning null."),e.abrupt("return",null);case 12:return d=t.enc.Hex.parse(o),f=t.enc.Hex.parse(s||""),p=t.AES.decrypt(i,d,{iv:f,mode:t.mode.CBC,padding:t.pad.Pkcs7}),e.abrupt("return",p.toString(t.enc.Utf8));case 16:case"end":return e.stop()}}),e,this)})));function n(){return e.apply(this,arguments)}return n}()},{key:"encryptText",value:function(){var e=v(r.mark((function e(n,a,i){var o,s,c;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.enc.Hex.parse(a),s=t.enc.Hex.parse(i||""),c=t.AES.encrypt(n,o,{iv:s,mode:t.mode.CBC,padding:t.pad.Pkcs7}),e.abrupt("return",c.toString());case 4:case"end":return e.stop()}}),e)})));function n(t,n,r){return e.apply(this,arguments)}return n}()},{key:"generateRandomKey",value:function(){var e=v(r.mark((function e(n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.lib.WordArray.random(n/8).toString());case 1:case"end":return e.stop()}}),e)})));function n(t){return e.apply(this,arguments)}return n}()},{key:"generateItemEncryptionKey",value:function(){var e=v(r.mark((function e(){var t,n,a,i;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=512,n=1,e.next=4,this.generateRandomKey(t);case 4:return a=e.sent,e.next=7,this.generateRandomKey(t);case 7:return i=e.sent,e.abrupt("return",this.pbkdf2(i,a,n,t));case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"firstHalfOfKey",value:function(){var e=v(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.substring(0,t.length/2));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"secondHalfOfKey",value:function(){var e=v(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.substring(t.length/2,t.length));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"base64",value:function(){var e=v(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O.btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)}))));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"base64Decode",value:function(){var e=v(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O.atob(t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"sha256",value:function(){var e=v(r.mark((function e(n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.SHA256(n).toString());case 1:case"end":return e.stop()}}),e)})));function n(t){return e.apply(this,arguments)}return n}()},{key:"hmac256",value:function(){var e=v(r.mark((function e(n,a){var i,o,s;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.enc.Hex.parse(a),o=t.enc.Utf8.parse(n),s=t.HmacSHA256(o,i).toString(),e.abrupt("return",s);case 4:case"end":return e.stop()}}),e)})));function n(t,n){return e.apply(this,arguments)}return n}()},{key:"generateSalt",value:function(){var e=v(r.mark((function e(t,n,a,i){var o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sha256([t,"SF",n,a,i].join(":"));case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"generateSymmetricKeyPair",value:function(){var e=v(r.mark((function e(){var t,n,a,i,o,s,c,u,l,d,f=arguments;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},n=t.password,a=t.pw_salt,i=t.pw_cost,e.next=3,this.pbkdf2(n,a,i,this.DefaultPBKDF2Length);case 3:return o=e.sent,s=o.length,c=s/3,u=o.slice(0,c),l=o.slice(c,2*c),d=o.slice(2*c,3*c),e.abrupt("return",[u,l,d]);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"computeEncryptionKeysForUser",value:function(){var e=v(r.mark((function e(t,n){var a;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("003"!=n.version){e.next=9;break}if(n.identifier){e.next=4;break}return console.error("authParams is missing identifier."),e.abrupt("return");case 4:return e.next=6,this.generateSalt(n.identifier,n.version,n.pw_cost,n.pw_nonce);case 6:a=e.sent,e.next=10;break;case 9:a=n.pw_salt;case 10:return e.abrupt("return",this.generateSymmetricKeyPair({password:t,pw_salt:a,pw_cost:n.pw_cost}).then((function(e){return{pw:e[0],mk:e[1],ak:e[2]}})));case 11:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"generateInitialKeysAndAuthParamsForUser",value:function(){var e=v(r.mark((function e(t,n){var a,i,o,s;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.SFJS.version,i=this.SFJS.defaultPasswordGenerationCost,e.next=4,this.generateRandomKey(256);case 4:return o=e.sent,e.next=7,this.generateSalt(t,a,i,o);case 7:return s=e.sent,e.abrupt("return",this.generateSymmetricKeyPair({password:n,pw_salt:s,pw_cost:i}).then((function(e){var n={pw_nonce:o,pw_cost:i,identifier:t,version:a};return{keys:{pw:e[0],mk:e[1],ak:e[2]},authParams:n}})));case 9:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),e}();a.SFAbstractCrypto=U;var K=function(e){function a(){return g(this,a),n(this,o(a).apply(this,arguments))}return s(a,e),b(a,[{key:"pbkdf2",value:function(){var e=v(r.mark((function e(n,a,i,o){var s;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={keySize:o/32,hasher:t.algo.SHA512,iterations:i},e.abrupt("return",t.PBKDF2(n,a,s).toString());case 2:case"end":return e.stop()}}),e)})));function n(t,n,r,a){return e.apply(this,arguments)}return n}()}]),a}(U);a.SFCryptoJS=K;var V=(O="undefined"!==typeof window?window:"undefined"!==typeof e?e:null).crypto?O.crypto.subtle:null,W=function(e){function t(){return g(this,t),n(this,o(t).apply(this,arguments))}return s(t,e),b(t,[{key:"pbkdf2",value:function(){var e=v(r.mark((function e(t,n,a,i){var o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.webCryptoImportKey(t,"PBKDF2",["deriveBits"]);case 2:if(o=e.sent){e.next=6;break}return console.log("Key is null, unable to continue"),e.abrupt("return",null);case 6:return e.abrupt("return",this.webCryptoDeriveBits(o,n,a,i));case 7:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"generateRandomKey",value:function(){var e=v(r.mark((function e(t){var n,a=this;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!0,e.abrupt("return",V.generateKey({name:"AES-CBC",length:t},n,["encrypt","decrypt"]).then((function(e){return V.exportKey("raw",e).then(function(){var e=v(r.mark((function e(t){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.arrayBufferToHexString(new Uint8Array(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error exporting key",e)}))})).catch((function(e){console.error("Error generating key",e)})));case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"generateItemEncryptionKey",value:function(){var e=v(r.mark((function e(){var t;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=256,e.abrupt("return",Promise.all([this.generateRandomKey(t),this.generateRandomKey(t)]).then((function(e){return e.join("")})));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"encryptText",value:function(){var e=v(r.mark((function e(t,n,a){var i,o,s,c,u,l=this;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=6;break}return e.next=3,this.hexStringToArrayBuffer(a);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=new ArrayBuffer(16);case 7:return i=e.t0,o={name:"AES-CBC",iv:i},e.next=11,this.hexStringToArrayBuffer(n);case 11:return s=e.sent,e.next=14,this.webCryptoImportKey(s,o.name,["encrypt"]);case 14:return c=e.sent,e.next=17,this.stringToArrayBuffer(t);case 17:return u=e.sent,e.abrupt("return",crypto.subtle.encrypt(o,c,u).then(function(){var e=v(r.mark((function e(t){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.arrayBufferToBase64(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 19:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"decryptText",value:function(){var e=v(r.mark((function e(){var t,n,a,i,o,s,c,u,l,d,f,p,h,g=this,m=arguments;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=m.length>0&&void 0!==m[0]?m[0]:{},n=t.ciphertextToAuth,a=t.contentCiphertext,i=t.encryptionKey,o=t.iv,s=t.authHash,c=t.authKey,!(m.length>1?m[1]:void 0)||s){e.next=5;break}return console.error("Auth hash is required."),e.abrupt("return");case 5:if(!s){e.next=12;break}return e.next=8,this.hmac256(n,c);case 8:if(u=e.sent,!1!==this.timingSafeEqual(s,u)){e.next=12;break}return console.error("Auth hash does not match, returning null. ".concat(s," != ").concat(u)),e.abrupt("return",null);case 12:if(!o){e.next=18;break}return e.next=15,this.hexStringToArrayBuffer(o);case 15:e.t0=e.sent,e.next=19;break;case 18:e.t0=new ArrayBuffer(16);case 19:return l=e.t0,d={name:"AES-CBC",iv:l},e.next=23,this.hexStringToArrayBuffer(i);case 23:return f=e.sent,e.next=26,this.webCryptoImportKey(f,d.name,["decrypt"]);case 26:return p=e.sent,e.next=29,this.base64ToArrayBuffer(a);case 29:return h=e.sent,e.abrupt("return",crypto.subtle.decrypt(d,p,h).then(function(){var e=v(r.mark((function e(t){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.arrayBufferToString(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error decrypting:",e)})));case 31:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"hmac256",value:function(){var e=v(r.mark((function e(t,n){var a,i,o,s=this;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.hexStringToArrayBuffer(n);case 2:return a=e.sent,e.next=5,this.webCryptoImportKey(a,"HMAC",["sign"],{name:"SHA-256"});case 5:return i=e.sent,e.next=8,this.stringToArrayBuffer(t);case 8:return o=e.sent,e.abrupt("return",crypto.subtle.sign({name:"HMAC"},i,o).then(function(){var e=v(r.mark((function e(t){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.arrayBufferToHexString(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error computing hmac",e)})));case 10:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"webCryptoImportKey",value:function(){var e=v(r.mark((function e(t,n,a,i){var o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=6;break}return e.next=3,this.stringToArrayBuffer(t);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=t;case 7:return o=e.t0,e.abrupt("return",V.importKey("raw",o,{name:n,hash:i},!1,a).then((function(e){return e})).catch((function(e){return console.error(e),null})));case 9:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"webCryptoDeriveBits",value:function(){var e=v(r.mark((function e(t,n,a,i){var o,s=this;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stringToArrayBuffer(n);case 2:return e.t0=e.sent,e.t1=a,e.t2={name:"SHA-512"},o={name:"PBKDF2",salt:e.t0,iterations:e.t1,hash:e.t2},e.abrupt("return",V.deriveBits(o,t,i).then(function(){var e=v(r.mark((function e(t){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.arrayBufferToHexString(new Uint8Array(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.error(e),null})));case 7:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"stringToArrayBuffer",value:function(){var e=v(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new Blob([t]),a=new FileReader;a.onload=function(t){e(t.target.result)},a.readAsArrayBuffer(r)})));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"arrayBufferToString",value:function(){var e=v(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new Blob([t]),a=new FileReader;a.onload=function(t){e(t.target.result)},a.readAsText(r)})));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"arrayBufferToHexString",value:function(){var e=v(r.mark((function e(t){var n,a,i,o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=new Uint8Array(t),a="",o=0;o<n.byteLength;o++)(i=n[o].toString(16)).length<2&&(i="0"+i),a+=i;return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"hexStringToArrayBuffer",value:function(){var e=v(r.mark((function e(t){var n,a;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],a=0;a<t.length;a+=2)n.push(parseInt(t.substr(a,2),16));return e.abrupt("return",new Uint8Array(n));case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"base64ToArrayBuffer",value:function(){var e=v(r.mark((function e(t){var n,a,i,o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.base64Decode(t);case 2:for(n=e.sent,a=n.length,i=new Uint8Array(a),o=0;o<a;o++)i[o]=n.charCodeAt(o);return e.abrupt("return",i.buffer);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"arrayBufferToBase64",value:function(){var e=v(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new Blob([t],{type:"application/octet-binary"}),a=new FileReader;a.onload=function(t){var n=t.target.result;e(n.substr(n.indexOf(",")+1))},a.readAsDataURL(r)})));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),t}(U);a.SFCryptoWeb=W;var X=function(){function e(t){g(this,e),this.crypto=t}return b(e,[{key:"_private_encryptString",value:function(){var e=v(r.mark((function e(t,n,a,i,o){var s,c,u,l,d,f;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("001"!==o.version){e.next=7;break}return e.next=3,this.crypto.encryptText(t,n,null);case 3:c=e.sent,s=o.version+c,e.next=21;break;case 7:return e.next=9,this.crypto.generateRandomKey(128);case 9:return u=e.sent,e.next=12,this.crypto.encryptText(t,n,u);case 12:return c=e.sent,l=[o.version,i,u,c].join(":"),e.next=16,this.crypto.hmac256(l,a);case 16:return d=e.sent,e.next=19,this.crypto.base64(JSON.stringify(o));case 19:f=e.sent,s=[o.version,d,i,u,c,f].join(":");case 21:return e.abrupt("return",s);case 22:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a,i){return e.apply(this,arguments)}return t}()},{key:"encryptItem",value:function(){var e=v(r.mark((function e(t,n,a){var i,o,s,c,u,l;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={},e.next=3,this.crypto.generateItemEncryptionKey();case 3:if(o=e.sent,"001"!==a.version){e.next=10;break}return e.next=7,this.crypto.encryptText(o,n.mk,null);case 7:i.enc_item_key=e.sent,e.next=13;break;case 10:return e.next=12,this._private_encryptString(o,n.mk,n.ak,t.uuid,a);case 12:i.enc_item_key=e.sent;case 13:return e.next=15,this.crypto.firstHalfOfKey(o);case 15:return s=e.sent,e.next=18,this.crypto.secondHalfOfKey(o);case 18:return c=e.sent,e.next=21,this._private_encryptString(JSON.stringify(t.createContentJSONFromProperties()),s,c,t.uuid,a);case 21:if(u=e.sent,"001"!==a.version){e.next=27;break}return e.next=25,this.crypto.hmac256(u,c);case 25:l=e.sent,i.auth_hash=l;case 27:return i.content=u,e.abrupt("return",i);case 29:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"encryptionComponentsFromString",value:function(e,t,n){var r=e.substring(0,3);if("001"===r)return{contentCiphertext:e.substring(3,e.length),encryptionVersion:r,ciphertextToAuth:e,iv:null,authHash:null,encryptionKey:t,authKey:n};var a=e.split(":");return{encryptionVersion:a[0],authHash:a[1],uuid:a[2],iv:a[3],contentCiphertext:a[4],authParams:a[5],ciphertextToAuth:[a[0],a[2],a[3],a[4]].join(":"),encryptionKey:t,authKey:n}}},{key:"decryptItem",value:function(){var e=v(r.mark((function e(t,n){var a,i,o,s,c,u,l,d;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t.content){e.next=2;break}return e.abrupt("return");case 2:if(!t.content.startsWith("000")){e.next=14;break}return e.prev=3,e.t0=JSON,e.next=7,this.crypto.base64Decode(t.content.substring(3,t.content.length));case 7:e.t1=e.sent,t.content=e.t0.parse.call(e.t0,e.t1),e.next=13;break;case 11:e.prev=11,e.t2=e.catch(3);case 13:return e.abrupt("return");case 14:if(t.enc_item_key){e.next=17;break}return console.log("Missing item encryption key, skipping decryption."),e.abrupt("return");case 17:if(a=t.enc_item_key,i=!0,a.startsWith("002")||a.startsWith("003")||(a="001"+a,i=!1),!(o=this.encryptionComponentsFromString(a,n.mk,n.ak)).uuid||o.uuid===t.uuid){e.next=26;break}return console.error("Item key params UUID does not match item UUID"),t.errorDecrypting||(t.errorDecryptingValueChanged=!0),t.errorDecrypting=!0,e.abrupt("return");case 26:return e.next=28,this.crypto.decryptText(o,i);case 28:if(s=e.sent){e.next=34;break}return console.log("Error decrypting item",t),t.errorDecrypting||(t.errorDecryptingValueChanged=!0),t.errorDecrypting=!0,e.abrupt("return");case 34:return e.next=36,this.crypto.firstHalfOfKey(s);case 36:return c=e.sent,e.next=39,this.crypto.secondHalfOfKey(s);case 39:return u=e.sent,l=this.encryptionComponentsFromString(t.content,c,u),e.prev=41,e.t3=JSON,e.next=45,this.crypto.base64Decode(l.authParams);case 45:e.t4=e.sent,t.auth_params=e.t3.parse.call(e.t3,e.t4),e.next=51;break;case 49:e.prev=49,e.t5=e.catch(41);case 51:if(!l.uuid||l.uuid===t.uuid){e.next=55;break}return t.errorDecrypting||(t.errorDecryptingValueChanged=!0),t.errorDecrypting=!0,e.abrupt("return");case 55:return l.authHash||(l.authHash=t.auth_hash),e.next=58,this.crypto.decryptText(l,!0);case 58:(d=e.sent)?(1==t.errorDecrypting&&(t.errorDecryptingValueChanged=!0),t.errorDecrypting=!1,t.content=d):(t.errorDecrypting||(t.errorDecryptingValueChanged=!0),t.errorDecrypting=!0);case 60:case"end":return e.stop()}}),e,this,[[3,11],[41,49]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"decryptMultipleItems",value:function(){var e=v(r.mark((function e(t,n,a){var i,o=this;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(){var e=v(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(1!=t.deleted||null!=t.content){e.next=4;break}return e.abrupt("return");case 4:if(!("string"===typeof t.content||t.content instanceof String)){e.next=19;break}return e.prev=6,e.next=9,o.decryptItem(t,n);case 9:e.next=19;break;case 11:if(e.prev=11,e.t0=e.catch(6),t.errorDecrypting||(t.errorDecryptingValueChanged=!0),t.errorDecrypting=!0,!a){e.next=17;break}throw e.t0;case 17:return console.error("Error decrypting item",t,e.t0),e.abrupt("return");case 19:case"end":return e.stop()}}),e,null,[[6,11]])})));return function(t){return e.apply(this,arguments)}}(),e.abrupt("return",Promise.all(t.map((function(e){return i(e)}))));case 2:case"end":return e.stop()}}),e)})));function t(t,n,r){return e.apply(this,arguments)}return t}()}]),e}();a.SFItemTransformer=X,O="undefined"!==typeof window?window:"undefined"!==typeof e?e:null;var Y=function(){function e(t){g(this,e),O&&("undefined"!==typeof document&&document.documentMode||/Edge/.test(navigator.userAgent)||!O.crypto||!O.crypto.subtle?this.crypto=new K:this.crypto=new W),t&&(this.crypto=t),this.itemTransformer=new X(this.crypto),this.crypto.SFJS={version:this.version(),defaultPasswordGenerationCost:this.defaultPasswordGenerationCost()}}return b(e,[{key:"version",value:function(){return"003"}},{key:"supportsPasswordDerivationCost",value:function(e){return!(e>5e3)||this.crypto instanceof W}},{key:"supportedVersions",value:function(){return["001","002","003"]}},{key:"isVersionNewerThanLibraryVersion",value:function(e){var t=this.version();return parseInt(e)>parseInt(t)}},{key:"isProtocolVersionOutdated",value:function(e){var t={"001":Date.parse("2018-01-01"),"002":Date.parse("2020-01-01")}[e];return!!t&&new Date>t}},{key:"costMinimumForVersion",value:function(e){return{"001":3e3,"002":3e3,"003":11e4}[e]}},{key:"defaultPasswordGenerationCost",value:function(){return this.costMinimumForVersion(this.version())}}]),e}();if(a.StandardFile=Y,O)try{O.StandardFile=Y,O.SFJS=new Y,O.SFCryptoWeb=W,O.SFCryptoJS=K,O.SFItemTransformer=X,O.SFModelManager=x,O.SFItem=R,O.SFItemParams=B,O.SFHttpManager=k,O.SFStorageManager=A,O.SFSyncManager=D,O.SFAuthManager=w,O.SFMigrationManager=S,O.SFAlertManager=y,O.SFPredicate=L,O.SFHistorySession=H,O.SFSessionHistoryManager=P,O.SFItemHistory=z,O.SFItemHistoryEntry=N,O.SFPrivilegesManager=j,O.SFPrivileges=F,O.SFSingletonManager=M}catch(G){console.log("Exception while exporting window variables",G)}}).call(this,"undefined"!==typeof t?t:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}]},{},[1])(1)}).call(t,n(3))},function(e,t){!function(t){"use strict";var n,r=Object.prototype,a=r.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag",u="object"===typeof e,l=t.regeneratorRuntime;if(l)u&&(e.exports=l);else{(l=t.regeneratorRuntime=u?e.exports:{}).wrap=w;var d="suspendedStart",f="suspendedYield",p="executing",h="completed",v={},g={};g[o]=function(){return this};var m=Object.getPrototypeOf,b=m&&m(m(M([])));b&&b!==r&&a.call(b,o)&&(g=b);var y=x.prototype=k.prototype=Object.create(g);S.prototype=y.constructor=x,x.constructor=S,x[c]=S.displayName="GeneratorFunction",l.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===S||"GeneratorFunction"===(t.displayName||t.name))},l.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(y),e},l.awrap=function(e){return{__await:e}},j(_.prototype),_.prototype[s]=function(){return this},l.AsyncIterator=_,l.async=function(e,t,n,r){var a=new _(w(e,t,n,r));return l.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},j(y),y[c]="Generator",y[o]=function(){return this},y.toString=function(){return"[object Generator]"},l.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},l.values=M,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,a){return s.type="throw",s.arg=e,t.next=r,a&&(t.method="next",t.arg=n),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),u=a.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;I(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:M(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),v}}}function w(e,t,n,r){var a=t&&t.prototype instanceof k?t:k,i=Object.create(a.prototype),o=new P(r||[]);return i._invoke=function(e,t,n){var r=d;return function(a,i){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===a)throw i;return A()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=C(o,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var c=O(e,t,n);if("normal"===c.type){if(r=n.done?h:f,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=h,n.method="throw",n.arg=c.arg)}}}(e,n,o),i}function O(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}function k(){}function S(){}function x(){}function j(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function _(e){function t(n,r,i,o){var s=O(e[n],e,r);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"===typeof u&&a.call(u,"__await")?Promise.resolve(u.__await).then((function(e){t("next",e,i,o)}),(function(e){t("throw",e,i,o)})):Promise.resolve(u).then((function(e){c.value=e,i(c)}),o)}o(s.arg)}var n;this._invoke=function(e,r){function a(){return new Promise((function(n,a){t(e,r,n,a)}))}return n=n?n.then(a,a):a()}}function C(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,C(e,t),"throw"===t.method))return v;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var a=O(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,v;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,v):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function M(e){if(e){var t=e[o];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return i.next=i}}return{next:A}}function A(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(1),i=(n.n(a),n(5)),o=(n.n(i),n(0));n.n(o);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.componentManager=t,this.updateObservers=[],this.items=[]}var t,n,a;return t=e,(n=[{key:"getPlatform",value:function(){return this.componentManager.platform}},{key:"getEnvironment",value:function(){return this.componentManager.environment}},{key:"isMobile",value:function(){return"mobile"==this.getEnvironment()}},{key:"addEventHandler",value:function(e){var t={id:Math.random,callback:e};return this.updateObservers.push(t),t}},{key:"removeUpdateObserver",value:function(e){this.updateObservers.splice(this.updateObservers.indexOf(e),1)}},{key:"notifyObserversOfEvent",value:function(e){var t=!0,n=!1,r=void 0;try{for(var a,i=this.updateObservers[Symbol.iterator]();!(t=(a=i.next()).done);t=!0)a.value.callback(e)}catch(o){n=!0,r=o}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}},{key:"filterItems",value:function(e){return this.items.filter((function(t){return t.content_type==e}))}},{key:"getFileDescriptors",value:function(){return this.filterItems(e.FileDescriptorContentTypeKey)}},{key:"beginStreamingFiles",value:function(){var t=this,n=[e.FileDescriptorContentTypeKey,e.FileSafeCredentialsContentType,e.FileSafeIntegrationContentTypeKey];this.componentManager.streamItems(n,(function(e){t.handleStreamItemsMessage(e)}))}},{key:"handleStreamItemsMessage",value:function(t){var n,a,i,s,c,u,l;return r.async((function(r){for(;;)switch(r.prev=r.next){case 0:n=!0,a=!1,i=void 0,r.prev=3,s=t[Symbol.iterator]();case 5:if(n=(c=s.next()).done){r.next=18;break}if(u=c.value,!(u=new o.SFItem(u)).deleted){r.next=11;break}return this.removeItemFromItems(u),r.abrupt("continue",15);case 11:if(!u.isMetadataUpdate){r.next=13;break}return r.abrupt("continue",15);case 13:(l=this.indexOfItem(u))>=0?this.items[l]=u:this.items.push(u);case 15:n=!0,r.next=5;break;case 18:r.next=24;break;case 20:r.prev=20,r.t0=r.catch(3),a=!0,i=r.t0;case 24:r.prev=24,r.prev=25,n||null==s.return||s.return();case 27:if(r.prev=27,!a){r.next=30;break}throw i;case 30:return r.finish(27);case 31:return r.finish(24);case 32:this.notifyObserversOfEvent(e.BridgeEventReceivedItems);case 33:case"end":return r.stop()}}),null,this,[[3,20,24,32],[25,,27,31]])}},{key:"indexOfItem",value:function(e){for(var t in this.items)if(this.items[t].uuid==e.uuid)return t;return-1}},{key:"removeItemFromItems",value:function(e){this.items=this.items.filter((function(t){return t.uuid!==e.uuid}))}},{key:"createItem",value:function(e,t){this.createItems([e],t)}},{key:"createItems",value:function(e,t){this.componentManager.createItems(e,(function(e){t&&t(e.map((function(e){return new o.SFItem(e)})))}))}},{key:"saveItem",value:function(e){return r.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.saveItems([e]));case 1:case"end":return t.stop()}}),null,this)}},{key:"saveItems",value:function(t){var n=this;return r.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,a){n.componentManager.saveItems(t,(function(t){r(t),n.notifyObserversOfEvent(e.BridgeEventSavedItem)}))})));case 1:case"end":return r.stop()}}))}},{key:"indexOfItem",value:function(e){for(var t in this.items)if(this.items[t].uuid==e.uuid)return t;return-1}},{key:"deleteItem",value:function(e,t){this.deleteItems([e],t)}},{key:"deleteItems",value:function(e,t){this.componentManager.deleteItems(e,t)}},{key:"removeItemFromItems",value:function(e){this.items=this.items.filter((function(t){return t.uuid!==e.uuid}))}}])&&s(t.prototype,n),a&&s(t,a),e}();c(u,"FileItemContentTypeKey","SN|FileSafe|File"),c(u,"FileSafeCredentialsContentType","SN|FileSafe|Credentials"),c(u,"FileDescriptorContentTypeKey","SN|FileSafe|FileMetadata"),c(u,"FileSafeIntegrationContentTypeKey","SN|FileSafe|Integration"),c(u,"BridgeEventLoadedCredentials","BridgeEventLoadedCredentials"),c(u,"BridgeEventReceivedItems","BridgeEventReceivedItems"),c(u,"BridgeEventSavedItem","BridgeEventSavedItem")},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"default",(function(){return p}));var a=n(2),i=n(7),o=n(8),s=n(9),c=n(10),u=n(12),l=n(0);n.n(l);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}var p=function(){function e(t){var n=this,r=t.componentManager;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataChangeObservers=[],this.newFileDescriptorHandlers=[],this.extensionBridge=new a.a(r),this.extensionBridge.addEventHandler((function(e){n.notifyObservers()})),this.relayManager=new i.a,this.integrationManager=new o.a(this.extensionBridge),this.credentialManager=new s.a({extensionBridge:this.extensionBridge,onCredentialLoad:function(){n.relayManager.setCredentials(n.credentialManager.getDefaultCredentials())}}),this.fileManager=new c.a(this.extensionBridge,this.relayManager,this.integrationManager,this.credentialManager),this.extensionBridge.beginStreamingFiles()}return f(e,null,[{key:"getSFItemClass",value:function(){return l.SFItem}}]),f(e,[{key:"addNewFileDescriptorHandler",value:function(e){this.newFileDescriptorHandlers.push(e)}},{key:"notifyObservers",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,a=this.dataChangeObservers[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){(0,r.value)()}}catch(i){t=!0,n=i}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}}},{key:"addDataChangeObserver",value:function(e){return this.dataChangeObservers.push(e),e}},{key:"removeDataChangeObserver",value:function(e){this.dataChangeObservers=this.dataChangeObservers.filter((function(t){return t!=e}))}},{key:"setCurrentNote",value:function(e){this.currentNote=e,this.notifyObservers()}},{key:"getAllFileDescriptors",value:function(){return this.fileManager.getAllFileDescriptors()}},{key:"findFileDescriptor",value:function(e){return this.fileManager.findFileDescriptor(e)}},{key:"fileDescriptorsForCurrentNote",value:function(){return this.fileManager.fileDescriptorsForNote(this.currentNote)}},{key:"fileDescriptorsForNote",value:function(e){return this.fileManager.fileDescriptorsForNote(e)}},{key:"fileDescriptorsEncryptedWithCredential",value:function(e){return this.fileManager.fileDescriptorsEncryptedWithCredential(e)}},{key:"deleteFileFromDescriptor",value:function(e){return r.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.fileManager.deleteFileFromDescriptor(e));case 1:case"end":return t.stop()}}),null,this)}},{key:"uploadFile",value:function(e){var t,n,a,i,o,s,c,u,l,d,f;return r.async((function(p){for(;;)switch(p.prev=p.next){case 0:return t=e.fileItem,n=e.inputFileName,a=e.fileType,i=e.credential,(o=e.note)||(o=this.currentNote),p.next=4,r.awrap(this.fileManager.uploadFile({fileItem:t,inputFileName:n,fileType:a,credential:i,note:o}));case 4:if(!(s=p.sent)){p.next=25;break}for(c=!0,u=!1,l=void 0,p.prev=9,d=this.newFileDescriptorHandlers[Symbol.iterator]();!(c=(f=d.next()).done);c=!0)(0,f.value)(s);p.next=17;break;case 13:p.prev=13,p.t0=p.catch(9),u=!0,l=p.t0;case 17:p.prev=17,p.prev=18,c||null==d.return||d.return();case 20:if(p.prev=20,!u){p.next=23;break}throw l;case 23:return p.finish(20);case 24:return p.finish(17);case 25:return p.abrupt("return",s);case 26:case"end":return p.stop()}}),null,this,[[9,13,17,25],[18,,20,24]])}},{key:"encryptAndUploadJavaScriptFileObject",value:function(e){var t=this;return r.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,a){var i=new FileReader;i.onload=function(a){var i,o,s,c;return r.async((function(u){for(;;)switch(u.prev=u.next){case 0:return i=a.target.result,o=i,u.next=4,r.awrap(SFJS.crypto.arrayBufferToBase64(o));case 4:return s=u.sent,u.next=7,r.awrap(t.encryptAndUploadData({base64Data:s,inputFileName:e.name,fileType:e.type}));case 7:c=u.sent,n(c);case 9:case"end":return u.stop()}}))},i.readAsArrayBuffer(e)})));case 1:case"end":return n.stop()}}))}},{key:"encryptAndUploadData",value:function(e){var t,n,a,i,o=this;return r.async((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.base64Data,n=e.inputFileName,a=e.fileType,i=this.getDefaultCredentials(),s.abrupt("return",this.encryptFile({data:t,inputFileName:n,fileType:a,credential:i}).then((function(e){return r.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",o.uploadFile({fileItem:e,inputFileName:n,fileType:a,credential:i}).catch((function(e){console.error("filesafe-js | error uploading file:",e)})));case 1:case"end":return t.stop()}}))})));case 3:case"end":return s.stop()}}),null,this)}},{key:"downloadFileFromDescriptor",value:function(e){return r.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.fileManager.downloadFileFromDescriptor(e));case 1:case"end":return t.stop()}}),null,this)}},{key:"encryptFile",value:function(e){var t,n,a,i;return r.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.data,n=e.inputFileName,a=e.fileType,i=e.credential,r.abrupt("return",this.fileManager.encryptFile({data:t,inputFileName:n,fileType:a,credential:i}));case 2:case"end":return r.stop()}}),null,this)}},{key:"decryptFile",value:function(e){var t,n,a;return r.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.fileDescriptor,n=e.fileItem,a=e.credential,r.abrupt("return",this.fileManager.decryptFile({fileDescriptor:t,fileItem:n,credential:a}));case 2:case"end":return r.stop()}}),null,this)}},{key:"downloadBase64Data",value:function(e){var t=e.base64Data,n=e.fileName,r=e.fileType;u.a.downloadData(u.a.base64toBinary(t),n,r)}},{key:"createTemporaryFileUrl",value:function(e){var t=e.base64Data,n=e.dataType;return u.a.tempUrlForData(u.a.base64toBinary(t),n)}},{key:"revokeTempUrl",value:function(e){u.a.revokeTempUrl(e)}},{key:"createNewCredentials",value:function(){return r.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.credentialManager.createNewCredentials());case 1:case"end":return e.stop()}}),null,this)}},{key:"numberOfFilesEncryptedWithCredential",value:function(e){return this.fileManager.fileDescriptorsEncryptedWithCredential(e).length}},{key:"credentialForFileDescriptor",value:function(e){return this.credentialManager.credentialForFileDescriptor(e)}},{key:"getAllCredentials",value:function(){return this.credentialManager.getAllCredentials()}},{key:"getDefaultCredentials",value:function(){return this.credentialManager.getDefaultCredentials()}},{key:"setCredentialAsDefault",value:function(e){return this.credentialManager.setCredentialAsDefault(e)}},{key:"deleteCredential",value:function(e){return this.credentialManager.deleteCredential(e)}},{key:"saveCredential",value:function(e){return this.credentialManager.saveCredential(e)}},{key:"getAllIntegrations",value:function(){return this.integrationManager.integrations}},{key:"integrationForFileDescriptor",value:function(e){return this.integrationManager.integrationForFileDescriptor(e)}},{key:"saveIntegrationFromCode",value:function(e){return this.integrationManager.saveIntegrationFromCode(e)}},{key:"getDefaultIntegration",value:function(){return this.integrationManager.getDefaultIntegration()}},{key:"setIntegrationAsDefault",value:function(e){return this.integrationManager.setIntegrationAsDefault(e)}},{key:"deleteIntegration",value:function(e){return this.integrationManager.deleteIntegration(e)}},{key:"displayStringForIntegration",value:function(e){return this.integrationManager.displayStringForIntegration(e)}},{key:"base64toBinary",value:function(e){return u.a.base64toBinary(e)}},{key:"isMobile",value:function(){return this.extensionBridge.isMobile()}},{key:"getEnvironment",value:function(){return this.extensionBridge.getEnvironment()}},{key:"getPlatform",value:function(){return this.extensionBridge.getPlatform()}},{key:"copyTextToClipboard",value:function(e){return u.a.copyTextToClipboard(e)}}]),e}()},function(e,t,n){(function(e,r){var a;(function(){function i(e,t){return e.set(t[0],t[1]),e}function o(e,t){return e.add(t),e}function s(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function c(e,t){for(var n=-1,r=null==e?0:e.length,a=0,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[a++]=o)}return i}function u(e,t){return!(null==e||!e.length)&&-1<v(e,t,0)}function l(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}function d(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}function f(e,t,n){for(var r=-1,a=null==e?0:e.length;++r<a;)n=t(n,e[r],r,e);return n}function p(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function h(e,t,n){var r=e.length;for(n+=-1;++n<r;)if(t(e[n],n,e))return n;return-1}function v(e,t,n){if(t===t)e:{--n;for(var r=e.length;++n<r;)if(e[n]===t){e=n;break e}e=-1}else e=h(e,g,n);return e}function g(e){return e!==e}function m(e,t){return e.has(t)}function b(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function y(e){var t=Object;return function(n){return e(t(n))}}function w(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function O(){}function k(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function S(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function x(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function j(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new x;++t<n;)this.add(e[t])}function _(e){this.size=(this.__data__=new S(e)).size}function C(e,t){var n=xn(e),r=!n&&Sn(e),a=!n&&!r&&jn(e),i=!n&&!r&&!a&&_n(e);if(n=n||r||a||i){r=e.length;for(var o=String,s=-1,c=Array(r);++s<r;)c[s]=o(s);r=c}else r=[];var u;o=r.length;for(u in e)!t&&!Ct.call(e,u)||n&&("length"==u||a&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||de(u,o))||r.push(u);return r}function E(e,t,n){(n===qe||Se(e[t],n))&&(n!==qe||t in e)||M(e,t,n)}function I(e,t,n){var r=e[t];Ct.call(e,t)&&Se(r,n)&&(n!==qe||t in e)||M(e,t,n)}function P(e,t){for(var n=e.length;n--;)if(Se(e[n][0],t))return n;return-1}function M(e,t,n){"__proto__"==t&&Ut?Ut(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function A(e,t,n,r,a,i){var o,s=1&t,c=2&t,u=4&t;if(n&&(o=a?n(e,r,a,i):n(e)),o!==qe)return o;if(!Ee(e))return e;if(r=xn(e)){if(o=function(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&Ct.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!s)return Z(e,o)}else{var l=bn(e),d="[object Function]"==l||"[object GeneratorFunction]"==l;if(jn(e))return G(e,s);if("[object Object]"==l||"[object Arguments]"==l||d&&!a){if(o=c||d?{}:ce(e),!s)return c?function(e,t){return J(e,mn(e),t)}(e,function(e,t){return e&&J(t,Ne(t),e)}(o,e)):function(e,t){return J(e,gn(e),t)}(e,function(e,t){return e&&J(t,ze(t),e)}(o,e))}else{if(!ft[l])return a?e:{};o=ue(e,l,A,s)}}if(i||(i=new _),a=i.get(e))return a;i.set(e,o);c=u?c?ae:re:c?Ne:ze;var f=r?qe:c(e);return function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););}(f||e,(function(r,a){f&&(r=e[a=r]),I(o,a,A(r,t,n,a,e,i))})),o}function T(e,t){var n=[];return fn(e,(function(e,r,a){t(e,r,a)&&n.push(e)})),n}function D(e,t,n,r,a){var i=-1,o=e.length;for(n||(n=le),a||(a=[]);++i<o;){var s=e[i];0<t&&n(s)?1<t?D(s,t-1,n,r,a):d(a,s):r||(a[a.length]=s)}return a}function R(e,t){for(var n=0,r=(t=Y(t,e)).length;null!=e&&n<r;)e=e[ge(t[n++])];return n&&n==r?e:qe}function B(e,t,n){return t=t(e),xn(e)?t:d(t,n(e))}function L(e){if(null==e)e=e===qe?"[object Undefined]":"[object Null]";else if(Nt&&Nt in Object(e)){var t=Ct.call(e,Nt),n=e[Nt];try{e[Nt]=qe;var r=!0}catch(e){}var a=It.call(e);r&&(t?e[Nt]=n:delete e[Nt]),e=a}else e=It.call(e);return e}function F(e){return Ie(e)&&"[object Arguments]"==L(e)}function H(e,t,n,r,a){if(e===t)t=!0;else if(null==e||null==t||!Ie(e)&&!Ie(t))t=e!==e&&t!==t;else e:{var i,o,s=xn(e),c=xn(t),u="[object Object]"==(i="[object Arguments]"==(i=s?"[object Array]":bn(e))?"[object Object]":i);c="[object Object]"==(o="[object Arguments]"==(o=c?"[object Array]":bn(t))?"[object Object]":o);if((o=i==o)&&jn(e)){if(!jn(t)){t=!1;break e}s=!0,u=!1}if(o&&!u)a||(a=new _),t=s||_n(e)?te(e,t,n,r,H,a):function(e,t,n,r,a,i,o){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":if(e.byteLength!=t.byteLength||!i(new Dt(e),new Dt(t)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return Se(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=b;case"[object Set]":if(s||(s=w),e.size!=t.size&&!(1&r))break;return(n=o.get(e))?n==t:(r|=2,o.set(e,t),t=te(s(e),s(t),r,a,i,o),o.delete(e),t);case"[object Symbol]":if(un)return un.call(e)==un.call(t)}return!1}(e,t,i,n,r,H,a);else{if(!(1&n)&&(s=u&&Ct.call(e,"__wrapped__"),i=c&&Ct.call(t,"__wrapped__"),s||i)){e=s?e.value():e,t=i?t.value():t,a||(a=new _),t=H(e,t,n,r,a);break e}if(o)t:if(a||(a=new _),s=1&n,i=re(e),c=i.length,o=re(t).length,c==o||s){for(u=c;u--;){var l=i[u];if(!(s?l in t:Ct.call(t,l))){t=!1;break t}}if((o=a.get(e))&&a.get(t))t=o==t;else{o=!0,a.set(e,t),a.set(t,e);for(var d=s;++u<c;){var f=e[l=i[u]],p=t[l];if(r)var h=s?r(p,f,l,t,e,a):r(f,p,l,e,t,a);if(h===qe?f!==p&&!H(f,p,n,r,a):!h){o=!1;break}d||(d="constructor"==l)}o&&!d&&((n=e.constructor)!=(r=t.constructor)&&"constructor"in e&&"constructor"in t&&!("function"==typeof n&&n instanceof n&&"function"==typeof r&&r instanceof r)&&(o=!1)),a.delete(e),a.delete(t),t=o}}else t=!1;else t=!1}}return t}function z(e){return"function"==typeof e?e:null==e?Ve:"object"==typeof e?xn(e)?function(e,t){return fe(e)&&t===t&&!Ee(t)?he(ge(e),t):function(n){var r=Fe(n,e);return r===qe&&r===t?He(n,e):H(t,r,3)}}(e[0],e[1]):function(e){var t=function(e){for(var t=ze(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,a===a&&!Ee(a)]}return t}(e);return 1==t.length&&t[0][2]?he(t[0][0],t[0][1]):function(n){return n===e||function(e,t){var n=t.length,r=n;if(null==e)return!r;for(e=Object(e);n--;)if((a=t[n])[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1;for(;++n<r;){var a,i=(a=t[n])[0],o=e[i],s=a[1];if(a[2]){if(o===qe&&!(i in e))return!1}else if(!H(s,o,3,void 0,a=new _))return!1}return!0}(n,t)}}(e):Ye(e)}function N(e,t){var n=-1,r=xe(e)?Array(e.length):[];return fn(e,(function(e,a,i){r[++n]=t(e,a,i)})),r}function U(e,t,n,r,a){e!==t&&pn(t,(function(i,o){if(Ee(i)){a||(a=new _);var s=a,c=e[o],u=t[o];if(h=s.get(u))E(e,o,h);else{var l=(h=r?r(c,u,o+"",e,t,s):qe)===qe;if(l){var d=xn(u),f=!d&&jn(u),p=!d&&!f&&_n(u),h=u;d||f||p?xn(c)?h=c:je(c)?h=Z(c):f?(l=!1,h=G(u,!0)):p?(l=!1,h=q(u,!0)):h=[]:Pe(u)||Sn(u)?(h=c,Sn(c)?h=Be(c):(!Ee(c)||n&&_e(c))&&(h=ce(u))):l=!1}l&&(s.set(u,h),U(h,u,n,r,s),s.delete(u)),E(e,o,h)}}else(s=r?r(e[o],i,o+"",e,t,a):qe)===qe&&(s=i),E(e,o,s)}),Ne)}function K(e,t){return function(e,t,n){for(var r=-1,a=t.length,i={};++r<a;){var o=R(e,c=t[r]);if(n(o,c)){var s=i,c=Y(c,e);if(Ee(s))for(var u=-1,l=(c=Y(c,s)).length,d=l-1;null!=s&&++u<l;){var f=ge(c[u]),p=o;if(u!=d){var h=s[f];(p=qe)===qe&&(p=Ee(h)?h:de(c[u+1])?[]:{})}I(s,f,p),s=s[f]}}}return i}(e,t,(function(t,n){return He(e,n)}))}function V(e){return yn(ve(e,void 0,Ve),e+"")}function W(e){if("string"==typeof e)return e;if(xn(e))return l(e,W)+"";if(Ae(e))return ln?ln.call(e):"";var t=e+"";return"0"==t&&1/e==-Ze?"-0":t}function X(e,t){var n;if(2>(t=Y(t,e)).length)n=e;else{var r=0,a=-1,i=-1,o=(n=t).length;for(0>r&&(r=-r>o?0:o+r),0>(a=a>o?o:a)&&(a+=o),o=r>a?0:a-r>>>0,r>>>=0,a=Array(o);++i<o;)a[i]=n[i+r];n=R(e,a)}null==(e=n)||delete e[ge(we(t))]}function Y(e,t){return xn(e)?e:fe(e,t)?[e]:wn(Le(e))}function G(e,t){if(t)return e.slice();var n=e.length;n=Rt?Rt(n):new e.constructor(n);return e.copy(n),n}function $(e){var t=new e.constructor(e.byteLength);return new Dt(t).set(new Dt(e)),t}function q(e,t){return new e.constructor(t?$(e.buffer):e.buffer,e.byteOffset,e.length)}function Z(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function J(e,t,n){var r=!n;n||(n={});for(var a=-1,i=t.length;++a<i;){var o=t[a],s=qe;s===qe&&(s=e[o]),r?M(n,o,s):I(n,o,s)}return n}function Q(e){return V((function(t,n){var r,a=-1,i=n.length,o=1<i?n[i-1]:qe,s=2<i?n[2]:qe;o=3<e.length&&"function"==typeof o?(i--,o):qe;if(r=s){r=n[0];var c=n[1];if(Ee(s)){var u=typeof c;r=!!("number"==u?xe(s)&&de(c,s.length):"string"==u&&c in s)&&Se(s[c],r)}else r=!1}for(r&&(o=3>i?qe:o,i=1),t=Object(t);++a<i;)(s=n[a])&&e(t,s,a,o);return t}))}function ee(e){return Pe(e)?qe:e}function te(e,t,n,r,a,i){var o=1&n,s=e.length;if(s!=(c=t.length)&&!(o&&c>s))return!1;if((c=i.get(e))&&i.get(t))return c==t;var c=-1,u=!0,l=2&n?new j:qe;for(i.set(e,t),i.set(t,e);++c<s;){var d=e[c],f=t[c];if(r)var h=o?r(f,d,c,t,e,i):r(d,f,c,e,t,i);if(h!==qe){if(h)continue;u=!1;break}if(l){if(!p(t,(function(e,t){if(!m(l,t)&&(d===e||a(d,e,n,r,i)))return l.push(t)}))){u=!1;break}}else if(d!==f&&!a(d,f,n,r,i)){u=!1;break}}return i.delete(e),i.delete(t),u}function ne(e){return yn(ve(e,qe,ye),e+"")}function re(e){return B(e,ze,gn)}function ae(e){return B(e,Ne,mn)}function ie(){var e=(e=O.iteratee||We)===We?z:e;return arguments.length?e(arguments[0],arguments[1]):e}function oe(e,t){var n=e.__data__,r=typeof t;return("string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t)?n["string"==typeof t?"string":"hash"]:n.map}function se(e,t){var n=null==e?qe:e[t];return!Ee(n)||Et&&Et in n||!(_e(n)?Mt:ct).test(me(n))?qe:n}function ce(e){return"function"!=typeof e.constructor||pe(e)?{}:dn(Bt(e))}function ue(e,t,n,r){var a=e.constructor;switch(t){case"[object ArrayBuffer]":return $(e);case"[object Boolean]":case"[object Date]":return new a(+e);case"[object DataView]":return t=r?$(e.buffer):e.buffer,new e.constructor(t,e.byteOffset,e.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return q(e,r);case"[object Map]":return f(t=r?n(b(e),1):b(e),i,new e.constructor);case"[object Number]":case"[object String]":return new a(e);case"[object RegExp]":return(t=new e.constructor(e.source,it.exec(e))).lastIndex=e.lastIndex,t;case"[object Set]":return f(t=r?n(w(e),1):w(e),o,new e.constructor);case"[object Symbol]":return un?Object(un.call(e)):{}}}function le(e){return xn(e)||Sn(e)||!!(zt&&e&&e[zt])}function de(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||lt.test(e))&&-1<e&&0==e%1&&e<t}function fe(e,t){if(xn(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Ae(e))||et.test(e)||!Qe.test(e)||null!=t&&e in Object(t)}function pe(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||xt)}function he(e,t){return function(n){return null!=n&&n[e]===t&&(t!==qe||e in Object(n))}}function ve(e,t,n){return t=Yt(t===qe?e.length-1:t,0),function(){for(var r=arguments,a=-1,i=Yt(r.length-t,0),o=Array(i);++a<i;)o[a]=r[t+a];for(a=-1,i=Array(t+1);++a<t;)i[a]=r[a];return i[t]=n(o),s(e,this,i)}}function ge(e){if("string"==typeof e||Ae(e))return e;var t=e+"";return"0"==t&&1/e==-Ze?"-0":t}function me(e){if(null!=e){try{return _t.call(e)}catch(e){}return e+""}return""}function be(e,t,n){var r=null==e?0:e.length;return r?(0>(n=null==n?0:De(n))&&(n=Yt(r+n,0)),h(e,ie(t,3),n)):-1}function ye(e){return null!=e&&e.length?D(e,1):[]}function we(e){var t=null==e?0:e.length;return t?e[t-1]:qe}function Oe(e,t){var n;if(e&&e.length&&t&&t.length){var r=v,a=-1,i=(n=t).length;for(e===n&&(n=Z(n));++a<i;)for(var o=0,s=n[a];-1<(o=r(e,s,o,void 0));)e!==e&&Ht.call(e,o,1),Ht.call(e,o,1);n=e}else n=e;return n}function ke(e,t){function n(){var r=arguments,a=t?t.apply(this,r):r[0],i=n.cache;return i.has(a)?i.get(a):(r=e.apply(this,r),n.cache=i.set(a,r)||i,r)}if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");return n.cache=new(ke.Cache||x),n}function Se(e,t){return e===t||e!==e&&t!==t}function xe(e){return null!=e&&Ce(e.length)&&!_e(e)}function je(e){return Ie(e)&&xe(e)}function _e(e){return!!Ee(e)&&("[object Function]"==(e=L(e))||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e)}function Ce(e){return"number"==typeof e&&-1<e&&0==e%1&&9007199254740991>=e}function Ee(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ie(e){return null!=e&&"object"==typeof e}function Pe(e){return!(!Ie(e)||"[object Object]"!=L(e))&&(null===(e=Bt(e))||"function"==typeof(e=Ct.call(e,"constructor")&&e.constructor)&&e instanceof e&&_t.call(e)==Pt)}function Me(e){return"string"==typeof e||!xn(e)&&Ie(e)&&"[object String]"==L(e)}function Ae(e){return"symbol"==typeof e||Ie(e)&&"[object Symbol]"==L(e)}function Te(e){return e?(e=Re(e))===Ze||e===-Ze?17976931348623157e292*(0>e?-1:1):e===e?e:0:0===e?e:0}function De(e){var t=(e=Te(e))%1;return e===e?t?e-t:e:0}function Re(e){if("number"==typeof e)return e;if(Ae(e))return Je;if(Ee(e)&&(e=Ee(e="function"==typeof e.valueOf?e.valueOf():e)?e+"":e),"string"!=typeof e)return 0===e?e:+e;e=e.replace(rt,"");var t=st.test(e);return t||ut.test(e)?ht(e.slice(2),t?2:8):ot.test(e)?Je:+e}function Be(e){return J(e,Ne(e))}function Le(e){return null==e?"":W(e)}function Fe(e,t,n){return(e=null==e?qe:R(e,t))===qe?n:e}function He(e,t){var n;if(n=null!=e){for(var r,a=-1,i=(r=Y(t,n=e)).length,o=!1;++a<i;){var s=ge(r[a]);if(!(o=null!=n&&null!=n&&s in Object(n)))break;n=n[s]}o||++a!=i?n=o:n=!!(i=null==n?0:n.length)&&Ce(i)&&de(s,i)&&(xn(n)||Sn(n))}return n}function ze(e){if(xe(e))e=C(e);else if(pe(e)){var t,n=[];for(t in Object(e))Ct.call(e,t)&&"constructor"!=t&&n.push(t);e=n}else e=Xt(e);return e}function Ne(e){if(xe(e))e=C(e,!0);else if(Ee(e)){var t,n=pe(e),r=[];for(t in e)("constructor"!=t||!n&&Ct.call(e,t))&&r.push(t);e=r}else{if(t=[],null!=e)for(n in Object(e))t.push(n);e=t}return e}function Ue(e){return null==e?[]:function(e,t){return l(t,(function(t){return e[t]}))}(e,ze(e))}function Ke(e){return function(){return e}}function Ve(e){return e}function We(e){return z("function"==typeof e?e:A(e,1))}function Xe(){}function Ye(e){return fe(e)?function(e){return function(t){return null==t?qe:t[e]}}(ge(e)):function(e){return function(t){return R(t,e)}}(e)}function Ge(){return[]}function $e(){return!1}var qe,Ze=1/0,Je=NaN,Qe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,et=/^\w*$/,tt=/^\./,nt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rt=/^\s+|\s+$/g,at=/\\(\\)?/g,it=/\w*$/,ot=/^[-+]0x[0-9a-f]+$/i,st=/^0b[01]+$/i,ct=/^\[object .+?Constructor\]$/,ut=/^0o[0-7]+$/i,lt=/^(?:0|[1-9]\d*)$/,dt={};dt["[object Float32Array]"]=dt["[object Float64Array]"]=dt["[object Int8Array]"]=dt["[object Int16Array]"]=dt["[object Int32Array]"]=dt["[object Uint8Array]"]=dt["[object Uint8ClampedArray]"]=dt["[object Uint16Array]"]=dt["[object Uint32Array]"]=!0,dt["[object Arguments]"]=dt["[object Array]"]=dt["[object ArrayBuffer]"]=dt["[object Boolean]"]=dt["[object DataView]"]=dt["[object Date]"]=dt["[object Error]"]=dt["[object Function]"]=dt["[object Map]"]=dt["[object Number]"]=dt["[object Object]"]=dt["[object RegExp]"]=dt["[object Set]"]=dt["[object String]"]=dt["[object WeakMap]"]=!1;var ft={};ft["[object Arguments]"]=ft["[object Array]"]=ft["[object ArrayBuffer]"]=ft["[object DataView]"]=ft["[object Boolean]"]=ft["[object Date]"]=ft["[object Float32Array]"]=ft["[object Float64Array]"]=ft["[object Int8Array]"]=ft["[object Int16Array]"]=ft["[object Int32Array]"]=ft["[object Map]"]=ft["[object Number]"]=ft["[object Object]"]=ft["[object RegExp]"]=ft["[object Set]"]=ft["[object String]"]=ft["[object Symbol]"]=ft["[object Uint8Array]"]=ft["[object Uint8ClampedArray]"]=ft["[object Uint16Array]"]=ft["[object Uint32Array]"]=!0,ft["[object Error]"]=ft["[object Function]"]=ft["[object WeakMap]"]=!1;var pt,ht=parseInt,vt="object"==typeof e&&e&&e.Object===Object&&e,gt="object"==typeof self&&self&&self.Object===Object&&self,mt=vt||gt||Function("return this")(),bt="object"==typeof t&&t&&!t.nodeType&&t,yt=bt&&"object"==typeof r&&r&&!r.nodeType&&r,wt=yt&&yt.exports===bt,Ot=wt&&vt.process;e:{try{pt=Ot&&Ot.binding&&Ot.binding("util");break e}catch(i){}pt=void 0}var kt=pt&&pt.isTypedArray,St=Array.prototype,xt=Object.prototype,jt=mt["__core-js_shared__"],_t=Function.prototype.toString,Ct=xt.hasOwnProperty,Et=function(){var e=/[^.]+$/.exec(jt&&jt.keys&&jt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),It=xt.toString,Pt=_t.call(Object),Mt=RegExp("^"+_t.call(Ct).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),At=wt?mt.Buffer:qe,Tt=mt.Symbol,Dt=mt.Uint8Array,Rt=At?At.a:qe,Bt=y(Object.getPrototypeOf),Lt=Object.create,Ft=xt.propertyIsEnumerable,Ht=St.splice,zt=Tt?Tt.isConcatSpreadable:qe,Nt=Tt?Tt.toStringTag:qe,Ut=function(){try{var e=se(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Kt=Math.floor,Vt=Object.getOwnPropertySymbols,Wt=At?At.isBuffer:qe,Xt=y(Object.keys),Yt=Math.max,Gt=Math.min,$t=Date.now,qt=se(mt,"DataView"),Zt=se(mt,"Map"),Jt=se(mt,"Promise"),Qt=se(mt,"Set"),en=se(mt,"WeakMap"),tn=se(Object,"create"),nn=me(qt),rn=me(Zt),an=me(Jt),on=me(Qt),sn=me(en),cn=Tt?Tt.prototype:qe,un=cn?cn.valueOf:qe,ln=cn?cn.toString:qe,dn=function(){function e(){}return function(t){return Ee(t)?Lt?Lt(t):(e.prototype=t,t=new e,e.prototype=qe,t):{}}}();k.prototype.clear=function(){this.__data__=tn?tn(null):{},this.size=0},k.prototype.delete=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e},k.prototype.get=function(e){var t=this.__data__;return tn?"__lodash_hash_undefined__"===(e=t[e])?qe:e:Ct.call(t,e)?t[e]:qe},k.prototype.has=function(e){var t=this.__data__;return tn?t[e]!==qe:Ct.call(t,e)},k.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=tn&&t===qe?"__lodash_hash_undefined__":t,this},S.prototype.clear=function(){this.__data__=[],this.size=0},S.prototype.delete=function(e){var t=this.__data__;return!(0>(e=P(t,e)))&&(e==t.length-1?t.pop():Ht.call(t,e,1),--this.size,!0)},S.prototype.get=function(e){var t=this.__data__;return 0>(e=P(t,e))?qe:t[e][1]},S.prototype.has=function(e){return-1<P(this.__data__,e)},S.prototype.set=function(e,t){var n=this.__data__,r=P(n,e);return 0>r?(++this.size,n.push([e,t])):n[r][1]=t,this},x.prototype.clear=function(){this.size=0,this.__data__={hash:new k,map:new(Zt||S),string:new k}},x.prototype.delete=function(e){return e=oe(this,e).delete(e),this.size-=e?1:0,e},x.prototype.get=function(e){return oe(this,e).get(e)},x.prototype.has=function(e){return oe(this,e).has(e)},x.prototype.set=function(e,t){var n=oe(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},j.prototype.add=j.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},j.prototype.has=function(e){return this.__data__.has(e)},_.prototype.clear=function(){this.__data__=new S,this.size=0},_.prototype.delete=function(e){var t=this.__data__;return e=t.delete(e),this.size=t.size,e},_.prototype.get=function(e){return this.__data__.get(e)},_.prototype.has=function(e){return this.__data__.has(e)},_.prototype.set=function(e,t){var n=this.__data__;if(n instanceof S){var r=n.__data__;if(!Zt||199>r.length)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new x(r)}return n.set(e,t),this.size=n.size,this};var fn=function(e,t){if(null==e)return e;if(!xe(e))return function(e,t){return e&&pn(e,t,ze)}(e,t);for(var n=e.length,r=-1,a=Object(e);++r<n&&!1!==t(a[r],r,a););return e},pn=function(e,t,n){for(var r=-1,a=Object(e),i=(n=n(e)).length;i--;){var o=n[++r];if(!1===t(a[o],o,a))break}return e},hn=Ut?function(e,t){return Ut(e,"toString",{configurable:!0,enumerable:!1,value:Ke(t),writable:!0})}:Ve,vn=Qt&&1/w(new Qt([,-0]))[1]==Ze?function(e){return new Qt(e)}:Xe,gn=Vt?function(e){return null==e?[]:(e=Object(e),c(Vt(e),(function(t){return Ft.call(e,t)})))}:Ge,mn=Vt?function(e){for(var t=[];e;)d(t,gn(e)),e=Bt(e);return t}:Ge,bn=L;(qt&&"[object DataView]"!=bn(new qt(new ArrayBuffer(1)))||Zt&&"[object Map]"!=bn(new Zt)||Jt&&"[object Promise]"!=bn(Jt.resolve())||Qt&&"[object Set]"!=bn(new Qt)||en&&"[object WeakMap]"!=bn(new en))&&(bn=function(e){var t=L(e);if(e=(e="[object Object]"==t?e.constructor:qe)?me(e):"")switch(e){case nn:return"[object DataView]";case rn:return"[object Map]";case an:return"[object Promise]";case on:return"[object Set]";case sn:return"[object WeakMap]"}return t});var yn=function(e){var t=0,n=0;return function(){var r=$t(),a=16-(r-n);if(n=r,0<a){if(800<=++t)return arguments[0]}else t=0;return e.apply(qe,arguments)}}(hn),wn=function(e){var t=(e=ke(e,(function(e){return 500===t.size&&t.clear(),e}))).cache;return e}((function(e){var t=[];return tt.test(e)&&t.push(""),e.replace(nt,(function(e,n,r,a){t.push(r?a.replace(at,"$1"):n||e)})),t})),On=V(Oe),kn=function(e){return function(t,n,r){var a=Object(t);if(!xe(t)){var i=ie(n,3);t=ze(t),n=function(e){return i(a[e],e,a)}}return-1<(n=e(t,n,r))?a[i?t[n]:n]:qe}}(be);ke.Cache=x;var Sn=F(function(){return arguments}())?F:function(e){return Ie(e)&&Ct.call(e,"callee")&&!Ft.call(e,"callee")},xn=Array.isArray,jn=Wt||$e,_n=kt?function(e){return function(t){return e(t)}}(kt):function(e){return Ie(e)&&Ce(e.length)&&!!dt[L(e)]},Cn=Q((function(e,t,n){U(e,t,n)})),En=Q((function(e,t,n,r){U(e,t,n,r)})),In=ne((function(e,t){var n={};if(null==e)return n;var r=!1;t=l(t,(function(t){return t=Y(t,e),r||(r=1<t.length),t})),J(e,ae(e),n),r&&(n=A(n,7,ee));for(var a=t.length;a--;)X(n,t[a]);return n})),Pn=ne((function(e,t){return null==e?{}:K(e,t)}));O.constant=Ke,O.filter=function(e,t){return(xn(e)?c:T)(e,ie(t,3))},O.flatten=ye,O.iteratee=We,O.keys=ze,O.keysIn=Ne,O.map=function(e,t){return(xn(e)?l:N)(e,ie(t,3))},O.memoize=ke,O.merge=Cn,O.mergeWith=En,O.omit=In,O.pick=Pn,O.property=Ye,O.pull=On,O.pullAll=Oe,O.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,a=[],i=e.length;for(t=ie(t,3);++r<i;){var o=e[r];t(o,r,e)&&(n.push(o),a.push(r))}for(i=(r=e?a.length:0)-1;r--;)if(o=a[r],r==i||o!==s){var s=o;de(o)?Ht.call(e,o,1):X(e,o)}return n},O.toPlainObject=Be,O.uniq=function(e){if(e&&e.length)e:{var t=-1,n=u,r=e.length,a=!0,i=[],o=i;if(200<=r){if(n=vn(e)){e=w(n);break e}a=!1,n=m,o=new j}else o=i;t:for(;++t<r;){var s=c=e[t],c=0!==c?c:0;if(a&&s===s){for(var l=o.length;l--;)if(o[l]===s)continue t;i.push(c)}else n(o,s,void 0)||(o!==i&&o.push(s),i.push(c))}e=i}else e=[];return e},O.values=Ue,O.cloneDeep=function(e){return A(e,5)},O.eq=Se,O.find=kn,O.findIndex=be,O.get=Fe,O.hasIn=He,O.identity=Ve,O.includes=function(e,t,n,r){return e=xe(e)?e:Ue(e),n=n&&!r?De(n):0,r=e.length,0>n&&(n=Yt(r+n,0)),Me(e)?n<=r&&-1<e.indexOf(t,n):!!r&&-1<v(e,t,n)},O.isArguments=Sn,O.isArray=xn,O.isArrayLike=xe,O.isArrayLikeObject=je,O.isBuffer=jn,O.isFunction=_e,O.isLength=Ce,O.isObject=Ee,O.isObjectLike=Ie,O.isPlainObject=Pe,O.isString=Me,O.isSymbol=Ae,O.isTypedArray=_n,O.last=we,O.stubArray=Ge,O.stubFalse=$e,O.noop=Xe,O.sortedIndexBy=function(e,t,n){t=(n=ie(n,2))(t);for(var r=0,a=null==e?0:e.length,i=t!==t,o=null===t,s=Ae(t),c=t===qe;r<a;){var u=Kt((r+a)/2),l=n(e[u]),d=l!==qe,f=null===l,p=l===l,h=Ae(l);(i?p:c?p&&d:o?p&&d&&!f:s?p&&d&&!f&&!h:!f&&!h&&l<t)?r=u+1:a=u}return Gt(a,4294967294)},O.toFinite=Te,O.toInteger=De,O.toNumber=Re,O.toString=Le,O.VERSION="4.17.4",mt._=O,void 0===(a=function(){return O}.call(t,n,t,r))||(r.exports=a)}).call(this)}).call(t,n(3),n(6)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(1),i=(n.n(a),n(0));n.n(i);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.httpManger=new i.SFHttpManager,this.httpManger.setJWTRequestHandler((function(){}))}var t,n,a;return t=e,(n=[{key:"setCredentials",value:function(e){this.credentials=e}},{key:"uploadFile",value:function(e,t,n){var a,i,o=this;return r.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a="".concat(n.content.relayUrl,"/integrations/save-item"),i={file:{name:e,item:t},source:n.content.source,authorization:n.content.authorization},r.abrupt("return",new Promise((function(e,t){o.httpManger.postAbsolute(a,i,(function(t){e(t.metadata)}),(function(e){var n=e.error;n||(n={message:"File upload failed."}),console.log("Upload error response",n),t(n)}))})));case 3:case"end":return r.stop()}}))}},{key:"downloadFile",value:function(e,t){var n,a,i=this;return r.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n="".concat(t.content.relayUrl,"/integrations/download-item"),a={metadata:e.content.serverMetadata,authorization:t.content.authorization},r.abrupt("return",new Promise((function(e,t){i.httpManger.postAbsolute(n,a,(function(t){e(t)}),(function(e){var n=e.error;console.log("Download error response",e),t(n)}))})));case 3:case"end":return r.stop()}}))}},{key:"deleteFile",value:function(e,t){var n,a,i=this;return r.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n="".concat(t.content.relayUrl,"/integrations/delete-item"),a={metadata:e.content.serverMetadata,authorization:t.content.authorization},r.abrupt("return",new Promise((function(e,t){i.httpManger.postAbsolute(n,a,(function(t){e(t)}),(function(e){var n=e.error;console.log("Download error response",e),t(n)}))})));case 3:case"end":return r.stop()}}))}}])&&o(t.prototype,n),a&&o(t,a),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(1),i=(n.n(a),n(0)),o=(n.n(i),n(2));function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.extensionBridge=t}var t,n,a;return t=e,(n=[{key:"integrationForFileDescriptor",value:function(e){return this.integrations.find((function(t){return e.content.serverMetadata&&t.content.source==e.content.serverMetadata.source}))}},{key:"parseIntegrationCode",value:function(e){var t=atob(e),n=JSON.parse(t);return n.rawCode=e,n}},{key:"saveIntegrationFromCode",value:function(e){var t,n;return r.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=this.parseIntegrationCode(e),0==this.integrations.length&&(t.isDefaultUploadSource=!0),n=this.createAndSaveIntegrationObject(t),r.abrupt("return",n);case 4:case"end":return r.stop()}}),null,this)}},{key:"createAndSaveIntegrationObject",value:function(e){var t=new i.SFItem({content_type:o.a.FileSafeIntegrationContentTypeKey,content:e});return this.extensionBridge.createItems([t]),t}},{key:"getDefaultIntegration",value:function(){return this.integrations.find((function(e){return e.content.isDefaultUploadSource}))}},{key:"setIntegrationAsDefault",value:function(e){var t=[e],n=this.getDefaultIntegration();n&&(n.content.isDefaultUploadSource=!1,t.push(n)),e.content.isDefaultUploadSource=!0,this.extensionBridge.saveItems(t)}},{key:"displayStringForIntegration",value:function(e){var t,n=e.content.source.split("_"),r="",a=0,i=!0,o=!1,s=void 0;try{for(var c,u=n[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var l=c.value;r+=(t=l).charAt(0).toUpperCase()+t.slice(1),a<n.length-1&&(r+=" "),a++}}catch(d){o=!0,s=d}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}return r}},{key:"deleteIntegration",value:function(e){var t=this,n=e.content.isDefaultUploadSource;this.extensionBridge.deleteItem(e,(function(r){if(r.deleted&&n&&t.integrations.length>0){var a=!0,i=!1,o=void 0;try{for(var s,c=t.integrations[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var u=s.value;if(u!=e){t.setIntegrationAsDefault(u);break}}}catch(l){i=!0,o=l}finally{try{a||null==c.return||c.return()}finally{if(i)throw o}}}}))}},{key:"integrations",get:function(){return this.extensionBridge.filterItems(o.a.FileSafeIntegrationContentTypeKey)}}])&&s(t.prototype,n),a&&s(t,a),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(1),i=(n.n(a),n(0)),o=(n.n(i),n(2));function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(){function e(t){var n=this,r=t.extensionBridge,a=t.onCredentialLoad;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"getDefaultCredentials",(function(){var e=n.credentials.find((function(e){return e.content.isDefault}));return!e&&n.credentials.length>0&&(e=n.credentials[0]),e})),c(this,"setCredentialAsDefault",(function(e){var t=n.getDefaultCredentials();t&&(t.content.isDefault=!1),e.content.isDefault=!0,n.extensionBridge.saveItems([t,e])})),c(this,"deleteCredential",(function(e){n.extensionBridge.deleteItem(e)})),this.extensionBridge=r,this.onCredentialLoad=a,this.credentials=[],this.extensionBridge.addEventHandler((function(e){e==o.a.BridgeEventReceivedItems&&n.reloadCredentials()}))}var t,n,a;return t=e,(n=[{key:"reloadCredentials",value:function(){this.credentials=[];var e=this.extensionBridge.filterItems(o.a.FileSafeCredentialsContentType);if(0!=e.length){var t=!0,n=!1,r=void 0;try{for(var a,i=e[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var s=a.value;this.credentials.find((function(e){return e.uuid==s.uuid}))||this.credentials.push(s)}}catch(c){n=!0,r=c}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}this.onCredentialLoad(),this.credentials.length>0&&this.didLoadCredentials()}}},{key:"createNewCredentials",value:function(){var e,t,n,a,s;return r.async((function(c){for(;;)switch(c.prev=c.next){case 0:return e=256,c.next=3,r.awrap(SFJS.crypto.generateRandomKey(e));case 3:return t=c.sent,c.next=6,r.awrap(SFJS.crypto.generateRandomKey(e));case 6:return n=c.sent,c.next=9,r.awrap(SFJS.crypto.generateInitialKeysAndAuthParamsForUser(t,n));case 9:return(a=c.sent).isDefault=0==this.credentials.length,s=new i.SFItem({content_type:o.a.FileSafeCredentialsContentType,content:a}),this.extensionBridge.saveItem(s),this.didLoadCredentials(),c.abrupt("return",s);case 15:case"end":return c.stop()}}),null,this)}},{key:"didLoadCredentials",value:function(){this.extensionBridge.notifyObserversOfEvent(o.a.BridgeEventLoadedCredentials)}},{key:"credentialForFileDescriptor",value:function(e){return this.credentials.find((function(t){return e.content.references.find((function(e){return e.uuid==t.uuid}))}))}},{key:"getAllCredentials",value:function(){return this.credentials}},{key:"saveCredential",value:function(e){this.extensionBridge.saveItem(e)}}])&&s(t.prototype,n),a&&s(t,a),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(1),i=(n.n(a),n(0)),o=(n.n(i),n(11)),s=n.n(o),c=n(2);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(){function e(t,n,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.extensionBridge=t,this.relayManager=n,this.integrationManager=r,this.credentialManager=a}var t,n,a;return t=e,(n=[{key:"getAllFileDescriptors",value:function(){return this.extensionBridge.getFileDescriptors()}},{key:"fileDescriptorsForNote",value:function(e){return e?this.extensionBridge.getFileDescriptors().filter((function(t){return t.hasRelationshipWithItem(e)})):[]}},{key:"findFileDescriptor",value:function(e){return this.extensionBridge.getFileDescriptors().find((function(t){return t.uuid==e}))}},{key:"fileDescriptorsEncryptedWithCredential",value:function(e){return this.extensionBridge.getFileDescriptors().filter((function(t){return t.content.references.find((function(t){return t.uuid==e.uuid}))}))}},{key:"deleteFileFromDescriptor",value:function(e){var t=this;return r.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,r){t.extensionBridge.deleteItems([e],(function(r){if(r.deleted){var a=t.integrationManager.integrationForFileDescriptor(e);a&&t.relayManager.deleteFile(e,a).then((function(e){n()}))}else n(r)}))})));case 1:case"end":return n.stop()}}))}},{key:"uploadFile",value:function(e){var t,n,a,o,u,l,d,f=this;return r.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.fileItem,n=e.inputFileName,a=e.fileType,o=e.credential,u=e.note,l=this.integrationManager.getDefaultIntegration(),n.split(".")[1],d="".concat(t.uuid,".sf.json"),r.abrupt("return",new Promise((function(e,r){var p=new s.a;p.addEventListener("message",(function(t){var s=t.data;if(s.error)return console.log("Error uploading file",s.error),void r(s.error);var l=new i.SFItem({content_type:c.a.FileDescriptorContentTypeKey,content:{serverMetadata:t.data.metadata,fileName:n,fileType:a}});u&&l.addItemAsRelationship(u),l.addItemAsRelationship(o),f.extensionBridge.createItem(l,(function(t){e(t[0])}))}));var h={outputFileName:d,fileItem:t,integration:l,operation:"upload",credentials:f.credentialManager.getDefaultCredentials()};p.postMessage(h)})));case 5:case"end":return r.stop()}}),null,this)}},{key:"downloadFileFromDescriptor",value:function(e){var t,n;return r.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=this.integrationManager.integrationForFileDescriptor(e)){r.next=6;break}throw(n=e.content.serverMetadata)?alert("Unable to find integration named '".concat(n.source,"'.")):alert("Unable to find integration for this file."),"Unable to find integration";case 6:return r.abrupt("return",this.relayManager.downloadFile(e,t).then((function(e){return e.items[0]})));case 7:case"end":return r.stop()}}),null,this)}},{key:"encryptFile",value:function(e){var t,n,a,i;return r.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.data,n=e.inputFileName,a=e.fileType,i=e.credential,r.abrupt("return",new Promise((function(e,r){var o=new s.a;o.addEventListener("message",(function(t){e(t.data.fileItem)})),o.postMessage({operation:"encrypt",keys:i.content.keys,authParams:i.content.authParams,contentType:c.a.FileItemContentTypeKey,fileData:t,fileName:n,fileType:a})})));case 2:case"end":return r.stop()}}))}},{key:"decryptFile",value:function(e){var t,n,a;return r.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.fileDescriptor,n=e.fileItem,(a=e.credential)||(a=this.credentialManager.credentialForFileDescriptor(t)),r.abrupt("return",new Promise((function(e,t){var r=new s.a;r.addEventListener("message",(function(n){var r=n.data;r.error?t(r.error):e(r)})),r.postMessage({operation:"decrypt",keys:a.content.keys,item:n})})));case 3:case"end":return r.stop()}}),null,this)}}])&&u(t.prototype,n),a&&u(t,a),e}();l(d,"FileItemContentTypeKey","SN|FileSafe|File"),l(d,"FileDescriptorContentTypeKey","SN|FileSafe|FileMetadata")},function(e,t,n){e.exports=function(){return new Worker(n.p+"filesafe-js/EncryptionWorker.js")}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",(function(){return a}));var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"base64toBinary",value:function(e){for(var t=atob(e),n=[],r=0;r<t.length;r++)n.push(t.charCodeAt(r));return new Uint8Array(n)}},{key:"downloadData",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=document.createElement("a");i.setAttribute("download",t);var o=this.tempUrlForData(e,n);i.href=o,i.setAttribute("target","_blank"),a?window.location.href=i.href:(document.body.appendChild(i),i.click(),i.remove()),setTimeout((function(){r.revokeTempUrl(o)}),500)}},{key:"tempUrlForData",value:function(e,t){return window.URL.createObjectURL(new Blob([e],{type:t||"text/json"}))}},{key:"revokeTempUrl",value:function(e){window.URL.revokeObjectURL(e)}},{key:"copyTextToClipboard",value:function(e){if(window.clipboardData&&window.clipboardData.setData)return clipboardData.setData("Text",e);var t;if(document.queryCommandSupported&&document.queryCommandSupported("copy"))try{(t=document.createElement("textarea")).setAttribute("readonly",!0),t.setAttribute("contenteditable",!0),t.style.position="fixed",t.value=e,document.body.appendChild(t),t.focus(),t.select();var n=document.createRange();n.selectNodeContents(t);var r=window.getSelection();r.removeAllRanges(),r.addRange(n),t.setSelectionRange(0,t.value.length),document.execCommand("copy")}catch(a){console.error(a)}finally{document.body.removeChild(t)}}}],(n=null)&&r(t.prototype,n),a&&r(t,a),e}()}])}]]);
//# sourceMappingURL=2.36a80b67.chunk.js.map